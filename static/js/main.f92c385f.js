/*! For license information please see main.f92c385f.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),i=n(43),a=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(s(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var R=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===L?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case _:return"Profiler";case y:return"StrictMode";case w:return"Suspense";case M:return"SuspenseList";case A:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return I(e(t))}catch(n){}}return null}var k=Array.isArray,N=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},O=[],F=-1;function z(e){return{current:e}}function B(e){0>F||(e.current=O[F],O[F]=null,F--)}function H(e,t){F++,O[F]=e.current,e.current=t}var V,G,j=z(null),W=z(null),X=z(null),q=z(null);function Y(e,t){switch(H(X,t),H(W,e),H(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yh(t=vh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(j),H(j,e)}function Z(){B(j),B(W),B(X)}function K(e){null!==e.memoizedState&&H(q,e);var t=j.current,n=yh(t,e.type);t!==n&&(H(W,e),H(j,n))}function J(e){W.current===e&&(B(j),B(W)),q.current===e&&(B(q),ud._currentValue=U)}function Q(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||"",G=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+V+e+G}var $=!1;function ee(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){r=a}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{$=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Q(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Q(e.type);case 16:return Q("Lazy");case 13:return e.child!==t&&null!==t?Q("Suspense Fallback"):Q("Suspense");case 19:return Q("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Q("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,ae=r.unstable_cancelCallback,se=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,he=r.unstable_UserBlockingPriority,de=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ve=null,ye=null;function _e(e){if("function"===typeof me&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xe(e)/Se|0)|0},xe=Math.log,Se=Math.LN2;var we=256,Me=262144,Ee=4194304;function Te(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~a)?i=Te(r):0!==(s&=o)?i=Te(s):n||0!==(n=o&~e)&&(i=Te(n)):0!==(o=r&~a)?i=Te(o):0!==s?i=Te(s):n||0!==(n=r&~e)&&(i=Te(n)),0===i?0:0!==t&&t!==i&&0===(t&a)&&((a=i&-i)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:i}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Re(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Pe(){var e=Ee;return 0===(62914560&(Ee<<=1))&&(Ee=4194304),e}function Le(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ie(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Ne(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function De(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Ue(n))&(e.suspendedLanes|t))?0:n}function Ue(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Oe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:Td(e.type)}function ze(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}var Be=Math.random().toString(36).slice(2),He="__reactFiber$"+Be,Ve="__reactProps$"+Be,Ge="__reactContainer$"+Be,je="__reactEvents$"+Be,We="__reactListeners$"+Be,Xe="__reactHandles$"+Be,qe="__reactResources$"+Be,Ye="__reactMarker$"+Be;function Ze(e){delete e[He],delete e[Ve],delete e[je],delete e[We],delete e[Xe]}function Ke(e){var t=e[He];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ge]||n[He]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Uh(e);null!==e;){if(n=e[He])return n;e=Uh(e)}return t}n=(e=n).parentNode}return null}function Je(e){if(e=e[He]||e[Ge]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function $e(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ye]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},ot={};function lt(e,t,n){if(i=t,re.call(ot,i)||!re.call(st,i)&&(at.test(i)?ot[i]=!0:(st[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,i,a,s,o){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?bt(e,s,ht(t)):null!=n?bt(e,s,ht(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=a&&(e.defaultChecked=!!a),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ht(o):e.removeAttribute("name")}function _t(e,t,n,r,i,a,s,o){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s),ft(e)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(k(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function Mt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function At(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Tt(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&Tt(e,a,t[a])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lt(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function It(){}var kt=null;function Nt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Ut=null;function Ot(e){var t=Je(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Ve]||null;if(!i)throw Error(s(90));yt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Ft=!1;function zt(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Dt||null!==Ut)&&($c(),Dt&&(t=Dt,e=Ut,Ut=Dt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ve]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ht=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Ht)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch(Jd){Vt=!1}var jt=null,Wt=null,Xt=null;function qt(){if(Xt)return Xt;var e,t,n=Wt,r=n.length,i="value"in jt?jt.value:jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Zt(){return!0}function Kt(){return!1}function Jt(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Zt:Kt,this.isPropagationStopped=Kt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Zt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Zt)},persist:function(){},isPersistent:Zt}),t}var Qt,$t,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Jt(tn),rn=f({},tn,{view:0,detail:0}),an=Jt(rn),sn=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Qt=e.screenX-en.screenX,$t=e.screenY-en.screenY):$t=Qt=0,en=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),on=Jt(sn),ln=Jt(f({},sn,{dataTransfer:0})),cn=Jt(f({},rn,{relatedTarget:0})),un=Jt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Jt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Jt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return gn}var yn=Jt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),_n=Jt(f({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Jt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),xn=Jt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Jt(f({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Jt(f({},tn,{newState:0,oldState:0})),Mn=[9,13,27,32],En=Ht&&"CompositionEvent"in window,Tn=null;Ht&&"documentMode"in document&&(Tn=document.documentMode);var An=Ht&&"TextEvent"in window&&!Tn,Cn=Ht&&(!En||Tn&&8<Tn&&11>=Tn),Rn=String.fromCharCode(32),Pn=!1;function Ln(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var kn=!1;var Nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Nn[e.type]:"textarea"===t}function Un(e,t,n,r){Dt?Ut?Ut.push(r):Ut=[r]:Dt=r,0<(t=rh(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Fn=null;function zn(e){Zu(e,0)}function Bn(e){if(pt(Qe(e)))return e}function Hn(e,t){if("change"===e)return t}var Vn=!1;if(Ht){var Gn;if(Ht){var jn="oninput"in document;if(!jn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),jn="function"===typeof Wn.oninput}Gn=jn}else Gn=!1;Vn=Gn&&(!document.documentMode||9<document.documentMode)}function Xn(){On&&(On.detachEvent("onpropertychange",qn),Fn=On=null)}function qn(e){if("value"===e.propertyName&&Bn(Fn)){var t=[];Un(t,Fn,e,Nt(e)),zt(zn,t)}}function Yn(e,t,n){"focusin"===e?(Xn(),Fn=n,(On=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Xn()}function Zn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(Fn)}function Kn(e,t){if("click"===e)return Bn(t)}function Jn(e,t){if("input"===e||"change"===e)return Bn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ar=Ht&&"documentMode"in document&&11>=document.documentMode,sr=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==sr||sr!==mt(r)||("selectionStart"in(r=sr)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&$n(lr,r)||(lr=r,0<(r=rh(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sr)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}Ht&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var gr=mr("animationend"),vr=mr("animationiteration"),yr=mr("animationstart"),_r=mr("transitionrun"),br=mr("transitionstart"),xr=mr("transitioncancel"),Sr=mr("transitionend"),wr=new Map,Mr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){wr.set(e,t),rt(t,[e])}Mr.push("scrollEnd");var Tr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ar=[],Cr=0,Rr=0;function Pr(){for(var e=Cr,t=Rr=Cr=0;t<e;){var n=Ar[t];Ar[t++]=null;var r=Ar[t];Ar[t++]=null;var i=Ar[t];Ar[t++]=null;var a=Ar[t];if(Ar[t++]=null,null!==r&&null!==i){var s=r.pending;null===s?i.next=i:(i.next=s.next,s.next=i),r.pending=i}0!==a&&Nr(n,i,a)}}function Lr(e,t,n,r){Ar[Cr++]=e,Ar[Cr++]=t,Ar[Cr++]=n,Ar[Cr++]=r,Rr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ir(e,t,n,r){return Lr(e,t,n,r),Dr(e)}function kr(e,t){return Lr(e,null,null,t),Dr(e)}function Nr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,i&&null!==t&&(i=31-be(n),null===(r=(e=a.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),a):null}function Dr(e){if(50<jc)throw jc=0,Wc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ur={};function Or(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Or(e,t,n,r)}function zr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Hr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,i,a){var o=0;if(r=e,"function"===typeof e)zr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,j.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=Fr(31,n,t,i)).elementType=A,e.lanes=a,e;case v:return Gr(n.children,i,a,t);case y:o=8,i|=24;break;case _:return(e=Fr(12,n,t,2|i)).elementType=_,e.lanes=a,e;case w:return(e=Fr(13,n,t,i)).elementType=w,e.lanes=a,e;case M:return(e=Fr(19,n,t,i)).elementType=M,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case b:o=9;break e;case S:o=11;break e;case E:o=14;break e;case T:o=16,r=null;break e}o=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Gr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function jr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Wr(e){var t=Fr(18,null,null,0);return t.stateNode=e,t}function Xr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=new WeakMap;function Yr(e,t){if("object"===typeof e&&null!==e){var n=qr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},qr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Zr=[],Kr=0,Jr=null,Qr=0,$r=[],ei=0,ti=null,ni=1,ri="";function ii(e,t){Zr[Kr++]=Qr,Zr[Kr++]=Jr,Jr=e,Qr=t}function ai(e,t,n){$r[ei++]=ni,$r[ei++]=ri,$r[ei++]=ti,ti=e;var r=ni;e=ri;var i=32-be(r)-1;r&=~(1<<i),n+=1;var a=32-be(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ni=1<<32-be(t)+i|n<<i|r,ri=a+e}else ni=1<<a|n<<i|r,ri=e}function si(e){null!==e.return&&(ii(e,1),ai(e,1,0))}function oi(e){for(;e===Jr;)Jr=Zr[--Kr],Zr[Kr]=null,Qr=Zr[--Kr],Zr[Kr]=null;for(;e===ti;)ti=$r[--ei],$r[ei]=null,ri=$r[--ei],$r[ei]=null,ni=$r[--ei],$r[ei]=null}function li(e,t){$r[ei++]=ni,$r[ei++]=ri,$r[ei++]=ti,ni=t.id,ri=t.overflow,ti=e}var ci=null,ui=null,hi=!1,di=null,fi=!1,pi=Error(s(519));function mi(e){throw xi(Yr(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pi}function gi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[He]=e,t[Ve]=r,n){case"dialog":Ku("cancel",t),Ku("close",t);break;case"iframe":case"object":case"embed":Ku("load",t);break;case"video":case"audio":for(n=0;n<qu.length;n++)Ku(qu[n],t);break;case"source":Ku("error",t);break;case"img":case"image":case"link":Ku("error",t),Ku("load",t);break;case"details":Ku("toggle",t);break;case"input":Ku("invalid",t),_t(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ku("invalid",t);break;case"textarea":Ku("invalid",t),wt(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ch(t.textContent,n)?(null!=r.popover&&(Ku("beforetoggle",t),Ku("toggle",t)),null!=r.onScroll&&Ku("scroll",t),null!=r.onScrollEnd&&Ku("scrollend",t),null!=r.onClick&&(t.onclick=It),t=!0):t=!1,t||mi(e,!0)}function vi(e){for(ci=e.return;ci;)switch(ci.tag){case 5:case 31:case 13:return void(fi=!1);case 27:case 3:return void(fi=!0);default:ci=ci.return}}function yi(e){if(e!==ci)return!1;if(!hi)return vi(e),hi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||_h(e.type,e.memoizedProps)),t=!t),t&&ui&&mi(e),vi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));ui=Dh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));ui=Dh(e)}else 27===n?(n=ui,Th(e.type)?(e=Nh,Nh=null,ui=e):ui=n):ui=ci?kh(e.stateNode.nextSibling):null;return!0}function _i(){ui=ci=null,hi=!1}function bi(){var e=di;return null!==e&&(null===Pc?Pc=e:Pc.push.apply(Pc,e),di=null),e}function xi(e){null===di?di=[e]:di.push(e)}var Si=z(null),wi=null,Mi=null;function Ei(e,t,n){H(Si,t._currentValue),t._currentValue=n}function Ti(e){e._currentValue=Si.current,B(Si)}function Ai(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var o=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ai(a.return,n,e),r||(o=null);break e}a=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Ai(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Ri(e,t,n,r){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(0!==(524288&i.flags))a=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===q.current){if(null===(o=i.alternate))throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(ud):e=[ud])}i=i.return}null!==e&&Ci(t,e,n,r),t.flags|=262144}function Pi(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Li(e){wi=e,Mi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ii(e){return Ni(wi,e)}function ki(e,t){return null===wi&&Li(e),Ni(e,t)}function Ni(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Mi){if(null===e)throw Error(s(308));Mi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Mi=Mi.next=t;return n}var Di="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ui=r.unstable_scheduleCallback,Oi=r.unstable_NormalPriority,Fi={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zi(){return{controller:new Di,data:new Map,refCount:0}}function Bi(e){e.refCount--,0===e.refCount&&Ui(Oi,function(){e.controller.abort()})}var Hi=null,Vi=0,Gi=0,ji=null;function Wi(){if(0===--Vi&&null!==Hi){null!==ji&&(ji.status="fulfilled");var e=Hi;Hi=null,Gi=0,ji=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Xi=N.S;N.S=function(e,t){kc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Hi){var n=Hi=[];Vi=0,Gi=Vu(),ji={status:"pending",value:void 0,then:function(e){n.push(e)}}}Vi++,t.then(Wi,Wi)}(0,t),null!==Xi&&Xi(e,t)};var qi=z(null);function Yi(){var e=qi.current;return null!==e?e:pc.pooledCache}function Zi(e,t){H(qi,null===t?qi.current:t.pool)}function Ki(){var e=Yi();return null===e?null:{parent:Fi._currentValue,pool:e}}var Ji=Error(s(460)),Qi=Error(s(474)),$i=Error(s(542)),ea={then:function(){}};function ta(e){return"fulfilled"===(e=e.status)||"rejected"===e}function na(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(It,It),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw sa(e=t.reason),e;default:if("string"===typeof t.status)t.then(It,It);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw sa(e=t.reason),e}throw ia=t,Ji}}function ra(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ia=t,Ji;throw t}}var ia=null;function aa(){if(null===ia)throw Error(s(459));var e=ia;return ia=null,e}function sa(e){if(e===Ji||e===$i)throw Error(s(483))}var oa=null,la=0;function ca(e){var t=la;return la+=1,null===oa&&(oa=[]),na(oa,e,t)}function ua(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ha(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function da(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===v?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===T&&ra(a)===t.type)?(ua(t=i(t,n.props),n),t.return=e,t):(ua(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Gr(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=jr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return ua(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Xr(t,e.mode,n)).return=e,t;case T:return d(e,t=ra(t),n)}if(k(t)||P(t))return(t=Gr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,ca(t),n);if(t.$$typeof===x)return d(e,ki(e,t),n);ha(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case T:return f(e,t,n=ra(n),r)}if(k(n)||P(n))return null!==i?null:h(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ca(n),r);if(n.$$typeof===x)return f(e,t,ki(e,n),r);ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return p(e,t,n,r=ra(r),i)}if(k(r)||P(r))return h(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return p(e,t,n,ca(r),i);if(r.$$typeof===x)return p(e,t,n,ki(t,r),i);ha(t,r)}return null}function y(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===v&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var _=u.key;null!==c;){if(c.key===_){if((_=u.type)===v){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===T&&ra(_)===c.type){n(l,c.sibling),ua(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===v?((h=Gr(u.props.children,l.mode,h,u.key)).return=l,l=h):(ua(h=Vr(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return o(l);case g:e:{for(_=u.key;null!==c;){if(c.key===_){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Xr(u,l.mode,h)).return=l,l=h}return o(l);case T:return y(l,c,u=ra(u),h)}if(k(u))return function(i,s,o,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,o[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===o.length)return n(i,h),hi&&ii(i,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],l))&&(s=a(h,s,m),null===u?c=h:u.sibling=h,u=h);return hi&&ii(i,m),c}for(h=r(h);m<o.length;m++)null!==(g=p(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),hi&&ii(i,m),c}(l,c,u,h);if(P(u)){if("function"!==typeof(_=P(u)))throw Error(s(150));return function(i,o,l,c){if(null==l)throw Error(s(151));for(var u=null,h=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=f(i,m,y.value,c);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(i,m),o=a(_,o,g),null===h?u=_:h.sibling=_,h=_,m=v}if(y.done)return n(i,m),hi&&ii(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return hi&&ii(i,g),u}for(m=r(m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(i,e)}),hi&&ii(i,g),u}(l,c,u=_.call(u),h)}if("function"===typeof u.then)return y(l,c,ca(u),h);if(u.$$typeof===x)return y(l,c,ki(l,u),h);ha(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=jr(u,l.mode,h)).return=l,l=h),o(l)):n(l,c)}return function(e,t,n,r){try{la=0;var i=y(e,t,n,r);return oa=null,i}catch(s){if(s===Ji||s===$i)throw s;var a=Fr(29,s,null,e.mode);return a.lanes=r,a.return=e,a}}}var fa=da(!0),pa=da(!1),ma=!1;function ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function va(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ya(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _a(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Dr(e),Nr(e,null,n),t}return Lr(e,r,t,n),Dr(e)}function ba(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}function xa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Sa=!1;function wa(){if(Sa){if(null!==ji)throw ji}}function Ma(e,t,n,r){Sa=!1;var i=e.updateQueue;ma=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(s=0,u=c=l=null,o=a;;){var d=-536870913&o.lane,p=d!==o.lane;if(p?(gc&d)===d:(r&d)===d){0!==d&&d===Gi&&(Sa=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;d=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(v,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=g.payload)?m.call(v,h,d):m)||void 0===d)break e;h=f({},h,d);break e;case 2:ma=!0}}null!==(d=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[d]:p.push(d))}else p={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,s|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===a&&(i.shared.lanes=0),Mc|=s,e.lanes=s,e.memoizedState=h}}function Ea(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Ta(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ea(n[e],t)}var Aa=z(null),Ca=z(0);function Ra(e,t){H(Ca,e=Sc),H(Aa,t),Sc=e|t.baseLanes}function Pa(){H(Ca,Sc),H(Aa,Aa.current)}function La(){Sc=Ca.current,B(Aa),B(Ca)}var Ia=z(null),ka=null;function Na(e){var t=e.alternate;H(za,1&za.current),H(Ia,e),null===ka&&(null===t||null!==Aa.current||null!==t.memoizedState)&&(ka=e)}function Da(e){H(za,za.current),H(Ia,e),null===ka&&(ka=e)}function Ua(e){22===e.tag?(H(za,za.current),H(Ia,e),null===ka&&(ka=e)):Oa()}function Oa(){H(za,za.current),H(Ia,Ia.current)}function Fa(e){B(Ia),ka===e&&(ka=null),B(za)}var za=z(0);function Ba(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Lh(n)||Ih(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ha=0,Va=null,Ga=null,ja=null,Wa=!1,Xa=!1,qa=!1,Ya=0,Za=0,Ka=null,Ja=0;function Qa(){throw Error(s(321))}function $a(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function es(e,t,n,r,i,a){return Ha=a,Va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=null===e||null===e.memoizedState?go:vo,qa=!1,a=n(r,i),qa=!1,Xa&&(a=ns(t,n,r,i)),ts(e),a}function ts(e){N.H=mo;var t=null!==Ga&&null!==Ga.next;if(Ha=0,ja=Ga=Va=null,Wa=!1,Za=0,Ka=null,t)throw Error(s(300));null===e||ko||null!==(e=e.dependencies)&&Pi(e)&&(ko=!0)}function ns(e,t,n,r){Va=e;var i=0;do{if(Xa&&(Ka=null),Za=0,Xa=!1,25<=i)throw Error(s(301));if(i+=1,ja=Ga=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}N.H=yo,a=t(n,r)}while(Xa);return a}function rs(){var e=N.H,t=e.useState()[0];return t="function"===typeof t.then?cs(t):t,e=e.useState()[0],(null!==Ga?Ga.memoizedState:null)!==e&&(Va.flags|=1024),t}function is(){var e=0!==Ya;return Ya=0,e}function as(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ss(e){if(Wa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Wa=!1}Ha=0,ja=Ga=Va=null,Xa=!1,Za=Ya=0,Ka=null}function os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ja?Va.memoizedState=ja=e:ja=ja.next=e,ja}function ls(){if(null===Ga){var e=Va.alternate;e=null!==e?e.memoizedState:null}else e=Ga.next;var t=null===ja?Va.memoizedState:ja.next;if(null!==t)ja=t,Ga=e;else{if(null===e){if(null===Va.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Ga=e).memoizedState,baseState:Ga.baseState,baseQueue:Ga.baseQueue,queue:Ga.queue,next:null},null===ja?Va.memoizedState=ja=e:ja=ja.next=e}return ja}function cs(e){var t=Za;return Za+=1,null===Ka&&(Ka=[]),e=na(Ka,e,t),t=Va,null===(null===ja?t.memoizedState:ja.next)&&(t=t.alternate,N.H=null===t||null===t.memoizedState?go:vo),e}function us(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return cs(e);if(e.$$typeof===x)return Ii(e)}throw Error(s(438,String(e)))}function hs(e){var t=null,n=Va.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Va.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Va.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function ds(e,t){return"function"===typeof t?t(e):t}function fs(e){return ps(ls(),Ga,e)}function ps(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=o=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(gc&d)===d:(Ha&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Gi&&(h=!0);else{if((Ha&f)===f){u=u.next,f===Gi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,o=a):c=c.next=d,Va.lanes|=f,Mc|=f}d=u.action,qa&&n(a,d),a=u.hasEagerState?u.eagerState:n(a,d)}else f={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=a):c=c.next=f,Va.lanes|=d,Mc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?o=a:c.next=l,!Qn(a,e.memoizedState)&&(ko=!0,h&&null!==(n=ji)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,r.lastRenderedState=a}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ms(e){var t=ls(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);Qn(a,t.memoizedState)||(ko=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function gs(e,t,n){var r=Va,i=ls(),a=hi;if(a){if(void 0===n)throw Error(s(407));n=n()}else n=t();var o=!Qn((Ga||i).memoizedState,n);if(o&&(i.memoizedState=n,ko=!0),i=i.queue,Hs(_s.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==ja&&1&ja.memoizedState.tag){if(r.flags|=2048,Us(9,{destroy:void 0},ys.bind(null,r,i,n,t),null),null===pc)throw Error(s(349));a||0!==(127&Ha)||vs(r,t,n)}return n}function vs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Va.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ys(e,t,n,r){t.value=n,t.getSnapshot=r,bs(t)&&xs(e)}function _s(e,t,n){return n(function(){bs(t)&&xs(e)})}function bs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function xs(e){var t=kr(e,2);null!==t&&Yc(t,e,2)}function Ss(e){var t=os();if("function"===typeof e){var n=e;if(e=n(),qa){_e(!0);try{n()}finally{_e(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:e},t}function ws(e,t,n,r){return e.baseState=n,ps(e,Ga,"function"===typeof r?r:ds)}function Ms(e,t,n,r,i){if(ho(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==N.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,Es(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Es(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=N.T,s={};N.T=s;try{var o=n(i,r),l=N.S;null!==l&&l(s,o),Ts(e,t,o)}catch(c){Cs(e,t,c)}finally{null!==a&&null!==s.types&&(a.types=s.types),N.T=a}}else try{Ts(e,t,a=n(i,r))}catch(u){Cs(e,t,u)}}function Ts(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){As(e,t,n)},function(n){return Cs(e,t,n)}):As(e,t,n)}function As(e,t,n){t.status="fulfilled",t.value=n,Rs(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Es(e,n)))}function Cs(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Rs(t),t=t.next}while(t!==r)}e.action=null}function Rs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ps(e,t){return t}function Ls(e,t){if(hi){var n=pc.formState;if(null!==n){e:{var r=Va;if(hi){if(ui){t:{for(var i=ui,a=fi;8!==i.nodeType;){if(!a){i=null;break t}if(null===(i=kh(i.nextSibling))){i=null;break t}}i="F!"===(a=i.data)||"F"===a?i:null}if(i){ui=kh(i.nextSibling),r="F!"===i.data;break e}}mi(r)}r=!1}r&&(t=n[0])}}return(n=os()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:t},n.queue=r,n=lo.bind(null,Va,r),r.dispatch=n,r=Ss(!1),a=uo.bind(null,Va,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=os()).queue=i,n=Ms.bind(null,Va,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Is(e){return ks(ls(),Ga,e)}function ks(e,t,n){if(t=ps(e,t,Ps)[0],e=fs(ds)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=cs(t)}catch(s){if(s===Ji)throw $i;throw s}else r=t;var i=(t=ls()).queue,a=i.dispatch;return n!==t.memoizedState&&(Va.flags|=2048,Us(9,{destroy:void 0},Ns.bind(null,i,n),null)),[r,a,e]}function Ns(e,t){e.action=t}function Ds(e){var t=ls(),n=Ga;if(null!==n)return ks(t,n,e);ls(),t=t.memoizedState;var r=(n=ls()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Us(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Va.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Va.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Os(){return ls().memoizedState}function Fs(e,t,n,r){var i=os();Va.flags|=e,i.memoizedState=Us(1|t,{destroy:void 0},n,void 0===r?null:r)}function zs(e,t,n,r){var i=ls();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==Ga&&null!==r&&$a(r,Ga.memoizedState.deps)?i.memoizedState=Us(t,a,n,r):(Va.flags|=e,i.memoizedState=Us(1|t,a,n,r))}function Bs(e,t){Fs(8390656,8,e,t)}function Hs(e,t){zs(2048,8,e,t)}function Vs(e){var t=ls().memoizedState;return function(e){Va.flags|=4;var t=Va.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Va.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Gs(e,t){return zs(4,2,e,t)}function js(e,t){return zs(4,4,e,t)}function Ws(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Xs(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,zs(4,4,Ws.bind(null,t,e),n)}function qs(){}function Ys(e,t){var n=ls();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&$a(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zs(e,t){var n=ls();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&$a(t,r[1]))return r[0];if(r=e(),qa){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[r,t],r}function Ks(e,t,n){return void 0===n||0!==(1073741824&Ha)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=qc(),Va.lanes|=e,Mc|=e,n)}function Js(e,t,n,r){return Qn(n,t)?n:null!==Aa.current?(e=Ks(e,n,r),Qn(e,t)||(ko=!0),e):0===(42&Ha)||0!==(1073741824&Ha)&&0===(261930&gc)?(ko=!0,e.memoizedState=n):(e=qc(),Va.lanes|=e,Mc|=e,t)}function Qs(e,t,n,r,i){var a=D.p;D.p=0!==a&&8>a?a:8;var s=N.T,o={};N.T=o,uo(e,!1,t,n);try{var l=i(),c=N.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)co(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Xc());else co(e,t,r,Xc())}catch(u){co(e,t,{then:function(){},status:"rejected",reason:u},Xc())}finally{D.p=a,null!==s&&null!==o.types&&(s.types=o.types),N.T=s}}function $s(){}function eo(e,t,n,r){if(5!==e.tag)throw Error(s(476));var i=to(e).queue;Qs(e,i,t,U,null===n?$s:function(){return no(e),n(r)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:U},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),co(e,t.next.queue,{},Xc())}function ro(){return Ii(ud)}function io(){return ls().memoizedState}function ao(){return ls().memoizedState}function so(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Xc(),r=_a(t,e=ya(n),n);return null!==r&&(Yc(r,t,n),ba(r,t,n)),t={cache:zi()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var r=Xc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?fo(t,n):null!==(n=Ir(e,t,n,r))&&(Yc(n,e,r),po(n,t,r))}function lo(e,t,n){co(e,t,n,Xc())}function co(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))fo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Qn(o,s))return Lr(e,t,i,0),null===pc&&Pr(),!1}catch(l){}if(null!==(n=Ir(e,t,i,r)))return Yc(n,e,r),po(n,t,r),!0}return!1}function uo(e,t,n,r){if(r={lane:2,revertLane:Vu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(s(479))}else null!==(t=Ir(e,n,r,2))&&Yc(t,e,2)}function ho(e){var t=e.alternate;return e===Va||null!==t&&t===Va}function fo(e,t){Xa=Wa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function po(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}var mo={readContext:Ii,use:us,useCallback:Qa,useContext:Qa,useEffect:Qa,useImperativeHandle:Qa,useLayoutEffect:Qa,useInsertionEffect:Qa,useMemo:Qa,useReducer:Qa,useRef:Qa,useState:Qa,useDebugValue:Qa,useDeferredValue:Qa,useTransition:Qa,useSyncExternalStore:Qa,useId:Qa,useHostTransitionStatus:Qa,useFormState:Qa,useActionState:Qa,useOptimistic:Qa,useMemoCache:Qa,useCacheRefresh:Qa};mo.useEffectEvent=Qa;var go={readContext:Ii,use:us,useCallback:function(e,t){return os().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:Bs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fs(4194308,4,Ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){Fs(4,2,e,t)},useMemo:function(e,t){var n=os();t=void 0===t?null:t;var r=e();if(qa){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=os();if(void 0!==n){var i=n(t);if(qa){_e(!0);try{n(t)}finally{_e(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=oo.bind(null,Va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},os().memoizedState=e},useState:function(e){var t=(e=Ss(e)).queue,n=lo.bind(null,Va,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:qs,useDeferredValue:function(e,t){return Ks(os(),e,t)},useTransition:function(){var e=Ss(!1);return e=Qs.bind(null,Va,e.queue,!0,!1),os().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Va,i=os();if(hi){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===pc)throw Error(s(349));0!==(127&gc)||vs(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Bs(_s.bind(null,r,a,e),[e]),r.flags|=2048,Us(9,{destroy:void 0},ys.bind(null,r,a,n,t),null),n},useId:function(){var e=os(),t=pc.identifierPrefix;if(hi){var n=ri;t="_"+t+"R_"+(n=(ni&~(1<<32-be(ni)-1)).toString(32)+n),0<(n=Ya++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Ja++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:Ls,useActionState:Ls,useOptimistic:function(e){var t=os();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=uo.bind(null,Va,!0,n),n.dispatch=t,[e,t]},useMemoCache:hs,useCacheRefresh:function(){return os().memoizedState=so.bind(null,Va)},useEffectEvent:function(e){var t=os(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(s(440));return n.impl.apply(void 0,arguments)}}},vo={readContext:Ii,use:us,useCallback:Ys,useContext:Ii,useEffect:Hs,useImperativeHandle:Xs,useInsertionEffect:Gs,useLayoutEffect:js,useMemo:Zs,useReducer:fs,useRef:Os,useState:function(){return fs(ds)},useDebugValue:qs,useDeferredValue:function(e,t){return Js(ls(),Ga.memoizedState,e,t)},useTransition:function(){var e=fs(ds)[0],t=ls().memoizedState;return["boolean"===typeof e?e:cs(e),t]},useSyncExternalStore:gs,useId:io,useHostTransitionStatus:ro,useFormState:Is,useActionState:Is,useOptimistic:function(e,t){return ws(ls(),0,e,t)},useMemoCache:hs,useCacheRefresh:ao};vo.useEffectEvent=Vs;var yo={readContext:Ii,use:us,useCallback:Ys,useContext:Ii,useEffect:Hs,useImperativeHandle:Xs,useInsertionEffect:Gs,useLayoutEffect:js,useMemo:Zs,useReducer:ms,useRef:Os,useState:function(){return ms(ds)},useDebugValue:qs,useDeferredValue:function(e,t){var n=ls();return null===Ga?Ks(n,e,t):Js(n,Ga.memoizedState,e,t)},useTransition:function(){var e=ms(ds)[0],t=ls().memoizedState;return["boolean"===typeof e?e:cs(e),t]},useSyncExternalStore:gs,useId:io,useHostTransitionStatus:ro,useFormState:Ds,useActionState:Ds,useOptimistic:function(e,t){var n=ls();return null!==Ga?ws(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:hs,useCacheRefresh:ao};function _o(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}yo.useEffectEvent=Vs;var bo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xc(),i=ya(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=_a(e,i,r))&&(Yc(t,e,r),ba(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xc(),i=ya(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=_a(e,i,r))&&(Yc(t,e,r),ba(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xc(),r=ya(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=_a(e,r,n))&&(Yc(t,e,n),ba(t,e,n))}};function xo(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(i,a))}function So(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function wo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function Mo(e){Tr(e)}function Eo(e){console.error(e)}function To(e){Tr(e)}function Ao(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Co(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ro(e,t,n){return(n=ya(n)).tag=3,n.payload={element:null},n.callback=function(){Ao(e,t)},n}function Po(e){return(e=ya(e)).tag=3,e}function Lo(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Co(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Co(t,n,r),"function"!==typeof i&&(null===Uc?Uc=new Set([this]):Uc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Io=Error(s(461)),ko=!1;function No(e,t,n,r){t.child=null===e?pa(t,null,n,r):fa(t,e.child,n,r)}function Do(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var s={};for(var o in r)"ref"!==o&&(s[o]=r[o])}else s=r;return Li(t),r=es(e,t,n,s,a,i),o=is(),null===e||ko?(hi&&o&&si(t),t.flags|=1,No(e,t,r,i),t.child):(as(e,t,i),il(e,t,i))}function Uo(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||zr(a)||void 0!==a.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Oo(e,t,a,r,i))}if(a=e.child,!al(e,i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(s,r)&&e.ref===t.ref)return il(e,t,i)}return t.flags|=1,(e=Br(a,r)).ref=t.ref,e.return=t,t.child=e}function Oo(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if($n(a,r)&&e.ref===t.ref){if(ko=!1,t.pendingProps=r=a,!al(e,i))return t.lanes=e.lanes,il(e,t,i);0!==(131072&e.flags)&&(ko=!0)}}return jo(e,t,n,r,i)}function Fo(e,t,n,r){var i=r.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(a=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return Bo(e,t,a,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Bo(e,t,null!==a?a.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Zi(0,null!==a?a.cachePool:null),null!==a?Ra(t,a):Pa(),Ua(t)}else null!==a?(Zi(0,a.cachePool),Ra(t,a),Oa(),t.memoizedState=null):(null!==e&&Zi(0,null),Pa(),Oa());return No(e,t,i,n),t.child}function zo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bo(e,t,n,r,i){var a=Yi();return a=null===a?null:{parent:Fi._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Zi(0,null),Pa(),Ua(t),null!==e&&Ri(e,t,r,!0),t.childLanes=i,null}function Ho(e,t){return(t=$o({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Vo(e,t,n){return fa(t,e.child,null,n),(e=Ho(t,t.pendingProps)).flags|=2,Fa(t),t.memoizedState=null,e}function Go(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function jo(e,t,n,r,i){return Li(t),n=es(e,t,n,r,void 0,i),r=is(),null===e||ko?(hi&&r&&si(t),t.flags|=1,No(e,t,n,i),t.child):(as(e,t,i),il(e,t,i))}function Wo(e,t,n,r,i,a){return Li(t),t.updateQueue=null,n=ns(t,r,n,i),ts(e),r=is(),null===e||ko?(hi&&r&&si(t),t.flags|=1,No(e,t,n,a),t.child):(as(e,t,a),il(e,t,a))}function Xo(e,t,n,r,i){if(Li(t),null===t.stateNode){var a=Ur,s=n.contextType;"object"===typeof s&&null!==s&&(a=Ii(s)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=bo,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},ga(t),s=n.contextType,a.context="object"===typeof s&&null!==s?Ii(s):Ur,a.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(_o(t,n,s,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(s=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&bo.enqueueReplaceState(a,a.state,null),Ma(t,r,a,i),wa(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=wo(n,o);a.props=l;var c=a.context,u=n.contextType;s=Ur,"object"===typeof u&&null!==u&&(s=Ii(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o||c!==s)&&So(t,a,r,s),ma=!1;var d=t.memoizedState;a.state=d,Ma(t,r,a,i),wa(),c=t.memoizedState,o||d!==c||ma?("function"===typeof h&&(_o(t,n,h,r),c=t.memoizedState),(l=ma||xo(t,n,l,r,d,c,s))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=s,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,va(e,t),u=wo(n,s=t.memoizedProps),a.props=u,h=t.pendingProps,d=a.context,c=n.contextType,l=Ur,"object"===typeof c&&null!==c&&(l=Ii(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&So(t,a,r,l),ma=!1,d=t.memoizedState,a.state=d,Ma(t,r,a,i),wa();var f=t.memoizedState;s!==h||d!==f||ma||null!==e&&null!==e.dependencies&&Pi(e.dependencies)?("function"===typeof o&&(_o(t,n,o,r),f=t.memoizedState),(u=ma||xo(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Pi(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Go(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=fa(t,e.child,null,i),t.child=fa(t,null,n,i)):No(e,t,n,i),t.memoizedState=a.state,e=t.child):e=il(e,t,i),e}function qo(e,t,n,r){return _i(),t.flags|=256,No(e,t,n,r),t.child}var Yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zo(e){return{baseLanes:e,cachePool:Ki()}}function Ko(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Ac),e}function Jo(e,t,n){var r,i=t.pendingProps,a=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&za.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(hi){if(a?Na(t):Oa(),(e=ui)?null!==(e=null!==(e=Ph(e,fi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return Ih(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,a?(Oa(),l=$o({mode:"hidden",children:l},a=t.mode),i=Gr(i,a,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=Zo(n),i.childLanes=Ko(e,r,n),t.memoizedState=Yo,zo(null,i)):(Na(t),Qo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Na(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Oa(),t.child=e.child,t.flags|=128,t=null):(Oa(),l=i.fallback,a=t.mode,i=$o({mode:"visible",children:i.children},a),(l=Gr(l,a,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,fa(t,e.child,null,n),(i=t.child).memoizedState=Zo(n),i.childLanes=Ko(e,r,n),t.memoizedState=Yo,t=zo(null,i));else if(Na(t),Ih(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(s(419))).stack="",i.digest=r,xi({value:i,source:null,stack:null}),t=el(e,t,n)}else if(ko||Ri(e,t,n,!1),r=0!==(n&e.childLanes),ko||r){if(null!==(r=pc)&&(0!==(i=De(r,n))&&i!==c.retryLane))throw c.retryLane=i,kr(e,i),Yc(r,e,i),Io;Lh(l)||su(),t=el(e,t,n)}else Lh(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ui=kh(l.nextSibling),ci=t,hi=!0,di=null,fi=!1,null!==e&&li(t,e),(t=Qo(t,i.children)).flags|=4096);return t}return a?(Oa(),l=i.fallback,a=t.mode,u=(c=e.child).sibling,(i=Br(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Br(u,l):(l=Gr(l,a,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,zo(null,i),i=t.child,null===(l=e.child.memoizedState)?l=Zo(n):(null!==(a=l.cachePool)?(c=Fi._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=Ki(),l={baseLanes:l.baseLanes|n,cachePool:a}),i.memoizedState=l,i.childLanes=Ko(e,r,n),t.memoizedState=Yo,zo(e.child,i)):(Na(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Qo(e,t){return(t=$o({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $o(e,t){return(e=Fr(22,e,null,t)).lanes=0,e}function el(e,t,n){return fa(t,e.child,null,n),(e=Qo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ai(e.return,t,n)}function nl(e,t,n,r,i,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.treeForkCount=a)}function rl(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var s=za.current,o=0!==(2&s);if(o?(s=1&s|2,t.flags|=128):s&=1,H(za,s),No(e,t,r,n),r=hi?Qr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ba(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),nl(t,!1,i,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ba(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}nl(t,!0,n,null,a,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ri(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function al(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pi(e))}function sl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)ko=!0;else{if(!al(e,n)&&0===(128&t.flags))return ko=!1,function(e,t,n){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),Ei(0,Fi,e.memoizedState.cache),_i();break;case 27:case 5:K(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:Ei(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Da(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Na(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Jo(e,t,n):(Na(t),null!==(e=il(e,t,n))?e.sibling:null);Na(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ri(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return rl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),H(za,za.current),r)break;return null;case 22:return t.lanes=0,Fo(e,t,n,t.pendingProps);case 24:Ei(0,Fi,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);ko=0!==(131072&e.flags)}else ko=!1,hi&&0!==(1048576&t.flags)&&ai(t,Qr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ra(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var i=e.$$typeof;if(i===S){t.tag=11,t=Do(null,t,e,r,n);break e}if(i===E){t.tag=14,t=Uo(null,t,e,r,n);break e}}throw t=I(e)||e,Error(s(306,t,""))}zr(e)?(r=wo(e,r),t.tag=1,t=Xo(null,t,e,r,n)):(t.tag=0,t=jo(null,t,e,r,n))}return t;case 0:return jo(e,t,t.type,t.pendingProps,n);case 1:return Xo(e,t,r=t.type,i=wo(r,t.pendingProps),n);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,va(e,t),Ma(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Ei(0,Fi,r),r!==a.cache&&Ci(t,[Fi],n,!0),wa(),r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=qo(e,t,r,n);break e}if(r!==i){xi(i=Yr(Error(s(424)),t)),t=qo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ui=kh(e.firstChild),ci=t,hi=!0,di=null,fi=!0,n=pa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(_i(),r===i){t=il(e,t,n);break e}No(e,t,r,n)}t=t.child}return t;case 26:return Go(e,t),null===e?(n=Wh(t.type,null,t.pendingProps,null))?t.memoizedState=n:hi||(n=t.type,e=t.pendingProps,(r=gh(X.current).createElement(n))[He]=t,r[Ve]=e,dh(r,n,e),et(r),t.stateNode=r):t.memoizedState=Wh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&hi&&(r=t.stateNode=Oh(t.type,t.pendingProps,X.current),ci=t,fi=!0,i=ui,Th(t.type)?(Nh=i,ui=kh(r.firstChild)):ui=i),No(e,t,t.pendingProps.children,n),Go(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hi&&((i=r=ui)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===a)return e}if(null===(e=kh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fi))?(t.stateNode=r,ci=t,ui=kh(r.firstChild),fi=!1,i=!0):i=!1),i||mi(t)),K(t),i=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,r=a.children,_h(i,a)?r=null:null!==o&&_h(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=es(e,t,rs,null,null,n),ud._currentValue=i),Go(e,t),No(e,t,r,n),t.child;case 6:return null===e&&hi&&((e=n=ui)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=kh(e.nextSibling)))return null}return e}(n,t.pendingProps,fi))?(t.stateNode=n,ci=t,ui=null,e=!0):e=!1),e||mi(t)),null;case 13:return Jo(e,t,n);case 4:return Y(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fa(t,null,r,n):No(e,t,r,n),t.child;case 11:return Do(e,t,t.type,t.pendingProps,n);case 7:return No(e,t,t.pendingProps,n),t.child;case 8:case 12:return No(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ei(0,t.type,r.value),No(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Li(t),r=r(i=Ii(i)),t.flags|=1,No(e,t,r,n),t.child;case 14:return Uo(e,t,t.type,t.pendingProps,n);case 15:return Oo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hi){if("hidden"===r.mode)return e=Ho(t,r),t.lanes=536870912,zo(null,e);if(Da(t),(e=ui)?null!==(e=null!==(e=Ph(e,fi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return t.lanes=536870912,null}return Ho(t,r)}var a=e.memoizedState;if(null!==a){var o=a.dehydrated;if(Da(t),i)if(256&t.flags)t.flags&=-257,t=Vo(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(ko||Ri(e,t,n,!1),i=0!==(n&e.childLanes),ko||i){if(null!==(r=pc)&&0!==(o=De(r,n))&&o!==a.retryLane)throw a.retryLane=o,kr(e,o),Yc(r,e,o),Io;su(),t=Vo(e,t,n)}else e=a.treeContext,ui=kh(o.nextSibling),ci=t,hi=!0,di=null,fi=!1,null!==e&&li(t,e),(t=Ho(t,r)).flags|=4096;return t}return(e=Br(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Fo(e,t,n,t.pendingProps);case 24:return Li(t),r=Ii(Fi),null===e?(null===(i=Yi())&&(i=pc,a=zi(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},ga(t),Ei(0,Fi,i)):(0!==(e.lanes&n)&&(va(e,t),Ma(t,null,null,n),wa()),i=e.memoizedState,a=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Ei(0,Fi,r)):(r=a.cache,Ei(0,Fi,r),r!==i.cache&&Ci(t,[Fi],n,!0))),No(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,r,i){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw ia=ea,Qi;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!id(t)){if(!ru())throw ia=ea,Qi;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,Cc|=t)}function hl(e,t){if(!hi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fl(e,t,n){var r=t.pendingProps;switch(oi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return dl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ti(Fi),Z(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(yi(t)?ol(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,bi())),dl(t),null;case 26:var i=t.type,a=t.memoizedState;return null===e?(ol(t),null!==a?(dl(t),cl(t,a)):(dl(t),ll(t,i,0,0,n))):a?a!==e.memoizedState?(ol(t),dl(t),cl(t,a)):(dl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),dl(t),ll(t,i,0,0,n)),null;case 27:if(J(t),n=X.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return dl(t),null}e=j.current,yi(t)?gi(t):(e=Oh(i,r,n),t.stateNode=e,ol(t))}return dl(t),null;case 5:if(J(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return dl(t),null}if(a=j.current,yi(t))gi(t);else{var o=gh(X.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(a=o.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a="string"===typeof r.is?o.createElement(i,{is:r.is}):o.createElement(i)}}a[He]=t,a[Ve]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)a.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch(dh(a,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return dl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=X.current,yi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ci))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[He]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ch(e.nodeValue,n)))||mi(t,!0)}else(e=gh(e).createTextNode(r))[He]=t,t.stateNode=e}return dl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=yi(t),null!==n){if(null===e){if(!r)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[He]=t}else _i(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),e=!1}else n=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Fa(t),t):(Fa(t),null);if(0!==(128&t.flags))throw Error(s(558))}return dl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=yi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[He]=t}else _i(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),i=!1}else i=bi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(Fa(t),t):(Fa(t),null)}return Fa(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),a=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),dl(t),null);case 4:return Z(),null===e&&$u(t.stateNode.containerInfo),dl(t),null;case 10:return Ti(t.type),dl(t),null;case 19:if(B(za),null===(r=t.memoizedState))return dl(t),null;if(i=0!==(128&t.flags),null===(a=r.rendering))if(i)hl(r,!1);else{if(0!==wc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=Ba(e))){for(t.flags|=128,hl(r,!1),e=a.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Hr(n,e),n=n.sibling;return H(za,1&za.current|2),hi&&ii(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Nc&&(t.flags|=128,i=!0,hl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Ba(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!hi)return dl(t),null}else 2*le()-r.renderingStartTime>Nc&&536870912!==n&&(t.flags|=128,i=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=za.current,H(za,i?1&n|2:1&n),hi&&ii(t,r.treeForkCount),e):(dl(t),null);case 22:case 23:return Fa(t),La(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(dl(t),6&t.subtreeFlags&&(t.flags|=8192)):dl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B(qi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ti(Fi),dl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function pl(e,t){switch(oi(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ti(Fi),Z(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 31:if(null!==t.memoizedState){if(Fa(t),null===t.alternate)throw Error(s(340));_i()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fa(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));_i()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(za),null;case 4:return Z(),null;case 10:return Ti(t.type),null;case 22:case 23:return Fa(t),La(),null!==e&&B(qi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ti(Fi),null;default:return null}}function ml(e,t){switch(oi(t),t.tag){case 3:Ti(Fi),Z();break;case 26:case 27:case 5:J(t);break;case 4:Z();break;case 31:null!==t.memoizedState&&Fa(t);break;case 13:Fa(t);break;case 19:B(za);break;case 10:Ti(t.type);break;case 22:case 23:Fa(t),La(),null!==e&&B(qi);break;case 24:Ti(Fi)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,s=n.inst;r=a(),s.destroy=r}n=n.next}while(n!==i)}}catch(o){wu(t,t.return,o)}}function vl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var s=r.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){wu(i,l,u)}}}r=r.next}while(r!==a)}}catch(u){wu(t,t.return,u)}}function yl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ta(t,n)}catch(r){wu(e,e.return,r)}}}function _l(e,t,n){n.props=wo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){wu(e,t,r)}}function bl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){wu(e,t,i)}}function xl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){wu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){wu(e,t,a)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){wu(e,e.return,i)}}function wl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,o=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||uh(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":a=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==d&&uh(e,t,f,p,r,d)}}return void yt(e,o,l,c,u,h,a,i);case"select":for(a in p=o=l=f=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(a)||uh(e,t,a,null,r,c)}for(i in r)if(a=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=a||null!=c))switch(i){case"value":f=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&uh(e,t,i,a,r,c)}return t=l,n=o,r=p,void(null!=f?xt(e,!!n,f,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:uh(e,t,l,null,r,i)}for(o in r)if(i=r[o],a=n[o],r.hasOwnProperty(o)&&(null!=i||null!=a))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==a&&uh(e,t,o,i,r,a)}return void St(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else uh(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else uh(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&uh(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:uh(e,t,u,f,r,p)}return;default:if(Ct(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&hh(e,t,v,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||hh(e,t,h,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&uh(e,t,y,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||uh(e,t,d,f,r,p)}(r,e.type,n,t),r[Ve]=t}catch(i){wu(e,e.return,i)}}function Ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Th(e.type)||4===e.tag}function El(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Th(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Tl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=It));else if(4!==r&&(27===r&&Th(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Th(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Al(e,t,n),e=e.sibling;null!==e;)Al(e,t,n),e=e.sibling}function Cl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);dh(t,r,n),t[He]=e,t[Ve]=n}catch(a){wu(e,e.return,a)}}var Rl=!1,Pl=!1,Ll=!1,Il="function"===typeof WeakSet?WeakSet:Set,kl=null;function Nl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&gl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){wu(n,n.return,s)}else{var i=wo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){wu(n,n.return,o)}}64&r&&yl(n),512&r&&bl(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ta(e,t)}catch(s){wu(n,n.return,s)}}break;case 27:null===t&&4&r&&Cl(n);case 26:case 5:Yl(e,n),null===t&&4&r&&Sl(n),512&r&&bl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&Bl(e,n);break;case 13:Yl(e,n),4&r&&Hl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Au.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Rl)){t=null!==t&&null!==t.memoizedState||Pl,i=Rl;var a=Pl;Rl=r,(Pl=t)&&!a?Kl(e,n,0!==(8772&n.subtreeFlags)):Yl(e,n),Rl=i,Pl=a}break;case 30:break;default:Yl(e,n)}}function Dl(e){var t=e.alternate;null!==t&&(e.alternate=null,Dl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ul=null,Ol=!1;function Fl(e,t,n){for(n=n.child;null!==n;)zl(e,t,n),n=n.sibling}function zl(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(a){}switch(n.tag){case 26:Pl||xl(n,t),Fl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Pl||xl(n,t);var r=Ul,i=Ol;Th(n.type)&&(Ul=n.stateNode,Ol=!1),Fl(e,t,n),Fh(n.stateNode),Ul=r,Ol=i;break;case 5:Pl||xl(n,t);case 6:if(r=Ul,i=Ol,Ul=null,Fl(e,t,n),Ol=i,null!==(Ul=r))if(Ol)try{(9===Ul.nodeType?Ul.body:"HTML"===Ul.nodeName?Ul.ownerDocument.body:Ul).removeChild(n.stateNode)}catch(s){wu(n,t,s)}else try{Ul.removeChild(n.stateNode)}catch(s){wu(n,t,s)}break;case 18:null!==Ul&&(Ol?(Ah(9===(e=Ul).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),jd(e)):Ah(Ul,n.stateNode));break;case 4:r=Ul,i=Ol,Ul=n.stateNode.containerInfo,Ol=!0,Fl(e,t,n),Ul=r,Ol=i;break;case 0:case 11:case 14:case 15:vl(2,n,t),Pl||vl(4,n,t),Fl(e,t,n);break;case 1:Pl||(xl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&_l(n,t,r)),Fl(e,t,n);break;case 21:Fl(e,t,n);break;case 22:Pl=(r=Pl)||null!==n.memoizedState,Fl(e,t,n),Pl=r;break;default:Fl(e,t,n)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{jd(e)}catch(n){wu(t,t.return,n)}}}function Hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{jd(e)}catch(n){wu(t,t.return,n)}}function Vl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Il),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Il),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Cu.bind(null,e,t);t.then(r,r)}})}function Gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Th(l.type)){Ul=l.stateNode,Ol=!1;break e}break;case 5:Ul=l.stateNode,Ol=!1;break e;case 3:case 4:Ul=l.stateNode.containerInfo,Ol=!0;break e}l=l.return}if(null===Ul)throw Error(s(160));zl(a,o,i),Ul=null,Ol=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wl(t,e),t=t.sibling}var jl=null;function Wl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Gl(t,e),Xl(e),4&r&&(vl(3,e,e.return),gl(3,e),vl(5,e,e.return));break;case 1:Gl(t,e),Xl(e),512&r&&(Pl||null===n||xl(n,n.return)),64&r&&Rl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=jl;if(Gl(t,e),Xl(e),512&r&&(Pl||null===n||xl(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(a=i.getElementsByTagName("title")[0])||a[Ye]||a[He]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),dh(a,r,n),a[He]=e,et(a),r=a;break e;case"link":var o=nd("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}dh(a=i.createElement(r),r,n),i.head.appendChild(a);break;case"meta":if(o=nd("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}dh(a=i.createElement(r),r,n),i.head.appendChild(a);break;default:throw Error(s(468,r))}a[He]=e,et(a),r=a}e.stateNode=r}else rd(i,e.type,e.stateNode);else e.stateNode=Jh(i,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?rd(i,e.type,e.stateNode):Jh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&wl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Gl(t,e),Xl(e),512&r&&(Pl||null===n||xl(n,n.return)),null!==n&&4&r&&wl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Gl(t,e),Xl(e),512&r&&(Pl||null===n||xl(n,n.return)),32&e.flags){i=e.stateNode;try{Mt(i,"")}catch(m){wu(e,e.return,m)}}4&r&&null!=e.stateNode&&wl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Ll=!0);break;case 6:if(Gl(t,e),Xl(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){wu(e,e.return,m)}}break;case 3:if(td=null,i=jl,jl=Hh(t.containerInfo),Gl(t,e),jl=i,Xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jd(t.containerInfo)}catch(m){wu(e,e.return,m)}Ll&&(Ll=!1,ql(e));break;case 4:r=jl,jl=Hh(e.stateNode.containerInfo),Gl(t,e),Xl(e),jl=r;break;case 12:default:Gl(t,e),Xl(e);break;case 31:case 19:Gl(t,e),Xl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Vl(e,r)));break;case 13:Gl(t,e),Xl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Ic=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Vl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Rl,h=Pl;if(Rl=u||i,Pl=h||c,Gl(t,e),Pl=h,Rl=u,Xl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Rl||Pl||Zl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,i)"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){wu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){wu(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;i?Ch(p,!0):Ch(c.stateNode,!1)}catch(m){wu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Vl(e,n))));case 30:case 21:}}function Xl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Ml(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;Al(e,El(e),i);break;case 5:var a=n.stateNode;32&n.flags&&(Mt(a,""),n.flags&=-33),Al(e,El(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Tl(e,El(e),o);break;default:throw Error(s(161))}}catch(l){wu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Nl(e,t.alternate,t),t=t.sibling}function Zl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Zl(t);break;case 1:xl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&_l(t,t.return,n),Zl(t);break;case 27:Fh(t.stateNode);case 26:case 5:xl(t,t.return),Zl(t);break;case 22:null===t.memoizedState&&Zl(t);break;default:Zl(t)}e=e.sibling}}function Kl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:Kl(i,a,n),gl(4,a);break;case 1:if(Kl(i,a,n),"function"===typeof(i=(r=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){wu(r,r.return,c)}if(null!==(i=(r=a).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Ea(l[i],o)}catch(c){wu(r,r.return,c)}}n&&64&s&&yl(a),bl(a,a.return);break;case 27:Cl(a);case 26:case 5:Kl(i,a,n),n&&null===r&&4&s&&Sl(a),bl(a,a.return);break;case 12:Kl(i,a,n);break;case 31:Kl(i,a,n),n&&4&s&&Bl(i,a);break;case 13:Kl(i,a,n),n&&4&s&&Hl(i,a);break;case 22:null===a.memoizedState&&Kl(i,a,n),bl(a,a.return);break;case 30:break;default:Kl(i,a,n)}t=t.sibling}}function Jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Bi(n))}function Ql(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bi(e))}function $l(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,r),2048&i&&gl(9,t);break;case 1:case 31:case 13:default:$l(e,t,n,r);break;case 3:$l(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bi(e)));break;case 12:if(2048&i){$l(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;"function"===typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){wu(t,t.return,l)}}else $l(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,null!==t.memoizedState?2&a._visibility?$l(e,t,n,r):nc(e,t):2&a._visibility?$l(e,t,n,r):(a._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&i&&Jl(s,t);break;case 24:$l(e,t,n,r),2048&i&&Ql(t.alternate,t)}}function tc(e,t,n,r,i){for(i=i&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,s=t,o=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:tc(a,s,o,l,i),gl(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?tc(a,s,o,l,i):nc(a,s):(u._visibility|=2,tc(a,s,o,l,i)),i&&2048&c&&Jl(s.alternate,s);break;case 24:tc(a,s,o,l,i),i&&2048&c&&Ql(s.alternate,s);break;default:tc(a,s,o,l,i)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:nc(n,r),2048&i&&Jl(r.alternate,r);break;case 24:nc(n,r),2048&i&&Ql(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ic(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)ac(e,t,n),e=e.sibling}function ac(e,t,n){switch(e.tag){case 26:ic(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var i=Xh(r.href),a=t.querySelector(qh(i));if(a)return null!==(t=a._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=sd.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,void et(a);a=t.ownerDocument||t,r=Yh(r),(i=zh.get(i))&&$h(r,i),et(a=a.createElement("link"));var s=a;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),dh(a,"link",r),n.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=sd.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,jl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,n);break;case 3:case 4:var r=jl;jl=Hh(e.stateNode.containerInfo),ic(e,t,n),jl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ic(e,t,n),rc=r):ic(e,t,n))}}function sc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,uc(r,e)}sc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):oc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,uc(r,e)}sc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Bi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,kl=r;else e:for(n=e;null!==kl;){var i=(r=kl).sibling,a=r.return;if(Dl(r),r===n){kl=null;break e}if(null!==i){i.return=a,kl=i;break e}kl=a}}}var hc={getCacheForType:function(e){var t=Ii(Fi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ii(Fi).controller.signal}},dc="function"===typeof WeakMap?WeakMap:Map,fc=0,pc=null,mc=null,gc=0,vc=0,yc=null,_c=!1,bc=!1,xc=!1,Sc=0,wc=0,Mc=0,Ec=0,Tc=0,Ac=0,Cc=0,Rc=null,Pc=null,Lc=!1,Ic=0,kc=0,Nc=1/0,Dc=null,Uc=null,Oc=0,Fc=null,zc=null,Bc=0,Hc=0,Vc=null,Gc=null,jc=0,Wc=null;function Xc(){return 0!==(2&fc)&&0!==gc?gc&-gc:null!==N.T?Vu():Fe()}function qc(){if(0===Ac)if(0===(536870912&gc)||hi){var e=Me;0===(3932160&(Me<<=1))&&(Me=262144),Ac=e}else Ac=536870912;return null!==(e=Ia.current)&&(e.flags|=32),Ac}function Yc(e,t,n){(e!==pc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(tu(e,0),Qc(e,gc,Ac,!1)),Ie(e,n),0!==(2&fc)&&e===pc||(e===pc&&(0===(2&fc)&&(Ec|=n),4===wc&&Qc(e,gc,Ac,!1)),Du(e))}function Zc(e,t,n){if(0!==(6&fc))throw Error(s(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ce(e,t),i=r?function(e,t){var n=fc;fc|=2;var r=iu(),i=au();pc!==e||gc!==t?(Dc=null,Nc=le()+500,tu(e,t)):bc=Ce(e,t);e:for(;;)try{if(0!==vc&&null!==mc){t=mc;var a=yc;t:switch(vc){case 1:vc=0,yc=null,du(e,t,a,1);break;case 2:case 9:if(ta(a)){vc=0,yc=null,hu(t);break}t=function(){2!==vc&&9!==vc||pc!==e||(vc=7),Du(e)},a.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ta(a)?(vc=0,yc=null,hu(t)):(vc=0,yc=null,du(e,t,a,7));break;case 5:var o=null;switch(mc.tag){case 26:o=mc.memoizedState;case 5:case 27:var l=mc;if(o?id(o):l.stateNode.complete){vc=0,yc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,fu(u)):mc=null}break t}}vc=0,yc=null,du(e,t,a,5);break;case 6:vc=0,yc=null,du(e,t,a,6);break;case 8:eu(),wc=6;break e;default:throw Error(s(462))}}cu();break}catch(h){nu(e,h)}return Mi=wi=null,N.H=r,N.A=i,fc=n,null!==mc?0:(pc=null,gc=0,Pr(),wc)}(e,t):ou(e,t,!0),a=r;;){if(0===i){bc&&!r&&Qc(e,t,0,!1);break}if(n=e.current.alternate,!a||Jc(n)){if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=Rc;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,o).flags|=256),2!==(o=ou(l,o,!1))){if(xc&&!c){l.errorRecoveryDisabledLanes|=a,Ec|=a,i=4;break e}a=Pc,Pc=i,null!==a&&(null===Pc?Pc=a:Pc.push.apply(Pc,a))}i=o}if(a=!1,2!==i)continue}}if(1===i){tu(e,0),Qc(e,t,0,!0);break}e:{switch(r=e,a=i){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Qc(r,t,Ac,!_c);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(i=Ic+300-le())){if(Qc(r,t,Ac,!_c),0!==Ae(r,0,!0))break e;Bc=t,r.timeoutHandle=xh(Kc.bind(null,r,n,Pc,Dc,Lc,t,Ac,Ec,Cc,_c,a,"Throttled",-0,0),i)}else Kc(r,n,Pc,Dc,Lc,t,Ac,Ec,Cc,_c,a,null,-0,0)}break}i=ou(e,t,!1),a=!1}Du(e)}function Kc(e,t,n,r,i,a,s,o,l,c,u,h,d,f){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||16785408===(16785408&h)){ac(t,a,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:It});var p=(62914560&a)===a?Ic-le():(4194048&a)===a?kc-le():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&ld(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ad&&(ad=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,s=i.initiatorType,o=i.duration;if(a&&o&&fh(s)){for(s=0,o=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,h=l.initiatorType;u&&fh(h)&&(s+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(a+s)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ad?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(h,p)))return Bc=a,e.cancelPendingCommit=p(mu.bind(null,e,t,a,n,r,i,s,o,l,u,h,null,d,f)),void Qc(e,a,s,!c)}mu(e,t,a,n,r,i,s,o,l)}function Jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Qn(a(),i))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qc(e,t,n,r){t&=~Tc,t&=~Ec,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-be(i),s=1<<a;r[a]=-1,i&=~s}0!==n&&ke(e,n,t)}function $c(){return 0!==(6&fc)||(Uu(0,!1),!1)}function eu(){if(null!==mc){if(0===vc)var e=mc.return;else Mi=wi=null,ss(e=mc),oa=null,la=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc=0,eu(),pc=e,mc=n=Br(e.current,null),gc=t,vc=0,yc=null,_c=!1,bc=Ce(e,t),xc=!1,Cc=Ac=Tc=Ec=Mc=wc=0,Pc=Rc=null,Lc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-be(r),a=1<<i;t|=e[i],r&=~a}return Sc=t,Pr(),n}function nu(e,t){Va=null,N.H=mo,t===Ji||t===$i?(t=aa(),vc=3):t===Qi?(t=aa(),vc=4):vc=t===Io?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,yc=t,null===mc&&(wc=1,Ao(e,Yr(t,e.current)))}function ru(){var e=Ia.current;return null===e||((4194048&gc)===gc?null===ka:((62914560&gc)===gc||0!==(536870912&gc))&&e===ka)}function iu(){var e=N.H;return N.H=mo,null===e?mo:e}function au(){var e=N.A;return N.A=hc,e}function su(){wc=4,_c||(4194048&gc)!==gc&&null!==Ia.current||(bc=!0),0===(134217727&Mc)&&0===(134217727&Ec)||null===pc||Qc(pc,gc,Ac,!1)}function ou(e,t,n){var r=fc;fc|=2;var i=iu(),a=au();pc===e&&gc===t||(Dc=null,tu(e,t)),t=!1;var s=wc;e:for(;;)try{if(0!==vc&&null!==mc){var o=mc,l=yc;switch(vc){case 8:eu(),s=6;break e;case 3:case 2:case 9:case 6:null===Ia.current&&(t=!0);var c=vc;if(vc=0,yc=null,du(e,o,l,c),n&&bc){s=0;break e}break;default:c=vc,vc=0,yc=null,du(e,o,l,c)}}lu(),s=wc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,Mi=wi=null,fc=r,N.H=i,N.A=a,null===mc&&(pc=null,gc=0,Pr()),s}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!se();)uu(mc)}function uu(e){var t=sl(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wo(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Wo(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:ss(t);default:ml(n,t),t=sl(n,t=mc=Hr(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function du(e,t,n,r){Mi=wi=null,ss(t),oa=null,la=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ri(t,n,i,!0),null!==(n=Ia.current)){switch(n.tag){case 31:case 13:return null===ka?su():null===n.alternate&&0===wc&&(wc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===ea?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Mu(e,r,i)),!1;case 22:return n.flags|=65536,r===ea?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Mu(e,r,i)),!1}throw Error(s(435,n.tag))}return Mu(e,r,i),su(),!1}if(hi)return null!==(t=Ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==pi&&xi(Yr(e=Error(s(422),{cause:r}),n))):(r!==pi&&xi(Yr(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Yr(r,n),xa(e,i=Ro(e.stateNode,r,i)),4!==wc&&(wc=2)),!1;var a=Error(s(520),{cause:r});if(a=Yr(a,n),null===Rc?Rc=[a]:Rc.push(a),4!==wc&&(wc=2),null===t)return!0;r=Yr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,xa(n,e=Ro(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Uc||!Uc.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,Lo(i=Po(i),e,n,r),xa(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,gc))return wc=1,Ao(e,Yr(n,e.current)),void(mc=null)}catch(a){if(null!==i)throw mc=i,a;return wc=1,Ao(e,Yr(n,e.current)),void(mc=null)}32768&t.flags?(hi||1===r?e=!0:bc||0!==(536870912&gc)?e=!1:(_c=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ia.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,_c);e=t.return;var n=fl(t.alternate,t,Sc);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===wc&&(wc=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);wc=6,mc=null}function mu(e,t,n,r,i,a,o,l,c){e.cancelPendingCommit=null;do{bu()}while(0!==Oc);if(0!==(6&fc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,a){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-be(n),h=1<<u;o[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&ke(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,n,a|=Rr,o,l,c),e===pc&&(mc=pc=null,gc=0),zc=t,Fc=e,Bc=n,Hc=a,Vc=i,Gc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ie(de,function(){return xu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=N.T,N.T=null,i=D.p,D.p=2,o=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,ph=_d,ir(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:e,selectionRange:n},_d=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(a=(t=kl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var m=wo(n.type,i);e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){wu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Rh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{fc=o,D.p=i,N.T=r}}Oc=1,gu(),vu(),yu()}}function gu(){if(1===Oc){Oc=0;var e=Fc,t=zc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=N.T,N.T=null;var r=D.p;D.p=2;var i=fc;fc|=4;try{Wl(t,e);var a=mh,s=rr(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&ir(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(s=g,g=m,m=s);var v=tr(o,m),y=tr(o,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var _=h.createRange();_.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(_),f.extend(y.node,y.offset)):(_.setEnd(y.node,y.offset),f.addRange(_))}}}}for(h=[],f=o;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<h.length;o++){var b=h[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}_d=!!ph,mh=ph=null}finally{fc=i,D.p=r,N.T=n}}e.current=t,Oc=2}}function vu(){if(2===Oc){Oc=0;var e=Fc,t=zc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=N.T,N.T=null;var r=D.p;D.p=2;var i=fc;fc|=4;try{Nl(e,t.alternate,t)}finally{fc=i,D.p=r,N.T=n}}Oc=3}}function yu(){if(4===Oc||3===Oc){Oc=0,oe();var e=Fc,t=zc,n=Bc,r=Gc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Oc=5:(Oc=0,zc=Fc=null,_u(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Uc=null),Oe(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=N.T,i=D.p,D.p=2,N.T=null;try{for(var a=e.onRecoverableError,s=0;s<r.length;s++){var o=r[s];a(o.value,{componentStack:o.stack})}}finally{N.T=t,D.p=i}}0!==(3&Bc)&&bu(),Du(e),i=e.pendingLanes,0!==(261930&n)&&0!==(42&i)?e===Wc?jc++:(jc=0,Wc=e):jc=0,Uu(0,!1)}}function _u(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Bi(t)))}function bu(){return gu(),vu(),yu(),xu()}function xu(){if(5!==Oc)return!1;var e=Fc,t=Hc;Hc=0;var n=Oe(Bc),r=N.T,i=D.p;try{D.p=32>n?32:n,N.T=null,n=Vc,Vc=null;var a=Fc,o=Bc;if(Oc=0,zc=Fc=null,Bc=0,0!==(6&fc))throw Error(s(331));var l=fc;if(fc|=4,lc(a.current),ec(a,a.current,o,n),fc=l,Uu(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,a)}catch(c){}return!0}finally{D.p=i,N.T=r,_u(e,t)}}function Su(e,t,n){t=Yr(n,t),null!==(e=_a(e,t=Ro(e.stateNode,t,2),2))&&(Ie(e,2),Du(e))}function wu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Uc||!Uc.has(r))){e=Yr(n,e),null!==(r=_a(t,n=Po(2),2))&&(Lo(n,r,t,e),Ie(r,2),Du(r));break}}t=t.return}}function Mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new dc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(xc=!0,i.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(gc&n)===n&&(4===wc||3===wc&&(62914560&gc)===gc&&300>le()-Ic?0===(2&fc)&&tu(e,0):Tc|=n,Cc===gc&&(Cc=0)),Du(e)}function Tu(e,t){0===t&&(t=Pe()),null!==(e=kr(e,t))&&(Ie(e,t),Du(e))}function Au(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Cu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tu(e,n)}var Ru=null,Pu=null,Lu=!1,Iu=!1,ku=!1,Nu=0;function Du(e){e!==Pu&&null===e.next&&(null===Pu?Ru=Pu=e:Pu=Pu.next=e),Iu=!0,Lu||(Lu=!0,Mh(function(){0!==(6&fc)?ie(ue,Ou):Fu()}))}function Uu(e,t){if(!ku&&Iu){ku=!0;do{for(var n=!1,r=Ru;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var s=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-be(42|e)+1)-1,a=201326741&(a&=i&~(s&~o))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Hu(r,a))}else a=gc,0===(3&(a=Ae(r,r===pc?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ce(r,a)||(n=!0,Hu(r,a));r=r.next}}while(n);ku=!1}}function Ou(){Fu()}function Fu(){Iu=Lu=!1;var e=0;0!==Nu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bh&&(bh=e,!0);return bh=null,!1}()&&(e=Nu);for(var t=le(),n=null,r=Ru;null!==r;){var i=r.next,a=zu(r,t);0===a?(r.next=null,null===n?Ru=i:n.next=i,null===i&&(Pu=n)):(n=r,(0!==e||0!==(3&a))&&(Iu=!0)),r=i}0!==Oc&&5!==Oc||Uu(e,!1),0!==Nu&&(Nu=0)}function zu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-be(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=Re(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(n=gc,n=Ae(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ae(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ce(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ae(r),Oe(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=pe}return r=Bu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ae(r),e.callbackPriority=2,e.callbackNode=null,2}function Bu(e,t){if(0!==Oc&&5!==Oc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=Ae(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Zc(e,r,t),zu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Bu.bind(null,e):null)}function Hu(e,t){if(bu())return null;Zc(e,t,!0)}function Vu(){if(0===Nu){var e=Gi;0===e&&(e=we,0===(261888&(we<<=1))&&(we=256)),Nu=e}return Nu}function Gu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Lt(""+e)}function ju(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wu=0;Wu<Mr.length;Wu++){var Xu=Mr[Wu];Er(Xu.toLowerCase(),"on"+(Xu[0].toUpperCase()+Xu.slice(1)))}Er(gr,"onAnimationEnd"),Er(vr,"onAnimationIteration"),Er(yr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(_r,"onTransitionRun"),Er(br,"onTransitionStart"),Er(xr,"onTransitionCancel"),Er(Sr,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qu));function Zu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Tr(u)}i.currentTarget=null,a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Tr(u)}i.currentTarget=null,a=l}}}}function Ku(e,t){var n=t[je];void 0===n&&(n=t[je]=new Set);var r=e+"__bubble";n.has(r)||(eh(t,e,2,!1),n.add(r))}function Ju(e,t,n){var r=0;t&&(r|=4),eh(n,e,r,t)}var Qu="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[Qu]){e[Qu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Ju(t,!1,e),Ju(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Qu]||(t[Qu]=!0,Ju("selectionchange",!1,t))}}function eh(e,t,n,r){switch(Td(t)){case 2:var i=bd;break;case 8:i=xd;break;default:i=Sd}n=i.bind(null,t,n,e),i=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function th(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==o;){if(null===(s=Ke(o)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=a=s;continue e}o=o.parentNode}}r=r.return}zt(function(){var r=a,i=Nt(n),s=[];e:{var o=wr.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Yt(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case gr:case vr:case yr:c=un;break;case Sr:c=xn;break;case"scroll":case"scrollend":c=an;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=_n;break;case"toggle":case"beforetoggle":c=wn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==o?o+"Capture":null:o;h=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Bt(m,f))&&h.push(nh(m,g,p)),d)break;m=m.return}0<h.length&&(o=new c(o,u,null,n,i),s.push({event:o,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===kt||!(u=n.relatedTarget||n.fromElement)||!Ke(u)&&!u[Ge])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ke(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=on,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=_n,g="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==c?o:Qe(c),p=null==u?o:Qe(u),(o=new h(g,m+"leave",c,n,i)).target=d,o.relatedTarget=p,g=null,Ke(i)===r&&((h=new h(f,m+"enter",u,n,i)).target=p,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(h=ih,m=u,p=0,g=f=c;g;g=h(g))p++;g=0;for(var v=m;v;v=h(v))g++;for(;0<p-g;)f=h(f),p--;for(;0<g-p;)m=h(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){h=f;break e}f=h(f),m=h(m)}h=null}else h=null;null!==c&&ah(s,o,c,h,!1),null!==u&&null!==d&&ah(s,d,u,h,!0)}if("select"===(c=(o=r?Qe(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Hn;else if(Dn(o))if(Vn)y=Jn;else{y=Zn;var _=Yn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Ct(r.elementType)&&(y=Hn):y=Kn;switch(y&&(y=y(e,r))?Un(s,y,n,i):(_&&_(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&bt(o,"number",o.value)),_=r?Qe(r):window,e){case"focusin":(Dn(_)||"true"===_.contentEditable)&&(sr=_,or=r,lr=null);break;case"focusout":lr=or=sr=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(s,n,i);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":ur(s,n,i)}var b;if(En)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else kn?Ln(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Cn&&"ko"!==n.locale&&(kn||"onCompositionStart"!==x?"onCompositionEnd"===x&&kn&&(b=qt()):(Wt="value"in(jt=i)?jt.value:jt.textContent,kn=!0)),0<(_=rh(r,x)).length&&(x=new dn(x,e,null,n,i),s.push({event:x,listeners:_}),b?x.data=b:null!==(b=In(n))&&(x.data=b))),(b=An?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(Pn=!0,Rn);case"textInput":return(e=t.data)===Rn&&Pn?null:e;default:return null}}(e,n):function(e,t){if(kn)return"compositionend"===e||!En&&Ln(e,t)?(e=qt(),Xt=Wt=jt=null,kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=rh(r,"onBeforeInput")).length&&(_=new dn("onBeforeInput","beforeinput",null,n,i),s.push({event:_,listeners:x}),_.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var a=Gu((i[Ve]||null).action),s=r.submitter;s&&null!==(t=(t=s[Ve]||null)?Gu(t.formAction):s.getAttribute("formAction"))&&(a=t,s=null);var o=new nn("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Nu){var e=s?ju(i,s):new FormData(i);eo(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else"function"===typeof a&&(o.preventDefault(),e=s?ju(i,s):new FormData(i),eo(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}(s,e,r,n,i)}Zu(s,t)})}function nh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rh(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=Bt(e,n))&&r.unshift(nh(e,i,a)),null!=(i=Bt(e,t))&&r.push(nh(e,i,a))),3===e.tag)return r;e=e.return}return[]}function ih(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ah(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Bt(n,a))&&s.unshift(nh(n,c,l)):i||null!=(c=Bt(n,a))&&s.push(nh(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var sh=/\r\n?/g,oh=/\u0000|\uFFFD/g;function lh(e){return("string"===typeof e?e:""+e).replace(sh,"\n").replace(oh,"")}function ch(e,t){return t=lh(t),lh(e)===t}function uh(e,t,n,r,i,a){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Mt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Mt(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":At(e,r,a);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Lt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&uh(e,t,"name",i.name,i,null),uh(e,t,"formEncType",i.formEncType,i,null),uh(e,t,"formMethod",i.formMethod,i,null),uh(e,t,"formTarget",i.formTarget,i,null)):(uh(e,t,"encType",i.encType,i,null),uh(e,t,"method",i.method,i,null),uh(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Lt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=It);break;case"onScroll":null!=r&&Ku("scroll",e);break;case"onScrollEnd":null!=r&&Ku("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Lt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ku("beforetoggle",e),Ku("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Rt.get(n)||n,r)}}function hh(e,t,n,r,i,a){switch(n){case"style":At(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Mt(e,r):("number"===typeof r||"bigint"===typeof r)&&Mt(e,""+r);break;case"onScroll":null!=r&&Ku("scroll",e);break;case"onScrollEnd":null!=r&&Ku("scrollend",e);break;case"onClick":null!=r&&(e.onclick=It);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(a=null!=(a=e[Ve]||null)?a[n]:null)&&e.removeEventListener(t,a,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function dh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ku("error",e),Ku("load",e);var r,i=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:uh(e,t,r,o,n,null)}}return a&&uh(e,t,"srcSet",n.srcSet,n,null),void(i&&uh(e,t,"src",n.src,n,null));case"input":Ku("invalid",e);var l=r=o=a=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":a=h;break;case"type":o=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(s(137,t));break;default:uh(e,t,i,h,n,null)}}return void _t(e,r,l,c,u,o,a,!1);case"select":for(a in Ku("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:uh(e,t,a,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?xt(e,!!i,t,!1):null!=n&&xt(e,!!i,n,!0));case"textarea":for(o in Ku("invalid",e),r=a=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:uh(e,t,o,l,n,null)}return void wt(e,i,a,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else uh(e,t,c,i,n,null);return;case"dialog":Ku("beforetoggle",e),Ku("toggle",e),Ku("cancel",e),Ku("close",e);break;case"iframe":case"object":Ku("load",e);break;case"video":case"audio":for(i=0;i<qu.length;i++)Ku(qu[i],e);break;case"image":Ku("error",e),Ku("load",e);break;case"details":Ku("toggle",e);break;case"embed":case"source":case"link":Ku("error",e),Ku("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:uh(e,t,u,i,n,null)}return;default:if(Ct(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&hh(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&uh(e,t,l,i,n,null))}function fh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var ph=null,mh=null;function gh(e){return 9===e.nodeType?e:e.ownerDocument}function vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function _h(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bh=null;var xh="function"===typeof setTimeout?setTimeout:void 0,Sh="function"===typeof clearTimeout?clearTimeout:void 0,wh="function"===typeof Promise?Promise:void 0,Mh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof wh?function(e){return wh.resolve(null).then(e).catch(Eh)}:xh;function Eh(e){setTimeout(function(){throw e})}function Th(e){return"head"===e}function Ah(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void jd(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Fh(e.ownerDocument.documentElement);else if("head"===n){Fh(n=e.ownerDocument.head);for(var a=n.firstChild;a;){var s=a.nextSibling,o=a.nodeName;a[Ye]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}else"body"===n&&Fh(e.ownerDocument.body);n=i}while(n);jd(t)}function Ch(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Rh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Rh(n),Ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ph(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=kh(e.nextSibling)))return null}return e}function Lh(e){return"$?"===e.data||"$~"===e.data}function Ih(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function kh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Nh=null;function Dh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return kh(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Uh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Oh(e,t,n){switch(t=gh(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Fh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ze(e)}var zh=new Map,Bh=new Set;function Hh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Vh=D.d;D.d={f:function(){var e=Vh.f(),t=$c();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?no(t):Vh.r(e)},D:function(e){Vh.D(e),jh("dns-prefetch",e,null)},C:function(e,t){Vh.C(e,t),jh("preconnect",e,t)},L:function(e,t,n){Vh.L(e,t,n);var r=Gh;if(r&&e&&t){var i='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+vt(n.imageSizes)+'"]')):i+='[href="'+vt(e)+'"]';var a=i;switch(t){case"style":a=Xh(e);break;case"script":a=Zh(e)}zh.has(a)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),zh.set(a,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(qh(a))||"script"===t&&r.querySelector(Kh(a))||(dh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Vh.m(e,t);var n=Gh;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Zh(e)}if(!zh.has(a)&&(e=f({rel:"modulepreload",href:e},t),zh.set(a,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Kh(a)))return}dh(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Vh.X(e,t);var n=Gh;if(n&&e){var r=$e(n).hoistableScripts,i=Zh(e),a=r.get(i);a||((a=n.querySelector(Kh(i)))||(e=f({src:e,async:!0},t),(t=zh.get(i))&&ed(e,t),et(a=n.createElement("script")),dh(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}},S:function(e,t,n){Vh.S(e,t,n);var r=Gh;if(r&&e){var i=$e(r).hoistableStyles,a=Xh(e);t=t||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(qh(a)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=zh.get(a))&&$h(e,n);var l=s=r.createElement("link");et(l),dh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Qh(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}},M:function(e,t){Vh.M(e,t);var n=Gh;if(n&&e){var r=$e(n).hoistableScripts,i=Zh(e),a=r.get(i);a||((a=n.querySelector(Kh(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=zh.get(i))&&ed(e,t),et(a=n.createElement("script")),dh(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}};var Gh="undefined"===typeof document?null:document;function jh(e,t,n){var r=Gh;if(r&&"string"===typeof t&&t){var i=vt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Bh.has(i)||(Bh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(dh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Wh(e,t,n,r){var i,a,o,l,c=(c=X.current)?Hh(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Xh(n.href),(r=(n=$e(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Xh(n.href);var u=$e(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(qh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),zh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zh.set(e,n),u||(i=c,a=e,o=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=i.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),dh(a,"link",o),et(a),i.head.appendChild(a))))),t&&null===r)throw Error(s(528,""));return h}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Zh(n),(r=(n=$e(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Xh(e){return'href="'+vt(e)+'"'}function qh(e){return'link[rel="stylesheet"]['+e+"]"}function Yh(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Zh(e){return'[src="'+vt(e)+'"]'}function Kh(e){return"script[async]"+e}function Jh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),dh(r,"style",i),Qh(r,n.precedence,e),t.instance=r;case"stylesheet":i=Xh(n.href);var a=e.querySelector(qh(i));if(a)return t.state.loading|=4,t.instance=a,et(a),a;r=Yh(n),(i=zh.get(i))&&$h(r,i),et(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),dh(a,"link",r),t.state.loading|=4,Qh(a,n.precedence,e),t.instance=a;case"script":return a=Zh(n.src),(i=e.querySelector(Kh(a)))?(t.instance=i,et(i),i):(r=n,(i=zh.get(a))&&ed(r=f({},n),i),et(i=(e=e.ownerDocument||e).createElement("script")),dh(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Qh(r,n.precedence,e));return t.instance}function Qh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===t)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function $h(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var td=null;function nd(e,t,n){if(null===td){var r=new Map,i=td=new Map;i.set(n,r)}else(r=(i=td).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[Ye]||a[He]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var s=a.getAttribute(t)||"";s=e+s;var o=r.get(s);o?o.push(a):r.set(s,[a])}}return r}function rd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function id(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ad=0;function sd(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var od=null;function ld(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,od=new Map,t.forEach(cd,e),od=null,sd.call(e))}function cd(e,t){if(!(4&t.state.loading)){var n=od.get(e);if(n)var r=n.get(null);else{n=new Map,od.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(i=t.instance).getAttribute("data-precedence"),(a=n.get(s)||r)===r&&n.set(null,i),n.set(s,i),this.count++,r=sd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var ud={$$typeof:x,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function hd(e,t,n,r,i,a,s,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.hiddenUpdates=Le(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function dd(e,t,n,r,i,a,s,o,l,c,u,h){return e=new hd(e,t,n,s,l,c,u,h,o),t=1,!0===a&&(t|=24),a=Fr(3,null,null,t),e.current=a,a.stateNode=e,(t=zi()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},ga(a),e}function fd(e){return e?e=Ur:Ur}function pd(e,t,n,r,i,a){i=fd(i),null===r.context?r.context=i:r.pendingContext=i,(r=ya(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=_a(e,r,t))&&(Yc(n,0,t),ba(n,e,t))}function md(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gd(e,t){md(e,t),(e=e.alternate)&&md(e,t)}function vd(e){if(13===e.tag||31===e.tag){var t=kr(e,67108864);null!==t&&Yc(t,0,67108864),gd(e,67108864)}}function yd(e){if(13===e.tag||31===e.tag){var t=Xc(),n=kr(e,t=Ue(t));null!==n&&Yc(n,0,t),gd(e,t)}}var _d=!0;function bd(e,t,n,r){var i=N.T;N.T=null;var a=D.p;try{D.p=2,Sd(e,t,n,r)}finally{D.p=a,N.T=i}}function xd(e,t,n,r){var i=N.T;N.T=null;var a=D.p;try{D.p=8,Sd(e,t,n,r)}finally{D.p=a,N.T=i}}function Sd(e,t,n,r){if(_d){var i=wd(r);if(null===i)th(e,t,r,Md,n),Dd(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Cd=Ud(Cd,e,t,n,r,i),!0;case"dragenter":return Rd=Ud(Rd,e,t,n,r,i),!0;case"mouseover":return Pd=Ud(Pd,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ld.set(a,Ud(Ld.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Id.set(a,Ud(Id.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dd(e,r),4&t&&-1<Nd.indexOf(e)){for(;null!==i;){var a=Je(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var s=Te(a.pendingLanes);if(0!==s){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-be(s);o.entanglements[1]|=l,s&=~l}Du(a),0===(6&fc)&&(Nc=le()+500,Uu(0,!1))}}break;case 31:case 13:null!==(o=kr(a,2))&&Yc(o,0,2),$c(),gd(a,2)}if(null===(a=wd(r))&&th(e,t,r,Md,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else th(e,t,r,null,n)}}function wd(e){return Ed(e=Nt(e))}var Md=null;function Ed(e){if(Md=null,null!==(e=Ke(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Md=e,null}function Td(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case he:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Ad=!1,Cd=null,Rd=null,Pd=null,Ld=new Map,Id=new Map,kd=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dd(e,t){switch(e){case"focusin":case"focusout":Cd=null;break;case"dragenter":case"dragleave":Rd=null;break;case"mouseover":case"mouseout":Pd=null;break;case"pointerover":case"pointerout":Ld.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Id.delete(t.pointerId)}}function Ud(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=Je(t))&&vd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Od(e){var t=Ke(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void ze(e.priority,function(){yd(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void ze(e.priority,function(){yd(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Fd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=wd(e.nativeEvent);if(null!==n)return null!==(t=Je(n))&&vd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);kt=r,n.target.dispatchEvent(r),kt=null,t.shift()}return!0}function zd(e,t,n){Fd(e)&&n.delete(t)}function Bd(){Ad=!1,null!==Cd&&Fd(Cd)&&(Cd=null),null!==Rd&&Fd(Rd)&&(Rd=null),null!==Pd&&Fd(Pd)&&(Pd=null),Ld.forEach(zd),Id.forEach(zd)}function Hd(e,t){e.blockedOn===t&&(e.blockedOn=null,Ad||(Ad=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bd)))}var Vd=null;function Gd(e){Vd!==e&&(Vd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Vd===e&&(Vd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Ed(r||n))continue;break}var a=Je(n);null!==a&&(e.splice(t,3),t-=3,eo(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function jd(e){function t(t){return Hd(t,e)}null!==Cd&&Hd(Cd,e),null!==Rd&&Hd(Rd,e),null!==Pd&&Hd(Pd,e),Ld.forEach(t),Id.forEach(t);for(var n=0;n<kd.length;n++){var r=kd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<kd.length&&null===(n=kd[0]).blockedOn;)Od(n),null===n.blockedOn&&kd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],s=i[Ve]||null;if("function"===typeof a)s||Gd(n);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[Ve]||null)o=s.formAction;else if(null!==Ed(i))continue}else o=s.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Gd(n)}}}function Wd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Xd(e){this._internalRoot=e}function qd(e){this._internalRoot=e}qd.prototype.render=Xd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));pd(t.current,Xc(),e,t,null,null)},qd.prototype.unmount=Xd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pd(e.current,2,null,e,null,null),$c(),t[Ge]=null}},qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kd.length&&0!==t&&t<kd[n].priority;n++);kd.splice(n,0,e),0===n&&Od(e)}};var Yd=i.version;if("19.2.0"!==Yd)throw Error(s(527,Yd,"19.2.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return h(i),e;if(a===r)return h(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Zd={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kd.isDisabled&&Kd.supportsFiber)try{ve=Kd.inject(Zd),ye=Kd}catch(Qd){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var n=!1,r="",i=Mo,a=Eo,l=To;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=dd(e,1,!1,null,0,n,r,null,i,a,l,Wd),e[Ge]=t.current,$u(e),new Xd(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(s(299));var r=!1,i="",a=Mo,l=Eo,c=To,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=dd(e,1,!0,t,0,r,i,u,a,l,c,Wd)).context=fd(null),n=t.current,(i=ya(r=Ue(r=Xc()))).callback=null,_a(n,i,r),n=r,t.current.lanes=n,Ie(t,n),Du(t),e[Ge]=t.current,$u(e),new qd(t)},t.version="19.2.0"},16:(e,t,n)=>{"use strict";e.exports=n(492)},43:(e,t,n)=>{"use strict";e.exports=n(288)},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,a(n)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},179:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,L();else{var t=r(u);null!==t&&I(x,t.startTime-e)}}var S,w=!1,M=-1,E=5,T=-1;function A(){return!(t.unstable_now()-T<E)}function C(){if(w){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(M),M=-1),p=!0;var a=f;try{t:{for(b(e),d=r(c);null!==d&&!(d.expirationTime>e&&A());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var o=s(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){d.callback=o,b(e),n=!0;break t}d===r(c)&&i(c),b(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&I(x,l.startTime-e),n=!1}}break e}finally{d=null,f=a,p=!1}n=void 0}}finally{n?S():w=!1}}}if("function"===typeof _)S=function(){_(C)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=C,S=function(){P.postMessage(null)}}else S=function(){v(C,0)};function L(){w||(w=!0,S())}function I(e,n){M=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,L())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(M),M=-1):g=!0,I(x,a-s))):(e.sortIndex=o,n(c,e),m||p||(m=!0,L())),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},205:(e,t,n)=>{"use strict";e.exports=n(252)},252:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=8,t.DefaultEventPriority=32,t.DiscreteEventPriority=2},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function _(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=y.prototype;var x=b.prototype=new _;x.constructor=b,g(x,y.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function w(){}var M={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function T(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return P((u=e._init)(e._payload),t,i,a,s)}}if(u)return s=s(e),u=""===a?"."+R(e,0):a,S(s)?(i="",null!=u&&(i=u.replace(C,"$&/")+"/"),P(s,t,i,"",function(e){return e})):null!=s&&(A(s)&&(l=s,c=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+u,s=T(l.type,c,l.props)),t.push(s)),1;u=0;var h,f=""===a?".":a+":";if(S(e))for(var m=0;m<e.length;m++)u+=P(a=e[m],t,i,o=f+R(a,m),s);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(a=e.next()).done;)u+=P(a=a.value,t,i,o=f+R(a,m++),s);else if("object"===o){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(w,w):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,a,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function L(e,t,n){if(null==e)return e;var r=[],i=0;return P(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},N={map:L,forEach:function(e,t,n){L(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return L(e,function(){t++}),t},toArray:function(e){return L(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=N,t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return M.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(a in void 0!==t.key&&(i=""+t.key),t)!E.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];r.children=s}return T(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return T(e,a,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.T,n={};M.T=n;try{var r=e(),i=M.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(w,k)}catch(a){k(a)}finally{null!==t&&null!==n.types&&(t.types=n.types),M.T=t}},t.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},t.use=function(e){return M.H.use(e)},t.useActionState=function(e,t,n){return M.H.useActionState(e,t,n)},t.useCallback=function(e,t){return M.H.useCallback(e,t)},t.useContext=function(e){return M.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return M.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return M.H.useEffect(e,t)},t.useEffectEvent=function(e){return M.H.useEffectEvent(e)},t.useId=function(){return M.H.useId()},t.useImperativeHandle=function(e,t,n){return M.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.H.useMemo(e,t)},t.useOptimistic=function(e,t){return M.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return M.H.useReducer(e,t,n)},t.useRef=function(e){return M.H.useRef(e)},t.useState=function(e){return M.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.H.useTransition()},t.version="19.2.0"},330:(e,t,n)=>{"use strict";var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,s=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return o(function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})},[e,n,t]),s(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},388:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,L();else{var t=r(u);null!==t&&I(x,t.startTime-e)}}var S,w=!1,M=-1,E=5,T=-1;function A(){return!(t.unstable_now()-T<E)}function C(){if(w){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(M),M=-1),p=!0;var a=f;try{t:{for(b(e),d=r(c);null!==d&&!(d.expirationTime>e&&A());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var o=s(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){d.callback=o,b(e),n=!0;break t}d===r(c)&&i(c),b(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&I(x,l.startTime-e),n=!1}}break e}finally{d=null,f=a,p=!1}n=void 0}}finally{n?S():w=!1}}}if("function"===typeof _)S=function(){_(C)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=C,S=function(){P.postMessage(null)}}else S=function(){v(C,0)};function L(){w||(w=!0,S())}function I(e,n){M=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,L())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(y(M),M=-1):g=!0,I(x,a-s))):(e.sortIndex=o,n(c,e),m||p||(m=!0,L())),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},443:(e,t,n)=>{"use strict";e.exports=n(717)},461:(e,t,n)=>{"use strict";e.exports=n(330)},492:(e,t,n)=>{"use strict";e.exports=function(e){function t(e,t,n,r){return new Mi(e,t,n,r)}function r(){}function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=la&&e[la]||e["@@iterator"])?e:null}function s(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===ca?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case qi:return"Fragment";case Xi:return"Portal";case Zi:return"Profiler";case Yi:return"StrictMode";case ea:return"Suspense";case ta:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case Qi:return(e.displayName||"Context")+".Provider";case Ji:return(e._context.displayName||"Context")+".Consumer";case $i:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case na:return null!==(t=e.displayName||null)?t:s(e.type)||"Memo";case ra:t=e._payload,e=e._init;try{return s(e(t))}catch(n){}}return null}function o(e){if(void 0===aa)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);aa=t&&t[1]||"",sa=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+aa+e+sa}function l(e,t){if(!e||ha)return"";ha=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){r=a}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],l=a[1];if(s&&l){var c=s.split("\n"),u=l.split("\n");for(i=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===c.length||i===u.length)for(r=c.length-1,i=u.length-1;1<=r&&0<=i&&c[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||c[r]!==u[i]){var h="\n"+c[r].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}}while(1<=r&&0<=i);break}}}finally{ha=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?o(n):""}function c(e){switch(e.tag){case 26:case 27:case 5:return o(e.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return e=l(e.type,!1);case 11:return e=l(e.type.render,!1);case 1:return e=l(e.type,!0);default:return""}}function u(e){try{var t="";do{t+=c(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function h(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function d(e){if(h(e)!==e)throw Error(i(188))}function f(e){var t=e.alternate;if(!t){if(null===(t=h(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return d(a),e;if(s===r)return d(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=p(e)))return t;e=e.sibling}return null}function m(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(4!==e.tag&&null!==(t=m(e)))return t;e=e.sibling}return null}function g(e){return{current:e}}function v(e){0>yo||(e.current=vo[yo],vo[yo]=null,yo--)}function y(e,t){yo++,vo[yo]=e.current,e.current=t}function _(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function b(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=e.warmLanes;e=0!==e.finishedLanes;var o=134217727&n;return 0!==o?0!==(n=o&~i)?r=_(n):0!==(a&=o)?r=_(a):e||0!==(s=o&~s)&&(r=_(s)):0!==(o=n&~i)?r=_(o):0!==a?r=_(a):e||0!==(s=n&~s)&&(r=_(s)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||32===i&&0!==(4194176&s))?t:r}function x(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function S(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function w(){var e=wo;return 0===(4194176&(wo<<=1))&&(wo=128),e}function M(){var e=Mo;return 0===(62914560&(Mo<<=1))&&(Mo=4194304),e}function E(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function T(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function A(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-bo(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function C(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bo(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function R(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function P(e){if("function"===typeof No&&Do(e),Oo&&"function"===typeof Oo.setStrictMode)try{Oo.setStrictMode(Uo,e)}catch(t){}}function L(e,t){if("object"===typeof e&&null!==e){var n=zo.get(e);return void 0!==n?n:(t={value:e,source:t,stack:u(t)},zo.set(e,t),t)}return{value:e,source:t,stack:u(t)}}function I(e,t){Bo[Ho++]=Go,Bo[Ho++]=Vo,Vo=e,Go=t}function k(e,t,n){jo[Wo++]=qo,jo[Wo++]=Yo,jo[Wo++]=Xo,Xo=e;var r=qo;e=Yo;var i=32-bo(r)-1;r&=~(1<<i),n+=1;var a=32-bo(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,qo=1<<32-bo(t)+i|n<<i|r,Yo=a+e}else qo=1<<a|n<<i|r,Yo=e}function N(e){null!==e.return&&(I(e,1),k(e,1,0))}function D(e){for(;e===Vo;)Vo=Bo[--Ho],Bo[Ho]=null,Go=Bo[--Ho],Bo[Ho]=null;for(;e===Xo;)Xo=jo[--Wo],jo[Wo]=null,Yo=jo[--Wo],jo[Wo]=null,qo=jo[--Wo],jo[Wo]=null}function U(e,t){y(Jo,t),y(Ko,e),y(Zo,null),e=va(t),v(Zo),y(Zo,e)}function O(){v(Zo),v(Ko),v(Jo)}function F(e){null!==e.memoizedState&&y(Qo,e);var t=Zo.current,n=ya(t,e.type);t!==n&&(y(Ko,e),y(Zo,n))}function z(e){Ko.current===e&&(v(Zo),v(Ko)),Qo.current===e&&(v(Qo),Ra?Xa._currentValue=Wa:Xa._currentValue2=Wa)}function B(e){throw W(L(Error(i(418,"")),e)),il}function H(e,t){if(!Ia)throw Error(i(175));zs(e.stateNode,e.type,e.memoizedProps,t,e)||B(e)}function V(e){for($o=e.return;$o;)switch($o.tag){case 3:case 27:return void(rl=!0);case 5:case 13:return void(rl=!1);default:$o=$o.return}}function G(e){if(!Ia||e!==$o)return!1;if(!tl)return V(e),tl=!0,!1;var t=!1;if(uo?3!==e.tag&&27!==e.tag&&(5!==e.tag||qs(e.type)&&!Ma(e.type,e.memoizedProps))&&(t=!0):3!==e.tag&&(5!==e.tag||qs(e.type)&&!Ma(e.type,e.memoizedProps))&&(t=!0),t&&el&&B(e),V(e),13===e.tag){if(!Ia)throw Error(i(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));el=Vs(e)}else el=$o?Is(e.stateNode):null;return!0}function j(){Ia&&(el=$o=null,tl=!1)}function W(e){null===nl?nl=[e]:nl.push(e)}function X(){for(var e=sl,t=ol=sl=0;t<e;){var n=al[t];al[t++]=null;var r=al[t];al[t++]=null;var i=al[t];al[t++]=null;var a=al[t];if(al[t++]=null,null!==r&&null!==i){var s=r.pending;null===s?i.next=i:(i.next=s.next,s.next=i),r.pending=i}0!==a&&K(n,i,a)}}function q(e,t,n,r){al[sl++]=e,al[sl++]=t,al[sl++]=n,al[sl++]=r,ol|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Y(e,t,n,r){return q(e,t,n,r),J(e)}function Z(e,t){return q(e,null,null,t),J(e)}function K(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;i&&null!==t&&3===e.tag&&(a=e.stateNode,i=31-bo(n),null===(e=(a=a.hiddenUpdates)[i])?a[i]=[t]:e.push(t),t.lane=536870912|n)}function J(e){if(50<nu)throw nu=0,ru=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function Q(e){var t;e!==cl&&null===e.next&&(null===cl?ll=cl=e:cl=cl.next=e),hl=!0,ul||(ul=!0,t=ee,Ya?Za(function(){0!==(6&Cc)?Eo(Po,t):t()}):Eo(Po,t))}function $(e,t){if(!dl&&hl){dl=!0;do{for(var n=!1,r=ll;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var s=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-bo(42|e)+1)-1,a=201326677&(a&=i&~(s&~o))?201326677&a|1:a?2|a:0}0!==a&&(n=!0,re(r,a))}else a=Lc,0===(3&(a=b(r,r===Rc?a:0)))||x(r,a)||(n=!0,re(r,a));r=r.next}}while(n);dl=!1}}function ee(){hl=ul=!1;var e=0;0!==fl&&(Fa()&&(e=fl),fl=0);for(var t=Ro(),n=null,r=ll;null!==r;){var i=r.next,a=te(r,t);0===a?(r.next=null,null===n?ll=i:n.next=i,null===i&&(cl=n)):(n=r,(0!==e||0!==(3&a))&&(hl=!0)),r=i}$(e,!1)}function te(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-bo(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=S(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(n=Lc,n=b(e,e===(t=Rc)?n:0),r=e.callbackNode,0===n||e===t&&2===Ic||null!==e.cancelPendingCommit)return null!==r&&null!==r&&To(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||x(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&To(r),R(n)){case 2:case 8:n=Lo;break;case 32:default:n=Io;break;case 268435456:n=ko}return r=ne.bind(null,e),n=Eo(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&To(r),e.callbackPriority=2,e.callbackNode=null,2}function ne(e,t){var n=e.callbackNode;if(gi()&&e.callbackNode!==n)return null;var r=Lc;return 0===(r=b(e,e===Rc?r:0))?null:(qr(e,r,t),te(e,Ro()),null!=e.callbackNode&&e.callbackNode===n?ne.bind(null,e):null)}function re(e,t){if(gi())return null;qr(e,t,!0)}function ie(){return 0===fl&&(fl=w()),fl}function ae(){if(0===--ml&&null!==pl){null!==vl&&(vl.status="fulfilled");var e=pl;pl=null,gl=0,vl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function se(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function le(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ce(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=J(e),K(e,null,n),t}return q(e,r,t,n),J(e)}function ue(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,C(e,n)}}function he(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function de(){if(_l){if(null!==vl)throw vl}}function fe(e,t,n,r){_l=!1;var i=e.updateQueue;yl=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(s=0,u=c=l=null,o=a;;){var d=-536870913&o.lane,f=d!==o.lane;if(f?(Lc&d)===d:(r&d)===d){0!==d&&d===gl&&(_l=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,m=o;d=t;var g=n;switch(m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(g,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(g,h,d):p)||void 0===d)break e;h=Gi({},h,d);break e;case 2:yl=!0}}null!==(d=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[d]:f.push(d))}else f={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(f=o).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===a&&(i.shared.lanes=0),zc|=s,e.lanes=s,e.memoizedState=h}}function pe(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function me(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)pe(n[e],t)}function ge(e,t){if(Fo(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bl.call(t,i)||!Fo(e[i],t[i]))return!1}return!0}function ve(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ye(){}function _e(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ye,ye),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===xl)throw Error(i(483));throw e;default:if("string"===typeof t.status)t.then(ye,ye);else{if(null!==(e=Rc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===xl)throw Error(i(483));throw e}throw Ml=t,xl}}function be(){if(null===Ml)throw Error(i(459));var e=Ml;return Ml=null,e}function xe(e){var t=Tl;return Tl+=1,null===El&&(El=[]),_e(El,e,t)}function Se(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function we(e,t){if(t.$$typeof===ji)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Me(e){return(0,e._init)(e._payload)}function Ee(e){function n(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Ti(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function c(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Li(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n,r){var i=n.type;return i===qi?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===ra&&Me(i)===t.type)?(Se(t=o(t,n.props),n),t.return=e,t):(Se(t=Ci(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ii(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Ri(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Li(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Wi:return Se(n=Ci(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case Xi:return(t=Ii(t,e.mode,n)).return=e,t;case ra:return p(e,t=(0,t._init)(t._payload),n)}if(da(t)||a(t))return(t=Ri(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return p(e,xe(t),n);if(t.$$typeof===Qi)return p(e,kn(e,t),n);we(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Wi:return n.key===i?h(e,t,n,r):null;case Xi:return n.key===i?d(e,t,n,r):null;case ra:return m(e,t,n=(i=n._init)(n._payload),r)}if(da(n)||a(n))return null!==i?null:f(e,t,n,r,null);if("function"===typeof n.then)return m(e,t,xe(n),r);if(n.$$typeof===Qi)return m(e,t,kn(e,n),r);we(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Wi:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Xi:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case ra:return g(e,t,n,r=(0,r._init)(r._payload),i)}if(da(r)||a(r))return f(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return g(e,t,n,xe(r),i);if(r.$$typeof===Qi)return g(e,t,n,kn(t,r),i);we(t,r)}return null}function v(t,u,h,d){if("object"===typeof h&&null!==h&&h.type===qi&&null===h.key&&(h=h.props.children),"object"===typeof h&&null!==h){switch(h.$$typeof){case Wi:e:{for(var f=h.key;null!==u;){if(u.key===f){if((f=h.type)===qi){if(7===u.tag){r(t,u.sibling),(d=o(u,h.props.children)).return=t,t=d;break e}}else if(u.elementType===f||"object"===typeof f&&null!==f&&f.$$typeof===ra&&Me(f)===u.type){r(t,u.sibling),Se(d=o(u,h.props),h),d.return=t,t=d;break e}r(t,u);break}n(t,u),u=u.sibling}h.type===qi?((d=Ri(h.props.children,t.mode,d,h.key)).return=t,t=d):(Se(d=Ci(h.type,h.key,h.props,null,t.mode,d),h),d.return=t,t=d)}return c(t);case Xi:e:{for(f=h.key;null!==u;){if(u.key===f){if(4===u.tag&&u.stateNode.containerInfo===h.containerInfo&&u.stateNode.implementation===h.implementation){r(t,u.sibling),(d=o(u,h.children||[])).return=t,t=d;break e}r(t,u);break}n(t,u),u=u.sibling}(d=Ii(h,t.mode,d)).return=t,t=d}return c(t);case ra:return v(t,u,h=(f=h._init)(h._payload),d)}if(da(h))return function(t,i,a,o){for(var c=null,u=null,h=i,d=i=0,f=null;null!==h&&d<a.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var v=m(t,h,a[d],o);if(null===v){null===h&&(h=f);break}e&&h&&null===v.alternate&&n(t,h),i=l(v,i,d),null===u?c=v:u.sibling=v,u=v,h=f}if(d===a.length)return r(t,h),tl&&I(t,d),c;if(null===h){for(;d<a.length;d++)null!==(h=p(t,a[d],o))&&(i=l(h,i,d),null===u?c=h:u.sibling=h,u=h);return tl&&I(t,d),c}for(h=s(h);d<a.length;d++)null!==(f=g(h,t,d,a[d],o))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),i=l(f,i,d),null===u?c=f:u.sibling=f,u=f);return e&&h.forEach(function(e){return n(t,e)}),tl&&I(t,d),c}(t,u,h,d);if(a(h)){if("function"!==typeof(f=a(h)))throw Error(i(150));return function(t,a,o,c){if(null==o)throw Error(i(151));for(var u=null,h=null,d=a,f=a=0,v=null,y=o.next();null!==d&&!y.done;f++,y=o.next()){d.index>f?(v=d,d=null):v=d.sibling;var _=m(t,d,y.value,c);if(null===_){null===d&&(d=v);break}e&&d&&null===_.alternate&&n(t,d),a=l(_,a,f),null===h?u=_:h.sibling=_,h=_,d=v}if(y.done)return r(t,d),tl&&I(t,f),u;if(null===d){for(;!y.done;f++,y=o.next())null!==(y=p(t,y.value,c))&&(a=l(y,a,f),null===h?u=y:h.sibling=y,h=y);return tl&&I(t,f),u}for(d=s(d);!y.done;f++,y=o.next())null!==(y=g(d,t,f,y.value,c))&&(e&&null!==y.alternate&&d.delete(null===y.key?f:y.key),a=l(y,a,f),null===h?u=y:h.sibling=y,h=y);return e&&d.forEach(function(e){return n(t,e)}),tl&&I(t,f),u}(t,u,h=f.call(h),d)}if("function"===typeof h.then)return v(t,u,xe(h),d);if(h.$$typeof===Qi)return v(t,u,kn(t,h),d);we(t,h)}return"string"===typeof h&&""!==h||"number"===typeof h||"bigint"===typeof h?(h=""+h,null!==u&&6===u.tag?(r(t,u.sibling),(d=o(u,h)).return=t,t=d):(r(t,u),(d=Li(h,t.mode,d)).return=t,t=d),c(t)):r(t,u)}return function(e,n,r,i){try{Tl=0;var a=v(e,n,r,i);return El=null,a}catch(o){if(o===xl)throw o;var s=t(29,o,null,e.mode);return s.lanes=i,s.return=e,s}}}function Te(e,t){y(Pl,e=Oc),y(Rl,t),Oc=e|t.baseLanes}function Ae(){y(Pl,Oc),y(Rl,Rl.current)}function Ce(){Oc=Pl.current,v(Rl),v(Pl)}function Re(e){var t=e.alternate;y(kl,1&kl.current),y(Ll,e),null===Il&&(null===t||null!==Rl.current||null!==t.memoizedState)&&(Il=e)}function Pe(e){if(22===e.tag){if(y(kl,kl.current),y(Ll,e),null===Il){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Il=e)}}else Le()}function Le(){y(kl,kl.current),y(Ll,Ll.current)}function Ie(e){v(Ll),Il===e&&(Il=null),v(kl)}function ke(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ts(n)||As(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ne(){throw Error(i(321))}function De(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fo(e[n],t[n]))return!1;return!0}function Ue(e,t,n,r,i,a){return Nl=a,Dl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ua.H=null===e||null===e.memoizedState?ql:Yl,Bl=!1,a=n(r,i),Bl=!1,zl&&(a=Fe(t,n,r,i)),Oe(e),a}function Oe(e){ua.H=Xl;var t=null!==Ul&&null!==Ul.next;if(Nl=0,Ol=Ul=Dl=null,Fl=!1,Vl=0,Gl=null,t)throw Error(i(300));null===e||$l||null!==(e=e.dependencies)&&Pn(e)&&($l=!0)}function Fe(e,t,n,r){Dl=e;var a=0;do{if(zl&&(Gl=null),Vl=0,zl=!1,25<=a)throw Error(i(301));if(a+=1,Ol=Ul=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}ua.H=Zl,s=t(n,r)}while(zl);return s}function ze(){var e=ua.H,t=e.useState()[0];return t="function"===typeof t.then?We(t):t,e=e.useState()[0],(null!==Ul?Ul.memoizedState:null)!==e&&(Dl.flags|=1024),t}function Be(){var e=0!==Hl;return Hl=0,e}function He(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ve(e){if(Fl){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Fl=!1}Nl=0,Ol=Ul=Dl=null,zl=!1,Vl=Hl=0,Gl=null}function Ge(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ol?Dl.memoizedState=Ol=e:Ol=Ol.next=e,Ol}function je(){if(null===Ul){var e=Dl.alternate;e=null!==e?e.memoizedState:null}else e=Ul.next;var t=null===Ol?Dl.memoizedState:Ol.next;if(null!==t)Ol=t,Ul=e;else{if(null===e){if(null===Dl.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(Ul=e).memoizedState,baseState:Ul.baseState,baseQueue:Ul.baseQueue,queue:Ul.queue,next:null},null===Ol?Dl.memoizedState=Ol=e:Ol=Ol.next=e}return Ol}function We(e){var t=Vl;return Vl+=1,null===Gl&&(Gl=[]),e=_e(Gl,e,t),t=Dl,null===(null===Ol?t.memoizedState:Ol.next)&&(t=t.alternate,ua.H=null===t||null===t.memoizedState?ql:Yl),e}function Xe(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return We(e);if(e.$$typeof===Qi)return In(e)}throw Error(i(438,String(e)))}function qe(e){var t=null,n=Dl.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Dl.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n=Wl(),Dl.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=oa;return t.index++,n}function Ye(e,t){return"function"===typeof t?t(e):t}function Ze(e){return Ke(je(),Ul,e)}function Ke(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,s=r.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}t.baseQueue=a=s,r.pending=null}if(s=e.baseState,null===a)e.memoizedState=s;else{var l=o=null,c=null,u=t=a.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(Lc&d)===d:(Nl&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===gl&&(h=!0);else{if((Nl&f)===f){u=u.next,f===gl&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,o=s):c=c.next=d,Dl.lanes|=f,zc|=f}d=u.action,Bl&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,Dl.lanes|=d,zc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Fo(s,e.memoizedState)&&($l=!0,h&&null!==(n=vl)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Je(e){var t=je(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);Fo(s,t.memoizedState)||($l=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Qe(e,t,n){var r=Dl,a=je(),s=tl;if(s){if(void 0===n)throw Error(i(407));n=n()}else n=t();var o=!Fo((Ul||a).memoizedState,n);if(o&&(a.memoizedState=n,$l=!0),a=a.queue,wt(tt.bind(null,r,a,e),[e]),a.getSnapshot!==t||o||null!==Ol&&1&Ol.memoizedState.tag){if(r.flags|=2048,yt(9,et.bind(null,r,a,n,t),{destroy:void 0},null),null===Rc)throw Error(i(349));s||0!==(60&Nl)||$e(r,t,n)}return n}function $e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Dl.updateQueue)?(t=Wl(),Dl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function et(e,t,n,r){t.value=n,t.getSnapshot=r,nt(t)&&rt(e)}function tt(e,t,n){return n(function(){nt(t)&&rt(e)})}function nt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fo(e,n)}catch(r){return!0}}function rt(e){var t=Z(e,2);null!==t&&Xr(t,e,2)}function it(e){var t=Ge();if("function"===typeof e){var n=e;if(e=n(),Bl){P(!0);try{n()}finally{P(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ye,lastRenderedState:e},t}function at(e,t,n,r){return e.baseState=n,Ke(e,Ul,"function"===typeof r?r:Ye)}function st(e,t,n,r,a){if(Gt(e))throw Error(i(485));if(null!==(e=t.action)){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==ua.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,ot(t,s)):(s.next=n.next,t.pending=n.next=s)}}function ot(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=ua.T,s={};ua.T=s;try{var o=n(i,r),l=ua.S;null!==l&&l(s,o),lt(e,t,o)}catch(c){ut(e,t,c)}finally{ua.T=a}}else try{lt(e,t,a=n(i,r))}catch(u){ut(e,t,u)}}function lt(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ct(e,t,n)},function(n){return ut(e,t,n)}):ct(e,t,n)}function ct(e,t,n){t.status="fulfilled",t.value=n,ht(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ot(e,n)))}function ut(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ht(t),t=t.next}while(t!==r)}e.action=null}function ht(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function dt(e,t){return t}function ft(e,t){if(tl){var n=Rc.formState;if(null!==n){e:{var r=Dl;if(tl){if(el){var i=Ps(el,rl);if(i){el=Is(i),r=Ls(i);break e}}B(r)}r=!1}r&&(t=n[0])}}(n=Ge()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dt,lastRenderedState:t},n.queue=r,n=Bt.bind(null,Dl,r),r.dispatch=n,r=it(!1);var a=Vt.bind(null,Dl,!1,r.queue);return i={state:t,dispatch:null,action:e,pending:null},(r=Ge()).queue=i,n=st.bind(null,Dl,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function pt(e){return mt(je(),Ul,e)}function mt(e,t,n){t=Ke(e,t,dt)[0],e=Ze(Ye)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?We(t):t;var r=je(),i=r.queue,a=i.dispatch;return n!==r.memoizedState&&(Dl.flags|=2048,yt(9,gt.bind(null,i,n),{destroy:void 0},null)),[t,a,e]}function gt(e,t){e.action=t}function vt(e){var t=je(),n=Ul;if(null!==n)return mt(t,n,e);je(),t=t.memoizedState;var r=(n=je()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function yt(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=Dl.updateQueue)&&(t=Wl(),Dl.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function _t(){return je().memoizedState}function bt(e,t,n,r){var i=Ge();Dl.flags|=e,i.memoizedState=yt(1|t,n,{destroy:void 0},void 0===r?null:r)}function xt(e,t,n,r){var i=je();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==Ul&&null!==r&&De(r,Ul.memoizedState.deps)?i.memoizedState=yt(t,n,a,r):(Dl.flags|=e,i.memoizedState=yt(1|t,n,a,r))}function St(e,t){bt(8390656,8,e,t)}function wt(e,t){xt(2048,8,e,t)}function Mt(e,t){return xt(4,2,e,t)}function Et(e,t){return xt(4,4,e,t)}function Tt(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function At(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,xt(4,4,Tt.bind(null,t,e),n)}function Ct(){}function Rt(e,t){var n=je();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&De(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pt(e,t){var n=je();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&De(t,r[1]))return r[0];if(r=e(),Bl){P(!0);try{e()}finally{P(!1)}}return n.memoizedState=[r,t],r}function Lt(e,t,n){return void 0===n||0!==(1073741824&Nl)?e.memoizedState=t:(e.memoizedState=n,e=Wr(),Dl.lanes|=e,zc|=e,n)}function It(e,t,n,r){return Fo(n,t)?n:null!==Rl.current?(e=Lt(e,n,r),Fo(e,t)||($l=!0),e):0===(42&Nl)?($l=!0,e.memoizedState=n):(e=Wr(),Dl.lanes|=e,zc|=e,t)}function kt(e,t,n,r,i){var a=Ua();Da(0!==a&&8>a?a:8);var s=ua.T,o={};ua.T=o,Vt(e,!1,t,n);try{var l=i(),c=ua.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ht(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),jr());else Ht(e,t,r,jr())}catch(u){Ht(e,t,{then:function(){},status:"rejected",reason:u},jr())}finally{Da(a),ua.T=s}}function Nt(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:Wa,baseState:Wa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ye,lastRenderedState:Wa},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ye,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Dt(){return In(Xa)}function Ut(){return je().memoizedState}function Ot(){return je().memoizedState}function Ft(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=jr(),r=ce(t,e=le(n),n);return null!==r&&(Xr(r,t,n),ue(r,t,n)),t={cache:Dn()},void(e.payload=t)}t=t.return}}function zt(e,t,n){var r=jr();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Gt(e)?jt(t,n):null!==(n=Y(e,t,n,r))&&(Xr(n,e,r),Wt(n,t,r))}function Bt(e,t,n){Ht(e,t,n,jr())}function Ht(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gt(e))jt(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Fo(o,s))return q(e,t,i,0),null===Rc&&X(),!1}catch(l){}if(null!==(n=Y(e,t,i,r)))return Xr(n,e,r),Wt(n,t,r),!0}return!1}function Vt(e,t,n,r){if(r={lane:2,revertLane:ie(),action:r,hasEagerState:!1,eagerState:null,next:null},Gt(e)){if(t)throw Error(i(479))}else null!==(t=Y(e,n,r,2))&&Xr(t,e,2)}function Gt(e){var t=e.alternate;return e===Dl||null!==t&&t===Dl}function jt(e,t){zl=Fl=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wt(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,C(e,n)}}function Xt(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:Gi({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function qt(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!ge(n,r)||!ge(i,a))}function Yt(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Kl.enqueueReplaceState(t,t.state,null)}function Zt(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=Gi({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function Kt(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Jt(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Qt(e,t,n){return(n=le(n)).tag=3,n.payload={element:null},n.callback=function(){Kt(e,t)},n}function $t(e){return(e=le(e)).tag=3,e}function en(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Jt(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Jt(t,n,r),"function"!==typeof i&&(null===Kc?Kc=new Set([this]):Kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}function tn(e,t,n,r){t.child=null===e?Cl(t,null,n,r):Al(t,e.child,n,r)}function nn(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var s={};for(var o in r)"ref"!==o&&(s[o]=r[o])}else s=r;return Ln(t),r=Ue(e,t,n,s,a,i),o=Be(),null===e||$l?(tl&&o&&N(t),t.flags|=1,tn(e,t,r,i),t.child):(He(e,t,i),Sn(e,t,i))}function rn(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ei(a)||void 0!==a.defaultProps||null!==n.compare?((e=Ci(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,an(e,t,a,r,i))}if(a=e.child,!wn(e,i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:ge)(s,r)&&e.ref===t.ref)return Sn(e,t,i)}return t.flags|=1,(e=Ti(a,r)).ref=t.ref,e.return=t,t.child=e}function an(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ge(a,r)&&e.ref===t.ref){if($l=!1,t.pendingProps=r=a,!wn(e,i))return t.lanes=e.lanes,Sn(e,t,i);0!==(131072&e.flags)&&($l=!0)}}return cn(e,t,n,r,i)}function sn(e,t,n){var r=t.pendingProps,i=r.children,a=0!==(2&t.stateNode._pendingVisibility),s=null!==e?e.memoizedState:null;if(ln(e,t),"hidden"===r.mode||a){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,a=0;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return on(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,on(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Fn(t,null!==s?s.cachePool:null),null!==s?Te(t,s):Ae(),Pe(t)}else null!==s?(Fn(t,s.cachePool),Te(t,s),Le(),t.memoizedState=null):(null!==e&&Fn(t,null),Ae(),Le());return tn(e,t,i,n),t.child}function on(e,t,n,r){var i=On();return i=null===i?null:{parent:Ra?oc._currentValue:oc._currentValue2,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Fn(t,null),Ae(),Pe(t),null!==e&&Rn(e,t,r,!0),null}function ln(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function cn(e,t,n,r,i){return Ln(t),n=Ue(e,t,n,r,void 0,i),r=Be(),null===e||$l?(tl&&r&&N(t),t.flags|=1,tn(e,t,n,i),t.child):(He(e,t,i),Sn(e,t,i))}function un(e,t,n,r,i,a){return Ln(t),t.updateQueue=null,n=Fe(t,r,n,i),Oe(e),r=Be(),null===e||$l?(tl&&r&&N(t),t.flags|=1,tn(e,t,n,a),t.child):(He(e,t,a),Sn(e,t,a))}function hn(e,t,n,r,i){if(Ln(t),null===t.stateNode){var a=_o,s=n.contextType;"object"===typeof s&&null!==s&&(a=In(s)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=Kl,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},se(t),s=n.contextType,a.context="object"===typeof s&&null!==s?In(s):_o,a.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(Xt(t,n,s,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(s=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&Kl.enqueueReplaceState(a,a.state,null),fe(t,r,a,i),de(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=Zt(n,o);a.props=l;var c=a.context,u=n.contextType;s=_o,"object"===typeof u&&null!==u&&(s=In(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o||c!==s)&&Yt(t,a,r,s),yl=!1;var d=t.memoizedState;a.state=d,fe(t,r,a,i),de(),c=t.memoizedState,o||d!==c||yl?("function"===typeof h&&(Xt(t,n,h,r),c=t.memoizedState),(l=yl||qt(t,n,l,r,d,c,s))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=s,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,oe(e,t),u=Zt(n,s=t.memoizedProps),a.props=u,h=t.pendingProps,d=a.context,c=n.contextType,l=_o,"object"===typeof c&&null!==c&&(l=In(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&Yt(t,a,r,l),yl=!1,d=t.memoizedState,a.state=d,fe(t,r,a,i),de();var f=t.memoizedState;s!==h||d!==f||yl||null!==e&&null!==e.dependencies&&Pn(e.dependencies)?("function"===typeof o&&(Xt(t,n,o,r),f=t.memoizedState),(u=yl||qt(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Pn(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,ln(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=Al(t,e.child,null,i),t.child=Al(t,null,n,i)):tn(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Sn(e,t,i),e}function dn(e,t,n,r){return j(),t.flags|=256,tn(e,t,n,r),t.child}function fn(e){return{baseLanes:e,cachePool:zn()}}function pn(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Vc),e}function mn(e,n,r){var a,s=n.pendingProps,o=!1,l=0!==(128&n.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&kl.current)),a&&(o=!0,n.flags&=-129),a=0!==(32&n.flags),n.flags&=-33,null===e){if(tl){if(o?Re(n):Le(),tl){var c,u=el;(c=u)&&(null!==(u=Fs(u,rl))?(n.memoizedState={dehydrated:u,treeContext:null!==Xo?{id:qo,overflow:Yo}:null,retryLane:536870912},(c=t(18,null,null,0)).stateNode=u,c.return=n,n.child=c,$o=n,el=null,c=!0):c=!1),c||B(n)}if(null!==(u=n.memoizedState)&&null!==(u=u.dehydrated))return As(u)?n.lanes=16:n.lanes=536870912,null;Ie(n)}return u=s.children,s=s.fallback,o?(Le(),u=vn({mode:"hidden",children:u},o=n.mode),s=Ri(s,o,r,null),u.return=n,s.return=n,u.sibling=s,n.child=u,(o=n.child).memoizedState=fn(r),o.childLanes=pn(e,a,r),n.memoizedState=ec,s):(Re(n),gn(n,u))}if(null!==(c=e.memoizedState)&&null!==(u=c.dehydrated)){if(l)256&n.flags?(Re(n),n.flags&=-257,n=yn(e,n,r)):null!==n.memoizedState?(Le(),n.child=e.child,n.flags|=128,n=null):(Le(),o=s.fallback,u=n.mode,s=vn({mode:"visible",children:s.children},u),(o=Ri(o,u,r,null)).flags|=2,s.return=n,o.return=n,s.sibling=o,n.child=s,Al(n,e.child,null,r),(s=n.child).memoizedState=fn(r),s.childLanes=pn(e,a,r),n.memoizedState=ec,n=o);else if(Re(n),As(u))a=Cs(u).digest,(s=Error(i(419))).stack="",s.digest=a,W({value:s,source:null,stack:null}),n=yn(e,n,r);else if($l||Rn(e,n,r,!1),a=0!==(r&e.childLanes),$l||a){if(null!==(a=Rc)){if(0!==(42&(s=r&-r)))s=1;else switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=64;break;case 268435456:s=134217728;break;default:s=0}if(0!==(s=0!==(s&(a.suspendedLanes|r))?0:s)&&s!==c.retryLane)throw c.retryLane=s,Z(e,s),Xr(a,e,s),Ql}Ts(u)||ai(),n=yn(e,n,r)}else Ts(u)?(n.flags|=128,n.child=e.child,n=Si.bind(null,e),Rs(u,n),n=null):(e=c.treeContext,Ia&&(el=Ds(u),$o=n,tl=!0,nl=null,rl=!1,null!==e&&(jo[Wo++]=qo,jo[Wo++]=Yo,jo[Wo++]=Xo,qo=e.id,Yo=e.overflow,Xo=n)),(n=gn(n,s.children)).flags|=4096);return n}return o?(Le(),o=s.fallback,u=n.mode,l=(c=e.child).sibling,(s=Ti(c,{mode:"hidden",children:s.children})).subtreeFlags=31457280&c.subtreeFlags,null!==l?o=Ti(l,o):(o=Ri(o,u,r,null)).flags|=2,o.return=n,s.return=n,s.sibling=o,n.child=s,s=o,o=n.child,null===(u=e.child.memoizedState)?u=fn(r):(null!==(c=u.cachePool)?(l=Ra?oc._currentValue:oc._currentValue2,c=c.parent!==l?{parent:l,pool:l}:c):c=zn(),u={baseLanes:u.baseLanes|r,cachePool:c}),o.memoizedState=u,o.childLanes=pn(e,a,r),n.memoizedState=ec,s):(Re(n),e=(r=e.child).sibling,(r=Ti(r,{mode:"visible",children:s.children})).return=n,r.sibling=null,null!==e&&(null===(a=n.deletions)?(n.deletions=[e],n.flags|=16):a.push(e)),n.child=r,n.memoizedState=null,r)}function gn(e,t){return(t=vn({mode:"visible",children:t},e.mode)).return=e,e.child=t}function vn(e,t){return Pi(e,t,0,null)}function yn(e,t,n){return Al(t,e.child,null,n),(e=gn(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function _n(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),An(e.return,t,n)}function bn(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function xn(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(tn(e,t,r.children,n),0!==(2&(r=kl.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&_n(e,n,t);else if(19===e.tag)_n(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(y(kl,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ke(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),bn(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ke(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}bn(t,!0,n,null,a);break;case"together":bn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sn(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Rn(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ti(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ti(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function wn(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pn(e))}function Mn(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)$l=!0;else{if(!wn(e,n)&&0===(128&t.flags))return $l=!1,function(e,t,n){switch(t.tag){case 3:U(t,t.stateNode.containerInfo),En(t,oc,e.memoizedState.cache),j();break;case 27:case 5:F(t);break;case 4:U(t,t.stateNode.containerInfo);break;case 10:En(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Re(t),t.flags|=128,null):0!==(n&t.child.childLanes)?mn(e,t,n):(Re(t),null!==(e=Sn(e,t,n))?e.sibling:null);Re(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Rn(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return xn(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),y(kl,kl.current),r)break;return null;case 22:case 23:return t.lanes=0,sn(e,t,n);case 24:En(t,oc,e.memoizedState.cache)}return Sn(e,t,n)}(e,t,n);$l=0!==(131072&e.flags)}else $l=!1,tl&&0!==(1048576&t.flags)&&k(t,Go,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((a=r.$$typeof)===$i){t.tag=11,t=nn(null,t,r,e,n);break e}if(a===na){t.tag=14,t=rn(null,t,r,e,n);break e}}throw t=s(r)||r,Error(i(306,t,""))}Ei(r)?(e=Zt(r,e),t.tag=1,t=hn(null,t,r,e,n)):(t.tag=0,t=cn(null,t,r,e,n))}return t;case 0:return cn(e,t,t.type,t.pendingProps,n);case 1:return hn(e,t,r=t.type,a=Zt(r,t.pendingProps),n);case 3:e:{if(U(t,t.stateNode.containerInfo),null===e)throw Error(i(387));var o=t.pendingProps;r=(a=t.memoizedState).element,oe(e,t),fe(t,o,null,n);var l=t.memoizedState;if(o=l.cache,En(t,oc,o),o!==a.cache&&Cn(t,[oc],n,!0),de(),o=l.element,Ia&&a.isDehydrated){if(a={element:o,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=dn(e,t,o,n);break e}if(o!==r){W(r=L(Error(i(424)),t)),t=dn(e,t,o,n);break e}for(Ia&&(el=Ns(t.stateNode.containerInfo),$o=t,tl=!0,nl=null,rl=!0),n=Cl(t,null,o,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(j(),o===r){t=Sn(e,t,n);break e}tn(e,t,o,n)}t=t.child}return t;case 26:if(Ks)return ln(e,t),null===e?(n=$s(t.type,null,t.pendingProps,null))?t.memoizedState=n:tl||(t.stateNode=ao(t.type,t.pendingProps,Jo.current,t)):t.memoizedState=$s(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(uo)return F(t),null===e&&uo&&tl&&(r=t.stateNode=ho(t.type,t.pendingProps,Jo.current,Zo.current,!1),$o=t,rl=!0,el=ks(r)),r=t.pendingProps.children,null!==e||tl?tn(e,t,r,n):t.child=Al(t,null,r,n),ln(e,t),t.child;case 5:return null===e&&tl&&(Ys(t.type,t.pendingProps,Zo.current),(a=r=el)&&(null!==(r=Us(r,t.type,t.pendingProps,rl))?(t.stateNode=r,$o=t,el=ks(r),rl=!1,a=!0):a=!1),a||B(t)),F(t),a=t.type,o=t.pendingProps,l=null!==e?e.memoizedProps:null,r=o.children,Ma(a,o)?r=null:null!==l&&Ma(a,l)&&(t.flags|=32),null!==t.memoizedState&&(a=Ue(e,t,ze,null,null,n),Ra?Xa._currentValue=a:Xa._currentValue2=a),ln(e,t),tn(e,t,r,n),t.child;case 6:return null===e&&tl&&(Zs(t.pendingProps,Zo.current),(e=n=el)&&(null!==(n=Os(n,t.pendingProps,rl))?(t.stateNode=n,$o=t,el=null,e=!0):e=!1),e||B(t)),null;case 13:return mn(e,t,n);case 4:return U(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Al(t,null,r,n):tn(e,t,r,n),t.child;case 11:return nn(e,t,t.type,t.pendingProps,n);case 7:return tn(e,t,t.pendingProps,n),t.child;case 8:case 12:return tn(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,En(t,t.type,r.value),tn(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Ln(t),r=r(a=In(a)),t.flags|=1,tn(e,t,r,n),t.child;case 14:return rn(e,t,t.type,t.pendingProps,n);case 15:return an(e,t,t.type,t.pendingProps,n);case 19:return xn(e,t,n);case 22:return sn(e,t,n);case 24:return Ln(t),r=In(oc),null===e?(null===(a=On())&&(a=Rc,o=Dn(),a.pooledCache=o,o.refCount++,null!==o&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},se(t),En(t,oc,a)):(0!==(e.lanes&n)&&(oe(e,t),fe(t,null,null,n),de()),a=e.memoizedState,o=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),En(t,oc,r)):(r=o.cache,En(t,oc,r),r!==a.cache&&Cn(t,[oc],n,!0))),tn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function En(e,t,n){Ra?(y(tc,t._currentValue),t._currentValue=n):(y(tc,t._currentValue2),t._currentValue2=n)}function Tn(e){var t=tc.current;Ra?e._currentValue=t:e._currentValue2=t,v(tc)}function An(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cn(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var s=a.dependencies;if(null!==s){var o=a.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),An(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),An(o,n,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function Rn(e,t,n,r){e=null;for(var a=t,s=!1;null!==a;){if(!s)if(0!==(524288&a.flags))s=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(i(387));if(null!==(o=o.memoizedProps)){var l=a.type;Fo(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===Qo.current){if(null===(o=a.alternate))throw Error(i(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Xa):e=[Xa])}a=a.return}null!==e&&Cn(t,e,n,r),t.flags|=262144}function Pn(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!Fo(Ra?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Ln(e){nc=e,rc=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function In(e){return Nn(nc,e)}function kn(e,t){return null===nc&&Ln(e),Nn(e,t)}function Nn(e,t){var n=Ra?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},null===rc){if(null===e)throw Error(i(308));rc=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else rc=rc.next=t;return n}function Dn(){return{controller:new ic,data:new Map,refCount:0}}function Un(e){e.refCount--,0===e.refCount&&ac(sc,function(){e.controller.abort()})}function On(){var e=cc.current;return null!==e?e:Rc.pooledCache}function Fn(e,t){y(cc,null===t?cc.current:t.pool)}function zn(){var e=On();return null===e?null:{parent:Ra?oc._currentValue:oc._currentValue2,pool:e}}function Bn(e){e.flags|=4}function Hn(e,t){if(null!==e&&e.child===t.child)return!1;if(0!==(16&t.flags))return!0;for(e=t.child;null!==e;){if(0!==(13878&e.flags)||0!==(13878&e.subtreeFlags))return!0;e=e.sibling}return!1}function Vn(e,t,n,r){if(Pa)for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)Sa(e,n.stateNode);else if(!(4===n.tag||uo&&27===n.tag)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(La)for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Ms(a,i.type,i.memoizedProps)),Sa(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=Es(a,i.memoizedProps)),Sa(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),Vn(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Gn(e,t,n,r){if(La)for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Ms(a,i.type,i.memoizedProps)),xs(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=Es(a,i.memoizedProps)),xs(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),Gn(e,i,!(null!==i.memoizedProps&&"manual"===i.memoizedProps.mode),!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function jn(e,t){if(La&&Hn(e,t)){var n=(e=t.stateNode).containerInfo,r=bs();Gn(r,t,!1,!1),e.pendingChildren=r,Bn(t),Ss(n,r)}}function Wn(e,t,n,r){if(Pa)e.memoizedProps!==r&&Bn(t);else if(La){var i=e.stateNode,a=e.memoizedProps;if((e=Hn(e,t))||a!==r){var s=Zo.current;(a=_s(i,n,a,r,!e,null))===i?t.stateNode=i:(wa(a,n,r,s)&&Bn(t),t.stateNode=a,e?Vn(a,t,!1,!1):Bn(t))}else t.stateNode=i}}function Xn(e,t,n){if(Ba(t,n)){if(e.flags|=16777216,!Ha(t,n)){if(!ni())throw Ml=wl,Sl;e.flags|=8192}}else e.flags&=-16777217}function qn(e,t){if(oo(t)){if(e.flags|=16777216,!lo(t)){if(!ni())throw Ml=wl,Sl;e.flags|=8192}}else e.flags&=-16777217}function Yn(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?M():536870912,e.lanes|=t,Gc|=t)}function Zn(e,t){if(!tl)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Kn(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=31457280&i.subtreeFlags,r|=31457280&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jn(e,t,n){var r=t.pendingProps;switch(D(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Kn(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Tn(oc),O(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(G(t)?Bn(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==nl&&(Yr(nl),nl=null))),jn(e,t),Kn(t),null;case 26:if(Ks){n=t.type;var a=t.memoizedState;return null===e?(Bn(t),null!==a?(Kn(t),qn(t,a)):(Kn(t),Xn(t,n,r))):a?a!==e.memoizedState?(Bn(t),Kn(t),qn(t,a)):(Kn(t),t.flags&=-16777217):(Pa?e.memoizedProps!==r&&Bn(t):Wn(e,t,n,r),Kn(t),Xn(t,n,r)),null}case 27:if(uo){if(z(t),n=Jo.current,a=t.type,null!==e&&null!=t.stateNode)Pa?e.memoizedProps!==r&&Bn(t):Wn(e,t,a,r);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Kn(t),null}e=Zo.current,G(t)?H(t,e):(e=ho(a,r,n,e,!0),t.stateNode=e,Bn(t))}return Kn(t),null}case 5:if(z(t),n=t.type,null!==e&&null!=t.stateNode)Wn(e,t,n,r);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Kn(t),null}e=Zo.current,G(t)?H(t,e):(Vn(a=xa(n,r,Jo.current,e,t),t,!1,!1),t.stateNode=a,wa(a,n,r,e)&&Bn(t))}return Kn(t),Xn(t,t.type,t.pendingProps),null;case 6:if(e&&null!=t.stateNode)n=e.memoizedProps,Pa?n!==r&&Bn(t):La&&(n!==r?(t.stateNode=Ea(r,Jo.current,Zo.current,t),Bn(t)):t.stateNode=e.stateNode);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(e=Jo.current,n=Zo.current,G(t)){if(!Ia)throw Error(i(176));if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=$o))switch(a.tag){case 27:case 5:r=a.memoizedProps}Bs(e,n,t,r)||B(t)}else t.stateNode=Ea(r,e,n,t)}return Kn(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=G(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!Ia)throw Error(i(344));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));Hs(a,t)}else j(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Kn(t),a=!1}else null!==nl&&(Yr(nl),nl=null),a=!0;if(!a)return 256&t.flags?(Ie(t),t):(Ie(t),null)}if(Ie(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Yn(t,t.updateQueue),Kn(t),null;case 4:return O(),jn(e,t),null===e&&Na(t.stateNode.containerInfo),Kn(t),null;case 10:return Tn(t.type),Kn(t),null;case 19:if(v(kl),null===(a=t.memoizedState))return Kn(t),null;if(r=0!==(128&t.flags),null===(s=a.rendering))if(r)Zn(a,!1);else{if(0!==Fc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ke(e))){for(t.flags|=128,Zn(a,!1),e=s.updateQueue,t.updateQueue=e,Yn(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ai(n,e),n=n.sibling;return y(kl,1&kl.current|2),t.child}e=e.sibling}null!==a.tail&&Ro()>Yc&&(t.flags|=128,r=!0,Zn(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ke(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Yn(t,e),Zn(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!tl)return Kn(t),null}else 2*Ro()-a.renderingStartTime>Yc&&536870912!==n&&(t.flags|=128,r=!0,Zn(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=a.last)?e.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ro(),t.sibling=null,e=kl.current,y(kl,r?1&e|2:1&e),t):(Kn(t),null);case 22:case 23:return Ie(t),Ce(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Kn(t),6&t.subtreeFlags&&(t.flags|=8192)):Kn(t),null!==(n=t.updateQueue)&&Yn(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&v(cc),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Tn(oc),Kn(t),null;case 25:return null}throw Error(i(156,t.tag))}function Qn(e,t){switch(D(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Tn(oc),O(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return z(t),null;case 13:if(Ie(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));j()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return v(kl),null;case 4:return O(),null;case 10:return Tn(t.type),null;case 22:case 23:return Ie(t),Ce(),null!==e&&v(cc),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Tn(oc),null;default:return null}}function $n(e,t){switch(D(t),t.tag){case 3:Tn(oc),O();break;case 26:case 27:case 5:z(t);break;case 4:O();break;case 13:Ie(t);break;case 19:v(kl);break;case 10:Tn(t.type);break;case 22:case 23:Ie(t),Ce(),null!==e&&v(cc);break;case 24:Tn(oc)}}function er(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,s=n.inst;r=a(),s.destroy=r}n=n.next}while(n!==i)}}catch(o){yi(t,t.return,o)}}function tr(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var s=r.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,i=t;var l=n;try{o()}catch(c){yi(i,l,c)}}}r=r.next}while(r!==a)}}catch(c){yi(t,t.return,c)}}function nr(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{me(t,n)}catch(r){yi(e,e.return,r)}}}function rr(e,t,n){n.props=Zt(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){yi(e,t,r)}}function ir(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=ga(r);break;default:i=r}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(a){yi(e,t,a)}}function ar(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){yi(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){yi(e,t,a)}else n.current=null}function sr(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{os(r,t,n,e)}catch(i){yi(e,e.return,i)}}function or(e,t,n){try{ls(e.stateNode,e.type,n,t,e)}catch(r){yi(e,e.return,r)}}function lr(e){return 5===e.tag||3===e.tag||!!Ks&&26===e.tag||!!uo&&27===e.tag||4===e.tag}function cr(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||lr(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&(!uo||27!==e.tag)&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ur(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?us(n,e,t):as(n,e);else if(!(4===r||uo&&27===r)&&null!==(e=e.child))for(ur(e,t,n),e=e.sibling;null!==e;)ur(e,t,n),e=e.sibling}function hr(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?cs(n,e,t):is(n,e);else if(!(4===r||uo&&27===r)&&null!==(e=e.child))for(hr(e,t,n),e=e.sibling;null!==e;)hr(e,t,n),e=e.sibling}function dr(e,t,n){e=e.containerInfo;try{ws(e,n)}catch(r){yi(t,t.return,r)}}function fr(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:wr(e,n),4&r&&er(5,n);break;case 1:if(wr(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){yi(n,n.return,o)}else{var i=Zt(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){yi(n,n.return,l)}}64&r&&nr(n),512&r&&ir(n,n.return);break;case 3:if(wr(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:e=ga(n.child.stateNode);break;case 1:e=n.child.stateNode}try{me(r,e)}catch(o){yi(n,n.return,o)}}break;case 26:if(Ks){wr(e,n),512&r&&ir(n,n.return);break}case 27:case 5:wr(e,n),null===t&&4&r&&sr(n),512&r&&ir(n,n.return);break;case 12:wr(e,n);break;case 13:wr(e,n),4&r&&vr(e,n);break;case 22:if(!(i=null!==n.memoizedState||uc)){t=null!==t&&null!==t.memoizedState||hc;var a=uc,s=hc;uc=i,(hc=t)&&!s?Er(e,n,0!==(8772&n.subtreeFlags)):wr(e,n),uc=a,hc=s}512&r&&("manual"===n.memoizedProps.mode?ir(n,n.return):ar(n,n.return));break;default:wr(e,n)}}function pr(e){var t=e.alternate;null!==t&&(e.alternate=null,pr(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&za(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mr(e,t,n){for(n=n.child;null!==n;)gr(e,t,n),n=n.sibling}function gr(e,t,n){if(Oo&&"function"===typeof Oo.onCommitFiberUnmount)try{Oo.onCommitFiberUnmount(Uo,n)}catch(a){}switch(n.tag){case 26:if(Ks){hc||ar(n,t),mr(e,t,n),n.memoizedState?to(n.memoizedState):n.stateNode&&io(n.stateNode);break}case 27:if(uo){hc||ar(n,t);var r=gc,i=vc;gc=n.stateNode,mr(e,t,n),mo(n.stateNode),gc=r,vc=i;break}case 5:hc||ar(n,t);case 6:if(Pa){if(r=gc,i=vc,gc=null,mr(e,t,n),vc=i,null!==(gc=r))if(vc)try{ds(gc,n.stateNode)}catch(s){yi(n,t,s)}else try{hs(gc,n.stateNode)}catch(s){yi(n,t,s)}}else mr(e,t,n);break;case 18:Pa&&null!==gc&&(vc?Xs(gc,n.stateNode):Ws(gc,n.stateNode));break;case 4:Pa?(r=gc,i=vc,gc=n.stateNode.containerInfo,vc=!0,mr(e,t,n),gc=r,vc=i):(La&&dr(n.stateNode,n,bs()),mr(e,t,n));break;case 0:case 11:case 14:case 15:hc||tr(2,n,t),hc||tr(4,n,t),mr(e,t,n);break;case 1:hc||(ar(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&rr(n,t,r)),mr(e,t,n);break;case 21:mr(e,t,n);break;case 22:hc||ar(n,t),hc=(r=hc)||null!==n.memoizedState,mr(e,t,n),hc=r;break;default:mr(e,t,n)}}function vr(e,t){if(Ia&&null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{js(e)}catch(n){yi(t,t.return,n)}}function yr(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new fc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new fc),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var r=wi.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function _r(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],s=e,o=t;if(Pa){var l=o;e:for(;null!==l;){switch(l.tag){case 27:case 5:gc=l.stateNode,vc=!1;break e;case 3:case 4:gc=l.stateNode.containerInfo,vc=!0;break e}l=l.return}if(null===gc)throw Error(i(160));gr(s,o,a),gc=null,vc=!1}else gr(s,o,a);null!==(s=a.alternate)&&(s.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)br(t,e),t=t.sibling}function br(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_r(t,e),xr(e),4&r&&(tr(3,e,e.return),er(3,e),tr(5,e,e.return));break;case 1:_r(t,e),xr(e),512&r&&(hc||null===n||ar(n,n.return)),64&r&&uc&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:if(Ks){var a=yc;_r(t,e),xr(e),512&r&&(hc||null===n||ar(n,n.return)),4&r&&(r=null!==n?n.memoizedState:null,t=e.memoizedState,null===n?null===t?null===e.stateNode?e.stateNode=no(a,e.type,e.memoizedProps,e):ro(a,e.type,e.stateNode):e.stateNode=eo(a,t,e.memoizedProps):r!==t?(null===r?null!==n.stateNode&&io(n.stateNode):to(r),null===t?ro(a,e.type,e.stateNode):eo(a,t,e.memoizedProps)):null===t&&null!==e.stateNode&&or(e,e.memoizedProps,n.memoizedProps));break}case 27:if(uo&&4&r&&null===e.alternate){a=e.stateNode;var s=e.memoizedProps;try{fo(a),po(e.type,s,a,e)}catch(h){yi(e,e.return,h)}}case 5:if(_r(t,e),xr(e),512&r&&(hc||null===n||ar(n,n.return)),Pa){if(32&e.flags){t=e.stateNode;try{fs(t)}catch(h){yi(e,e.return,h)}}4&r&&null!=e.stateNode&&or(e,t=e.memoizedProps,null!==n?n.memoizedProps:t),1024&r&&(dc=!0)}break;case 6:if(_r(t,e),xr(e),4&r&&Pa){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=null!==n?n.memoizedProps:r,t=e.stateNode;try{ss(t,n,r)}catch(h){yi(e,e.return,h)}}break;case 3:if(Ks?(so(),a=yc,yc=Qs(t.containerInfo),_r(t,e),yc=a):_r(t,e),xr(e),4&r){if(Pa&&Ia&&null!==n&&n.memoizedState.isDehydrated)try{Gs(t.containerInfo)}catch(h){yi(e,e.return,h)}if(La){r=t.containerInfo,n=t.pendingChildren;try{ws(r,n)}catch(h){yi(e,e.return,h)}}}dc&&(dc=!1,Sr(e));break;case 4:Ks?(n=yc,yc=Qs(e.stateNode.containerInfo),_r(t,e),xr(e),yc=n):(_r(t,e),xr(e)),4&r&&La&&dr(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:_r(t,e),xr(e);break;case 13:_r(t,e),xr(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(qc=Ro()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,yr(e,r)));break;case 22:512&r&&(hc||null===n||ar(n,n.return)),a=null!==e.memoizedState;var o=null!==n&&null!==n.memoizedState,l=uc,c=hc;if(uc=l||a,hc=c||o,_r(t,e),hc=c,uc=l,xr(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=a?-2&t._visibility:1|t._visibility,a&&(t=uc||hc,null===n||o||t||Mr(e)),Pa&&(null===e.memoizedProps||"manual"!==e.memoizedProps.mode)))e:if(n=null,Pa)for(t=e;;){if(5===t.tag||Ks&&26===t.tag||uo&&27===t.tag){if(null===n){o=n=t;try{s=o.stateNode,a?ps(s):gs(o.stateNode,o.memoizedProps)}catch(h){yi(o,o.return,h)}}}else if(6===t.tag){if(null===n){o=t;try{var u=o.stateNode;a?ms(u):vs(u,o.memoizedProps)}catch(h){yi(o,o.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,yr(e,n))));break;case 19:_r(t,e),xr(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,yr(e,r)));break;case 21:break;default:_r(t,e),xr(e)}}function xr(e){var t=e.flags;if(2&t){try{if(Pa&&(!uo||27!==e.tag)){e:{for(var n=e.return;null!==n;){if(lr(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 27:if(uo){var a=r.stateNode;hr(e,cr(e),a);break}case 5:var s=r.stateNode;32&r.flags&&(fs(s),r.flags&=-33),hr(e,cr(e),s);break;case 3:case 4:var o=r.stateNode.containerInfo;ur(e,cr(e),o);break;default:throw Error(i(161))}}}catch(l){yi(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Sr(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Sr(t),5===t.tag&&1024&t.flags&&qa(t.stateNode),e=e.sibling}}function wr(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)fr(e,t.alternate,t),t=t.sibling}function Mr(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:tr(4,t,t.return),Mr(t);break;case 1:ar(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&rr(t,t.return,n),Mr(t);break;case 26:case 27:case 5:ar(t,t.return),Mr(t);break;case 22:ar(t,t.return),null===t.memoizedState&&Mr(t);break;default:Mr(t)}e=e.sibling}}function Er(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:Er(i,a,n),er(4,a);break;case 1:if(Er(i,a,n),"function"===typeof(i=(r=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){yi(r,r.return,c)}if(null!==(i=(r=a).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)pe(l[i],o)}catch(c){yi(r,r.return,c)}}n&&64&s&&nr(a),ir(a,a.return);break;case 26:case 27:case 5:Er(i,a,n),n&&null===r&&4&s&&sr(a),ir(a,a.return);break;case 12:default:Er(i,a,n);break;case 13:Er(i,a,n),n&&4&s&&vr(i,a);break;case 22:null===a.memoizedState&&Er(i,a,n),ir(a,a.return)}t=t.sibling}}function Tr(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Un(n))}function Ar(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Un(e))}function Cr(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Rr(e,t,n,r),t=t.sibling}function Rr(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Cr(e,t,n,r),2048&i&&er(9,t);break;case 3:Cr(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Un(e)));break;case 12:if(2048&i){Cr(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;"function"===typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){yi(t,t.return,l)}}else Cr(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,null!==t.memoizedState?4&a._visibility?Cr(e,t,n,r):Lr(e,t):4&a._visibility?Cr(e,t,n,r):(a._visibility|=4,Pr(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Tr(t.alternate,t);break;case 24:Cr(e,t,n,r),2048&i&&Ar(t.alternate,t);break;default:Cr(e,t,n,r)}}function Pr(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,s=t,o=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:Pr(a,s,o,l,i),er(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?4&u._visibility?Pr(a,s,o,l,i):Lr(a,s):(u._visibility|=4,Pr(a,s,o,l,i)),i&&2048&c&&Tr(s.alternate,s);break;case 24:Pr(a,s,o,l,i),i&&2048&c&&Ar(s.alternate,s);break;default:Pr(a,s,o,l,i)}t=t.sibling}}function Lr(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Lr(n,r),2048&i&&Tr(r.alternate,r);break;case 24:Lr(n,r),2048&i&&Ar(r.alternate,r);break;default:Lr(n,r)}t=t.sibling}}function Ir(e){if(e.subtreeFlags&_c)for(e=e.child;null!==e;)kr(e),e=e.sibling}function kr(e){switch(e.tag){case 26:Ir(e),e.flags&_c&&(null!==e.memoizedState?co(yc,e.memoizedState,e.memoizedProps):Ga(e.type,e.memoizedProps));break;case 5:Ir(e),e.flags&_c&&Ga(e.type,e.memoizedProps);break;case 3:case 4:if(Ks){var t=yc;yc=Qs(e.stateNode.containerInfo),Ir(e),yc=t}else Ir(e);break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=_c,_c=16777216,Ir(e),_c=t):Ir(e));break;default:Ir(e)}}function Nr(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Dr(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];pc=r,Fr(r,e)}Nr(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ur(e),e=e.sibling}function Ur(e){switch(e.tag){case 0:case 11:case 15:Dr(e),2048&e.flags&&tr(9,e,e.return);break;case 3:case 12:default:Dr(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Or(e)):Dr(e)}}function Or(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];pc=r,Fr(r,e)}Nr(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:tr(8,t,t.return),Or(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Or(t));break;default:Or(t)}e=e.sibling}}function Fr(e,t){for(;null!==pc;){var n=pc;switch(n.tag){case 0:case 11:case 15:tr(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Un(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,pc=r;else e:for(n=e;null!==pc;){var i=(r=pc).sibling,a=r.return;if(pr(r),r===n){pc=null;break e}if(null!==i){i.return=a,pc=i;break e}pc=a}}}function zr(e){var t=ka(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(i(364));return t}if(null===(e=Ja(e)))throw Error(i(362));return e.stateNode.current}function Br(e,t){var n=e.tag;switch(t.$$typeof){case xc:if(e.type===t.value)return!0;break;case Sc:e:{for(t=t.value,e=[e,0],n=0;n<e.length;){var r=e[n++],a=r.tag,s=e[n++],o=t[s];if(5!==a&&26!==a&&27!==a||!es(r)){for(;null!=o&&Br(r,o);)o=t[++s];if(s===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,s),r=r.sibling}}t=!1}return t;case wc:if((5===n||26===n||27===n)&&ts(e.stateNode,t.value))return!0;break;case Ec:if((5===n||6===n||26===n||27===n)&&(null!==(e=$a(e))&&0<=e.indexOf(t.value)))return!0;break;case Mc:if((5===n||26===n||27===n)&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Hr(e){switch(e.$$typeof){case xc:return"<"+(s(e.value)||"Unknown")+">";case Sc:return":has("+(Hr(e)||"")+")";case wc:return'[role="'+e.value+'"]';case Ec:return'"'+e.value+'"';case Mc:return'[data-testname="'+e.value+'"]';default:throw Error(i(365))}}function Vr(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=i.tag,s=e[r++],o=t[s];if(5!==a&&26!==a&&27!==a||!es(i)){for(;null!=o&&Br(i,o);)o=t[++s];if(s===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,s),i=i.sibling}}return n}function Gr(e,t){if(!Ka)throw Error(i(363));e=Vr(e=zr(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++],a=r.tag;if(5===a||26===a||27===a)es(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}function jr(){if(0!==(2&Cc)&&0!==Lc)return Lc&-Lc;if(null!==ua.T){return 0!==gl?gl:ie()}return Oa()}function Wr(){0===Vc&&(Vc=0===(536870912&Lc)||tl?w():536870912);var e=Ll.current;return null!==e&&(e.flags|=32),Vc}function Xr(e,t,n){(e===Rc&&2===Ic||null!==e.cancelPendingCommit)&&(ei(e,0),Jr(e,Lc,Vc,!1)),T(e,n),0!==(2&Cc)&&e===Rc||(e===Rc&&(0===(2&Cc)&&(Bc|=n),4===Fc&&Jr(e,Lc,Vc,!1)),Q(e))}function qr(e,t,n){if(0!==(6&Cc))throw Error(i(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||x(e,t),a=r?function(e,t){var n=Cc;Cc|=2;var r=ri(),a=ii();Rc!==e||Lc!==t?(Zc=null,Yc=Ro()+500,ei(e,t)):Dc=x(e,t);e:for(;;)try{if(0!==Ic&&null!==Pc){t=Pc;var s=kc;t:switch(Ic){case 1:Ic=0,kc=null,hi(e,t,s,1);break;case 2:if(ve(s)){Ic=0,kc=null,ui(t);break}t=function(){2===Ic&&Rc===e&&(Ic=7),Q(e)},s.then(t,t);break e;case 3:Ic=7;break e;case 4:Ic=5;break e;case 7:ve(s)?(Ic=0,kc=null,ui(t)):(Ic=0,kc=null,hi(e,t,s,7));break;case 5:var o=null;switch(Pc.tag){case 26:o=Pc.memoizedState;case 5:case 27:var l=Pc,c=l.type,u=l.pendingProps;if(o?lo(o):Ha(c,u)){Ic=0,kc=null;var h=l.sibling;if(null!==h)Pc=h;else{var d=l.return;null!==d?(Pc=d,di(d)):Pc=null}break t}}Ic=0,kc=null,hi(e,t,s,5);break;case 6:Ic=0,kc=null,hi(e,t,s,6);break;case 8:$r(),Fc=6;break e;default:throw Error(i(462))}}li();break}catch(f){ti(e,f)}return rc=nc=null,ua.H=r,ua.A=a,Cc=n,null!==Pc?0:(Rc=null,Lc=0,X(),Fc)}(e,t):si(e,t,!0),s=r;;){if(0===a){Dc&&!r&&Jr(e,t,0,!1);break}if(6===a)Jr(e,t,0,!Nc);else{if(n=e.current.alternate,s&&!Kr(n)){a=si(e,t,!1),s=!1;continue}if(2===a){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=jc;var c=Ia&&l.current.memoizedState.isDehydrated;if(c&&(ei(l,o).flags|=256),2!==(o=si(l,o,!1))){if(Uc&&!c){l.errorRecoveryDisabledLanes|=s,Bc|=s,a=4;break e}s=Wc,Wc=a,null!==s&&Yr(s)}a=o}if(s=!1,2!==a)continue}}if(1===a){ei(e,0),Jr(e,t,0,!0);break}e:{switch(r=e,a){case 0:case 1:throw Error(i(345));case 4:if((4194176&t)===t){Jr(r,t,Vc,!Nc);break e}break;case 2:Wc=null;break;case 3:case 5:break;default:throw Error(i(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(s=qc+300-Ro())){if(Jr(r,t,Vc,!Nc),0!==b(r,0))break e;r.timeoutHandle=Ta(Zr.bind(null,r,n,Wc,Zc,Xc,t,Vc,Bc,Gc,Nc,2,-0,0),s)}else Zr(r,n,Wc,Zc,Xc,t,Vc,Bc,Gc,Nc,0,-0,0)}}break}Q(e)}function Yr(e){null===Wc?Wc=e:Wc.push.apply(Wc,e)}function Zr(e,t,n,r,i,a,s,o,l,c,u,h,d){var f=t.subtreeFlags;if((8192&f||16785408===(16785408&f))&&(Va(),kr(t),null!==(t=ja())))return e.cancelPendingCommit=t(pi.bind(null,e,n,r,i,s,o,l,1,h,d)),void Jr(e,a,s,!c);pi(e,n,r,i,s,o,l,u,h,d)}function Kr(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Fo(a(),i))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jr(e,t,n,r){t&=~Hc,t&=~Bc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-bo(i),s=1<<a;r[a]=-1,i&=~s}0!==n&&A(e,n,t)}function Qr(){return 0!==(6&Cc)||($(0,!1),!1)}function $r(){if(null!==Pc){if(0===Ic)var e=Pc.return;else rc=nc=null,Ve(e=Pc),El=null,Tl=0,e=Pc;for(;null!==e;)$n(e.alternate,e),e=e.return;Pc=null}}function ei(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==Ca&&(e.timeoutHandle=Ca,Aa(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),$r(),Rc=e,Pc=n=Ti(e.current,null),Lc=t,Ic=0,kc=null,Nc=!1,Dc=x(e,t),Uc=!1,Gc=Vc=Hc=Bc=zc=Fc=0,Wc=jc=null,Xc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-bo(r),a=1<<i;t|=e[i],r&=~a}return Oc=t,X(),n}function ti(e,t){Dl=null,ua.H=Xl,t===xl?(t=be(),Ic=3):t===Sl?(t=be(),Ic=4):Ic=t===Ql?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,kc=t,null===Pc&&(Fc=1,Kt(e,L(t,e.current)))}function ni(){var e=Ll.current;return null===e||((4194176&Lc)===Lc?null===Il:((62914560&Lc)===Lc||0!==(536870912&Lc))&&e===Il)}function ri(){var e=ua.H;return ua.H=Xl,null===e?Xl:e}function ii(){var e=ua.A;return ua.A=bc,e}function ai(){Fc=4,Nc||(4194176&Lc)!==Lc&&null!==Ll.current||(Dc=!0),0===(134217727&zc)&&0===(134217727&Bc)||null===Rc||Jr(Rc,Lc,Vc,!1)}function si(e,t,n){var r=Cc;Cc|=2;var i=ri(),a=ii();Rc===e&&Lc===t||(Zc=null,ei(e,t)),t=!1;var s=Fc;e:for(;;)try{if(0!==Ic&&null!==Pc){var o=Pc,l=kc;switch(Ic){case 8:$r(),s=6;break e;case 3:case 2:case 6:null===Ll.current&&(t=!0);var c=Ic;if(Ic=0,kc=null,hi(e,o,l,c),n&&Dc){s=0;break e}break;default:c=Ic,Ic=0,kc=null,hi(e,o,l,c)}}oi(),s=Fc;break}catch(u){ti(e,u)}return t&&e.shellSuspendCounter++,rc=nc=null,Cc=r,ua.H=i,ua.A=a,null===Pc&&(Rc=null,Lc=0,X()),s}function oi(){for(;null!==Pc;)ci(Pc)}function li(){for(;null!==Pc&&!Ao();)ci(Pc)}function ci(e){var t=Mn(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?di(e):Pc=t}function ui(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=un(n,t,t.pendingProps,t.type,void 0,Lc);break;case 11:t=un(n,t,t.pendingProps,t.type.render,t.ref,Lc);break;case 5:Ve(t);default:$n(n,t),t=Mn(n,t=Pc=Ai(t,Oc),Oc)}e.memoizedProps=e.pendingProps,null===t?di(e):Pc=t}function hi(e,t,n,r){rc=nc=null,Ve(t),El=null,Tl=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Rn(t,n,a,!0),null!==(n=Ll.current)){switch(n.tag){case 13:return null===Il?ai():null===n.alternate&&0===Fc&&(Fc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===wl?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),_i(e,r,a)),!1;case 22:return n.flags|=65536,r===wl?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),_i(e,r,a)),!1}throw Error(i(435,n.tag))}return _i(e,r,a),ai(),!1}if(tl)return null!==(t=Ll.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==il&&W(L(e=Error(i(422),{cause:r}),n))):(r!==il&&W(L(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=L(r,n),he(e,a=Qt(e.stateNode,r,a)),4!==Fc&&(Fc=2)),!1;var s=Error(i(520),{cause:r});if(s=L(s,n),null===jc?jc=[s]:jc.push(s),4!==Fc&&(Fc=2),null===t)return!0;r=L(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,he(n,e=Qt(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Kc||!Kc.has(s))))return n.flags|=65536,a&=-a,n.lanes|=a,en(a=$t(a),e,n,r),he(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,Lc))return Fc=1,Kt(e,L(n,e.current)),void(Pc=null)}catch(s){if(null!==a)throw Pc=a,s;return Fc=1,Kt(e,L(n,e.current)),void(Pc=null)}32768&t.flags?(tl||1===r?e=!0:Dc||0!==(536870912&Lc)?e=!1:(Nc=e=!0,(2===r||3===r||6===r)&&(null!==(r=Ll.current)&&13===r.tag&&(r.flags|=16384))),fi(t,e)):di(t)}function di(e){var t=e;do{if(0!==(32768&t.flags))return void fi(t,Nc);e=t.return;var n=Jn(t.alternate,t,Oc);if(null!==n)return void(Pc=n);if(null!==(t=t.sibling))return void(Pc=t);Pc=t=e}while(null!==t);0===Fc&&(Fc=5)}function fi(e,t){do{var n=Qn(e.alternate,e);if(null!==n)return n.flags&=32767,void(Pc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(Pc=e);Pc=e=n}while(null!==e);Fc=6,Pc=null}function pi(e,t,n,r,a,s,o,l,c,u){var h=ua.T,d=Ua();try{Da(2),ua.T=null,function(e,t,n,r,a,s,o,l){do{gi()}while(null!==Qc);if(0!==(6&Cc))throw Error(i(327));var c=e.finishedWork;if(r=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=c.lanes|c.childLanes;if(function(e,t,n,r,i,a){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-bo(n),h=1<<u;o[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&A(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,r,u|=ol,s,o,l),e===Rc&&(Pc=Rc=null,Lc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||Jc||(Jc=!0,eu=u,tu=n,function(e,t){Eo(e,t)}(Io,function(){return gi(),null})),n=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||n?(n=ua.T,ua.T=null,s=Ua(),Da(2),o=Cc,Cc|=4,function(e,t){for(_a(e.containerInfo),pc=t;null!==pc;)if(t=(e=pc).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,pc=t;else for(;null!==pc;){var n=(e=pc).alternate;switch(t=e.flags,e.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&t)&&null!==n){t=void 0;var r=e,a=n.memoizedProps;n=n.memoizedState;var s=r.stateNode;try{var o=Zt(r.type,a,(r.elementType,r.type));t=s.getSnapshotBeforeUpdate(o,n),s.__reactInternalSnapshotBeforeUpdate=t}catch(l){yi(r,r.return,l)}}break;case 3:0!==(1024&t)&&Pa&&ys(e.stateNode.containerInfo);break;default:if(0!==(1024&t))throw Error(i(163))}if(null!==(t=e.sibling)){t.return=e.return,pc=t;break}pc=e.return}o=mc,mc=!1}(e,c),br(c,e),ba(e.containerInfo),e.current=c,fr(e,c.alternate,c),Co(),Cc=o,Da(s),ua.T=n):e.current=c,Jc?(Jc=!1,Qc=e,$c=r):mi(e,u),u=e.pendingLanes,0===u&&(Kc=null),function(e){if(Oo&&"function"===typeof Oo.onCommitFiberRoot)try{Oo.onCommitFiberRoot(Uo,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),Q(e),null!==t)for(a=e.onRecoverableError,c=0;c<t.length;c++)u=t[c],a(u.value,{componentStack:u.stack});0!==(3&$c)&&gi(),u=e.pendingLanes,0!==(4194218&r)&&0!==(42&u)?e===ru?nu++:(nu=0,ru=e):nu=0,$(0,!1)}(e,t,n,r,d,a,s,o)}finally{ua.T=h,Da(d)}}function mi(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Un(t)))}function gi(){if(null!==Qc){var e=Qc,t=eu;eu=0;var n=R($c),r=32>n?32:n;n=ua.T;var a=Ua();try{if(Da(r),ua.T=null,null===Qc)var s=!1;else{r=tu,tu=null;var o=Qc,l=$c;if(Qc=null,$c=0,0!==(6&Cc))throw Error(i(331));var c=Cc;if(Cc|=4,Ur(o.current),Rr(o,o.current,l,r),Cc=c,$(0,!1),Oo&&"function"===typeof Oo.onPostCommitFiberRoot)try{Oo.onPostCommitFiberRoot(Uo,o)}catch(u){}s=!0}return s}finally{Da(a),ua.T=n,mi(e,t)}}return!1}function vi(e,t,n){t=L(n,t),null!==(e=ce(e,t=Qt(e.stateNode,t,2),2))&&(T(e,2),Q(e))}function yi(e,t,n){if(3===e.tag)vi(e,e,n);else for(;null!==t;){if(3===t.tag){vi(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kc||!Kc.has(r))){e=L(n,e),null!==(r=ce(t,n=$t(2),2))&&(en(n,r,t,e),T(r,2),Q(r));break}}t=t.return}}function _i(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Ac;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(Uc=!0,i.add(n),e=bi.bind(null,e,t,n),t.then(e,e))}function bi(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Rc===e&&(Lc&n)===n&&(4===Fc||3===Fc&&(62914560&Lc)===Lc&&300>Ro()-qc?0===(2&Cc)&&ei(e,0):Hc|=n,Gc===Lc&&(Gc=0)),Q(e)}function xi(e,t){0===t&&(t=M()),null!==(e=Z(e,t))&&(T(e,t),Q(e))}function Si(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xi(e,n)}function wi(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),xi(e,n)}function Mi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ti(e,n){var r=e.alternate;return null===r?((r=t(e.tag,n,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=31457280&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Ai(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ci(e,n,r,a,s,o){var l=0;if(a=e,"function"===typeof e)Ei(e)&&(l=1);else if("string"===typeof e)l=Ks&&uo?Js(e,r,Zo.current)?26:go(e)?27:5:Ks?Js(e,r,Zo.current)?26:5:uo&&go(e)?27:5;else e:switch(e){case qi:return Ri(r.children,s,o,n);case Yi:l=8,s|=24;break;case Zi:return(e=t(12,r,n,2|s)).elementType=Zi,e.lanes=o,e;case ea:return(e=t(13,r,n,s)).elementType=ea,e.lanes=o,e;case ta:return(e=t(19,r,n,s)).elementType=ta,e.lanes=o,e;case ia:return Pi(r,s,o,n);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case Ki:case Qi:l=10;break e;case Ji:l=9;break e;case $i:l=11;break e;case na:l=14;break e;case ra:l=16,a=null;break e}l=29,r=Error(i(130,null===e?"null":typeof e,"")),a=null}return(n=t(l,r,n,s)).elementType=e,n.type=a,n.lanes=o,n}function Ri(e,n,r,i){return(e=t(7,e,i,n)).lanes=r,e}function Pi(e,n,r,a){(e=t(22,e,a,n)).elementType=ia,e.lanes=r;var s={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=s._current;if(null===e)throw Error(i(456));if(0===(2&s._pendingVisibility)){var t=Z(e,2);null!==t&&(s._pendingVisibility|=2,Xr(t,0,2))}},attach:function(){var e=s._current;if(null===e)throw Error(i(456));if(0!==(2&s._pendingVisibility)){var t=Z(e,2);null!==t&&(s._pendingVisibility&=-3,Xr(t,0,2))}}};return e.stateNode=s,e}function Li(e,n,r){return(e=t(6,e,null,n)).lanes=r,e}function Ii(e,n,r){return(n=t(4,null!==e.children?e.children:[],e.key,n)).lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function ki(e,t,n,r,i,a,s,o){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ca,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=E(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E(0),this.hiddenUpdates=E(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Ni(e,n,r,i,a,s,o,l,c,u,h,d){return e=new ki(e,n,r,o,l,c,u,d),n=1,!0===s&&(n|=24),s=t(3,null,null,n),e.current=s,s.stateNode=e,(n=Dn()).refCount++,e.pooledCache=n,n.refCount++,s.memoizedState={element:i,isDehydrated:r,cache:n},se(s),e}function Di(e){return e?e=_o:_o}function Ui(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return null===(e=null!==(e=f(t))?p(e):null)?null:ga(e.stateNode)}function Oi(e,t,n,r,i,a){i=Di(i),null===r.context?r.context=i:r.pendingContext=i,(r=le(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=ce(e,r,t))&&(Xr(n,0,t),ue(n,e,t))}function Fi(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function zi(e,t){Fi(e,t),(e=e.alternate)&&Fi(e,t)}var Bi={},Hi=n(43),Vi=n(513),Gi=Object.assign,ji=Symbol.for("react.element"),Wi=Symbol.for("react.transitional.element"),Xi=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),Yi=Symbol.for("react.strict_mode"),Zi=Symbol.for("react.profiler"),Ki=Symbol.for("react.provider"),Ji=Symbol.for("react.consumer"),Qi=Symbol.for("react.context"),$i=Symbol.for("react.forward_ref"),ea=Symbol.for("react.suspense"),ta=Symbol.for("react.suspense_list"),na=Symbol.for("react.memo"),ra=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var ia=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var aa,sa,oa=Symbol.for("react.memo_cache_sentinel"),la=Symbol.iterator,ca=Symbol.for("react.client.reference"),ua=Hi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ha=!1,da=Array.isArray,fa=e.rendererVersion,pa=e.rendererPackageName,ma=e.extraDevToolsConfig,ga=e.getPublicInstance,va=e.getRootHostContext,ya=e.getChildHostContext,_a=e.prepareForCommit,ba=e.resetAfterCommit,xa=e.createInstance,Sa=e.appendInitialChild,wa=e.finalizeInitialChildren,Ma=e.shouldSetTextContent,Ea=e.createTextInstance,Ta=e.scheduleTimeout,Aa=e.cancelTimeout,Ca=e.noTimeout,Ra=e.isPrimaryRenderer;e.warnsIfNotActing;var Pa=e.supportsMutation,La=e.supportsPersistence,Ia=e.supportsHydration,ka=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Na=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Da=e.setCurrentUpdatePriority,Ua=e.getCurrentUpdatePriority,Oa=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Fa=e.shouldAttemptEagerTransition,za=e.detachDeletedInstance;e.requestPostPaintCallback;var Ba=e.maySuspendCommit,Ha=e.preloadInstance,Va=e.startSuspendingCommit,Ga=e.suspendInstance,ja=e.waitForCommitToBeReady,Wa=e.NotPendingTransition,Xa=e.HostTransitionContext,qa=e.resetFormInstance;e.bindToConsole;var Ya=e.supportsMicrotasks,Za=e.scheduleMicrotask,Ka=e.supportsTestSelectors,Ja=e.findFiberRoot,Qa=e.getBoundingRect,$a=e.getTextContent,es=e.isHiddenSubtree,ts=e.matchAccessibilityRole,ns=e.setFocusIfFocusable,rs=e.setupIntersectionObserver,is=e.appendChild,as=e.appendChildToContainer,ss=e.commitTextUpdate,os=e.commitMount,ls=e.commitUpdate,cs=e.insertBefore,us=e.insertInContainerBefore,hs=e.removeChild,ds=e.removeChildFromContainer,fs=e.resetTextContent,ps=e.hideInstance,ms=e.hideTextInstance,gs=e.unhideInstance,vs=e.unhideTextInstance,ys=e.clearContainer,_s=e.cloneInstance,bs=e.createContainerChildSet,xs=e.appendChildToContainerChildSet,Ss=e.finalizeContainerChildren,ws=e.replaceContainerChildren,Ms=e.cloneHiddenInstance,Es=e.cloneHiddenTextInstance,Ts=e.isSuspenseInstancePending,As=e.isSuspenseInstanceFallback,Cs=e.getSuspenseInstanceFallbackErrorDetails,Rs=e.registerSuspenseInstanceRetry,Ps=e.canHydrateFormStateMarker,Ls=e.isFormStateMarkerMatching,Is=e.getNextHydratableSibling,ks=e.getFirstHydratableChild,Ns=e.getFirstHydratableChildWithinContainer,Ds=e.getFirstHydratableChildWithinSuspenseInstance,Us=e.canHydrateInstance,Os=e.canHydrateTextInstance,Fs=e.canHydrateSuspenseInstance,zs=e.hydrateInstance,Bs=e.hydrateTextInstance,Hs=e.hydrateSuspenseInstance,Vs=e.getNextHydratableInstanceAfterSuspenseInstance,Gs=e.commitHydratedContainer,js=e.commitHydratedSuspenseInstance,Ws=e.clearSuspenseBoundary,Xs=e.clearSuspenseBoundaryFromContainer,qs=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Ys=e.validateHydratableInstance,Zs=e.validateHydratableTextInstance,Ks=e.supportsResources,Js=e.isHostHoistableType,Qs=e.getHoistableRoot,$s=e.getResource,eo=e.acquireResource,to=e.releaseResource,no=e.hydrateHoistable,ro=e.mountHoistable,io=e.unmountHoistable,ao=e.createHoistableInstance,so=e.prepareToCommitHoistables,oo=e.mayResourceSuspendCommit,lo=e.preloadResource,co=e.suspendResource,uo=e.supportsSingletons,ho=e.resolveSingletonInstance,fo=e.clearSingleton,po=e.acquireSingletonInstance,mo=e.releaseSingletonInstance,go=e.isHostSingletonType,vo=[],yo=-1,_o={},bo=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xo(e)/So|0)|0},xo=Math.log,So=Math.LN2,wo=128,Mo=4194304,Eo=Vi.unstable_scheduleCallback,To=Vi.unstable_cancelCallback,Ao=Vi.unstable_shouldYield,Co=Vi.unstable_requestPaint,Ro=Vi.unstable_now,Po=Vi.unstable_ImmediatePriority,Lo=Vi.unstable_UserBlockingPriority,Io=Vi.unstable_NormalPriority,ko=Vi.unstable_IdlePriority,No=Vi.log,Do=Vi.unstable_setDisableYieldValue,Uo=null,Oo=null,Fo="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},zo=new WeakMap,Bo=[],Ho=0,Vo=null,Go=0,jo=[],Wo=0,Xo=null,qo=1,Yo="",Zo=g(null),Ko=g(null),Jo=g(null),Qo=g(null),$o=null,el=null,tl=!1,nl=null,rl=!1,il=Error(i(519)),al=[],sl=0,ol=0,ll=null,cl=null,ul=!1,hl=!1,dl=!1,fl=0,pl=null,ml=0,gl=0,vl=null,yl=!1,_l=!1,bl=Object.prototype.hasOwnProperty,xl=Error(i(460)),Sl=Error(i(474)),wl={then:function(){}},Ml=null,El=null,Tl=0,Al=Ee(!0),Cl=Ee(!1),Rl=g(null),Pl=g(0),Ll=g(null),Il=null,kl=g(0),Nl=0,Dl=null,Ul=null,Ol=null,Fl=!1,zl=!1,Bl=!1,Hl=0,Vl=0,Gl=null,jl=0,Wl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Xl={readContext:In,use:Xe,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useLayoutEffect:Ne,useInsertionEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useSyncExternalStore:Ne,useId:Ne};Xl.useCacheRefresh=Ne,Xl.useMemoCache=Ne,Xl.useHostTransitionStatus=Ne,Xl.useFormState=Ne,Xl.useActionState=Ne,Xl.useOptimistic=Ne;var ql={readContext:In,use:Xe,useCallback:function(e,t){return Ge().memoizedState=[e,void 0===t?null:t],e},useContext:In,useEffect:St,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,bt(4194308,4,Tt.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bt(4194308,4,e,t)},useInsertionEffect:function(e,t){bt(4,2,e,t)},useMemo:function(e,t){var n=Ge();t=void 0===t?null:t;var r=e();if(Bl){P(!0);try{e()}finally{P(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Ge();if(void 0!==n){var i=n(t);if(Bl){P(!0);try{n(t)}finally{P(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=zt.bind(null,Dl,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ge().memoizedState=e},useState:function(e){var t=(e=it(e)).queue,n=Bt.bind(null,Dl,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ct,useDeferredValue:function(e,t){return Lt(Ge(),e,t)},useTransition:function(){var e=it(!1);return e=kt.bind(null,Dl,e.queue,!0,!1),Ge().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Dl,a=Ge();if(tl){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Rc)throw Error(i(349));0!==(60&Lc)||$e(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,St(tt.bind(null,r,s,e),[e]),r.flags|=2048,yt(9,et.bind(null,r,s,n,t),{destroy:void 0},null),n},useId:function(){var e=Ge(),t=Rc.identifierPrefix;if(tl){var n=Yo;t=":"+t+"R"+(n=(qo&~(1<<32-bo(qo)-1)).toString(32)+n),0<(n=Hl++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=jl++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return Ge().memoizedState=Ft.bind(null,Dl)}};ql.useMemoCache=qe,ql.useHostTransitionStatus=Dt,ql.useFormState=ft,ql.useActionState=ft,ql.useOptimistic=function(e){var t=Ge();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Vt.bind(null,Dl,!0,n),n.dispatch=t,[e,t]};var Yl={readContext:In,use:Xe,useCallback:Rt,useContext:In,useEffect:wt,useImperativeHandle:At,useInsertionEffect:Mt,useLayoutEffect:Et,useMemo:Pt,useReducer:Ze,useRef:_t,useState:function(){return Ze(Ye)},useDebugValue:Ct,useDeferredValue:function(e,t){return It(je(),Ul.memoizedState,e,t)},useTransition:function(){var e=Ze(Ye)[0],t=je().memoizedState;return["boolean"===typeof e?e:We(e),t]},useSyncExternalStore:Qe,useId:Ut};Yl.useCacheRefresh=Ot,Yl.useMemoCache=qe,Yl.useHostTransitionStatus=Dt,Yl.useFormState=pt,Yl.useActionState=pt,Yl.useOptimistic=function(e,t){return at(je(),0,e,t)};var Zl={readContext:In,use:Xe,useCallback:Rt,useContext:In,useEffect:wt,useImperativeHandle:At,useInsertionEffect:Mt,useLayoutEffect:Et,useMemo:Pt,useReducer:Je,useRef:_t,useState:function(){return Je(Ye)},useDebugValue:Ct,useDeferredValue:function(e,t){var n=je();return null===Ul?Lt(n,e,t):It(n,Ul.memoizedState,e,t)},useTransition:function(){var e=Je(Ye)[0],t=je().memoizedState;return["boolean"===typeof e?e:We(e),t]},useSyncExternalStore:Qe,useId:Ut};Zl.useCacheRefresh=Ot,Zl.useMemoCache=qe,Zl.useHostTransitionStatus=Dt,Zl.useFormState=vt,Zl.useActionState=vt,Zl.useOptimistic=function(e,t){var n=je();return null!==Ul?at(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Kl={isMounted:function(e){return!!(e=e._reactInternals)&&h(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jr(),i=le(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ce(e,i,r))&&(Xr(t,0,r),ue(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jr(),i=le(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ce(e,i,r))&&(Xr(t,0,r),ue(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jr(),r=le(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ce(e,r,n))&&(Xr(t,0,n),ue(t,e,n))}},Jl="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ql=Error(i(461)),$l=!1,ec={dehydrated:null,treeContext:null,retryLane:0},tc=g(null),nc=null,rc=null,ic="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ac=Vi.unstable_scheduleCallback,sc=Vi.unstable_NormalPriority,oc={$$typeof:Qi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},lc=ua.S;ua.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===pl){var n=pl=[];ml=0,gl=ie(),vl={status:"pending",value:void 0,then:function(e){n.push(e)}}}ml++,t.then(ae,ae)}(0,t),null!==lc&&lc(e,t)};var cc=g(null),uc=!1,hc=!1,dc=!1,fc="function"===typeof WeakSet?WeakSet:Set,pc=null,mc=!1,gc=null,vc=!1,yc=null,_c=8192,bc={getCacheForType:function(e){var t=In(oc),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},xc=0,Sc=1,wc=2,Mc=3,Ec=4;if("function"===typeof Symbol&&Symbol.for){var Tc=Symbol.for;xc=Tc("selector.component"),Sc=Tc("selector.has_pseudo_class"),wc=Tc("selector.role"),Mc=Tc("selector.test_id"),Ec=Tc("selector.text")}var Ac="function"===typeof WeakMap?WeakMap:Map,Cc=0,Rc=null,Pc=null,Lc=0,Ic=0,kc=null,Nc=!1,Dc=!1,Uc=!1,Oc=0,Fc=0,zc=0,Bc=0,Hc=0,Vc=0,Gc=0,jc=null,Wc=null,Xc=!1,qc=0,Yc=1/0,Zc=null,Kc=null,Jc=!1,Qc=null,$c=0,eu=0,tu=null,nu=0,ru=null;return Bi.attemptContinuousHydration=function(e){if(13===e.tag){var t=Z(e,67108864);null!==t&&Xr(t,0,67108864),zi(e,67108864)}},Bi.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=jr(),n=Z(e,t);null!==n&&Xr(n,0,t),zi(e,t)}},Bi.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=_(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-bo(t);e.entanglements[1]|=n,t&=~n}Q(e),0===(6&Cc)&&(Yc=Ro()+500,$(0,!1))}}break;case 13:null!==(t=Z(e,2))&&Xr(t,0,2),Qr(),zi(e,2)}},Bi.batchedUpdates=function(e,t){return e(t)},Bi.createComponentSelector=function(e){return{$$typeof:xc,value:e}},Bi.createContainer=function(e,t,n,r,i,a,s,o,l,c){return Ni(e,t,!1,null,0,r,a,s,o,l,0,null)},Bi.createHasPseudoClassSelector=function(e){return{$$typeof:Sc,value:e}},Bi.createHydrationContainer=function(e,t,n,r,i,a,s,o,l,c,u,h,d){return(e=Ni(n,r,!0,e,0,a,o,l,c,u,0,d)).context=Di(null),n=e.current,(i=le(r=jr())).callback=void 0!==t&&null!==t?t:null,ce(n,i,r),e.current.lanes=r,T(e,r),Q(e),e},Bi.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Xi,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},Bi.createRoleSelector=function(e){return{$$typeof:wc,value:e}},Bi.createTestNameSelector=function(e){return{$$typeof:Mc,value:e}},Bi.createTextSelector=function(e){return{$$typeof:Ec,value:e}},Bi.defaultOnCaughtError=function(e){console.error(e)},Bi.defaultOnRecoverableError=function(e){Jl(e)},Bi.defaultOnUncaughtError=function(e){Jl(e)},Bi.deferredUpdates=function(e){var t=ua.T,n=Ua();try{return Da(32),ua.T=null,e()}finally{Da(n),ua.T=t}},Bi.discreteUpdates=function(e,t,n,r,i){var a=ua.T,s=Ua();try{return Da(2),ua.T=null,e(t,n,r,i)}finally{Da(s),ua.T=a,0===Cc&&(Yc=Ro()+500)}},Bi.findAllNodes=Gr,Bi.findBoundingRects=function(e,t){if(!Ka)throw Error(i(363));t=Gr(e,t),e=[];for(var n=0;n<t.length;n++)e.push(Qa(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,a=r+n.width,s=n.y,o=s+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,h=u+c.width,d=c.y,f=d+c.height;if(r>=u&&s>=d&&a<=h&&o<=f){e.splice(t,1);break}if(!(r!==u||n.width!==c.width||f<s||d>o)){d>s&&(c.height+=d-s,c.y=s),f<o&&(c.height=o-d),e.splice(t,1);break}if(!(s!==d||n.height!==c.height||h<r||u>a)){u>r&&(c.width+=u-r,c.x=r),h<a&&(c.width=a-u),e.splice(t,1);break}}return e},Bi.findHostInstance=Ui,Bi.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=f(e))?m(e):null)?null:ga(e.stateNode)},Bi.findHostInstanceWithWarning=function(e){return Ui(e)},Bi.flushPassiveEffects=gi,Bi.flushSyncFromReconciler=function(e){var t=Cc;Cc|=1;var n=ua.T,r=Ua();try{if(Da(2),ua.T=null,e)return e()}finally{Da(r),ua.T=n,0===(6&(Cc=t))&&$(0,!1)}},Bi.flushSyncWork=Qr,Bi.focusWithin=function(e,t){if(!Ka)throw Error(i(363));for(t=Vr(e=zr(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],r=n.tag;if(!es(n)){if((5===r||26===r||27===r)&&ns(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},Bi.getFindAllNodesFailureDescription=function(e,t){if(!Ka)throw Error(i(363));var n=0,r=[];e=[zr(e),0];for(var a=0;a<e.length;){var s=e[a++],o=s.tag,l=e[a++],c=t[l];if((5!==o&&26!==o&&27!==o||!es(s))&&(Br(s,c)&&(r.push(Hr(c)),++l>n&&(n=l)),l<t.length))for(s=s.child;null!==s;)e.push(s,l),s=s.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Hr(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},Bi.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return ga(e.child.stateNode);default:return e.child.stateNode}},Bi.injectIntoDevTools=function(){var e={bundleType:0,version:fa,rendererPackageName:pa,currentDispatcherRef:ua,findFiberByHostInstance:ka,reconcilerVersion:"19.0.0"};if(null!==ma&&(e.rendererConfig=ma),"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Uo=t.inject(e),Oo=t}catch(n){}e=!!t.checkDCE}}return e},Bi.isAlreadyRendering=function(){return!1},Bi.observeVisibleRects=function(e,t,n,r){if(!Ka)throw Error(i(363));e=Gr(e,t);var a=rs(e,n,r).disconnect;return{disconnect:function(){a()}}},Bi.shouldError=function(){return null},Bi.shouldSuspend=function(){return!1},Bi.startHostTransition=function(e,t,n,a){if(5!==e.tag)throw Error(i(476));var s=Nt(e).queue;kt(e,s,t,Wa,null===n?r:function(){var t=Nt(e).next.queue;return Ht(e,t,{},jr()),n(a)})},Bi.updateContainer=function(e,t,n,r){var i=t.current,a=jr();return Oi(i,a,e,t,n,r),a},Bi.updateContainerSync=function(e,t,n,r){return 0===t.tag&&gi(),Oi(t.current,2,e,t,n,r),2},Bi},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})},513:(e,t,n)=>{"use strict";e.exports=n(388)},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},717:(e,t,n)=>{"use strict";var r=n(43),i=n(461);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,o=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return o=t}return o=e}if(t=o,a(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(s=e,t):(s=e,o=n)}var s,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var f=s(e,h[0],h[1]);return l(function(){d.hasValue=!0,d.value=f},[f]),u(f),f}},784:(e,t,n)=>{"use strict";e.exports=n(179)},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,M||(M=!0,w());else{var t=r(u);null!==t&&I(S,t.startTime-e)}}var w,M=!1,E=-1,T=5,A=-1;function C(){return!!v||!(t.unstable_now()-A<T)}function R(){if(v=!1,M){var e=t.unstable_now();A=e;var n=!0;try{e:{m=!1,g&&(g=!1,_(E),E=-1),p=!0;var a=f;try{t:{for(x(e),d=r(c);null!==d&&!(d.expirationTime>e&&C());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var o=s(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){d.callback=o,x(e),n=!0;break t}d===r(c)&&i(c),x(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&I(S,l.startTime-e),n=!1}}break e}finally{d=null,f=a,p=!1}n=void 0}}finally{n?w():M=!1}}}if("function"===typeof b)w=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=R,w=function(){L.postMessage(null)}}else w=function(){y(R,0)};function I(e,n){E=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(_(E),E=-1):g=!0,I(S,a-s))):(e.sortIndex=o,n(c,e),m||p||(m=!0,M||(M=!0,w()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(a,s),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".543e1871.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="color-extractor:";n.l=(r,i,a,s)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[i];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/color-suggester-remake/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=a);var s=n.p+n.u(t),o=new Error;n.l(s,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,a,[s,o,l]=r,c=0;if(s.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)a=s[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkcolor_extractor=self.webpackChunkcolor_extractor||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>ou,AddEquation:()=>Tc,AddOperation:()=>nu,AdditiveAnimationBlendMode:()=>jh,AdditiveBlending:()=>Sc,AgXToneMapping:()=>cu,AlphaFormat:()=>Wu,AlwaysCompare:()=>Cd,AlwaysDepth:()=>qc,AlwaysStencilFunc:()=>bd,AmbientLight:()=>qb,AnimationAction:()=>Fx,AnimationClip:()=>mb,AnimationLoader:()=>Mb,AnimationMixer:()=>Bx,AnimationObjectGroup:()=>Ox,AnimationUtils:()=>nb,ArcCurve:()=>Ty,ArrayCamera:()=>px,ArrowHelper:()=>HS,AttachedBindMode:()=>hu,Audio:()=>Sx,AudioAnalyser:()=>Cx,AudioContext:()=>lx,AudioListener:()=>xx,AudioLoader:()=>cx,AxesHelper:()=>VS,BackSide:()=>yc,BasicDepthPacking:()=>Yh,BasicShadowMap:()=>fc,BatchedMesh:()=>Uv,Bone:()=>qg,BooleanKeyframeTrack:()=>lb,Box2:()=>rS,Box3:()=>zf,Box3Helper:()=>US,BoxGeometry:()=>Ym,BoxHelper:()=>DS,BufferAttribute:()=>vm,BufferGeometry:()=>Nm,BufferGeometryLoader:()=>ex,ByteType:()=>ku,Cache:()=>vb,Camera:()=>eg,CameraHelper:()=>IS,CanvasTexture:()=>uy,CapsuleGeometry:()=>fy,CatmullRomCurve3:()=>Iy,CineonToneMapping:()=>su,CircleGeometry:()=>py,ClampToEdgeWrapping:()=>bu,Clock:()=>mx,Color:()=>im,ColorKeyframeTrack:()=>cb,ColorManagement:()=>xf,CompressedArrayTexture:()=>ly,CompressedCubeTexture:()=>cy,CompressedTexture:()=>oy,CompressedTextureLoader:()=>Eb,ConeGeometry:()=>gy,ConstantAlphaFactor:()=>jc,ConstantColorFactor:()=>Vc,Controls:()=>jS,CubeCamera:()=>sg,CubeReflectionMapping:()=>pu,CubeRefractionMapping:()=>mu,CubeTexture:()=>og,CubeTextureLoader:()=>Cb,CubeUVReflectionMapping:()=>yu,CubicBezierCurve:()=>Uy,CubicBezierCurve3:()=>Oy,CubicInterpolant:()=>ib,CullFaceBack:()=>uc,CullFaceFront:()=>hc,CullFaceFrontBack:()=>dc,CullFaceNone:()=>cc,Curve:()=>My,CurvePath:()=>jy,CustomBlending:()=>Ec,CustomToneMapping:()=>lu,CylinderGeometry:()=>my,Cylindrical:()=>eS,Data3DTexture:()=>Of,DataArrayTexture:()=>Df,DataTexture:()=>Yg,DataTextureLoader:()=>Rb,DataUtils:()=>fm,DecrementStencilOp:()=>cd,DecrementWrapStencilOp:()=>hd,DefaultLoadingManager:()=>_b,DepthFormat:()=>Yu,DepthStencilFormat:()=>Zu,DepthTexture:()=>hy,DetachedBindMode:()=>du,DirectionalLight:()=>Xb,DirectionalLightHelper:()=>RS,DiscreteInterpolant:()=>sb,DodecahedronGeometry:()=>yy,DoubleSide:()=>_c,DstAlphaFactor:()=>Oc,DstColorFactor:()=>zc,DynamicCopyUsage:()=>Ud,DynamicDrawUsage:()=>Pd,DynamicReadUsage:()=>kd,EdgesGeometry:()=>wy,EllipseCurve:()=>Ey,EqualCompare:()=>wd,EqualDepth:()=>Kc,EqualStencilFunc:()=>md,EquirectangularReflectionMapping:()=>gu,EquirectangularRefractionMapping:()=>vu,Euler:()=>Sp,EventDispatcher:()=>Wd,ExternalTexture:()=>dy,ExtrudeGeometry:()=>w_,FileLoader:()=>wb,Float16BufferAttribute:()=>Em,Float32BufferAttribute:()=>Tm,FloatType:()=>Fu,Fog:()=>fg,FogExp2:()=>dg,FramebufferTexture:()=>sy,FrontSide:()=>vc,Frustum:()=>pv,FrustumArray:()=>vv,GLBufferAttribute:()=>Xx,GLSL1:()=>Fd,GLSL3:()=>zd,GreaterCompare:()=>Ed,GreaterDepth:()=>Qc,GreaterEqualCompare:()=>Ad,GreaterEqualDepth:()=>Jc,GreaterEqualStencilFunc:()=>_d,GreaterStencilFunc:()=>vd,GridHelper:()=>MS,Group:()=>cg,HalfFloatType:()=>zu,HemisphereLight:()=>Ib,HemisphereLightHelper:()=>wS,IcosahedronGeometry:()=>E_,ImageBitmapLoader:()=>sx,ImageLoader:()=>Ab,ImageUtils:()=>Ef,IncrementStencilOp:()=>ld,IncrementWrapStencilOp:()=>ud,InstancedBufferAttribute:()=>Qg,InstancedBufferGeometry:()=>$b,InstancedInterleavedBuffer:()=>Wx,InstancedMesh:()=>sv,Int16BufferAttribute:()=>xm,Int32BufferAttribute:()=>wm,Int8BufferAttribute:()=>ym,IntType:()=>Uu,InterleavedBuffer:()=>mg,InterleavedBufferAttribute:()=>vg,Interpolant:()=>rb,InterpolateDiscrete:()=>Oh,InterpolateLinear:()=>Fh,InterpolateSmooth:()=>zh,InterpolationSamplingMode:()=>jd,InterpolationSamplingType:()=>Gd,InvertStencilOp:()=>dd,KeepStencilOp:()=>sd,KeyframeTrack:()=>ob,LOD:()=>Ug,LatheGeometry:()=>T_,Layers:()=>wp,LessCompare:()=>Sd,LessDepth:()=>Yc,LessEqualCompare:()=>Md,LessEqualDepth:()=>Zc,LessEqualStencilFunc:()=>gd,LessStencilFunc:()=>pd,Light:()=>Lb,LightProbe:()=>Kb,Line:()=>Wv,Line3:()=>hS,LineBasicMaterial:()=>Ov,LineCurve:()=>Fy,LineCurve3:()=>zy,LineDashedMaterial:()=>K_,LineLoop:()=>Kv,LineSegments:()=>Zv,LinearFilter:()=>Au,LinearInterpolant:()=>ab,LinearMipMapLinearFilter:()=>Lu,LinearMipMapNearestFilter:()=>Ru,LinearMipmapLinearFilter:()=>Pu,LinearMipmapNearestFilter:()=>Cu,LinearSRGBColorSpace:()=>nd,LinearToneMapping:()=>iu,LinearTransfer:()=>rd,Loader:()=>bb,LoaderUtils:()=>Qb,LoadingManager:()=>yb,LoopOnce:()=>Nh,LoopPingPong:()=>Uh,LoopRepeat:()=>Dh,MOUSE:()=>oc,Material:()=>om,MaterialLoader:()=>Jb,MathUtils:()=>nf,Matrix2:()=>tS,Matrix3:()=>cf,Matrix4:()=>dp,MaxEquation:()=>Pc,Mesh:()=>Xm,MeshBasicMaterial:()=>lm,MeshDepthMaterial:()=>q_,MeshDistanceMaterial:()=>Y_,MeshLambertMaterial:()=>X_,MeshMatcapMaterial:()=>Z_,MeshNormalMaterial:()=>W_,MeshPhongMaterial:()=>G_,MeshPhysicalMaterial:()=>V_,MeshStandardMaterial:()=>H_,MeshToonMaterial:()=>j_,MinEquation:()=>Rc,MirroredRepeatWrapping:()=>xu,MixOperation:()=>tu,MultiplyBlending:()=>Mc,MultiplyOperation:()=>eu,NearestFilter:()=>Su,NearestMipMapLinearFilter:()=>Tu,NearestMipMapNearestFilter:()=>Mu,NearestMipmapLinearFilter:()=>Eu,NearestMipmapNearestFilter:()=>wu,NeutralToneMapping:()=>uu,NeverCompare:()=>xd,NeverDepth:()=>Xc,NeverStencilFunc:()=>fd,NoBlending:()=>bc,NoColorSpace:()=>ed,NoToneMapping:()=>ru,NormalAnimationBlendMode:()=>Gh,NormalBlending:()=>xc,NotEqualCompare:()=>Td,NotEqualDepth:()=>$c,NotEqualStencilFunc:()=>yd,NumberKeyframeTrack:()=>ub,Object3D:()=>zp,ObjectLoader:()=>tx,ObjectSpaceNormalMap:()=>$h,OctahedronGeometry:()=>A_,OneFactor:()=>Ic,OneMinusConstantAlphaFactor:()=>Wc,OneMinusConstantColorFactor:()=>Gc,OneMinusDstAlphaFactor:()=>Fc,OneMinusDstColorFactor:()=>Bc,OneMinusSrcAlphaFactor:()=>Uc,OneMinusSrcColorFactor:()=>Nc,OrthographicCamera:()=>jb,PCFShadowMap:()=>pc,PCFSoftShadowMap:()=>mc,PMREMGenerator:()=>_w,Path:()=>Wy,PerspectiveCamera:()=>ig,Plane:()=>uv,PlaneGeometry:()=>C_,PlaneHelper:()=>OS,PointLight:()=>Gb,PointLightHelper:()=>_S,Points:()=>ny,PointsMaterial:()=>Jv,PolarGridHelper:()=>ES,PolyhedronGeometry:()=>vy,PositionalAudio:()=>Ax,PropertyBinding:()=>Ux,PropertyMixer:()=>Rx,QuadraticBezierCurve:()=>By,QuadraticBezierCurve3:()=>Hy,Quaternion:()=>af,QuaternionKeyframeTrack:()=>db,QuaternionLinearInterpolant:()=>hb,RED_GREEN_RGTC2_Format:()=>Ih,RED_RGTC1_Format:()=>Ph,REVISION:()=>sc,RGBADepthPacking:()=>Zh,RGBAFormat:()=>qu,RGBAIntegerFormat:()=>th,RGBA_ASTC_10x10_Format:()=>Mh,RGBA_ASTC_10x5_Format:()=>xh,RGBA_ASTC_10x6_Format:()=>Sh,RGBA_ASTC_10x8_Format:()=>wh,RGBA_ASTC_12x10_Format:()=>Eh,RGBA_ASTC_12x12_Format:()=>Th,RGBA_ASTC_4x4_Format:()=>fh,RGBA_ASTC_5x4_Format:()=>ph,RGBA_ASTC_5x5_Format:()=>mh,RGBA_ASTC_6x5_Format:()=>gh,RGBA_ASTC_6x6_Format:()=>vh,RGBA_ASTC_8x5_Format:()=>yh,RGBA_ASTC_8x6_Format:()=>_h,RGBA_ASTC_8x8_Format:()=>bh,RGBA_BPTC_Format:()=>Ah,RGBA_ETC2_EAC_Format:()=>dh,RGBA_PVRTC_2BPPV1_Format:()=>ch,RGBA_PVRTC_4BPPV1_Format:()=>lh,RGBA_S3TC_DXT1_Format:()=>rh,RGBA_S3TC_DXT3_Format:()=>ih,RGBA_S3TC_DXT5_Format:()=>ah,RGBDepthPacking:()=>Kh,RGBFormat:()=>Xu,RGBIntegerFormat:()=>eh,RGB_BPTC_SIGNED_Format:()=>Ch,RGB_BPTC_UNSIGNED_Format:()=>Rh,RGB_ETC1_Format:()=>uh,RGB_ETC2_Format:()=>hh,RGB_PVRTC_2BPPV1_Format:()=>oh,RGB_PVRTC_4BPPV1_Format:()=>sh,RGB_S3TC_DXT1_Format:()=>nh,RGDepthPacking:()=>Jh,RGFormat:()=>Qu,RGIntegerFormat:()=>$u,RawShaderMaterial:()=>B_,Ray:()=>hp,Raycaster:()=>Yx,RectAreaLight:()=>Yb,RedFormat:()=>Ku,RedIntegerFormat:()=>Ju,ReinhardToneMapping:()=>au,RenderTarget:()=>kf,RenderTarget3D:()=>Hx,RepeatWrapping:()=>_u,ReplaceStencilOp:()=>od,ReverseSubtractEquation:()=>Cc,RingGeometry:()=>R_,SIGNED_RED_GREEN_RGTC2_Format:()=>kh,SIGNED_RED_RGTC1_Format:()=>Lh,SRGBColorSpace:()=>td,SRGBTransfer:()=>id,Scene:()=>pg,ShaderChunk:()=>ZS,ShaderLib:()=>JS,ShaderMaterial:()=>$m,ShadowMaterial:()=>z_,Shape:()=>Xy,ShapeGeometry:()=>P_,ShapePath:()=>GS,ShapeUtils:()=>b_,ShortType:()=>Nu,Skeleton:()=>Jg,SkeletonHelper:()=>vS,SkinnedMesh:()=>Xg,Source:()=>Af,Sphere:()=>rp,SphereGeometry:()=>L_,Spherical:()=>$x,SphericalHarmonics3:()=>Zb,SplineCurve:()=>Vy,SpotLight:()=>Fb,SpotLightHelper:()=>fS,Sprite:()=>Ig,SpriteMaterial:()=>yg,SrcAlphaFactor:()=>Dc,SrcAlphaSaturateFactor:()=>Hc,SrcColorFactor:()=>kc,StaticCopyUsage:()=>Dd,StaticDrawUsage:()=>Rd,StaticReadUsage:()=>Id,StereoCamera:()=>fx,StreamCopyUsage:()=>Od,StreamDrawUsage:()=>Ld,StreamReadUsage:()=>Nd,StringKeyframeTrack:()=>fb,SubtractEquation:()=>Ac,SubtractiveBlending:()=>wc,TOUCH:()=>lc,TangentSpaceNormalMap:()=>Qh,TetrahedronGeometry:()=>I_,Texture:()=>Lf,TextureLoader:()=>Pb,TextureUtils:()=>XS,Timer:()=>Jx,TimestampQuery:()=>Vd,TorusGeometry:()=>k_,TorusKnotGeometry:()=>N_,Triangle:()=>$p,TriangleFanDrawMode:()=>qh,TriangleStripDrawMode:()=>Xh,TrianglesDrawMode:()=>Wh,TubeGeometry:()=>D_,UVMapping:()=>fu,Uint16BufferAttribute:()=>Sm,Uint32BufferAttribute:()=>Mm,Uint8BufferAttribute:()=>_m,Uint8ClampedBufferAttribute:()=>bm,Uniform:()=>Vx,UniformsGroup:()=>jx,UniformsLib:()=>KS,UniformsUtils:()=>Qm,UnsignedByteType:()=>Iu,UnsignedInt101111Type:()=>ju,UnsignedInt248Type:()=>Vu,UnsignedInt5999Type:()=>Gu,UnsignedIntType:()=>Ou,UnsignedShort4444Type:()=>Bu,UnsignedShort5551Type:()=>Hu,UnsignedShortType:()=>Du,VSMShadowMap:()=>gc,Vector2:()=>rf,Vector3:()=>sf,Vector4:()=>If,VectorKeyframeTrack:()=>pb,VideoFrameTexture:()=>ay,VideoTexture:()=>iy,WebGL3DRenderTarget:()=>Ff,WebGLArrayRenderTarget:()=>Uf,WebGLCoordinateSystem:()=>Bd,WebGLCubeRenderTarget:()=>lg,WebGLRenderTarget:()=>Nf,WebGLRenderer:()=>CE,WebGLUtils:()=>xE,WebGPUCoordinateSystem:()=>Hd,WebXRController:()=>hg,WireframeGeometry:()=>U_,WrapAroundEnding:()=>Vh,ZeroCurvatureEnding:()=>Bh,ZeroFactor:()=>Lc,ZeroSlopeEnding:()=>Hh,ZeroStencilOp:()=>ad,createCanvasElement:()=>mf});var t,r=n(43),i=n.t(r,2),a=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function l(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h="undefined"!=typeof self?self:{};function d(){throw Error("Invalid UTF8")}function f(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}let p,m;const g="undefined"!=typeof TextDecoder;let v;const y="undefined"!=typeof TextEncoder;function _(e){if(y)e=(v||(v=new TextEncoder)).encode(e);else{let n=0;const r=new Uint8Array(3*e.length);for(let i=0;i<e.length;i++){var t=e.charCodeAt(i);if(t<128)r[n++]=t;else{if(t<2048)r[n++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&i<e.length){const a=e.charCodeAt(++i);if(a>=56320&&a<=57343){t=1024*(t-55296)+a-56320+65536,r[n++]=t>>18|240,r[n++]=t>>12&63|128,r[n++]=t>>6&63|128,r[n++]=63&t|128;continue}i--}t=65533}r[n++]=t>>12|224,r[n++]=t>>6&63|128}r[n++]=63&t|128}}e=n===r.length?r:r.subarray(0,n)}return e}var b,x;e:{for(var S=["CLOSURE_FLAGS"],w=h,M=0;M<S.length;M++)if(null==(w=w[S[M]])){x=null;break e}x=w}var E,T=x&&x[610401301];b=null!=T&&T;const A=h.navigator;function C(e){return!!b&&!!E&&E.brands.some(t=>{let{brand:n}=t;return n&&-1!=n.indexOf(e)})}function R(e){var t;return(t=h.navigator)&&(t=t.userAgent)||(t=""),-1!=t.indexOf(e)}function P(){return!!b&&!!E&&E.brands.length>0}function L(){return P()?C("Chromium"):(R("Chrome")||R("CriOS"))&&!(!P()&&R("Edge"))||R("Silk")}function I(e){return I[" "](e),e}E=A&&A.userAgentData||null,I[" "]=function(){};var k=!P()&&(R("Trident")||R("MSIE"));!R("Android")||L(),L(),R("Safari")&&(L()||!P()&&R("Coast")||!P()&&R("Opera")||!P()&&R("Edge")||(P()?C("Microsoft Edge"):R("Edg/"))||P()&&C("Opera"));var N={},D=null;function U(){if(!D){D={};var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"];for(let n=0;n<5;n++){const r=e.concat(t[n].split(""));N[n]=r;for(let e=0;e<r.length;e++){const t=r[e];void 0===D[t]&&(D[t]=e)}}}}var O="undefined"!=typeof Uint8Array,F=!k&&"function"==typeof btoa;function z(e){if(!F){var t;void 0===t&&(t=0),U(),t=N[t];var n=Array(Math.floor(e.length/3)),r=t[64]||"";let l=0,c=0;for(;l<e.length-2;l+=3){var i=e[l],a=e[l+1],s=e[l+2],o=t[i>>2];i=t[(3&i)<<4|a>>4],a=t[(15&a)<<2|s>>6],s=t[63&s],n[c++]=o+i+a+s}switch(o=0,s=r,e.length-l){case 2:s=t[(15&(o=e[l+1]))<<2]||r;case 1:e=e[l],n[c]=t[e>>2]+t[(3&e)<<4|o>>4]+s+r}return n.join("")}for(t="",n=0,r=e.length-10240;n<r;)t+=String.fromCharCode.apply(null,e.subarray(n,n+=10240));return t+=String.fromCharCode.apply(null,n?e.subarray(n):e),btoa(t)}const B=/[-_.]/g,H={"-":"+",_:"/",".":"="};function V(e){return H[e]||""}function G(e){if(!F)return function(e){const t=e.length;let n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);const r=new Uint8Array(n);let i=0;return function(e,t){function n(t){for(;r<e.length;){const t=e.charAt(r++),n=D[t];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(t))throw Error("Unknown base64 encoding at char: "+t)}return t}U();let r=0;for(;;){const e=n(-1),r=n(0),i=n(64),a=n(64);if(64===a&&-1===e)break;t(e<<2|r>>4),64!=i&&(t(r<<4&240|i>>2),64!=a&&t(i<<6&192|a))}}(e,function(e){r[i++]=e}),i!==n?r.subarray(0,i):r}(e);B.test(e)&&(e=e.replace(B,V)),e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function j(e){return O&&null!=e&&e instanceof Uint8Array}var W={};function X(){return Z||(Z=new Y(null,W))}function q(e){J(W);var t=e.g;return null==(t=null==t||j(t)?t:"string"==typeof t?G(t):null)?t:e.g=t}var Y=class{h(){return new Uint8Array(q(this)||0)}constructor(e,t){if(J(t),this.g=e,null!=e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}};let Z,K;function J(e){if(e!==W)throw Error("illegal external caller")}function Q(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}function $(e){return Q(e=Error(e),"warning"),e}function ee(e){if(null!=e){var t=null!==K&&void 0!==K?K:K={},n=t[e]||0;n>=5||(t[e]=n+1,Q(e=Error(),"incident"),function(e){h.setTimeout(()=>{throw e},0)}(e))}}var te="function"==typeof Symbol&&"symbol"==typeof Symbol();function ne(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"function"==typeof Symbol&&"symbol"==typeof Symbol()?n&&Symbol.for&&e?Symbol.for(e):null!=e?Symbol(e):Symbol():t}var re=ne("jas",void 0,!0),ie=ne(void 0,"0di"),ae=ne(void 0,"1oa"),se=ne(void 0,Symbol()),oe=ne(void 0,"0actk"),le=ne(void 0,"8utk");const ce=te?re:"Ea",ue={Ea:{value:0,configurable:!0,writable:!0,enumerable:!1}},he=Object.defineProperties;function de(e,t){te||ce in e||he(e,ue),e[ce]|=t}function fe(e,t){te||ce in e||he(e,ue),e[ce]=t}function pe(e){return de(e,34),e}function me(e,t){fe(t,-15615&e)}function ge(e,t){fe(t,-15581&e|34)}function ve(){return"function"==typeof BigInt}function ye(e){return Array.prototype.slice.call(e)}var _e,be={};function xe(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)&&e.constructor===Object}function Se(e,t){if(null!=e)if("string"==typeof e)e=e?new Y(e,W):X();else if(e.constructor!==Y)if(j(e))e=e.length?new Y(new Uint8Array(e),W):X();else{if(!t)throw Error();e=void 0}return e}const we=[];function Me(e){if(2&e)throw Error()}fe(we,55),_e=Object.freeze(we);class Ee{constructor(e,t,n){this.g=e,this.h=t,this.l=n}next(){const e=this.g.next();return e.done||(e.value=this.h.call(this.l,e.value)),e}[Symbol.iterator](){return this}}function Te(e){return se?e[se]:void 0}var Ae=Object.freeze({});function Ce(e){return e.Na=!0,e}var Re=Ce(e=>"number"==typeof e),Pe=Ce(e=>"string"==typeof e),Le=Ce(e=>"boolean"==typeof e),Ie="function"==typeof h.BigInt&&"bigint"==typeof h.BigInt(0);function ke(e){var t=e;if(Pe(t)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t))throw Error(String(t))}else if(Re(t)&&!Number.isSafeInteger(t))throw Error(String(t));return Ie?BigInt(e):e=Le(e)?e?"1":"0":Pe(e)?e.trim()||"0":String(e)}var Ne=Ce(e=>Ie?e>=Ue&&e<=Fe:"-"===e[0]?ze(e,De):ze(e,Oe));const De=Number.MIN_SAFE_INTEGER.toString(),Ue=Ie?BigInt(Number.MIN_SAFE_INTEGER):void 0,Oe=Number.MAX_SAFE_INTEGER.toString(),Fe=Ie?BigInt(Number.MAX_SAFE_INTEGER):void 0;function ze(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(r>i)return!1;if(r<i)return!0}}const Be="function"==typeof Uint8Array.prototype.slice;let He,Ve=0,Ge=0;function je(e){const t=e>>>0;Ve=t,Ge=(e-t)/4294967296>>>0}function We(e){if(e<0){je(-e);const[t,n]=$e(Ve,Ge);Ve=t>>>0,Ge=n>>>0}else je(e)}function Xe(e){const t=He||(He=new DataView(new ArrayBuffer(8)));t.setFloat32(0,+e,!0),Ge=0,Ve=t.getUint32(0,!0)}function qe(e,t){const n=4294967296*t+(e>>>0);return Number.isSafeInteger(n)?n:Ze(e,t)}function Ye(e,t){const n=2147483648&t;return n&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),"number"==typeof(e=qe(e,t))?n?-e:e:n?"-"+e:e}function Ze(e,t){if(e>>>=0,(t>>>=0)<=2097151)var n=""+(4294967296*t+e);else ve()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(n=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+Ke(n)+Ke(e));return n}function Ke(e){return e=String(e),"0000000".slice(e.length)+e}function Je(){var e=Ve,t=Ge;if(2147483648&t)if(ve())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[n,r]=$e(e,t);e="-"+Ze(n,r)}else e=Ze(e,t);return e}function Qe(e){if(e.length<16)We(Number(e));else if(ve())e=BigInt(e),Ve=Number(e&BigInt(4294967295))>>>0,Ge=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+("-"===e[0]);Ge=Ve=0;const n=e.length;for(let r=t,i=(n-t)%6+t;i<=n;r=i,i+=6){const t=Number(e.slice(r,i));Ge*=1e6,Ve=1e6*Ve+t,Ve>=4294967296&&(Ge+=Math.trunc(Ve/4294967296),Ge>>>=0,Ve>>>=0)}if(t){const[e,t]=$e(Ve,Ge);Ve=e,Ge=t}}}function $e(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}const et="function"==typeof BigInt?BigInt.asIntN:void 0,tt="function"==typeof BigInt?BigInt.asUintN:void 0,nt=Number.isSafeInteger,rt=Number.isFinite,it=Math.trunc,at=ke(0);function st(e){return null==e||"number"==typeof e?e:"NaN"===e||"Infinity"===e||"-Infinity"===e?Number(e):void 0}function ot(e){return null==e||"boolean"==typeof e?e:"number"==typeof e?!!e:void 0}const lt=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function ct(e){switch(typeof e){case"bigint":return!0;case"number":return rt(e);case"string":return lt.test(e);default:return!1}}function ut(e){if(null==e)return e;if("string"==typeof e&&e)e=+e;else if("number"!=typeof e)return;return rt(e)?0|e:void 0}function ht(e){if(null==e)return e;if("string"==typeof e&&e)e=+e;else if("number"!=typeof e)return;return rt(e)?e>>>0:void 0}function dt(e){if("-"===e[0])return!1;const t=e.length;return t<20||20===t&&Number(e.substring(0,6))<184467}function ft(e){const t=e.length;return"-"===e[0]?t<20||20===t&&Number(e.substring(0,7))>-922337:t<19||19===t&&Number(e.substring(0,6))<922337}function pt(e){return ft(e)?e:(Qe(e),Je())}function mt(e){return e=it(e),nt(e)||(We(e),e=Ye(Ve,Ge)),e}function gt(e){var t=it(Number(e));return nt(t)?String(t):(-1!==(t=e.indexOf("."))&&(e=e.substring(0,t)),pt(e))}function vt(e){var t=it(Number(e));return nt(t)?ke(t):(-1!==(t=e.indexOf("."))&&(e=e.substring(0,t)),ve()?ke(et(64,BigInt(e))):ke(pt(e)))}function yt(e){if(nt(e))e=ke(mt(e));else{if(e=it(e),nt(e))e=String(e);else{const t=String(e);ft(t)?e=t:(We(e),e=Je())}e=ke(e)}return e}function _t(e){return null==e?e:"bigint"==typeof e?(Ne(e)?e=Number(e):(e=et(64,e),e=Ne(e)?Number(e):String(e)),e):ct(e)?"number"==typeof e?mt(e):gt(e):void 0}function bt(e){if("string"!=typeof e)throw Error();return e}function xt(e){if(null!=e&&"string"!=typeof e)throw Error();return e}function St(e){return null==e||"string"==typeof e?e:void 0}function wt(e,t,n,r){if(null!=e&&"object"==typeof e&&e.W===be)return e;if(!Array.isArray(e))return n?2&r?((e=t[ie])||(pe((e=new t).u),e=t[ie]=e),t=e):t=new t:t=void 0,t;let i=n=0|e[ce];return 0===i&&(i|=32&r),i|=2&r,i!==n&&fe(e,i),new t(e)}function Mt(e,t,n){if(t)e:{if(!ct(t=e))throw $("int64");switch(typeof t){case"string":t=vt(t);break e;case"bigint":t=ke(et(64,t));break e;default:t=yt(t)}}else e=typeof(t=e),t=null==t?t:"bigint"===e?ke(et(64,t)):ct(t)?"string"===e?vt(t):yt(t):void 0;return null==(e=t)?n?at:void 0:e}function Et(e){return e}const Tt={};let At=function(){try{return I(new class extends Map{constructor(){super()}}),!1}catch(e){return!0}}();class Ct{constructor(){this.g=new Map}get(e){return this.g.get(e)}set(e,t){return this.g.set(e,t),this.size=this.g.size,this}delete(e){return e=this.g.delete(e),this.size=this.g.size,e}clear(){this.g.clear(),this.size=this.g.size}has(e){return this.g.has(e)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(e,t){return this.g.forEach(e,t)}[Symbol.iterator](){return this.entries()}}const Rt=At?(Object.setPrototypeOf(Ct.prototype,Map.prototype),Object.defineProperties(Ct.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),Ct):class extends Map{constructor(){super()}};function Pt(e){return e}function Lt(e){if(2&e.M)throw Error("Cannot mutate an immutable Map")}var It=class extends Rt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pt,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pt;super();let i=0|e[ce];i|=64,fe(e,i),this.M=i,this.I=t,this.S=n,this.X=this.I?kt:r;for(let a=0;a<e.length;a++){const s=e[a],o=n(s[0],!1,!0);let l=s[1];t?void 0===l&&(l=null):l=r(s[1],!1,!0,void 0,void 0,i),super.set(o,l)}}La(){var e=Gt;if(0!==this.size)return Array.from(super.entries(),t=>(t[0]=e(t[0]),t[1]=e(t[1]),t))}da(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;const t=[],n=super.entries();for(var r;!(r=n.next()).done;)(r=r.value)[0]=e(r[0]),r[1]=e(r[1]),t.push(r);return t}clear(){Lt(this),super.clear()}delete(e){return Lt(this),super.delete(this.S(e,!0,!1))}entries(){if(this.I){var e=super.keys();e=new Ee(e,Dt,this)}else e=super.entries();return e}values(){if(this.I){var e=super.keys();e=new Ee(e,It.prototype.get,this)}else e=super.values();return e}forEach(e,t){this.I?super.forEach((n,r,i)=>{e.call(t,i.get(r),r,i)}):super.forEach(e,t)}set(e,t){return Lt(this),null==(e=this.S(e,!0,!1))?this:null==t?(super.delete(e),this):super.set(e,this.X(t,!0,!0,this.I,!1,this.M))}Ja(e){const t=this.S(e[0],!1,!0);e=e[1],e=this.I?void 0===e?null:e:this.X(e,!1,!0,void 0,!1,this.M),super.set(t,e)}has(e){return super.has(this.S(e,!1,!1))}get(e){e=this.S(e,!1,!1);const t=super.get(e);if(void 0!==t){var n=this.I;return n?((n=this.X(t,!1,!0,n,this.pa,this.M))!==t&&super.set(e,n),n):t}}[Symbol.iterator](){return this.entries()}};function kt(e,t,n,r,i,a){return e=wt(e,r,n,a),i&&(e=Kt(e)),e}function Nt(e){return e}function Dt(e){return[e,this.get(e)]}let Ut,Ot,Ft,zt;function Bt(){return Ut||(Ut=new It(pe([]),void 0,void 0,void 0,Tt))}function Ht(e,t,n,r,i){if(null!=e){if(Array.isArray(e)){const a=0|e[ce];return 0===e.length&&1&a?void 0:i&&2&a?e:Vt(e,t,n,void 0!==r,i)}return t(e,r)}}function Vt(e,t,n,r,i){const a=r||n?0|e[ce]:0,s=r?!!(32&a):void 0;let o=0;const l=(r=ye(e)).length;for(let p=0;p<l;p++){var c=r[p];if(p===l-1&&xe(c)){var u=t,h=n,d=s,f=i;let e;for(let t in c){const n=Ht(c[t],u,h,d,f);null!=n&&((null!==e&&void 0!==e?e:e={})[t]=n)}c=e}else c=Ht(r[p],t,n,s,i);r[p]=c,null!=c&&(o=p+1)}return o<l&&(r.length=o),n&&((e=Te(e))&&(r[se]=ye(e)),n(a,r)),r}function Gt(e){return Ht(e,jt,void 0,void 0,!1)}function jt(e){switch(typeof e){case"number":return Number.isFinite(e)?e:""+e;case"bigint":return Ne(e)?Number(e):""+e;case"boolean":return e?1:0;case"object":if(j(e))return j(e)&&ee(le),z(e);if(e.W===be)return Wt(e);if(e instanceof Y){const t=e.g;return null==t?"":"string"==typeof t?t:e.g=z(t)}return e instanceof It?e.La():void 0}return e}function Wt(e){var t=e.u;e=Vt(t,jt,void 0,void 0,!1);var n=0|t[ce];if((t=e.length)&&!(512&n)){var r=e[t-1],i=!1;xe(r)?(t--,i=!0):r=void 0;var a=t-(n=512&n?0:-1),s=(null!==Ot&&void 0!==Ot?Ot:Et)(a,n,e,r);if(r&&(e[t]=void 0),a<s&&r){for(var o in a=!0,r){const l=+o;l<=s?(e[i=l+n]=r[o],t=Math.max(i+1,t),i=!1,delete r[o]):a=!1}a&&(r=void 0)}for(a=t-1;t>0;a=t-1)if(null==(o=e[a]))t--,i=!0;else{if(!((a-=n)>=s))break;(null!==r&&void 0!==r?r:r={})[a]=o,t--,i=!0}i&&(e.length=t),r&&e.push(r)}return e}function Xt(e,t,n){return e=qt(e,t[0],t[1],n?1:2),t!==Ft&&n&&de(e,8192),e}function qt(e,t,n,r){if(null==e){var i=96;n?(e=[n],i|=512):e=[],t&&(i=-16760833&i|(1023&t)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(8192&(i=0|e[ce])||!(64&i)||2&i||ee(oe),1024&i)throw Error("farr");if(64&i)return e;if(1===r||2===r||(i|=64),n&&(i|=512,n!==e[0]))throw Error("mid");e:{var a=(n=e).length;if(a){var s=a-1;if(xe(r=n[s])){if((s-=t=512&(i|=256)?0:-1)>=1024)throw Error("pvtlmt");for(var o in r)(a=+o)<s&&(n[a+t]=r[o],delete r[o]);i=-16760833&i|(1023&s)<<14;break e}}if(t){if((o=Math.max(t,a-(512&i?0:-1)))>1024)throw Error("spvt");i=-16760833&i|(1023&o)<<14}}}return fe(e,i),e}function Yt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ge;if(null!=e){if(O&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var r=0|e[ce];return 2&r?e:(t&&(t=0===r||!!(32&r)&&!(64&r||!(16&r))),t?(fe(e,34|r),4&r&&Object.freeze(e),e):Vt(e,Yt,4&r?ge:n,!0,!0))}return e.W===be?e=2&(r=0|(n=e.u)[ce])?e:new e.constructor(Zt(n,r,!0)):e instanceof It&&!(2&e.M)&&(n=pe(e.da(Yt)),e=new It(n,e.I,e.S,e.X)),e}}function Zt(e,t,n){const r=n||2&t?ge:me,i=!!(32&t);return e=function(e,t,n){const r=ye(e);var i=r.length;const a=256&t?r[i-1]:void 0;for(i+=a?-1:0,t=512&t?1:0;t<i;t++)r[t]=n(r[t]);if(a){t=r[t]={};for(const e in a)t[e]=n(a[e])}return(e=Te(e))&&(r[se]=ye(e)),r}(e,t,e=>Yt(e,i,r)),de(e,32|(n?2:0)),e}function Kt(e){const t=e.u,n=0|t[ce];return 2&n?new e.constructor(Zt(t,n,!1)):e}function Jt(e,t){return Qt(e=e.u,0|e[ce],t)}function Qt(e,t,n){if(-1===n)return null;const r=n+(512&t?0:-1),i=e.length-1;return r>=i&&256&t?e[i][n]:r<=i?e[r]:void 0}function $t(e,t,n){const r=e.u;let i=0|r[ce];return Me(i),en(r,i,t,n),e}function en(e,t,n,r){const i=512&t?0:-1,a=n+i;var s=e.length-1;return a>=s&&256&t?(e[s][n]=r,t):a<=s?(e[a]=r,t):(void 0!==r&&(n>=(s=t>>14&1023||536870912)?null!=r&&(e[s+i]={[n]:r},fe(e,t|=256)):e[a]=r),t)}function tn(e,t){let n=0|(e=e.u)[ce];const r=Qt(e,n,t),i=st(r);return null!=i&&i!==r&&en(e,n,t,i),i}function nn(e){let t=0|(e=e.u)[ce];const n=Qt(e,t,1),r=Se(n,!0);return null!=r&&r!==n&&en(e,t,1,r),r}function rn(){return void 0===Ae?2:4}function an(e,t,n,r,i){const a=e.u,s=2&(e=0|a[ce])?1:r;i=!!i;let o=0|(r=sn(a,e,t))[ce];if(!(4&o)){4&o&&(r=ye(r),o=wn(o,e),e=en(a,e,t,r));let i=0,s=0;for(;i<r.length;i++){const e=n(r[i]);null!=e&&(r[s++]=e)}s<i&&(r.length=s),o=on(o,e),n=-2049&o|20,o=n&=-4097,fe(r,o),2&o&&Object.freeze(r)}return 1===s||4===s&&32&o?ln(o)||(i=o,o|=2,o!==i&&fe(r,o),Object.freeze(r)):(2===s&&ln(o)&&(r=ye(r),o=wn(o,e),o=Mn(o,e,i),fe(r,o),e=en(a,e,t,r)),ln(o)||(t=o,o=Mn(o,e,i),o!==t&&fe(r,o))),r}function sn(e,t,n){return e=Qt(e,t,n),Array.isArray(e)?e:_e}function on(e,t){return 0===e&&(e=wn(e,t)),1|e}function ln(e){return!!(2&e)&&!!(4&e)||!!(1024&e)}function cn(e){e=ye(e);for(let t=0;t<e.length;t++){const n=e[t]=ye(e[t]);Array.isArray(n[1])&&(n[1]=pe(n[1]))}return e}function un(e,t,n,r){let i=0|(e=e.u)[ce];Me(i),en(e,i,t,("0"===r?0===Number(n):n===r)?void 0:n)}function hn(e,t,n,r){Me(t);let i=sn(e,t,n);const a=i!==_e;if(64&t||!(8192&t)||!a){const s=a?0|i[ce]:0;let o=s;(!a||2&o||ln(o)||4&o&&!(32&o))&&(i=ye(i),o=wn(o,t),t=en(e,t,n,i)),o=-13&on(o,t),o=Mn(r?-17&o:16|o,t,!0),o!==s&&fe(i,o)}return i}function dn(e,t){var n=Pa;return mn(fn(e=e.u),e,0|e[ce],n)===t?t:-1}function fn(e){var t;if(te)return null!==(t=e[ae])&&void 0!==t?t:e[ae]=new Map;if(ae in e)return e[ae];const n=new Map;return Object.defineProperty(e,ae,{value:n}),n}function pn(e,t,n,r){const i=fn(e),a=mn(i,e,t,n);return a!==r&&(a&&(t=en(e,t,a)),i.set(n,r)),t}function mn(e,t,n,r){let i=e.get(r);if(null!=i)return i;i=0;for(let a=0;a<r.length;a++){const e=r[a];null!=Qt(t,n,e)&&(0!==i&&(n=en(t,n,i)),i=e)}return e.set(r,i),i}function gn(e,t,n){let r=0|e[ce];const i=Qt(e,r,n);let a;if(null!=i&&i.W===be)return(t=Kt(i))!==i&&en(e,r,n,t),t.u;if(Array.isArray(i)){const e=0|i[ce];a=2&e?Xt(Zt(i,e,!1),t,!0):64&e?i:Xt(a,t,!0)}else a=Xt(void 0,t,!0);return a!==i&&en(e,r,n,a),a}function vn(e,t,n){let r=0|(e=e.u)[ce];const i=Qt(e,r,n);return(t=wt(i,t,!1,r))!==i&&null!=t&&en(e,r,n,t),t}function yn(e,t,n){if(null==(t=vn(e,t,n)))return t;let r=0|(e=e.u)[ce];if(!(2&r)){const i=Kt(t);i!==t&&en(e,r,n,t=i)}return t}function _n(e,t,n,r,i,a,s){var o=!!(2&t);const l=o?1:i;a=!!a,s&&(s=!o);var c=0|(i=sn(e=e.u,t,r))[ce];if(!(o=!!(4&c))){var u=i,h=t;const e=!!(2&(c=on(c,t)));e&&(h|=2);let r=!e,a=!0,s=0,o=0;for(;s<u.length;s++){const t=wt(u[s],n,!1,h);if(t instanceof n){if(!e){const e=!!(2&t.u[ce]);r&&(r=!e),a&&(a=e)}u[o++]=t}}o<s&&(u.length=o),c|=4,c=a?16|c:-17&c,fe(u,c=r?8|c:-9&c),e&&Object.freeze(u)}if(s&&!(8&c||!i.length&&(1===l||4===l&&32&c))){for(ln(c)&&(i=ye(i),c=wn(c,t),t=en(e,t,r,i)),n=i,s=c,u=0;u<n.length;u++)(c=n[u])!==(h=Kt(c))&&(n[u]=h);s|=8,fe(n,s=n.length?-17&s:16|s),c=s}return 1===l||4===l&&32&c?ln(c)||(t=c,(c|=!i.length||16&c&&(!o||32&c)?2:1024)!==t&&fe(i,c),Object.freeze(i)):(2===l&&ln(c)&&(fe(i=ye(i),c=Mn(c=wn(c,t),t,a)),t=en(e,t,r,i)),ln(c)||(r=c,(c=Mn(c,t,a))!==r&&fe(i,c))),i}function bn(e,t,n){const r=0|e.u[ce];return _n(e,r,t,n,rn(),!1,!(2&r))}function xn(e,t,n,r){return null==r&&(r=void 0),$t(e,n,r)}function Sn(e,t,n,r){null==r&&(r=void 0);e:{let i=0|(e=e.u)[ce];if(Me(i),null==r){const r=fn(e);if(mn(r,e,i,n)!==t)break e;r.set(n,0)}else i=pn(e,i,n,t);en(e,i,t,r)}}function wn(e,t){return-1025&(2&t?2|e:-3&e)|32}function Mn(e,t,n){return 32&t&&n||(e&=-33),e}function En(e,t,n){Me(0|e.u[ce]),an(e,t,St,2,!0).push(bt(n))}function Tn(e,t,n,r){const i=0|e.u[ce];Me(i),e=_n(e,i,n,t,2,!0),r=null!=r?r:new n,e.push(r),e[ce]=2&r.u[ce]?-9&e[ce]:-17&e[ce]}function An(e,t){return ut(Jt(e,t))}function Cn(e,t){return St(Jt(e,t))}function Rn(e,t){var n;return null!==(n=tn(e,t))&&void 0!==n?n:0}function Pn(e,t,n){if(null!=n&&"boolean"!=typeof n)throw e=typeof n,Error("Expected boolean but got ".concat("object"!=e?e:n?Array.isArray(n)?"array":e:"null",": ").concat(n));$t(e,t,n)}function Ln(e,t,n){if(null!=n){if("number"!=typeof n)throw $("int32");if(!rt(n))throw $("int32");n|=0}$t(e,t,n)}function In(e,t,n){if(null!=n&&"number"!=typeof n)throw Error("Value of float/double field must be a number, found ".concat(typeof n,": ").concat(n));$t(e,t,n)}function kn(e,t,n){{const s=e.u;let o=0|s[ce];if(Me(o),null==n)en(s,o,t);else{var r=e=0|n[ce],i=ln(e),a=i||Object.isFrozen(n);for(i||(e=0),a||(n=ye(n),r=0,e=Mn(e=wn(e,o),o,!0),a=!1),e|=21,i=0;i<n.length;i++){const t=n[i],s=bt(t);Object.is(t,s)||(a&&(n=ye(n),r=0,e=Mn(e=wn(e,o),o,!0),a=!1),n[i]=s)}e!==r&&(a&&(n=ye(n),e=Mn(e=wn(e,o),o,!0)),fe(n,e)),en(s,o,t,n)}}}function Nn(e,t){return Error("Invalid wire type: ".concat(e," (at position ").concat(t,")"))}function Dn(){return Error("Failed to read varint, encoding is invalid.")}function Un(e,t){return Error("Tried to read past the end of the data ".concat(t," > ").concat(e))}function On(e){if("string"==typeof e)return{buffer:G(e),O:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),O:!1};if(e.constructor===Uint8Array)return{buffer:e,O:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),O:!1};if(e.constructor===Y)return{buffer:q(e)||new Uint8Array(0),O:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),O:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Fn(e,t){let n,r=0,i=0,a=0;const s=e.h;let o=e.g;do{n=s[o++],r|=(127&n)<<a,a+=7}while(a<32&&128&n);for(a>32&&(i|=(127&n)>>4),a=3;a<32&&128&n;a+=7)n=s[o++],i|=(127&n)<<a;if(Xn(e,o),n<128)return t(r>>>0,i>>>0);throw Dn()}function zn(e){let t=0,n=e.g;const r=n+10,i=e.h;for(;n<r;){const r=i[n++];if(t|=r,0==(128&r))return Xn(e,n),!!(127&t)}throw Dn()}function Bn(e){const t=e.h;let n=e.g,r=t[n++],i=127&r;if(128&r&&(r=t[n++],i|=(127&r)<<7,128&r&&(r=t[n++],i|=(127&r)<<14,128&r&&(r=t[n++],i|=(127&r)<<21,128&r&&(r=t[n++],i|=r<<28,128&r&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++])))))throw Dn();return Xn(e,n),i}function Hn(e){return Bn(e)>>>0}function Vn(e){var t=e.h;const n=e.g,r=t[n],i=t[n+1],a=t[n+2];return t=t[n+3],Xn(e,e.g+4),(r|i<<8|a<<16|t<<24)>>>0}function Gn(e){var t=Vn(e);e=2*(t>>31)+1;const n=t>>>23&255;return t&=8388607,255==n?t?NaN:e*(1/0):0==n?1401298464324817e-60*e*t:e*Math.pow(2,n-150)*(t+8388608)}function jn(e){return Bn(e)}function Wn(e,t){let{aa:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.aa=n,t&&(t=On(t),e.h=t.buffer,e.m=t.O,e.j=0,e.l=e.h.length,e.g=e.j)}function Xn(e,t){if(e.g=t,t>e.l)throw Un(e.l,t)}function qn(e,t){if(t<0)throw Error("Tried to read a negative byte length: ".concat(t));const n=e.g,r=n+t;if(r>e.l)throw Un(t,e.l-n);return e.g=r,n}function Yn(e,t){if(0==t)return X();var n=qn(e,t);return e.aa&&e.m?n=e.h.subarray(n,n+t):(e=e.h,n=n===(t=n+t)?new Uint8Array(0):Be?e.slice(n,t):new Uint8Array(e.subarray(n,t))),0==n.length?X():new Y(n,W)}It.prototype.toJSON=void 0;var Zn=[];function Kn(e){var t=e.g;if(t.g==t.l)return!1;e.l=e.g.g;var n=Hn(e.g);if(t=n>>>3,!((n&=7)>=0&&n<=5))throw Nn(n,e.l);if(t<1)throw Error("Invalid field number: ".concat(t," (at position ").concat(e.l,")"));return e.m=t,e.h=n,!0}function Jn(e){switch(e.h){case 0:0!=e.h?Jn(e):zn(e.g);break;case 1:Xn(e=e.g,e.g+8);break;case 2:if(2!=e.h)Jn(e);else{var t=Hn(e.g);Xn(e=e.g,e.g+t)}break;case 5:Xn(e=e.g,e.g+4);break;case 3:for(t=e.m;;){if(!Kn(e))throw Error("Unmatched start-group tag: stream EOF");if(4==e.h){if(e.m!=t)throw Error("Unmatched end-group tag");break}Jn(e)}break;default:throw Nn(e.h,e.l)}}function Qn(e,t,n){const r=e.g.l,i=Hn(e.g),a=e.g.g+i;let s=a-r;if(s<=0&&(e.g.l=a,n(t,e,void 0,void 0,void 0),s=a-e.g.g),s)throw Error("Message parsing ended unexpectedly. Expected to read ".concat(i," bytes, instead read ").concat(i-s," bytes, either the data ended unexpectedly or the message misreported its own length"));return e.g.g=a,e.g.l=r,t}function $n(e){var t=Hn(e.g),n=qn(e=e.g,t);if(e=e.h,g){var r,i=e;(r=m)||(r=m=new TextDecoder("utf-8",{fatal:!0})),t=n+t,i=0===n&&t===i.length?i:i.subarray(n,t);try{var a=r.decode(i)}catch(e){if(void 0===p){try{r.decode(new Uint8Array([128]))}catch(e){}try{r.decode(new Uint8Array([97])),p=!0}catch(e){p=!1}}throw!p&&(m=void 0),e}}else{t=(a=n)+t,n=[];let o,l=null;for(;a<t;){var s=e[a++];s<128?n.push(s):s<224?a>=t?d():(o=e[a++],s<194||128!=(192&o)?(a--,d()):n.push((31&s)<<6|63&o)):s<240?a>=t-1?d():(o=e[a++],128!=(192&o)||224===s&&o<160||237===s&&o>=160||128!=(192&(r=e[a++]))?(a--,d()):n.push((15&s)<<12|(63&o)<<6|63&r)):s<=244?a>=t-2?d():(o=e[a++],128!=(192&o)||o-144+(s<<28)>>30!=0||128!=(192&(r=e[a++]))||128!=(192&(i=e[a++]))?(a--,d()):(s=(7&s)<<18|(63&o)<<12|(63&r)<<6|63&i,s-=65536,n.push(55296+(s>>10&1023),56320+(1023&s)))):d(),n.length>=8192&&(l=f(l,n),n.length=0)}a=f(l,n)}return a}function er(e){const t=Hn(e.g);return Yn(e.g,t)}function tr(e,t,n){var r=Hn(e.g);for(r=e.g.g+r;e.g.g<r;)n.push(t(e.g))}var nr=[];function rr(e,t,n){t.g?t.m(e,t.g,t.h,n):t.m(e,t.h,n)}var ir=class{constructor(e,t){this.u=qt(e,t)}toJSON(){try{var e=Wt(this)}finally{Ot=void 0}return e}l(){var e=Es;return e.g?e.l(this,e.g,e.h):e.l(this,e.h,e.defaultValue)}clone(){const e=this.u;return new this.constructor(Zt(e,0|e[ce],!1))}O(){return!!(2&this.u[ce])}};function ar(e){return e?/^\d+$/.test(e)?(Qe(e),new sr(Ve,Ge)):null:or||(or=new sr(0,0))}ir.prototype.W=be,ir.prototype.toString=function(){return this.u.toString()};var sr=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let or;function lr(e){return e?/^-?\d+$/.test(e)?(Qe(e),new cr(Ve,Ge)):null:ur||(ur=new cr(0,0))}var cr=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let ur;function hr(e,t,n){for(;n>0||t>127;)e.g.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.g.push(t)}function dr(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function fr(e,t){if(t>=0)dr(e,t);else{for(let n=0;n<9;n++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function pr(e,t){e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function mr(e,t){0!==t.length&&(e.l.push(t),e.h+=t.length)}function gr(e,t,n){dr(e.g,8*t+n)}function vr(e,t){return gr(e,t,2),t=e.g.end(),mr(e,t),t.push(e.h),t}function yr(e,t){var n=t.pop();for(n=e.h+e.g.length()-n;n>127;)t.push(127&n|128),n>>>=7,e.h++;t.push(n),e.h++}function _r(e,t,n){gr(e,t,2),dr(e.g,n.length),mr(e,e.g.end()),mr(e,n)}function br(e,t,n,r){null!=n&&(t=vr(e,t),r(n,e),yr(e,t))}function xr(){const e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var Sr=xr(),wr=xr(),Mr=xr(),Er=xr(),Tr=xr(),Ar=xr(),Cr=xr(),Rr=xr(),Pr=xr(),Lr=class{constructor(e,t,n){this.g=e,this.h=t,e=Sr,this.l=!!e&&n===e||!1}};function Ir(e,t){return new Lr(e,t,Sr)}function kr(e,t,n,r,i){br(e,n,jr(t,r),i)}const Nr=Ir(function(e,t,n,r,i){return 2===e.h&&(Qn(e,gn(t,r,n),i),!0)},kr),Dr=Ir(function(e,t,n,r,i){return 2===e.h&&(Qn(e,gn(t,r,n),i),!0)},kr);var Ur=Symbol(),Or=Symbol(),Fr=Symbol(),zr=Symbol();let Br,Hr;function Vr(e,t,n,r){var i=r[e];if(i)return i;(i={}).Ma=r,i.T=function(e){switch(typeof e){case"boolean":return Ft||(Ft=[0,void 0,!0]);case"number":return e>0?void 0:0===e?zt||(zt=[0,void 0]):[-e,void 0];case"string":return[0,e];case"object":return e}}(r[0]);var a=r[1];let s=1;a&&a.constructor===Object&&(i.ga=a,"function"==typeof(a=r[++s])&&(i.la=!0,null!==Br&&void 0!==Br||(Br=a),null!==Hr&&void 0!==Hr||(Hr=r[s+1]),a=r[s+=2]));const o={};for(;a&&Array.isArray(a)&&a.length&&"number"==typeof a[0]&&a[0]>0;){for(var l=0;l<a.length;l++)o[a[l]]=a;a=r[++s]}for(l=1;void 0!==a;){var c;let e;"number"==typeof a&&(l+=a,a=r[++s]);var u=void 0;if(a instanceof Lr?e=a:(e=Nr,s--),null!==(c=e)&&void 0!==c&&c.l){a=r[++s],u=r;var h=s;"function"==typeof a&&(a=a(),u[h]=a),u=a}for(h=l+1,"number"==typeof(a=r[++s])&&a<0&&(h-=a,a=r[++s]);l<h;l++){const r=o[l];u?n(i,l,e,u,r):t(i,l,e,r)}}return r[e]=i}function Gr(e){return Array.isArray(e)?e[0]instanceof Lr?e:[Dr,e]:[e,void 0]}function jr(e,t){return e instanceof ir?e.u:Array.isArray(e)?Xt(e,t,!1):void 0}function Wr(e,t,n,r){const i=n.g;e[t]=r?(e,t,n)=>i(e,t,n,r):i}function Xr(e,t,n,r,i){const a=n.g;let s,o;e[t]=(e,t,n)=>a(e,t,n,o||(o=Vr(Or,Wr,Xr,r).T),s||(s=qr(r)),i)}function qr(e){let t=e[Fr];if(null!=t)return t;const n=Vr(Or,Wr,Xr,e);return t=n.la?(e,t)=>Br(e,t,n):(e,t)=>{const r=0|e[ce];for(;Kn(t)&&4!=t.h;){var i=t.m,a=n[i];if(null==a){var s=n.ga;s&&(s=s[i])&&null!=(s=Yr(s))&&(a=n[i]=s)}null!=a&&a(t,e,i)||(i=(a=t).l,Jn(a),a.fa?a=void 0:(s=a.g.g-i,a.g.g=i,a=Yn(a.g,s)),i=e,a&&((s=i[se])?s.push(a):i[se]=[a]))}return 8192&r&&pe(e),!0},e[Fr]=t}function Yr(e){const t=(e=Gr(e))[0].g;if(e=e[1]){const n=qr(e),r=Vr(Or,Wr,Xr,e).T;return(e,i,a)=>t(e,i,a,r,n)}return t}function Zr(e,t,n){e[t]=n.h}function Kr(e,t,n,r){let i,a;const s=n.h;e[t]=(e,t,n)=>s(e,t,n,a||(a=Vr(Ur,Zr,Kr,r).T),i||(i=Jr(r)))}function Jr(e){let t=e[zr];if(!t){const n=Vr(Ur,Zr,Kr,e);t=(e,t)=>Qr(e,t,n),e[zr]=t}return t}function Qr(e,t,n){!function(e,t,n){const r=512&t?0:-1,i=e.length,a=i+((t=64&t?256&t:!!i&&xe(e[i-1]))?-1:0);for(let s=0;s<a;s++)n(s-r,e[s]);if(t){e=e[i-1];for(const t in e)!isNaN(t)&&n(+t,e[t])}}(e,e[ce]|(n.T[1]?512:0),(e,r)=>{if(null!=r){var i=function(e,t){var n=e[t];if(n)return n;if((n=e.ga)&&(n=n[t])){var r=(n=Gr(n))[0].h;if(n=n[1]){const t=Jr(n),i=Vr(Ur,Zr,Kr,n).T;n=e.la?Hr(i,t):(e,n,a)=>r(e,n,a,i,t)}else n=r;return e[t]=n}}(n,e);i&&i(t,r,e)}}),(e=Te(e))&&function(e,t){mr(e,e.g.end());for(let n=0;n<t.length;n++)mr(e,q(t[n])||new Uint8Array(0))}(t,e)}function $r(e,t){if(Array.isArray(t)){var n=0|t[ce];if(4&n)return t;for(var r=0,i=0;r<t.length;r++){const n=e(t[r]);null!=n&&(t[i++]=n)}return i<r&&(t.length=i),fe(t,-6145&n|5),2&n&&Object.freeze(t),t}}function ei(e,t,n){return new Lr(e,t,n)}function ti(e,t,n){return new Lr(e,t,n)}function ni(e,t,n){en(e,0|e[ce],t,n)}var ri=Ir(function(e,t,n,r,i){return 2===e.h&&(e=Qn(e,Xt([void 0,void 0],r,!0),i),Me(r=0|t[ce]),(i=Qt(t,r,n))instanceof It?0!=(2&i.M)?((i=i.da()).push(e),en(t,r,n,i)):i.Ja(e):Array.isArray(i)?(2&i[ce]&&en(t,r,n,i=cn(i)),i.push(e)):en(t,r,n,[e]),!0)},function(e,t,n,r,i){if(t instanceof It)t.forEach((t,a)=>{br(e,n,Xt([a,t],r,!1),i)});else if(Array.isArray(t))for(let a=0;a<t.length;a++){const s=t[a];Array.isArray(s)&&br(e,n,Xt(s,r,!1),i)}});function ii(e,t,n){if(t=function(e){if(null==e)return e;const t=typeof e;if("bigint"===t)return String(et(64,e));if(ct(e)){if("string"===t)return gt(e);if("number"===t)return mt(e)}}(t),null!=t&&("string"==typeof t&&lr(t),null!=t))switch(gr(e,n,0),typeof t){case"number":e=e.g,We(t),hr(e,Ve,Ge);break;case"bigint":n=BigInt.asUintN(64,t),n=new cr(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),hr(e.g,n.h,n.g);break;default:n=lr(t),hr(e.g,n.h,n.g)}}function ai(e,t,n){null!=(t=ut(t))&&null!=t&&(gr(e,n,0),fr(e.g,t))}function si(e,t,n){null!=(t=ot(t))&&(gr(e,n,0),e.g.g.push(t?1:0))}function oi(e,t,n){null!=(t=St(t))&&_r(e,n,_(t))}function li(e,t,n,r,i){br(e,n,jr(t,r),i)}function ci(e,t,n){null==t||"string"==typeof t||t instanceof Y||(j(t)?j(t)&&ee(le):t=void 0),null!=t&&_r(e,n,On(t).buffer)}function ui(e,t,n){return(5===e.h||2===e.h)&&(t=hn(t,0|t[ce],n,!1),2==e.h?tr(e,Gn,t):t.push(Gn(e.g)),!0)}var hi=ei(function(e,t,n){if(1!==e.h)return!1;var r=e.g;e=Vn(r);const i=Vn(r);r=2*(i>>31)+1;const a=i>>>20&2047;return e=4294967296*(1048575&i)+e,ni(t,n,2047==a?e?NaN:r*(1/0):0==a?5e-324*r*e:r*Math.pow(2,a-1075)*(e+4503599627370496)),!0},function(e,t,n){null!=(t=st(t))&&(gr(e,n,1),e=e.g,(n=He||(He=new DataView(new ArrayBuffer(8)))).setFloat64(0,+t,!0),Ve=n.getUint32(0,!0),Ge=n.getUint32(4,!0),pr(e,Ve),pr(e,Ge))},xr()),di=ei(function(e,t,n){return 5===e.h&&(ni(t,n,Gn(e.g)),!0)},function(e,t,n){null!=(t=st(t))&&(gr(e,n,5),e=e.g,Xe(t),pr(e,Ve))},Cr),fi=ti(ui,function(e,t,n){if(null!=(t=$r(st,t)))for(let s=0;s<t.length;s++){var r=e,i=n,a=t[s];null!=a&&(gr(r,i,5),r=r.g,Xe(a),pr(r,Ve))}},Cr),pi=ti(ui,function(e,t,n){if(null!=(t=$r(st,t))&&t.length){gr(e,n,2),dr(e.g,4*t.length);for(let r=0;r<t.length;r++)n=e.g,Xe(t[r]),pr(n,Ve)}},Cr),mi=ei(function(e,t,n){return 0===e.h&&(ni(t,n,Fn(e.g,Ye)),!0)},ii,Ar),gi=ei(function(e,t,n){return 0===e.h&&(ni(t,n,0===(e=Fn(e.g,Ye))?void 0:e),!0)},ii,Ar),vi=ei(function(e,t,n){return 0===e.h&&(ni(t,n,Fn(e.g,qe)),!0)},function(e,t,n){if(null!=(t=function(e){if(null==e)return e;var t=typeof e;if("bigint"===t)return String(tt(64,e));if(ct(e)){if("string"===t)return t=it(Number(e)),nt(t)&&t>=0?e=String(t):(-1!==(t=e.indexOf("."))&&(e=e.substring(0,t)),dt(e)||(Qe(e),e=Ze(Ve,Ge))),e;if("number"===t)return(e=it(e))>=0&&nt(e)?e:function(e){if(e<0){We(e);var t=Ze(Ve,Ge);return e=Number(t),nt(e)?e:t}return dt(t=String(e))?t:(We(e),qe(Ve,Ge))}(e)}}(t))&&("string"==typeof t&&ar(t),null!=t))switch(gr(e,n,0),typeof t){case"number":e=e.g,We(t),hr(e,Ve,Ge);break;case"bigint":n=BigInt.asUintN(64,t),n=new sr(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),hr(e.g,n.h,n.g);break;default:n=ar(t),hr(e.g,n.h,n.g)}},xr()),yi=ei(function(e,t,n){return 0===e.h&&(ni(t,n,Bn(e.g)),!0)},ai,Er),_i=ti(function(e,t,n){return(0===e.h||2===e.h)&&(t=hn(t,0|t[ce],n,!1),2==e.h?tr(e,Bn,t):t.push(Bn(e.g)),!0)},function(e,t,n){if(null!=(t=$r(ut,t))&&t.length){n=vr(e,n);for(let n=0;n<t.length;n++)fr(e.g,t[n]);yr(e,n)}},Er),bi=ei(function(e,t,n){return 0===e.h&&(ni(t,n,0===(e=Bn(e.g))?void 0:e),!0)},ai,Er),xi=ei(function(e,t,n){return 0===e.h&&(ni(t,n,zn(e.g)),!0)},si,wr),Si=ei(function(e,t,n){return 0===e.h&&(ni(t,n,!1===(e=zn(e.g))?void 0:e),!0)},si,wr),wi=ti(function(e,t,n){return 2===e.h&&(e=$n(e),hn(t,0|t[ce],n,!1).push(e),!0)},function(e,t,n){if(null!=(t=$r(St,t)))for(let s=0;s<t.length;s++){var r=e,i=n,a=t[s];null!=a&&_r(r,i,_(a))}},Mr),Mi=ei(function(e,t,n){return 2===e.h&&(ni(t,n,""===(e=$n(e))?void 0:e),!0)},oi,Mr),Ei=ei(function(e,t,n){return 2===e.h&&(ni(t,n,$n(e)),!0)},oi,Mr),Ti=function(e,t){return new Lr(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sr)}(function(e,t,n,r,i){return 2===e.h&&(r=Xt(void 0,r,!0),hn(t,0|t[ce],n,!0).push(r),Qn(e,r,i),!0)},function(e,t,n,r,i){if(Array.isArray(t))for(let a=0;a<t.length;a++)li(e,t[a],n,r,i)}),Ai=Ir(function(e,t,n,r,i,a){return 2===e.h&&(pn(t,0|t[ce],a,n),Qn(e,t=gn(t,r,n),i),!0)},li),Ci=ei(function(e,t,n){return 2===e.h&&(ni(t,n,er(e)),!0)},ci,Rr),Ri=ti(function(e,t,n){return(0===e.h||2===e.h)&&(t=hn(t,0|t[ce],n,!1),2==e.h?tr(e,Hn,t):t.push(Hn(e.g)),!0)},function(e,t,n){if(null!=(t=$r(ht,t)))for(let s=0;s<t.length;s++){var r=e,i=n,a=t[s];null!=a&&(gr(r,i,0),dr(r.g,a))}},Tr),Pi=ei(function(e,t,n){return 0===e.h&&(ni(t,n,0===(e=Hn(e.g))?void 0:e),!0)},function(e,t,n){null!=(t=ht(t))&&null!=t&&(gr(e,n,0),dr(e.g,t))},Tr),Li=ei(function(e,t,n){return 0===e.h&&(ni(t,n,Bn(e.g)),!0)},function(e,t,n){null!=(t=ut(t))&&(t=parseInt(t,10),gr(e,n,0),fr(e.g,t))},Pr);class Ii{constructor(e,t){this.h=e,this.g=t,this.l=yn,this.m=xn,this.defaultValue=void 0}register(){I(this)}}function ki(e,t){return new Ii(e,t)}function Ni(e,t){return(n,r)=>{if(nr.length){const e=nr.pop();e.o(r),Wn(e.g,n,r),n=e}else n=new class{constructor(e,t){if(Zn.length){const n=Zn.pop();Wn(n,e,t),e=n}else e=new class{constructor(e,t){this.h=null,this.m=!1,this.g=this.l=this.j=0,Wn(this,e,t)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.aa=!1}}(e,t);this.g=e,this.l=this.g.g,this.h=this.m=-1,this.o(t)}o(){let{fa:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fa=e}}(n,r);try{const r=new e,a=r.u;qr(t)(a,n);var i=r}finally{n.g.clear(),n.m=-1,n.h=-1,nr.length<100&&nr.push(n)}return i}}function Di(e){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const e=this.g;return this.g=[],e}}}};Qr(this.u,t,Vr(Ur,Zr,Kr,e)),mr(t,t.g.end());const n=new Uint8Array(t.h),r=t.l,i=r.length;let a=0;for(let e=0;e<i;e++){const t=r[e];n.set(t,a),a+=t.length}return t.l=[n],n}}var Ui=class extends ir{constructor(e){super(e)}},Oi=[0,Mi,ei(function(e,t,n){return 2===e.h&&(ni(t,n,(e=er(e))===X()?void 0:e),!0)},function(e,t,n){if(null!=t){if(t instanceof ir){const r=t.Oa;return void(r&&(t=r(t),null!=t&&_r(e,n,On(t).buffer)))}if(Array.isArray(t))return}ci(e,t,n)},Rr)];let Fi,zi=globalThis.trustedTypes;function Bi(e){void 0===Fi&&(Fi=function(){let e=null;if(!zi)return e;try{const t=e=>e;e=zi.createPolicy("goog#html",{createHTML:t,createScript:t,createScriptURL:t})}catch(e){}return e}());var t=Fi;return new class{constructor(e){this.g=e}toString(){return this.g+""}}(t?t.createScriptURL(e):e)}var Hi=[0,yi,Li,xi,-1,_i,Li,-1],Vi=class extends ir{constructor(e){super(e)}},Gi=[0,xi,Ei,xi,Li,-1,ti(function(e,t,n){return(0===e.h||2===e.h)&&(t=hn(t,0|t[ce],n,!1),2==e.h?tr(e,jn,t):t.push(Bn(e.g)),!0)},function(e,t,n){if(null!=(t=$r(ut,t))&&t.length){n=vr(e,n);for(let n=0;n<t.length;n++)fr(e.g,t[n]);yr(e,n)}},Pr),Ei,-1,[0,xi,-1],Li,xi,-1],ji=[0,Ei,-2],Wi=class extends ir{constructor(e){super(e)}},Xi=[0],qi=[0,yi,xi,1,xi,-3],Yi=class extends ir{constructor(e){super(e,2)}},Zi={};Zi[336783863]=[0,Ei,xi,-1,yi,[0,[1,2,3,4,5,6,7,8,9],Ai,Xi,Ai,Gi,Ai,ji,Ai,qi,Ai,Hi,Ai,[0,Ei,-2],Ai,[0,Ei,Li],Ai,[0,Li,Ei,-1],Ai,[0,Li,-1]],[0,Ei],xi,[0,[1,3],[2,4],Ai,[0,_i],-1,Ai,[0,wi],-1,Ti,[0,Ei,-1]],Ei];var Ki=[0,gi,-1,Si,-3,gi,_i,Mi,bi,gi,-1,Si,bi,Si,-2,Mi];function Ji(e,t){un(e,2,xt(t),"")}function Qi(e,t){En(e,3,t)}function $i(e,t){En(e,4,t)}var ea=class extends ir{constructor(e){super(e,500)}o(e){return xn(this,0,7,e)}},ta=[-1,{}],na=[0,Ei,1,ta],ra=[0,Ei,wi,ta];function ia(e,t){Tn(e,1,ea,t)}function aa(e,t){En(e,10,t)}function sa(e,t){En(e,15,t)}var oa=class extends ir{constructor(e){super(e,500)}o(e){return xn(this,0,1001,e)}},la=[-500,Ti,[-500,Mi,-1,wi,-3,[-2,Zi,xi],Ti,Oi,bi,-1,na,ra,Ti,[0,Mi,Si],Mi,Ki,bi,wi,987,wi],4,Ti,[-500,Ei,-1,[-1,{}],998,Ei],Ti,[-500,Ei,wi,-1,[-2,{},xi],997,wi,-1],bi,Ti,[-500,Ei,wi,ta,998,wi],wi,bi,na,ra,Ti,[0,Mi,-1,ta],wi,-2,Ki,Mi,-1,Si,[0,Si,Pi],978,ta,Ti,Oi];oa.prototype.g=Di(la);var ca=Ni(oa,la),ua=class extends ir{constructor(e){super(e)}},ha=class extends ir{constructor(e){super(e)}g(){return bn(this,ua,1)}},da=[0,Ti,[0,yi,di,Ei,-1]],fa=Ni(ha,da),pa=class extends ir{constructor(e){super(e)}},ma=class extends ir{constructor(e){super(e)}},ga=class extends ir{constructor(e){super(e)}h(){return yn(this,pa,2)}g(){return bn(this,ma,5)}},va=Ni(class extends ir{constructor(e){super(e)}},[0,wi,_i,pi,[0,Li,[0,yi,-3],[0,di,-3],[0,yi,-1,[0,Ti,[0,yi,-2]]],Ti,[0,di,-1,Ei,di]],Ei,-1,mi,Ti,[0,yi,di],wi,mi]),ya=class extends ir{constructor(e){super(e)}},_a=Ni(class extends ir{constructor(e){super(e)}},[0,Ti,[0,di,-4]]),ba=class extends ir{constructor(e){super(e)}},xa=Ni(class extends ir{constructor(e){super(e)}},[0,Ti,[0,di,-4]]),Sa=class extends ir{constructor(e){super(e)}},wa=[0,yi,-1,pi,Li],Ma=class extends ir{constructor(e){super(e)}};Ma.prototype.g=Di([0,di,-4,mi]);var Ea=class extends ir{constructor(e){super(e)}},Ta=Ni(class extends ir{constructor(e){super(e)}},[0,Ti,[0,1,yi,Ei,da],mi]),Aa=class extends ir{constructor(e){super(e)}},Ca=class extends ir{constructor(e){super(e)}ma(){const e=nn(this);return null==e?X():e}},Ra=class extends ir{constructor(e){super(e)}},Pa=[1,2],La=Ni(class extends ir{constructor(e){super(e)}},[0,Ti,[0,Pa,Ai,[0,pi],Ai,[0,Ci],yi,Ei],mi]),Ia=class extends ir{constructor(e){super(e)}},ka=[0,Ei,yi,di,wi,-1],Na=class extends ir{constructor(e){super(e)}},Da=[0,xi,-1],Ua=class extends ir{constructor(e){super(e)}},Oa=[1,2,3,4,5],Fa=class extends ir{constructor(e){super(e)}g(){return null!=nn(this)}h(){return null!=Cn(this,2)}},za=class extends ir{constructor(e){super(e)}g(){var e;return null!==(e=ot(Jt(this,2)))&&void 0!==e&&e}},Ba=[0,Ci,Ei,[0,yi,mi,-1],[0,vi,mi]],Ha=[0,Ba,xi,[0,Oa,Ai,qi,Ai,Gi,Ai,Hi,Ai,Xi,Ai,ji],Li],Va=class extends ir{constructor(e){super(e)}},Ga=[0,Ha,di,-1,yi],ja=ki(502141897,Va);Zi[502141897]=Ga;var Wa=Ni(class extends ir{constructor(e){super(e)}},[0,[0,Li,-1,fi,Ri],wa]),Xa=class extends ir{constructor(e){super(e)}},qa=class extends ir{constructor(e){super(e)}},Ya=[0,Ha,di,[0,Ha],xi],Za=[0,Ha,Ga,Ya,di,[0,[0,Ba]]],Ka=ki(508968150,qa);Zi[508968150]=Za,Zi[508968149]=Ya;var Ja=class extends ir{constructor(e){super(e)}},Qa=ki(513916220,Ja);Zi[513916220]=[0,Ha,Za,yi];var $a=class extends ir{constructor(e){super(e)}h(){return yn(this,Ia,2)}g(){$t(this,2)}},es=[0,Ha,ka];Zi[478825465]=es;var ts=class extends ir{constructor(e){super(e)}},ns=class extends ir{constructor(e){super(e)}},rs=class extends ir{constructor(e){super(e)}},is=class extends ir{constructor(e){super(e)}},as=class extends ir{constructor(e){super(e)}},ss=[0,Ha,[0,Ha],es,-1],os=[0,Ha,di,yi],ls=[0,Ha,di],cs=[0,Ha,os,ls,di],us=ki(479097054,as);Zi[479097054]=[0,Ha,cs,ss],Zi[463370452]=ss,Zi[464864288]=os;var hs=ki(462713202,is);Zi[462713202]=cs,Zi[474472470]=ls;var ds=class extends ir{constructor(e){super(e)}},fs=class extends ir{constructor(e){super(e)}},ps=class extends ir{constructor(e){super(e)}},ms=class extends ir{constructor(e){super(e)}},gs=[0,Ha,di,-1,yi],vs=[0,Ha,di,xi];ms.prototype.g=Di([0,Ha,ls,[0,Ha],Ga,Ya,gs,vs]);var ys=class extends ir{constructor(e){super(e)}},_s=ki(456383383,ys);Zi[456383383]=[0,Ha,ka];var bs=class extends ir{constructor(e){super(e)}},xs=ki(476348187,bs);Zi[476348187]=[0,Ha,Da];var Ss=class extends ir{constructor(e){super(e)}},ws=class extends ir{constructor(e){super(e)}},Ms=[0,Li,-1],Es=ki(458105876,class extends ir{constructor(e){super(e)}g(){var e=this.u;const t=0|e[ce],n=2&t;return e=function(e,t,n){var r=ws;const i=2&t;let a=!1;if(null==n){if(i)return Bt();n=[]}else if(n.constructor===It){if(0==(2&n.M)||i)return n;n=n.da()}else Array.isArray(n)?a=!!(2&n[ce]):n=[];if(i){if(!n.length)return Bt();a||(a=!0,pe(n))}else a&&(a=!1,n=cn(n));return a||(64&n[ce]?n[ce]&=-33:32&t&&de(n,32)),en(e,t,2,r=new It(n,r,Mt,void 0)),r}(e,t,Qt(e,t,2)),!n&&ws&&(e.pa=!0),e}});Zi[458105876]=[0,Ms,ri,[!0,mi,[0,Ei,-1,wi]]];var Ts=class extends ir{constructor(e){super(e)}},As=ki(458105758,Ts);Zi[458105758]=[0,Ha,Ei,Ms];var Cs=class extends ir{constructor(e){super(e)}},Rs=ki(443442058,Cs);Zi[443442058]=[0,Ha,Ei,yi,di,wi,-1,xi,di],Zi[514774813]=gs;var Ps=class extends ir{constructor(e){super(e)}},Ls=ki(516587230,Ps);function Is(e,t){return t=t?t.clone():new Ia,void 0!==e.displayNamesLocale?$t(t,1,xt(e.displayNamesLocale)):void 0===e.displayNamesLocale&&$t(t,1),void 0!==e.maxResults?Ln(t,2,e.maxResults):"maxResults"in e&&$t(t,2),void 0!==e.scoreThreshold?In(t,3,e.scoreThreshold):"scoreThreshold"in e&&$t(t,3),void 0!==e.categoryAllowlist?kn(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&$t(t,4),void 0!==e.categoryDenylist?kn(t,5,e.categoryDenylist):"categoryDenylist"in e&&$t(t,5),t}function ks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{categories:e.map(e=>{var t,n,r,i,a,s,o;return{index:null!==(t=null!==(n=An(e,1))&&void 0!==n?n:0)&&void 0!==t?t:-1,score:null!==(r=Rn(e,2))&&void 0!==r?r:0,categoryName:null!==(i=null!==(a=Cn(e,3))&&void 0!==a?a:"")&&void 0!==i?i:"",displayName:null!==(s=null!==(o=Cn(e,4))&&void 0!==o?o:"")&&void 0!==s?s:""}}),headIndex:t,headName:n}}function Ns(e){var t,n,r,i,a,s,o=an(e,3,st,rn()),l=an(e,2,ut,rn()),c=an(e,1,St,rn()),u=an(e,9,St,rn());const h={categories:[],keypoints:[]};for(let _=0;_<o.length;_++){var d,f,p;h.categories.push({score:o[_],index:null!==(d=l[_])&&void 0!==d?d:-1,categoryName:null!==(f=c[_])&&void 0!==f?f:"",displayName:null!==(p=u[_])&&void 0!==p?p:""})}if((o=null===(t=yn(e,ga,4))||void 0===t?void 0:t.h())&&(h.boundingBox={originX:null!==(n=An(o,1))&&void 0!==n?n:0,originY:null!==(r=An(o,2))&&void 0!==r?r:0,width:null!==(i=An(o,3))&&void 0!==i?i:0,height:null!==(a=An(o,4))&&void 0!==a?a:0,angle:0}),null!==(s=yn(e,ga,4))&&void 0!==s&&s.g().length)for(const _ of yn(e,ga,4).g()){var m,g,v,y;h.keypoints.push({x:null!==(m=tn(_,1))&&void 0!==m?m:0,y:null!==(g=tn(_,2))&&void 0!==g?g:0,score:null!==(v=tn(_,4))&&void 0!==v?v:0,label:null!==(y=Cn(_,3))&&void 0!==y?y:""})}return h}function Ds(e){const t=[];for(const s of bn(e,ba,1)){var n,r,i,a;t.push({x:null!==(n=Rn(s,1))&&void 0!==n?n:0,y:null!==(r=Rn(s,2))&&void 0!==r?r:0,z:null!==(i=Rn(s,3))&&void 0!==i?i:0,visibility:null!==(a=Rn(s,4))&&void 0!==a?a:0})}return t}function Us(e){const t=[];for(const s of bn(e,ya,1)){var n,r,i,a;t.push({x:null!==(n=Rn(s,1))&&void 0!==n?n:0,y:null!==(r=Rn(s,2))&&void 0!==r?r:0,z:null!==(i=Rn(s,3))&&void 0!==i?i:0,visibility:null!==(a=Rn(s,4))&&void 0!==a?a:0})}return t}function Os(e){return Array.from(e,e=>e>127?e-256:e)}function Fs(e,t){if(e.length!==t.length)throw Error("Cannot compute cosine similarity between embeddings of different sizes (".concat(e.length," vs. ").concat(t.length,")."));let n=0,r=0,i=0;for(let a=0;a<e.length;a++)n+=e[a]*t[a],r+=e[a]*e[a],i+=t[a]*t[a];if(r<=0||i<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*i)}let zs;Zi[516587230]=[0,Ha,gs,vs,di],Zi[518928384]=vs;const Bs=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function Hs(){if(void 0===zs)try{await WebAssembly.instantiate(Bs),zs=!0}catch(e){zs=!1}return zs}async function Vs(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){if(0===(arguments.length<=1?0:arguments.length-1))return Bi(e[0]);let t=e[0];for(let n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t+=encodeURIComponent(n+1<1||arguments.length<=n+1?void 0:arguments[n+1])+e[n+1];return Bi(t)}(t||(t=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([""])));const r=await Hs()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:"".concat(n,"/").concat(e,"_").concat(r,".js"),wasmBinaryPath:"".concat(n,"/").concat(e,"_").concat(r,".wasm")}}var Gs=class{};function js(){var e=navigator;return"undefined"!=typeof OffscreenCanvas&&(!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return(e=e.userAgent).includes("Safari")&&!e.includes("Chrome")}(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function Ws(e){if("function"!=typeof importScripts){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise((e,n)=>{t.addEventListener("load",()=>{e()},!1),t.addEventListener("error",e=>{n(e)},!1),document.body.appendChild(t)})}importScripts(e.toString())}function Xs(e){return void 0!==e.videoWidth?[e.videoWidth,e.videoHeight]:void 0!==e.naturalWidth?[e.naturalWidth,e.naturalHeight]:void 0!==e.displayWidth?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function qs(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function Ys(e,t,n){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(n?e.i._bindTextureToStream(n):e.i._bindTextureToCanvas(),!(n=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const[r,i]=Xs(t);return!e.l||r===e.i.canvas.width&&i===e.i.canvas.height||(e.i.canvas.width=r,e.i.canvas.height=i),[r,i]}function Zs(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const r=new Uint32Array(t.length);for(let i=0;i<t.length;i++)r[i]=e.i.stringToNewUTF8(t[i]);t=e.i._malloc(4*r.length),e.i.HEAPU32.set(r,t>>2),n(t);for(const i of r)e.i._free(i);e.i._free(t)}function Ks(e,t,n){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=n}function Js(e,t,n){let r=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(e,t,i)=>{t?(n(r,i),r=[]):r.push(e)}}function Qs(e,t){const n=yn(e.baseOptions,Fa,1)||new Fa;"string"==typeof t?($t(n,2,xt(t)),$t(n,1)):t instanceof Uint8Array&&($t(n,1,Se(t,!1)),$t(n,2)),xn(e.baseOptions,0,1,n)}function $s(e){try{const t=e.G.length;if(1===t)throw Error(e.G[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.G.map(e=>e.message).join(", "))}finally{e.G=[]}}function eo(e,t){e.B=Math.max(e.B,t)}function to(e,t){e.A=new ea,Ji(e.A,"PassThroughCalculator"),Qi(e.A,"free_memory"),$i(e.A,"free_memory_unused_out"),aa(t,"free_memory"),ia(t,e.A)}function no(e,t){Qi(e.A,t),$i(e.A,t+"_unused_out")}function ro(e){e.g.addBoolToStream(!0,"free_memory",e.B)}Gs.forVisionTasks=function(e){return Vs("vision",e)},Gs.forTextTasks=function(e){return Vs("text",e)},Gs.forGenAiExperimentalTasks=function(e){return Vs("genai_experimental",e)},Gs.forGenAiTasks=function(e){return Vs("genai",e)},Gs.forAudioTasks=function(e){return Vs("audio",e)},Gs.isSimdSupported=function(){return Hs()};var io=class{constructor(e){this.g=e,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var t,n,r,i,a,s;const o=e.baseOptions||{};if(null!==(t=e.baseOptions)&&void 0!==t&&t.modelAssetBuffer&&null!==(n=e.baseOptions)&&void 0!==n&&n.modelAssetPath)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(null!==(r=yn(this.baseOptions,Fa,1))&&void 0!==r&&r.g()||null!==(i=yn(this.baseOptions,Fa,1))&&void 0!==i&&i.h()||null!==(a=e.baseOptions)&&void 0!==a&&a.modelAssetBuffer||null!==(s=e.baseOptions)&&void 0!==s&&s.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(e,t){let n=yn(e.baseOptions,Ua,3);if(!n){var r=n=new Ua,i=new Wi;Sn(r,4,Oa,i)}"delegate"in t&&("GPU"===t.delegate?(t=n,r=new Vi,Sn(t,2,Oa,r)):(t=n,r=new Wi,Sn(t,4,Oa,r))),xn(e.baseOptions,0,3,n)}(this,o),o.modelAssetPath)return fetch(o.modelAssetPath.toString()).then(e=>{if(e.ok)return e.arrayBuffer();throw Error("Failed to fetch model: ".concat(o.modelAssetPath," (").concat(e.status,")"))}).then(e=>{try{this.g.i.FS_unlink("/model.dat")}catch(t){}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(e),!0,!1,!1),Qs(this,"/model.dat"),this.m(),this.J()});if(o.modelAssetBuffer instanceof Uint8Array)Qs(this,o.modelAssetBuffer);else if(o.modelAssetBuffer)return async function(e){const t=[];for(var n=0;;){const{done:r,value:i}=await e.read();if(r)break;t.push(i),n+=i.length}if(0===t.length)return new Uint8Array(0);if(1===t.length)return t[0];e=new Uint8Array(n),n=0;for(const r of t)e.set(r,n),n+=r.length;return e}(o.modelAssetBuffer).then(e=>{Qs(this,e),this.m(),this.J()})}return this.m(),this.J(),Promise.resolve()}J(){}ca(){let e;if(this.g.ca(t=>{e=ca(t)}),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener((e,t)=>{this.G.push(Error(t))}),this.g.Ha(),this.g.setGraph(e,t),this.A=void 0,$s(this)}finishProcessing(){this.g.finishProcessing(),$s(this)}close(){this.A=void 0,this.g.closeGraph()}};function ao(e,t){if(!e)throw Error("Unable to obtain required WebGL resource: ".concat(t));return e}io.prototype.close=io.prototype.close;class so{constructor(e,t,n,r){this.g=e,this.h=t,this.m=n,this.l=r}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function oo(e,t,n){const r=e.g;if(n=ao(r.createShader(n),"Failed to create WebGL shader"),r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw Error("Could not compile WebGL shader: ".concat(r.getShaderInfoLog(n)));return r.attachShader(e.h,n),n}function lo(e,t){const n=e.g,r=ao(n.createVertexArray(),"Failed to create vertex array");n.bindVertexArray(r);const i=ao(n.createBuffer(),"Failed to create buffer");n.bindBuffer(n.ARRAY_BUFFER,i),n.enableVertexAttribArray(e.P),n.vertexAttribPointer(e.P,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);const a=ao(n.createBuffer(),"Failed to create buffer");return n.bindBuffer(n.ARRAY_BUFFER,a),n.enableVertexAttribArray(e.J),n.vertexAttribPointer(e.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new so(n,r,i,a)}function co(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function uo(e,t,n,r){return co(e,t),e.h||(e.m(),e.C()),n?(e.s||(e.s=lo(e,!0)),n=e.s):(e.v||(e.v=lo(e,!1)),n=e.v),t.useProgram(e.h),n.bind(),e.l(),e=r(),n.g.bindVertexArray(null),e}function ho(e,t,n){return co(e,t),e=ao(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,null!==n&&void 0!==n?n:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,null!==n&&void 0!==n?n:t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function fo(e,t,n){co(e,t),e.A||(e.A=ao(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.A),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}function po(e){var t;null===(t=e.g)||void 0===t||t.bindFramebuffer(e.g.FRAMEBUFFER,null)}var mo=class{G(){return"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D inputTexture;\n  void main() {\n    gl_FragColor = texture2D(inputTexture, vTex);\n  }\n "}m(){const e=this.g;if(this.h=ao(e.createProgram(),"Failed to create WebGL program"),this.Z=oo(this,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",e.VERTEX_SHADER),this.Y=oo(this,this.G(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error("Error during program linking: ".concat(e.getProgramInfoLog(this.h)));this.P=e.getAttribLocation(this.h,"aVertex"),this.J=e.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.Z),e.deleteShader(this.Y)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}},go=class extends mo{G(){return"\n  precision mediump float;\n  uniform sampler2D backgroundTexture;\n  uniform sampler2D maskTexture;\n  uniform sampler2D colorMappingTexture;\n  varying vec2 vTex;\n  void main() {\n    vec4 backgroundColor = texture2D(backgroundTexture, vTex);\n    float category = texture2D(maskTexture, vTex).r;\n    vec4 categoryColor = texture2D(colorMappingTexture, vec2(category, 0.0));\n    gl_FragColor = mix(backgroundColor, categoryColor, categoryColor.a);\n  }\n "}C(){const e=this.g;e.activeTexture(e.TEXTURE1),this.B=ho(this,e,e.LINEAR),e.activeTexture(e.TEXTURE2),this.j=ho(this,e,e.NEAREST)}m(){super.m();const e=this.g;this.L=ao(e.getUniformLocation(this.h,"backgroundTexture"),"Uniform location"),this.U=ao(e.getUniformLocation(this.h,"colorMappingTexture"),"Uniform location"),this.K=ao(e.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();const e=this.g;e.uniform1i(this.K,0),e.uniform1i(this.L,1),e.uniform1i(this.U,2)}close(){this.B&&this.g.deleteTexture(this.B),this.j&&this.g.deleteTexture(this.j),super.close()}},vo=class extends mo{G(){return"\n  precision mediump float;\n  uniform sampler2D maskTexture;\n  uniform sampler2D defaultTexture;\n  uniform sampler2D overlayTexture;\n  varying vec2 vTex;\n  void main() {\n    float confidence = texture2D(maskTexture, vTex).r;\n    vec4 defaultColor = texture2D(defaultTexture, vTex);\n    vec4 overlayColor = texture2D(overlayTexture, vTex);\n    // Apply the alpha from the overlay and merge in the default color\n    overlayColor = mix(defaultColor, overlayColor, overlayColor.a);\n    gl_FragColor = mix(defaultColor, overlayColor, confidence);\n  }\n "}C(){const e=this.g;e.activeTexture(e.TEXTURE1),this.j=ho(this,e),e.activeTexture(e.TEXTURE2),this.B=ho(this,e)}m(){super.m();const e=this.g;this.K=ao(e.getUniformLocation(this.h,"defaultTexture"),"Uniform location"),this.L=ao(e.getUniformLocation(this.h,"overlayTexture"),"Uniform location"),this.H=ao(e.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();const e=this.g;e.uniform1i(this.H,0),e.uniform1i(this.K,1),e.uniform1i(this.L,2)}close(){this.j&&this.g.deleteTexture(this.j),this.B&&this.g.deleteTexture(this.B),super.close()}};function yo(e,t){switch(t){case 0:return e.g.find(e=>e instanceof Uint8Array);case 1:return e.g.find(e=>e instanceof Float32Array);case 2:return e.g.find(e=>"undefined"!=typeof WebGLTexture&&e instanceof WebGLTexture);default:throw Error("Type is not supported: ".concat(t))}}function _o(e){var t=yo(e,1);if(!t){if(t=yo(e,0))t=new Float32Array(t).map(e=>e/255);else{t=new Float32Array(e.width*e.height);const r=xo(e);var n=wo(e);if(fo(n,r,bo(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){n=new Float32Array(e.width*e.height*4),r.readPixels(0,0,e.width,e.height,r.RGBA,r.FLOAT,n);for(let e=0,r=0;e<t.length;++e,r+=4)t[e]=n[r]}else r.readPixels(0,0,e.width,e.height,r.RED,r.FLOAT,t)}e.g.push(t)}return t}function bo(e){let t=yo(e,2);if(!t){const n=xo(e);t=Mo(e);const r=_o(e),i=So(e);n.texImage2D(n.TEXTURE_2D,0,i,e.width,e.height,0,n.RED,n.FLOAT,r),Eo(e)}return t}function xo(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=ao(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function So(e){if(e=xo(e),!To)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))To=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");To=e.R16F}return To}function wo(e){return e.l||(e.l=new mo),e.l}function Mo(e){const t=xo(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=yo(e,2);return n||(n=ho(wo(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(n),e.j=!0),t.bindTexture(t.TEXTURE_2D,n),n}function Eo(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var To,Ao=class{constructor(e,t,n,r,i,a,s){this.g=e,this.m=t,this.j=n,this.canvas=r,this.l=i,this.width=a,this.height=s,this.j&&0===--Co&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Da(){return!!yo(this,0)}ja(){return!!yo(this,1)}R(){return!!yo(this,2)}ia(){return(e=yo(this,0))||(e=_o(this),e=new Uint8Array(e.map(e=>255*e)),this.g.push(e)),e;var e}ha(){return _o(this)}N(){return bo(this)}clone(){const e=[];for(const t of this.g){let n;if(t instanceof Uint8Array)n=new Uint8Array(t);else if(t instanceof Float32Array)n=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error("Type is not supported: ".concat(t));{const e=xo(this),t=wo(this);e.activeTexture(e.TEXTURE1),n=ho(t,e,this.m?e.LINEAR:e.NEAREST),e.bindTexture(e.TEXTURE_2D,n);const r=So(this);e.texImage2D(e.TEXTURE_2D,0,r,this.width,this.height,0,e.RED,e.FLOAT,null),e.bindTexture(e.TEXTURE_2D,null),fo(t,e,n),uo(t,e,!1,()=>{Mo(this),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),Eo(this)}),po(t),Eo(this)}}e.push(n)}return new Ao(e,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&xo(this).deleteTexture(yo(this,2)),Co=-1}};Ao.prototype.close=Ao.prototype.close,Ao.prototype.clone=Ao.prototype.clone,Ao.prototype.getAsWebGLTexture=Ao.prototype.N,Ao.prototype.getAsFloat32Array=Ao.prototype.ha,Ao.prototype.getAsUint8Array=Ao.prototype.ia,Ao.prototype.hasWebGLTexture=Ao.prototype.R,Ao.prototype.hasFloat32Array=Ao.prototype.ja,Ao.prototype.hasUint8Array=Ao.prototype.Da;var Co=250;const Ro={color:"white",lineWidth:4,radius:6};function Po(e){return u(u({},Ro),{},{fillColor:(e=e||{}).color},e)}function Lo(e,t){return e instanceof Function?e(t):e}function Io(e,t,n){return Math.max(Math.min(t,n),Math.min(Math.max(t,n),e))}function ko(e){if(!e.l)throw Error("CPU rendering requested but CanvasRenderingContext2D not provided.");return e.l}function No(e){if(!e.j)throw Error("GPU rendering requested but WebGL2RenderingContext not provided.");return e.j}function Do(e,t,n){if(t.R())n(t.N());else{var r;const i=t.ja()?t.ha():t.ia();e.m=null!==(r=e.m)&&void 0!==r?r:new mo;const a=No(e);n((e=new Ao([i],t.m,!1,a.canvas,e.m,t.width,t.height)).N()),e.close()}}function Uo(e,t,n,r){const i=function(e){return e.g||(e.g=new go),e.g}(e),a=No(e),s=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n;uo(i,a,!0,()=>{!function(e,t,n,r){const i=e.g;if(i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,e.B),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),e.H&&function(e,t){if(e!==t)return!1;e=e.entries(),t=t.entries();for(const[r,i]of e){e=r;const a=i;var n=t.next();if(n.done)return!1;const[s,o]=n.value;if(n=o,e!==s||a[0]!==n[0]||a[1]!==n[1]||a[2]!==n[2]||a[3]!==n[3])return!1}return!!t.next().done}(e.H,r))i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,e.j);else{e.H=r;const t=Array(1024).fill(0);r.forEach((e,n)=>{if(4!==e.length)throw Error("Color at index ".concat(n," is not a four-channel value."));t[4*n]=e[0],t[4*n+1]=e[1],t[4*n+2]=e[2],t[4*n+3]=e[3]}),i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,e.j),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,256,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(t))}}(i,t,s,r),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),a.drawArrays(a.TRIANGLE_FAN,0,4);const e=i.g;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,null)})}function Oo(e,t,n,r){const i=No(e),a=function(e){return e.h||(e.h=new vo),e.h}(e),s=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n,o=Array.isArray(r)?new ImageData(new Uint8ClampedArray(r),1,1):r;uo(a,i,!0,()=>{var e=a.g;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,a.j),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,a.B),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,o),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),i.bindTexture(i.TEXTURE_2D,null),(e=a.g).activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,null)})}var Fo=class{constructor(e,t){"undefined"!=typeof CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||e instanceof OffscreenCanvasRenderingContext2D?(this.l=e,this.j=t):this.j=e}wa(e,t){if(e){var n=ko(this);t=Po(t),n.save();var r=n.canvas,i=0;for(const a of e)n.fillStyle=Lo(t.fillColor,{index:i,from:a}),n.strokeStyle=Lo(t.color,{index:i,from:a}),n.lineWidth=Lo(t.lineWidth,{index:i,from:a}),(e=new Path2D).arc(a.x*r.width,a.y*r.height,Lo(t.radius,{index:i,from:a}),0,2*Math.PI),n.fill(e),n.stroke(e),++i;n.restore()}}va(e,t,n){if(e&&t){var r=ko(this);n=Po(n),r.save();var i=r.canvas,a=0;for(const s of t){r.beginPath(),t=e[s.start];const o=e[s.end];t&&o&&(r.strokeStyle=Lo(n.color,{index:a,from:t,to:o}),r.lineWidth=Lo(n.lineWidth,{index:a,from:t,to:o}),r.moveTo(t.x*i.width,t.y*i.height),r.lineTo(o.x*i.width,o.y*i.height)),++a,r.stroke()}r.restore()}}sa(e,t){const n=ko(this);t=Po(t),n.save(),n.beginPath(),n.lineWidth=Lo(t.lineWidth,{}),n.strokeStyle=Lo(t.color,{}),n.fillStyle=Lo(t.fillColor,{}),n.moveTo(e.originX,e.originY),n.lineTo(e.originX+e.width,e.originY),n.lineTo(e.originX+e.width,e.originY+e.height),n.lineTo(e.originX,e.originY+e.height),n.lineTo(e.originX,e.originY),n.stroke(),n.fill(),n.restore()}ta(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0,255];this.l?function(e,t,n,r){const i=No(e);Do(e,t,t=>{Uo(e,t,n,r),(t=ko(e)).drawImage(i.canvas,0,0,t.canvas.width,t.canvas.height)})}(this,e,n,t):Uo(this,e.N(),n,t)}ua(e,t,n){this.l?function(e,t,n,r){const i=No(e);Do(e,t,t=>{Oo(e,t,n,r),(t=ko(e)).drawImage(i.canvas,0,0,t.canvas.width,t.canvas.height)})}(this,e,t,n):Oo(this,e.N(),t,n)}close(){var e,t,n;null!==(e=this.g)&&void 0!==e&&e.close(),this.g=void 0,null!==(t=this.h)&&void 0!==t&&t.close(),this.h=void 0,null!==(n=this.m)&&void 0!==n&&n.close(),this.m=void 0}};function zo(e,t){switch(t){case 0:return e.g.find(e=>e instanceof ImageData);case 1:return e.g.find(e=>"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap);case 2:return e.g.find(e=>"undefined"!=typeof WebGLTexture&&e instanceof WebGLTexture);default:throw Error("Type is not supported: ".concat(t))}}function Bo(e){var t=zo(e,0);if(!t){t=Vo(e);const n=Go(e),r=new Uint8Array(e.width*e.height*4);fo(n,t,Ho(e)),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,r),po(n),t=new ImageData(new Uint8ClampedArray(r.buffer),e.width,e.height),e.g.push(t)}return t}function Ho(e){let t=zo(e,2);if(!t){const n=Vo(e);t=jo(e);const r=zo(e,1)||Bo(e);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),Wo(e)}return t}function Vo(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=ao(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function Go(e){return e.l||(e.l=new mo),e.l}function jo(e){const t=Vo(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=zo(e,2);return n||(n=ho(Go(e),t),e.g.push(n),e.m=!0),t.bindTexture(t.TEXTURE_2D,n),n}function Wo(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function Xo(e){const t=Vo(e);return uo(Go(e),t,!0,()=>function(e,t){const n=e.canvas;if(n.width===e.width&&n.height===e.height)return t();const r=n.width,i=n.height;return n.width=e.width,n.height=e.height,e=t(),n.width=r,n.height=i,e}(e,()=>{if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))}Fo.prototype.close=Fo.prototype.close,Fo.prototype.drawConfidenceMask=Fo.prototype.ua,Fo.prototype.drawCategoryMask=Fo.prototype.ta,Fo.prototype.drawBoundingBox=Fo.prototype.sa,Fo.prototype.drawConnectors=Fo.prototype.va,Fo.prototype.drawLandmarks=Fo.prototype.wa,Fo.lerp=function(e,t,n,r,i){return Io(r*(1-(e-t)/(n-t))+i*(1-(n-e)/(n-t)),r,i)},Fo.clamp=Io;var qo=class{constructor(e,t,n,r,i,a,s){this.g=e,this.j=t,this.m=n,this.canvas=r,this.l=i,this.width=a,this.height=s,(this.j||this.m)&&0===--Yo&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ca(){return!!zo(this,0)}ka(){return!!zo(this,1)}R(){return!!zo(this,2)}Aa(){return Bo(this)}za(){var e=zo(this,1);return e||(Ho(this),jo(this),e=Xo(this),Wo(this),this.g.push(e),this.j=!0),e}N(){return Ho(this)}clone(){const e=[];for(const t of this.g){let n;if(t instanceof ImageData)n=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){const e=Vo(this),t=Go(this);e.activeTexture(e.TEXTURE1),n=ho(t,e),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,null),fo(t,e,n),uo(t,e,!1,()=>{jo(this),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),Wo(this)}),po(t),Wo(this)}else{if(!(t instanceof ImageBitmap))throw Error("Type is not supported: ".concat(t));Ho(this),jo(this),n=Xo(this),Wo(this)}e.push(n)}return new qo(e,this.ka(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&zo(this,1).close(),this.m&&Vo(this).deleteTexture(zo(this,2)),Yo=-1}};qo.prototype.close=qo.prototype.close,qo.prototype.clone=qo.prototype.clone,qo.prototype.getAsWebGLTexture=qo.prototype.N,qo.prototype.getAsImageBitmap=qo.prototype.za,qo.prototype.getAsImageData=qo.prototype.Aa,qo.prototype.hasWebGLTexture=qo.prototype.R,qo.prototype.hasImageBitmap=qo.prototype.ka,qo.prototype.hasImageData=qo.prototype.Ca;var Yo=250;function Zo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(e=>{let[t,n]=e;return{start:t,end:n}})}const Ko=function(e){return class extends e{Ha(){this.i._registerModelResourcesGraphService()}}}((Jo=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m="function"==typeof this.i._addIntToInputStream,void 0!==t?this.i.canvas=t:js()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph((new TextEncoder).encode(e),!1)}setGraph(e,t){const n=e.length,r=this.i._malloc(n);this.i.HEAPU8.set(e,r),t?this.i._changeBinaryGraph(n,r):this.i._changeTextGraph(n,r),this.i._free(r)}configureAudio(e,t,n,r,i){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),qs(this,r||"input_audio",r=>{qs(this,i=i||"audio_header",i=>{this.i._configureAudio(r,i,e,null!==t&&void 0!==t?t:0,n)})})}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}ca(e){Ks(this,"__graph_config__",t=>{e(t)}),qs(this,"__graph_config__",e=>{this.i._getGraphConfig(e,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,n){this.addAudioToStreamWithShape(e,0,0,t,n)}addAudioToStreamWithShape(e,t,n,r,i){const a=4*e.length;this.h!==a&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(a),this.h=a),this.i.HEAPF32.set(e,this.g/4),qs(this,r,e=>{this.i._addAudioToInputStream(this.g,t,n,e,i)})}addGpuBufferToStream(e,t,n){qs(this,t,t=>{const[r,i]=Ys(this,e,t);this.i._addBoundTextureToStream(t,r,i,n)})}addBoolToStream(e,t,n){qs(this,t,t=>{this.i._addBoolToInputStream(e,t,n)})}addDoubleToStream(e,t,n){qs(this,t,t=>{this.i._addDoubleToInputStream(e,t,n)})}addFloatToStream(e,t,n){qs(this,t,t=>{this.i._addFloatToInputStream(e,t,n)})}addIntToStream(e,t,n){qs(this,t,t=>{this.i._addIntToInputStream(e,t,n)})}addUintToStream(e,t,n){qs(this,t,t=>{this.i._addUintToInputStream(e,t,n)})}addStringToStream(e,t,n){qs(this,t,t=>{qs(this,e,e=>{this.i._addStringToInputStream(e,t,n)})})}addStringRecordToStream(e,t,n){qs(this,t,t=>{Zs(this,Object.keys(e),r=>{Zs(this,Object.values(e),i=>{this.i._addFlatHashMapToInputStream(r,i,Object.keys(e).length,t,n)})})})}addProtoToStream(e,t,n,r){qs(this,n,n=>{qs(this,t,t=>{const i=this.i._malloc(e.length);this.i.HEAPU8.set(e,i),this.i._addProtoToInputStream(i,e.length,t,n,r),this.i._free(i)})})}addEmptyPacketToStream(e,t){qs(this,e,e=>{this.i._addEmptyPacketToInputStream(e,t)})}addBoolVectorToStream(e,t,n){qs(this,t,t=>{const r=this.i._allocateBoolVector(e.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const n of e)this.i._addBoolVectorEntry(r,n);this.i._addBoolVectorToInputStream(r,t,n)})}addDoubleVectorToStream(e,t,n){qs(this,t,t=>{const r=this.i._allocateDoubleVector(e.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const n of e)this.i._addDoubleVectorEntry(r,n);this.i._addDoubleVectorToInputStream(r,t,n)})}addFloatVectorToStream(e,t,n){qs(this,t,t=>{const r=this.i._allocateFloatVector(e.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const n of e)this.i._addFloatVectorEntry(r,n);this.i._addFloatVectorToInputStream(r,t,n)})}addIntVectorToStream(e,t,n){qs(this,t,t=>{const r=this.i._allocateIntVector(e.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const n of e)this.i._addIntVectorEntry(r,n);this.i._addIntVectorToInputStream(r,t,n)})}addUintVectorToStream(e,t,n){qs(this,t,t=>{const r=this.i._allocateUintVector(e.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const n of e)this.i._addUintVectorEntry(r,n);this.i._addUintVectorToInputStream(r,t,n)})}addStringVectorToStream(e,t,n){qs(this,t,t=>{const r=this.i._allocateStringVector(e.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const n of e)qs(this,n,e=>{this.i._addStringVectorEntry(r,e)});this.i._addStringVectorToInputStream(r,t,n)})}addBoolToInputSidePacket(e,t){qs(this,t,t=>{this.i._addBoolToInputSidePacket(e,t)})}addDoubleToInputSidePacket(e,t){qs(this,t,t=>{this.i._addDoubleToInputSidePacket(e,t)})}addFloatToInputSidePacket(e,t){qs(this,t,t=>{this.i._addFloatToInputSidePacket(e,t)})}addIntToInputSidePacket(e,t){qs(this,t,t=>{this.i._addIntToInputSidePacket(e,t)})}addUintToInputSidePacket(e,t){qs(this,t,t=>{this.i._addUintToInputSidePacket(e,t)})}addStringToInputSidePacket(e,t){qs(this,t,t=>{qs(this,e,e=>{this.i._addStringToInputSidePacket(e,t)})})}addProtoToInputSidePacket(e,t,n){qs(this,n,n=>{qs(this,t,t=>{const r=this.i._malloc(e.length);this.i.HEAPU8.set(e,r),this.i._addProtoToInputSidePacket(r,e.length,t,n),this.i._free(r)})})}addBoolVectorToInputSidePacket(e,t){qs(this,t,t=>{const n=this.i._allocateBoolVector(e.length);if(!n)throw Error("Unable to allocate new bool vector on heap.");for(const r of e)this.i._addBoolVectorEntry(n,r);this.i._addBoolVectorToInputSidePacket(n,t)})}addDoubleVectorToInputSidePacket(e,t){qs(this,t,t=>{const n=this.i._allocateDoubleVector(e.length);if(!n)throw Error("Unable to allocate new double vector on heap.");for(const r of e)this.i._addDoubleVectorEntry(n,r);this.i._addDoubleVectorToInputSidePacket(n,t)})}addFloatVectorToInputSidePacket(e,t){qs(this,t,t=>{const n=this.i._allocateFloatVector(e.length);if(!n)throw Error("Unable to allocate new float vector on heap.");for(const r of e)this.i._addFloatVectorEntry(n,r);this.i._addFloatVectorToInputSidePacket(n,t)})}addIntVectorToInputSidePacket(e,t){qs(this,t,t=>{const n=this.i._allocateIntVector(e.length);if(!n)throw Error("Unable to allocate new int vector on heap.");for(const r of e)this.i._addIntVectorEntry(n,r);this.i._addIntVectorToInputSidePacket(n,t)})}addUintVectorToInputSidePacket(e,t){qs(this,t,t=>{const n=this.i._allocateUintVector(e.length);if(!n)throw Error("Unable to allocate new unsigned int vector on heap.");for(const r of e)this.i._addUintVectorEntry(n,r);this.i._addUintVectorToInputSidePacket(n,t)})}addStringVectorToInputSidePacket(e,t){qs(this,t,t=>{const n=this.i._allocateStringVector(e.length);if(!n)throw Error("Unable to allocate new string vector on heap.");for(const r of e)qs(this,r,e=>{this.i._addStringVectorEntry(n,e)});this.i._addStringVectorToInputSidePacket(n,t)})}attachBoolListener(e,t){Ks(this,e,t),qs(this,e,e=>{this.i._attachBoolListener(e)})}attachBoolVectorListener(e,t){Js(this,e,t),qs(this,e,e=>{this.i._attachBoolVectorListener(e)})}attachIntListener(e,t){Ks(this,e,t),qs(this,e,e=>{this.i._attachIntListener(e)})}attachIntVectorListener(e,t){Js(this,e,t),qs(this,e,e=>{this.i._attachIntVectorListener(e)})}attachUintListener(e,t){Ks(this,e,t),qs(this,e,e=>{this.i._attachUintListener(e)})}attachUintVectorListener(e,t){Js(this,e,t),qs(this,e,e=>{this.i._attachUintVectorListener(e)})}attachDoubleListener(e,t){Ks(this,e,t),qs(this,e,e=>{this.i._attachDoubleListener(e)})}attachDoubleVectorListener(e,t){Js(this,e,t),qs(this,e,e=>{this.i._attachDoubleVectorListener(e)})}attachFloatListener(e,t){Ks(this,e,t),qs(this,e,e=>{this.i._attachFloatListener(e)})}attachFloatVectorListener(e,t){Js(this,e,t),qs(this,e,e=>{this.i._attachFloatVectorListener(e)})}attachStringListener(e,t){Ks(this,e,t),qs(this,e,e=>{this.i._attachStringListener(e)})}attachStringVectorListener(e,t){Js(this,e,t),qs(this,e,e=>{this.i._attachStringVectorListener(e)})}attachProtoListener(e,t,n){Ks(this,e,t),qs(this,e,e=>{this.i._attachProtoListener(e,n||!1)})}attachProtoVectorListener(e,t,n){Js(this,e,t),qs(this,e,e=>{this.i._attachProtoVectorListener(e,n||!1)})}attachAudioListener(e,t,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),Ks(this,e,(e,n)=>{e=new Float32Array(e.buffer,e.byteOffset,e.length/4),t(e,n)}),qs(this,e,e=>{this.i._attachAudioListener(e,n||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends Jo{get ea(){return this.i}oa(e,t,n){qs(this,t,t=>{const[r,i]=Ys(this,e,t);this.ea._addBoundTextureAsImageToStream(t,r,i,n)})}V(e,t){Ks(this,e,t),qs(this,e,e=>{this.ea._attachImageListener(e)})}ba(e,t){Js(this,e,t),qs(this,e,e=>{this.ea._attachImageVectorListener(e)})}}));var Jo,Qo=class extends Ko{};async function $o(e,t,n){var r;return async function(e,t,n,r){return async function(e,t,n,r){return e=await(async(e,t,n,r,i)=>{if(t&&await Ws(t),!self.ModuleFactory)throw Error("ModuleFactory not set.");if(n&&(await Ws(n),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&i&&((t=self.Module).locateFile=i.locateFile,i.mainScriptUrlOrBlob&&(t.mainScriptUrlOrBlob=i.mainScriptUrlOrBlob)),i=await self.ModuleFactory(self.Module||i),self.ModuleFactory=self.Module=void 0,new e(i,r)})(e,n.wasmLoaderPath,n.assetLoaderPath,t,{locateFile:e=>e.endsWith(".wasm")?n.wasmBinaryPath.toString():n.assetBinaryPath&&e.endsWith(".data")?n.assetBinaryPath.toString():e}),await e.o(r),e}(e,t,n,r)}(e,null!==(r=n.canvas)&&void 0!==r?r:js()?void 0:document.createElement("canvas"),t,n)}function el(e,t,n,r){if(e.U){var i,a;const c=new Ma;if(null!==(i=n)&&void 0!==i&&i.regionOfInterest){if(!e.na)throw Error("This task doesn't support region-of-interest.");var s=n.regionOfInterest;if(s.left>=s.right||s.top>=s.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(s.left<0||s.top<0||s.right>1||s.bottom>1)throw Error("Expected RectF values to be in [0,1].");In(c,1,(s.left+s.right)/2),In(c,2,(s.top+s.bottom)/2),In(c,4,s.right-s.left),In(c,3,s.bottom-s.top)}else In(c,1,.5),In(c,2,.5),In(c,4,1),In(c,3,1);if(null!==(a=n)&&void 0!==a&&a.rotationDegrees){var o,l;if((null===(o=n)||void 0===o?void 0:o.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90\xb0.");if(In(c,5,-Math.PI*n.rotationDegrees/180),(null===(l=n)||void 0===l?void 0:l.rotationDegrees)%180!=0){const[e,r]=Xs(t);n=Rn(c,3)*r/e,s=Rn(c,4)*e/r,In(c,4,n),In(c,3,s)}}e.g.addProtoToStream(c.g(),"mediapipe.NormalizedRect",e.U,r)}e.g.oa(t,e.Z,null!==r&&void 0!==r?r:performance.now()),e.finishProcessing()}function tl(e,t,n){var r;if(null!==(r=e.baseOptions)&&void 0!==r&&r.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");el(e,t,n,e.B+1)}function nl(e,t,n,r){var i;if(null===(i=e.baseOptions)||void 0===i||!i.g())throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");el(e,t,n,r)}function rl(e,t,n,r){var i=t.data;const a=t.width,s=a*(t=t.height);if((i instanceof Uint8Array||i instanceof Float32Array)&&i.length!==s)throw Error("Unsupported channel count: "+i.length/s);return e=new Ao([i],n,!1,e.g.i.canvas,e.P,a,t),r?e.clone():e}var il=class extends io{constructor(e,t,n,r){super(e),this.g=e,this.Z=t,this.U=n,this.na=r,this.P=new mo}l(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("runningMode"in e&&Pn(this.baseOptions,2,!!e.runningMode&&"IMAGE"!==e.runningMode),void 0!==e.canvas&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.P.close(),super.close()}};il.prototype.close=il.prototype.close;var al=class extends il{constructor(e,t){super(new Qo(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},xn(e=this.h=new Va,0,1,t=new za),In(this.h,2,.5),In(this.h,3,.3)}get baseOptions(){return yn(this.h,za,1)}set baseOptions(e){xn(this.h,0,1,e)}o(e){var t,n;return"minDetectionConfidence"in e&&In(this.h,2,null!==(t=e.minDetectionConfidence)&&void 0!==t?t:.5),"minSuppressionThreshold"in e&&In(this.h,3,null!==(n=e.minSuppressionThreshold)&&void 0!==n?n:.3),this.l(e)}D(e,t){return this.j={detections:[]},tl(this,e,t),this.j}F(e,t,n){return this.j={detections:[]},nl(this,e,n,t),this.j}m(){var e=new oa;aa(e,"image_in"),aa(e,"norm_rect_in"),sa(e,"detections");const t=new Yi;rr(t,ja,this.h);const n=new ea;Ji(n,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),Qi(n,"IMAGE:image_in"),Qi(n,"NORM_RECT:norm_rect_in"),$i(n,"DETECTIONS:detections"),n.o(t),ia(e,n),this.g.attachProtoVectorListener("detections",(e,t)=>{for(const n of e)e=va(n),this.j.detections.push(Ns(e));eo(this,t)}),this.g.attachEmptyPacketListener("detections",e=>{eo(this,e)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};al.prototype.detectForVideo=al.prototype.F,al.prototype.detect=al.prototype.D,al.prototype.setOptions=al.prototype.o,al.createFromModelPath=async function(e,t){return $o(al,e,{baseOptions:{modelAssetPath:t}})},al.createFromModelBuffer=function(e,t){return $o(al,e,{baseOptions:{modelAssetBuffer:t}})},al.createFromOptions=function(e,t){return $o(al,e,t)};var sl=Zo([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),ol=Zo([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),ll=Zo([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),cl=Zo([474,475],[475,476],[476,477],[477,474]),ul=Zo([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),hl=Zo([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),dl=Zo([469,470],[470,471],[471,472],[472,469]),fl=Zo([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),pl=[...sl,...ol,...ll,...ul,...hl,...fl],ml=Zo([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function gl(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var vl=class extends il{constructor(e,t){super(new Qo(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,xn(e=this.h=new qa,0,1,t=new za),this.v=new Xa,xn(this.h,0,3,this.v),this.s=new Va,xn(this.h,0,2,this.s),Ln(this.s,4,1),In(this.s,2,.5),In(this.v,2,.5),In(this.h,4,.5)}get baseOptions(){return yn(this.h,za,1)}set baseOptions(e){xn(this.h,0,1,e)}o(e){var t,n,r,i;return"numFaces"in e&&Ln(this.s,4,null!==(t=e.numFaces)&&void 0!==t?t:1),"minFaceDetectionConfidence"in e&&In(this.s,2,null!==(n=e.minFaceDetectionConfidence)&&void 0!==n?n:.5),"minTrackingConfidence"in e&&In(this.h,4,null!==(r=e.minTrackingConfidence)&&void 0!==r?r:.5),"minFacePresenceConfidence"in e&&In(this.v,2,null!==(i=e.minFacePresenceConfidence)&&void 0!==i?i:.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}D(e,t){return gl(this),tl(this,e,t),this.j}F(e,t,n){return gl(this),nl(this,e,n,t),this.j}m(){var e=new oa;aa(e,"image_in"),aa(e,"norm_rect"),sa(e,"face_landmarks");const t=new Yi;rr(t,Ka,this.h);const n=new ea;Ji(n,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),Qi(n,"IMAGE:image_in"),Qi(n,"NORM_RECT:norm_rect"),$i(n,"NORM_LANDMARKS:face_landmarks"),n.o(t),ia(e,n),this.g.attachProtoVectorListener("face_landmarks",(e,t)=>{for(const n of e)e=xa(n),this.j.faceLandmarks.push(Ds(e));eo(this,t)}),this.g.attachEmptyPacketListener("face_landmarks",e=>{eo(this,e)}),this.outputFaceBlendshapes&&(sa(e,"blendshapes"),$i(n,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(e,t)=>{if(this.outputFaceBlendshapes)for(const r of e){var n;e=fa(r),this.j.faceBlendshapes.push(ks(null!==(n=e.g())&&void 0!==n?n:[]))}eo(this,t)}),this.g.attachEmptyPacketListener("blendshapes",e=>{eo(this,e)})),this.outputFacialTransformationMatrixes&&(sa(e,"face_geometry"),$i(n,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(e,t)=>{if(this.outputFacialTransformationMatrixes)for(const o of e){var n,r,i,a,s;(e=yn(Wa(o),Sa,2))&&this.j.facialTransformationMatrixes.push({rows:null!==(n=null!==(r=An(e,1))&&void 0!==r?r:0)&&void 0!==n?n:0,columns:null!==(i=null!==(a=An(e,2))&&void 0!==a?a:0)&&void 0!==i?i:0,data:null!==(s=an(e,3,st,rn()).slice())&&void 0!==s?s:[]})}eo(this,t)}),this.g.attachEmptyPacketListener("face_geometry",e=>{eo(this,e)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};vl.prototype.detectForVideo=vl.prototype.F,vl.prototype.detect=vl.prototype.D,vl.prototype.setOptions=vl.prototype.o,vl.createFromModelPath=function(e,t){return $o(vl,e,{baseOptions:{modelAssetPath:t}})},vl.createFromModelBuffer=function(e,t){return $o(vl,e,{baseOptions:{modelAssetBuffer:t}})},vl.createFromOptions=function(e,t){return $o(vl,e,t)},vl.FACE_LANDMARKS_LIPS=sl,vl.FACE_LANDMARKS_LEFT_EYE=ol,vl.FACE_LANDMARKS_LEFT_EYEBROW=ll,vl.FACE_LANDMARKS_LEFT_IRIS=cl,vl.FACE_LANDMARKS_RIGHT_EYE=ul,vl.FACE_LANDMARKS_RIGHT_EYEBROW=hl,vl.FACE_LANDMARKS_RIGHT_IRIS=dl,vl.FACE_LANDMARKS_FACE_OVAL=fl,vl.FACE_LANDMARKS_CONTOURS=pl,vl.FACE_LANDMARKS_TESSELATION=ml;var yl=class extends il{constructor(e,t){super(new Qo(e,t),"image_in","norm_rect",!0),xn(e=this.j=new Ja,0,1,t=new za)}get baseOptions(){return yn(this.j,za,1)}set baseOptions(e){xn(this.j,0,1,e)}o(e){return super.l(e)}Ka(e,t,n){const r="function"!=typeof t?t:{};if(this.h="function"==typeof t?t:n,tl(this,e,null!==r&&void 0!==r?r:{}),!this.h)return this.s}m(){var e=new oa;aa(e,"image_in"),aa(e,"norm_rect"),sa(e,"stylized_image");const t=new Yi;rr(t,Qa,this.j);const n=new ea;Ji(n,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),Qi(n,"IMAGE:image_in"),Qi(n,"NORM_RECT:norm_rect"),$i(n,"STYLIZED_IMAGE:stylized_image"),n.o(t),ia(e,n),this.g.V("stylized_image",(e,t)=>{var n=!this.h,r=e.data,i=e.width;const a=i*(e=e.height);if(r instanceof Uint8Array)if(r.length===3*a){const t=new Uint8ClampedArray(4*a);for(let e=0;e<a;++e)t[4*e]=r[3*e],t[4*e+1]=r[3*e+1],t[4*e+2]=r[3*e+2],t[4*e+3]=255;r=new ImageData(t,i,e)}else{if(r.length!==4*a)throw Error("Unsupported channel count: "+r.length/a);r=new ImageData(new Uint8ClampedArray(r.buffer,r.byteOffset,r.length),i,e)}else if(!(r instanceof WebGLTexture))throw Error("Unsupported format: ".concat(r.constructor.name));i=new qo([r],!1,!1,this.g.i.canvas,this.P,i,e),this.s=n=n?i.clone():i,this.h&&this.h(n),eo(this,t)}),this.g.attachEmptyPacketListener("stylized_image",e=>{this.s=null,this.h&&this.h(null),eo(this,e)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};yl.prototype.stylize=yl.prototype.Ka,yl.prototype.setOptions=yl.prototype.o,yl.createFromModelPath=function(e,t){return $o(yl,e,{baseOptions:{modelAssetPath:t}})},yl.createFromModelBuffer=function(e,t){return $o(yl,e,{baseOptions:{modelAssetBuffer:t}})},yl.createFromOptions=function(e,t){return $o(yl,e,t)};var _l=Zo([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function bl(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function xl(e){return 0===e.gestures.length?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function Sl(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=[];for(const u of e){var r=fa(u);e=[];for(const n of r.g()){var i,a,s,o,l,c;r=t&&null!=An(n,1)?null!==(i=An(n,1))&&void 0!==i?i:0:-1,e.push({score:null!==(a=Rn(n,2))&&void 0!==a?a:0,index:r,categoryName:null!==(s=null!==(o=Cn(n,3))&&void 0!==o?o:"")&&void 0!==s?s:"",displayName:null!==(l=null!==(c=Cn(n,4))&&void 0!==c?c:"")&&void 0!==l?l:""})}n.push(e)}return n}var wl=class extends il{constructor(e,t){super(new Qo(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],xn(e=this.j=new as,0,1,t=new za),this.s=new is,xn(this.j,0,2,this.s),this.C=new rs,xn(this.s,0,3,this.C),this.v=new ns,xn(this.s,0,2,this.v),this.h=new ts,xn(this.j,0,3,this.h),In(this.v,2,.5),In(this.s,4,.5),In(this.C,2,.5)}get baseOptions(){return yn(this.j,za,1)}set baseOptions(e){xn(this.j,0,1,e)}o(e){var t,n,r,i,a,s,o;if(Ln(this.v,3,null!==(t=e.numHands)&&void 0!==t?t:1),"minHandDetectionConfidence"in e&&In(this.v,2,null!==(n=e.minHandDetectionConfidence)&&void 0!==n?n:.5),"minTrackingConfidence"in e&&In(this.s,4,null!==(r=e.minTrackingConfidence)&&void 0!==r?r:.5),"minHandPresenceConfidence"in e&&In(this.C,2,null!==(i=e.minHandPresenceConfidence)&&void 0!==i?i:.5),e.cannedGesturesClassifierOptions){var l,c=new $a,u=c,h=Is(e.cannedGesturesClassifierOptions,null===(l=yn(this.h,$a,3))||void 0===l?void 0:l.h());xn(u,0,2,h),xn(this.h,0,3,c)}else void 0===e.cannedGesturesClassifierOptions&&(null===(a=yn(this.h,$a,3))||void 0===a||a.g());return e.customGesturesClassifierOptions?(xn(u=c=new $a,0,2,h=Is(e.customGesturesClassifierOptions,null===(s=yn(this.h,$a,4))||void 0===s?void 0:s.h())),xn(this.h,0,4,c)):void 0===e.customGesturesClassifierOptions&&(null===(o=yn(this.h,$a,4))||void 0===o||o.g()),this.l(e)}Fa(e,t){return bl(this),tl(this,e,t),xl(this)}Ga(e,t,n){return bl(this),nl(this,e,n,t),xl(this)}m(){var e=new oa;aa(e,"image_in"),aa(e,"norm_rect"),sa(e,"hand_gestures"),sa(e,"hand_landmarks"),sa(e,"world_hand_landmarks"),sa(e,"handedness");const t=new Yi;rr(t,us,this.j);const n=new ea;Ji(n,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),Qi(n,"IMAGE:image_in"),Qi(n,"NORM_RECT:norm_rect"),$i(n,"HAND_GESTURES:hand_gestures"),$i(n,"LANDMARKS:hand_landmarks"),$i(n,"WORLD_LANDMARKS:world_hand_landmarks"),$i(n,"HANDEDNESS:handedness"),n.o(t),ia(e,n),this.g.attachProtoVectorListener("hand_landmarks",(e,t)=>{for(const s of e){e=xa(s);const t=[];for(const s of bn(e,ba,1)){var n,r,i,a;t.push({x:null!==(n=Rn(s,1))&&void 0!==n?n:0,y:null!==(r=Rn(s,2))&&void 0!==r?r:0,z:null!==(i=Rn(s,3))&&void 0!==i?i:0,visibility:null!==(a=Rn(s,4))&&void 0!==a?a:0})}this.landmarks.push(t)}eo(this,t)}),this.g.attachEmptyPacketListener("hand_landmarks",e=>{eo(this,e)}),this.g.attachProtoVectorListener("world_hand_landmarks",(e,t)=>{for(const s of e){e=_a(s);const t=[];for(const s of bn(e,ya,1)){var n,r,i,a;t.push({x:null!==(n=Rn(s,1))&&void 0!==n?n:0,y:null!==(r=Rn(s,2))&&void 0!==r?r:0,z:null!==(i=Rn(s,3))&&void 0!==i?i:0,visibility:null!==(a=Rn(s,4))&&void 0!==a?a:0})}this.worldLandmarks.push(t)}eo(this,t)}),this.g.attachEmptyPacketListener("world_hand_landmarks",e=>{eo(this,e)}),this.g.attachProtoVectorListener("hand_gestures",(e,t)=>{this.gestures.push(...Sl(e,!1)),eo(this,t)}),this.g.attachEmptyPacketListener("hand_gestures",e=>{eo(this,e)}),this.g.attachProtoVectorListener("handedness",(e,t)=>{this.handedness.push(...Sl(e)),eo(this,t)}),this.g.attachEmptyPacketListener("handedness",e=>{eo(this,e)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function Ml(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}wl.prototype.recognizeForVideo=wl.prototype.Ga,wl.prototype.recognize=wl.prototype.Fa,wl.prototype.setOptions=wl.prototype.o,wl.createFromModelPath=function(e,t){return $o(wl,e,{baseOptions:{modelAssetPath:t}})},wl.createFromModelBuffer=function(e,t){return $o(wl,e,{baseOptions:{modelAssetBuffer:t}})},wl.createFromOptions=function(e,t){return $o(wl,e,t)},wl.HAND_CONNECTIONS=_l;var El=class extends il{constructor(e,t){super(new Qo(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],xn(e=this.h=new is,0,1,t=new za),this.s=new rs,xn(this.h,0,3,this.s),this.j=new ns,xn(this.h,0,2,this.j),Ln(this.j,3,1),In(this.j,2,.5),In(this.s,2,.5),In(this.h,4,.5)}get baseOptions(){return yn(this.h,za,1)}set baseOptions(e){xn(this.h,0,1,e)}o(e){var t,n,r,i;return"numHands"in e&&Ln(this.j,3,null!==(t=e.numHands)&&void 0!==t?t:1),"minHandDetectionConfidence"in e&&In(this.j,2,null!==(n=e.minHandDetectionConfidence)&&void 0!==n?n:.5),"minTrackingConfidence"in e&&In(this.h,4,null!==(r=e.minTrackingConfidence)&&void 0!==r?r:.5),"minHandPresenceConfidence"in e&&In(this.s,2,null!==(i=e.minHandPresenceConfidence)&&void 0!==i?i:.5),this.l(e)}D(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],tl(this,e,t),Ml(this)}F(e,t,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],nl(this,e,n,t),Ml(this)}m(){var e=new oa;aa(e,"image_in"),aa(e,"norm_rect"),sa(e,"hand_landmarks"),sa(e,"world_hand_landmarks"),sa(e,"handedness");const t=new Yi;rr(t,hs,this.h);const n=new ea;Ji(n,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Qi(n,"IMAGE:image_in"),Qi(n,"NORM_RECT:norm_rect"),$i(n,"LANDMARKS:hand_landmarks"),$i(n,"WORLD_LANDMARKS:world_hand_landmarks"),$i(n,"HANDEDNESS:handedness"),n.o(t),ia(e,n),this.g.attachProtoVectorListener("hand_landmarks",(e,t)=>{for(const n of e)e=xa(n),this.landmarks.push(Ds(e));eo(this,t)}),this.g.attachEmptyPacketListener("hand_landmarks",e=>{eo(this,e)}),this.g.attachProtoVectorListener("world_hand_landmarks",(e,t)=>{for(const n of e)e=_a(n),this.worldLandmarks.push(Us(e));eo(this,t)}),this.g.attachEmptyPacketListener("world_hand_landmarks",e=>{eo(this,e)}),this.g.attachProtoVectorListener("handedness",(e,t)=>{var n=this.handedness,r=n.push;const i=[];for(const d of e){e=fa(d);const t=[];for(const n of e.g()){var a,s,o,l,c,u,h;t.push({score:null!==(a=Rn(n,2))&&void 0!==a?a:0,index:null!==(s=null!==(o=An(n,1))&&void 0!==o?o:0)&&void 0!==s?s:-1,categoryName:null!==(l=null!==(c=Cn(n,3))&&void 0!==c?c:"")&&void 0!==l?l:"",displayName:null!==(u=null!==(h=Cn(n,4))&&void 0!==h?h:"")&&void 0!==u?u:""})}i.push(t)}r.call(n,...i),eo(this,t)}),this.g.attachEmptyPacketListener("handedness",e=>{eo(this,e)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};El.prototype.detectForVideo=El.prototype.F,El.prototype.detect=El.prototype.D,El.prototype.setOptions=El.prototype.o,El.createFromModelPath=function(e,t){return $o(El,e,{baseOptions:{modelAssetPath:t}})},El.createFromModelBuffer=function(e,t){return $o(El,e,{baseOptions:{modelAssetBuffer:t}})},El.createFromOptions=function(e,t){return $o(El,e,t)},El.HAND_CONNECTIONS=_l;var Tl=Zo([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function Al(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function Cl(e){try{if(!e.C)return e.h;e.C(e.h)}finally{ro(e)}}function Rl(e,t){e=xa(e),t.push(Ds(e))}var Pl=class extends il{constructor(e,t){super(new Qo(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,xn(e=this.j=new ms,0,1,t=new za),this.K=new rs,xn(this.j,0,2,this.K),this.Y=new ds,xn(this.j,0,3,this.Y),this.s=new Va,xn(this.j,0,4,this.s),this.H=new Xa,xn(this.j,0,5,this.H),this.v=new fs,xn(this.j,0,6,this.v),this.L=new ps,xn(this.j,0,7,this.L),In(this.s,2,.5),In(this.s,3,.3),In(this.H,2,.5),In(this.v,2,.5),In(this.v,3,.3),In(this.L,2,.5),In(this.K,2,.5)}get baseOptions(){return yn(this.j,za,1)}set baseOptions(e){xn(this.j,0,1,e)}o(e){var t,n,r,i,a,s,o;return"minFaceDetectionConfidence"in e&&In(this.s,2,null!==(t=e.minFaceDetectionConfidence)&&void 0!==t?t:.5),"minFaceSuppressionThreshold"in e&&In(this.s,3,null!==(n=e.minFaceSuppressionThreshold)&&void 0!==n?n:.3),"minFacePresenceConfidence"in e&&In(this.H,2,null!==(r=e.minFacePresenceConfidence)&&void 0!==r?r:.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&In(this.v,2,null!==(i=e.minPoseDetectionConfidence)&&void 0!==i?i:.5),"minPoseSuppressionThreshold"in e&&In(this.v,3,null!==(a=e.minPoseSuppressionThreshold)&&void 0!==a?a:.3),"minPosePresenceConfidence"in e&&In(this.L,2,null!==(s=e.minPosePresenceConfidence)&&void 0!==s?s:.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&In(this.K,2,null!==(o=e.minHandLandmarksConfidence)&&void 0!==o?o:.5),this.l(e)}D(e,t,n){const r="function"!=typeof t?t:{};return this.C="function"==typeof t?t:n,Al(this),tl(this,e,r),Cl(this)}F(e,t,n,r){const i="function"!=typeof n?n:{};return this.C="function"==typeof n?n:r,Al(this),nl(this,e,i,t),Cl(this)}m(){var e=new oa;aa(e,"input_frames_image"),sa(e,"pose_landmarks"),sa(e,"pose_world_landmarks"),sa(e,"face_landmarks"),sa(e,"left_hand_landmarks"),sa(e,"left_hand_world_landmarks"),sa(e,"right_hand_landmarks"),sa(e,"right_hand_world_landmarks");const t=new Yi,n=new Ui;un(n,1,xt("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(e,t){if(null!=t)if(Array.isArray(t))$t(e,2,Vt(t,jt,void 0,void 0,!1));else{if(!("string"==typeof t||t instanceof Y||j(t)))throw Error("invalid value in Any.value field: "+t+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");un(e,2,Se(t,!1),X())}}(n,this.j.g());const r=new ea;Ji(r,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),Tn(r,8,Ui,n),Qi(r,"IMAGE:input_frames_image"),$i(r,"POSE_LANDMARKS:pose_landmarks"),$i(r,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),$i(r,"FACE_LANDMARKS:face_landmarks"),$i(r,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),$i(r,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),$i(r,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),$i(r,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),r.o(t),ia(e,r),to(this,e),this.g.attachProtoListener("pose_landmarks",(e,t)=>{Rl(e,this.h.poseLandmarks),eo(this,t)}),this.g.attachEmptyPacketListener("pose_landmarks",e=>{eo(this,e)}),this.g.attachProtoListener("pose_world_landmarks",(e,t)=>{var n=this.h.poseWorldLandmarks;e=_a(e),n.push(Us(e)),eo(this,t)}),this.g.attachEmptyPacketListener("pose_world_landmarks",e=>{eo(this,e)}),this.outputPoseSegmentationMasks&&($i(r,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),no(this,"pose_segmentation_mask"),this.g.V("pose_segmentation_mask",(e,t)=>{this.h.poseSegmentationMasks=[rl(this,e,!0,!this.C)],eo(this,t)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",e=>{this.h.poseSegmentationMasks=[],eo(this,e)})),this.g.attachProtoListener("face_landmarks",(e,t)=>{Rl(e,this.h.faceLandmarks),eo(this,t)}),this.g.attachEmptyPacketListener("face_landmarks",e=>{eo(this,e)}),this.outputFaceBlendshapes&&(sa(e,"extra_blendshapes"),$i(r,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(e,t)=>{var n,r=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(e=fa(e),r.push(ks(null!==(n=e.g())&&void 0!==n?n:[]))),eo(this,t)}),this.g.attachEmptyPacketListener("extra_blendshapes",e=>{eo(this,e)})),this.g.attachProtoListener("left_hand_landmarks",(e,t)=>{Rl(e,this.h.leftHandLandmarks),eo(this,t)}),this.g.attachEmptyPacketListener("left_hand_landmarks",e=>{eo(this,e)}),this.g.attachProtoListener("left_hand_world_landmarks",(e,t)=>{var n=this.h.leftHandWorldLandmarks;e=_a(e),n.push(Us(e)),eo(this,t)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",e=>{eo(this,e)}),this.g.attachProtoListener("right_hand_landmarks",(e,t)=>{Rl(e,this.h.rightHandLandmarks),eo(this,t)}),this.g.attachEmptyPacketListener("right_hand_landmarks",e=>{eo(this,e)}),this.g.attachProtoListener("right_hand_world_landmarks",(e,t)=>{var n=this.h.rightHandWorldLandmarks;e=_a(e),n.push(Us(e)),eo(this,t)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",e=>{eo(this,e)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Pl.prototype.detectForVideo=Pl.prototype.F,Pl.prototype.detect=Pl.prototype.D,Pl.prototype.setOptions=Pl.prototype.o,Pl.createFromModelPath=function(e,t){return $o(Pl,e,{baseOptions:{modelAssetPath:t}})},Pl.createFromModelBuffer=function(e,t){return $o(Pl,e,{baseOptions:{modelAssetBuffer:t}})},Pl.createFromOptions=function(e,t){return $o(Pl,e,t)},Pl.HAND_CONNECTIONS=_l,Pl.POSE_CONNECTIONS=Tl,Pl.FACE_LANDMARKS_LIPS=sl,Pl.FACE_LANDMARKS_LEFT_EYE=ol,Pl.FACE_LANDMARKS_LEFT_EYEBROW=ll,Pl.FACE_LANDMARKS_LEFT_IRIS=cl,Pl.FACE_LANDMARKS_RIGHT_EYE=ul,Pl.FACE_LANDMARKS_RIGHT_EYEBROW=hl,Pl.FACE_LANDMARKS_RIGHT_IRIS=dl,Pl.FACE_LANDMARKS_FACE_OVAL=fl,Pl.FACE_LANDMARKS_CONTOURS=pl,Pl.FACE_LANDMARKS_TESSELATION=ml;var Ll=class extends il{constructor(e,t){super(new Qo(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},xn(e=this.h=new ys,0,1,t=new za)}get baseOptions(){return yn(this.h,za,1)}set baseOptions(e){xn(this.h,0,1,e)}o(e){return xn(this.h,0,2,Is(e,yn(this.h,Ia,2))),this.l(e)}qa(e,t){return this.j={classifications:[]},tl(this,e,t),this.j}ra(e,t,n){return this.j={classifications:[]},nl(this,e,n,t),this.j}m(){var e=new oa;aa(e,"input_image"),aa(e,"norm_rect"),sa(e,"classifications");const t=new Yi;rr(t,_s,this.h);const n=new ea;Ji(n,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),Qi(n,"IMAGE:input_image"),Qi(n,"NORM_RECT:norm_rect"),$i(n,"CLASSIFICATIONS:classifications"),n.o(t),ia(e,n),this.g.attachProtoListener("classifications",(e,t)=>{this.j=function(e,t){const n={classifications:bn(e,Ea,1).map(e=>{var t,n,r,i;return ks(null!==(t=null===(n=yn(e,ha,4))||void 0===n?void 0:n.g())&&void 0!==t?t:[],null!==(r=An(e,2))&&void 0!==r?r:0,null!==(i=Cn(e,3))&&void 0!==i?i:"")})};return null!=_t(Jt(e,2))&&(n.timestampMs=null!==(t=_t(Jt(e,2)))&&void 0!==t?t:0),n}(Ta(e)),eo(this,t)}),this.g.attachEmptyPacketListener("classifications",e=>{eo(this,e)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ll.prototype.classifyForVideo=Ll.prototype.ra,Ll.prototype.classify=Ll.prototype.qa,Ll.prototype.setOptions=Ll.prototype.o,Ll.createFromModelPath=function(e,t){return $o(Ll,e,{baseOptions:{modelAssetPath:t}})},Ll.createFromModelBuffer=function(e,t){return $o(Ll,e,{baseOptions:{modelAssetBuffer:t}})},Ll.createFromOptions=function(e,t){return $o(Ll,e,t)};var Il=class extends il{constructor(e,t){super(new Qo(e,t),"image_in","norm_rect",!0),this.h=new bs,this.embeddings={embeddings:[]},xn(e=this.h,0,1,t=new za)}get baseOptions(){return yn(this.h,za,1)}set baseOptions(e){xn(this.h,0,1,e)}o(e){var t=this.h,n=yn(this.h,Na,2);return n=n?n.clone():new Na,void 0!==e.l2Normalize?Pn(n,1,e.l2Normalize):"l2Normalize"in e&&$t(n,1),void 0!==e.quantize?Pn(n,2,e.quantize):"quantize"in e&&$t(n,2),xn(t,0,2,n),this.l(e)}xa(e,t){return tl(this,e,t),this.embeddings}ya(e,t,n){return nl(this,e,n,t),this.embeddings}m(){var e=new oa;aa(e,"image_in"),aa(e,"norm_rect"),sa(e,"embeddings_out");const t=new Yi;rr(t,xs,this.h);const n=new ea;Ji(n,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),Qi(n,"IMAGE:image_in"),Qi(n,"NORM_RECT:norm_rect"),$i(n,"EMBEDDINGS:embeddings_out"),n.o(t),ia(e,n),this.g.attachProtoListener("embeddings_out",(e,t)=>{e=La(e),this.embeddings=function(e,t){return{embeddings:bn(e,Ra,1).map(e=>{var t,n,r,i;const a={headIndex:null!==(t=null!==(n=An(e,3))&&void 0!==n?n:0)&&void 0!==t?t:-1,headName:null!==(r=null!==(i=Cn(e,4))&&void 0!==i?i:"")&&void 0!==r?r:""};if(void 0!==vn(e,Aa,dn(e,1)))e=an(e=yn(e,Aa,dn(e,1)),1,st,rn()),a.floatEmbedding=e.slice();else{var s,o;const t=new Uint8Array(0);a.quantizedEmbedding=null!==(s=null===(o=yn(e,Ca,dn(e,2)))||void 0===o||null===(o=o.ma())||void 0===o?void 0:o.h())&&void 0!==s?s:t}return a}),timestampMs:null!==(t=_t(Jt(e,2)))&&void 0!==t?t:0}}(e),eo(this,t)}),this.g.attachEmptyPacketListener("embeddings_out",e=>{eo(this,e)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Il.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=Fs(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=Fs(Os(e.quantizedEmbedding),Os(t.quantizedEmbedding))}return e},Il.prototype.embedForVideo=Il.prototype.ya,Il.prototype.embed=Il.prototype.xa,Il.prototype.setOptions=Il.prototype.o,Il.createFromModelPath=function(e,t){return $o(Il,e,{baseOptions:{modelAssetPath:t}})},Il.createFromModelBuffer=function(e,t){return $o(Il,e,{baseOptions:{modelAssetBuffer:t}})},Il.createFromOptions=function(e,t){return $o(Il,e,t)};var kl=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){var e,t;null!==(e=this.confidenceMasks)&&void 0!==e&&e.forEach(e=>{e.close()}),null===(t=this.categoryMask)||void 0===t||t.close()}};function Nl(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function Dl(e){try{const t=new kl(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{ro(e)}}kl.prototype.close=kl.prototype.close;var Ul=class extends il{constructor(e,t){super(new Qo(e,t),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Ts,this.v=new Ss,xn(this.h,0,3,this.v),xn(e=this.h,0,1,t=new za)}get baseOptions(){return yn(this.h,za,1)}set baseOptions(e){xn(this.h,0,1,e)}o(e){var t,n;return void 0!==e.displayNamesLocale?$t(this.h,2,xt(e.displayNamesLocale)):"displayNamesLocale"in e&&$t(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=null!==(t=e.outputCategoryMask)&&void 0!==t&&t),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=null===(n=e.outputConfidenceMasks)||void 0===n||n),super.l(e)}J(){!function(e,t,n){const r=bn(e.ca(),ea,1).filter(e=>{var t;return(null!==(t=Cn(e,1))&&void 0!==t?t:"").includes("mediapipe.tasks.TensorsToSegmentationCalculator")});if(e.s=[],r.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");1===r.length&&(null!==(t=null===(n=yn(r[0],Yi,7))||void 0===n||null===(n=n.l())||void 0===n?void 0:n.g())&&void 0!==t?t:new Map).forEach((t,n)=>{var r;e.s[Number(n)]=null!==(r=Cn(t,1))&&void 0!==r?r:""})}(this)}segment(e,t,n){const r="function"!=typeof t?t:{};return this.j="function"==typeof t?t:n,Nl(this),tl(this,e,r),Dl(this)}Ia(e,t,n,r){const i="function"!=typeof n?n:{};return this.j="function"==typeof n?n:r,Nl(this),nl(this,e,i,t),Dl(this)}Ba(){return this.s}m(){var e=new oa;aa(e,"image_in"),aa(e,"norm_rect");const t=new Yi;rr(t,As,this.h);const n=new ea;Ji(n,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),Qi(n,"IMAGE:image_in"),Qi(n,"NORM_RECT:norm_rect"),n.o(t),ia(e,n),to(this,e),this.outputConfidenceMasks&&(sa(e,"confidence_masks"),$i(n,"CONFIDENCE_MASKS:confidence_masks"),no(this,"confidence_masks"),this.g.ba("confidence_masks",(e,t)=>{this.confidenceMasks=e.map(e=>rl(this,e,!0,!this.j)),eo(this,t)}),this.g.attachEmptyPacketListener("confidence_masks",e=>{this.confidenceMasks=[],eo(this,e)})),this.outputCategoryMask&&(sa(e,"category_mask"),$i(n,"CATEGORY_MASK:category_mask"),no(this,"category_mask"),this.g.V("category_mask",(e,t)=>{this.categoryMask=rl(this,e,!1,!this.j),eo(this,t)}),this.g.attachEmptyPacketListener("category_mask",e=>{this.categoryMask=void 0,eo(this,e)})),sa(e,"quality_scores"),$i(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(e,t)=>{this.qualityScores=e,eo(this,t)}),this.g.attachEmptyPacketListener("quality_scores",e=>{this.categoryMask=void 0,eo(this,e)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ul.prototype.getLabels=Ul.prototype.Ba,Ul.prototype.segmentForVideo=Ul.prototype.Ia,Ul.prototype.segment=Ul.prototype.segment,Ul.prototype.setOptions=Ul.prototype.o,Ul.createFromModelPath=function(e,t){return $o(Ul,e,{baseOptions:{modelAssetPath:t}})},Ul.createFromModelBuffer=function(e,t){return $o(Ul,e,{baseOptions:{modelAssetBuffer:t}})},Ul.createFromOptions=function(e,t){return $o(Ul,e,t)};var Ol=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){var e,t;null!==(e=this.confidenceMasks)&&void 0!==e&&e.forEach(e=>{e.close()}),null===(t=this.categoryMask)||void 0===t||t.close()}};Ol.prototype.close=Ol.prototype.close;var Fl=class extends ir{constructor(e){super(e)}},zl=[0,yi,-2],Bl=[0,hi,-3,xi,hi,-1],Hl=[0,Bl],Vl=[0,Bl,yi,-1],Gl=class extends ir{constructor(e){super(e)}},jl=[0,hi,-1,xi],Wl=class extends ir{constructor(e){super(e)}},Xl=class extends ir{constructor(e){super(e)}},ql=[1,2,3,4,5,6,7,8,9,10,14,15],Yl=class extends ir{constructor(e){super(e)}};Yl.prototype.g=Di([0,Ti,[0,ql,Ai,Bl,Ai,[0,Bl,zl],Ai,Hl,Ai,[0,Hl,zl],Ai,jl,Ai,[0,hi,-3,xi,Li],Ai,[0,hi,-3,xi],Ai,[0,Ei,hi,-2,xi,yi,xi,-1,2,hi,zl],Ai,Vl,Ai,[0,Vl,zl],hi,zl,Ei,Ai,[0,hi,-3,xi,zl,-1],Ai,[0,Ti,jl]],Ei,[0,Ei,yi,-1,xi]]);var Zl=class extends il{constructor(e,t){super(new Qo(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new Ts,this.s=new Ss,xn(this.h,0,3,this.s),xn(e=this.h,0,1,t=new za)}get baseOptions(){return yn(this.h,za,1)}set baseOptions(e){xn(this.h,0,1,e)}o(e){var t,n;return"outputCategoryMask"in e&&(this.outputCategoryMask=null!==(t=e.outputCategoryMask)&&void 0!==t&&t),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=null===(n=e.outputConfidenceMasks)||void 0===n||n),super.l(e)}segment(e,t,n,r){const i="function"!=typeof n?n:{};this.j="function"==typeof n?n:r,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.B+1,r=new Yl;const a=new Xl;var s=new Fl;if(Ln(s,1,255),xn(a,0,12,s),t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var o=new Gl;Pn(o,3,!0),In(o,1,t.keypoint.x),In(o,2,t.keypoint.y),Sn(a,5,ql,o)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");for(o of(s=new Wl,t.scribble))Pn(t=new Gl,3,!0),In(t,1,o.x),In(t,2,o.y),Tn(s,1,Gl,t);Sn(a,15,ql,s)}Tn(r,1,Xl,a),this.g.addProtoToStream(r.g(),"drishti.RenderData","roi_in",n),tl(this,e,i);e:{try{const e=new Ol(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var l=e;break e}this.j(e)}finally{ro(this)}l=void 0}return l}m(){var e=new oa;aa(e,"image_in"),aa(e,"roi_in"),aa(e,"norm_rect_in");const t=new Yi;rr(t,As,this.h);const n=new ea;Ji(n,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),Qi(n,"IMAGE:image_in"),Qi(n,"ROI:roi_in"),Qi(n,"NORM_RECT:norm_rect_in"),n.o(t),ia(e,n),to(this,e),this.outputConfidenceMasks&&(sa(e,"confidence_masks"),$i(n,"CONFIDENCE_MASKS:confidence_masks"),no(this,"confidence_masks"),this.g.ba("confidence_masks",(e,t)=>{this.confidenceMasks=e.map(e=>rl(this,e,!0,!this.j)),eo(this,t)}),this.g.attachEmptyPacketListener("confidence_masks",e=>{this.confidenceMasks=[],eo(this,e)})),this.outputCategoryMask&&(sa(e,"category_mask"),$i(n,"CATEGORY_MASK:category_mask"),no(this,"category_mask"),this.g.V("category_mask",(e,t)=>{this.categoryMask=rl(this,e,!1,!this.j),eo(this,t)}),this.g.attachEmptyPacketListener("category_mask",e=>{this.categoryMask=void 0,eo(this,e)})),sa(e,"quality_scores"),$i(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(e,t)=>{this.qualityScores=e,eo(this,t)}),this.g.attachEmptyPacketListener("quality_scores",e=>{this.categoryMask=void 0,eo(this,e)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Zl.prototype.segment=Zl.prototype.segment,Zl.prototype.setOptions=Zl.prototype.o,Zl.createFromModelPath=function(e,t){return $o(Zl,e,{baseOptions:{modelAssetPath:t}})},Zl.createFromModelBuffer=function(e,t){return $o(Zl,e,{baseOptions:{modelAssetBuffer:t}})},Zl.createFromOptions=function(e,t){return $o(Zl,e,t)};var Kl=class extends il{constructor(e,t){super(new Qo(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},xn(e=this.h=new Cs,0,1,t=new za)}get baseOptions(){return yn(this.h,za,1)}set baseOptions(e){xn(this.h,0,1,e)}o(e){return void 0!==e.displayNamesLocale?$t(this.h,2,xt(e.displayNamesLocale)):"displayNamesLocale"in e&&$t(this.h,2),void 0!==e.maxResults?Ln(this.h,3,e.maxResults):"maxResults"in e&&$t(this.h,3),void 0!==e.scoreThreshold?In(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&$t(this.h,4),void 0!==e.categoryAllowlist?kn(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&$t(this.h,5),void 0!==e.categoryDenylist?kn(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&$t(this.h,6),this.l(e)}D(e,t){return this.j={detections:[]},tl(this,e,t),this.j}F(e,t,n){return this.j={detections:[]},nl(this,e,n,t),this.j}m(){var e=new oa;aa(e,"input_frame_gpu"),aa(e,"norm_rect"),sa(e,"detections");const t=new Yi;rr(t,Rs,this.h);const n=new ea;Ji(n,"mediapipe.tasks.vision.ObjectDetectorGraph"),Qi(n,"IMAGE:input_frame_gpu"),Qi(n,"NORM_RECT:norm_rect"),$i(n,"DETECTIONS:detections"),n.o(t),ia(e,n),this.g.attachProtoVectorListener("detections",(e,t)=>{for(const n of e)e=va(n),this.j.detections.push(Ns(e));eo(this,t)}),this.g.attachEmptyPacketListener("detections",e=>{eo(this,e)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Kl.prototype.detectForVideo=Kl.prototype.F,Kl.prototype.detect=Kl.prototype.D,Kl.prototype.setOptions=Kl.prototype.o,Kl.createFromModelPath=async function(e,t){return $o(Kl,e,{baseOptions:{modelAssetPath:t}})},Kl.createFromModelBuffer=function(e,t){return $o(Kl,e,{baseOptions:{modelAssetBuffer:t}})},Kl.createFromOptions=function(e,t){return $o(Kl,e,t)};var Jl=class{constructor(e,t,n){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=n}close(){var e;null===(e=this.segmentationMasks)||void 0===e||e.forEach(e=>{e.close()})}};function Ql(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function $l(e){try{const t=new Jl(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return t;e.s(t)}finally{ro(e)}}Jl.prototype.close=Jl.prototype.close;var ec=class extends il{constructor(e,t){super(new Qo(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,xn(e=this.h=new Ps,0,1,t=new za),this.v=new ps,xn(this.h,0,3,this.v),this.j=new fs,xn(this.h,0,2,this.j),Ln(this.j,4,1),In(this.j,2,.5),In(this.v,2,.5),In(this.h,4,.5)}get baseOptions(){return yn(this.h,za,1)}set baseOptions(e){xn(this.h,0,1,e)}o(e){var t,n,r,i,a;return"numPoses"in e&&Ln(this.j,4,null!==(t=e.numPoses)&&void 0!==t?t:1),"minPoseDetectionConfidence"in e&&In(this.j,2,null!==(n=e.minPoseDetectionConfidence)&&void 0!==n?n:.5),"minTrackingConfidence"in e&&In(this.h,4,null!==(r=e.minTrackingConfidence)&&void 0!==r?r:.5),"minPosePresenceConfidence"in e&&In(this.v,2,null!==(i=e.minPosePresenceConfidence)&&void 0!==i?i:.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=null!==(a=e.outputSegmentationMasks)&&void 0!==a&&a),this.l(e)}D(e,t,n){const r="function"!=typeof t?t:{};return this.s="function"==typeof t?t:n,Ql(this),tl(this,e,r),$l(this)}F(e,t,n,r){const i="function"!=typeof n?n:{};return this.s="function"==typeof n?n:r,Ql(this),nl(this,e,i,t),$l(this)}m(){var e=new oa;aa(e,"image_in"),aa(e,"norm_rect"),sa(e,"normalized_landmarks"),sa(e,"world_landmarks"),sa(e,"segmentation_masks");const t=new Yi;rr(t,Ls,this.h);const n=new ea;Ji(n,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Qi(n,"IMAGE:image_in"),Qi(n,"NORM_RECT:norm_rect"),$i(n,"NORM_LANDMARKS:normalized_landmarks"),$i(n,"WORLD_LANDMARKS:world_landmarks"),n.o(t),ia(e,n),to(this,e),this.g.attachProtoVectorListener("normalized_landmarks",(e,t)=>{this.landmarks=[];for(const n of e)e=xa(n),this.landmarks.push(Ds(e));eo(this,t)}),this.g.attachEmptyPacketListener("normalized_landmarks",e=>{this.landmarks=[],eo(this,e)}),this.g.attachProtoVectorListener("world_landmarks",(e,t)=>{this.worldLandmarks=[];for(const n of e)e=_a(n),this.worldLandmarks.push(Us(e));eo(this,t)}),this.g.attachEmptyPacketListener("world_landmarks",e=>{this.worldLandmarks=[],eo(this,e)}),this.outputSegmentationMasks&&($i(n,"SEGMENTATION_MASK:segmentation_masks"),no(this,"segmentation_masks"),this.g.ba("segmentation_masks",(e,t)=>{this.segmentationMasks=e.map(e=>rl(this,e,!0,!this.s)),eo(this,t)}),this.g.attachEmptyPacketListener("segmentation_masks",e=>{this.segmentationMasks=[],eo(this,e)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function tc(e){try{if(!e)return console.warn("maskToFloat32Array: \u7121\u52b9\u306a\u5165\u529b"),null;if("function"===typeof e.getAsFloat32Array)return e.getAsFloat32Array();if(e.data){const t=e.data.buffer||e.data;return new Float32Array(t)}console.warn("maskToFloat32Array: \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u30c7\u30fc\u30bf\u5f62\u5f0f")}catch(d){console.error("maskToFloat32Array \u30a8\u30e9\u30fc:",d)}return null}ec.prototype.detectForVideo=ec.prototype.F,ec.prototype.detect=ec.prototype.D,ec.prototype.setOptions=ec.prototype.o,ec.createFromModelPath=function(e,t){return $o(ec,e,{baseOptions:{modelAssetPath:t}})},ec.createFromModelBuffer=function(e,t){return $o(ec,e,{baseOptions:{modelAssetBuffer:t}})},ec.createFromOptions=function(e,t){return $o(ec,e,t)},ec.POSE_CONNECTIONS=Tl;let nc=null;const rc=e=>{let{videoRef:t,canvasRef:n,maskAlpha:i=.6,freqMs:a=100,confidenceThreshold:s=.5,isCapturing:o,setAllExtractedColors:l,onCaptureFinished:c,onProgress:u,rotation:h=90,isPaused:f}=e;const p=(0,r.useRef)(null),m=(0,r.useRef)(null),g=(0,r.useRef)(null),v=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{let e=!0;return console.log("\u30e2\u30c7\u30eb\u521d\u671f\u5316"),(async()=>{const{videoSegmenter:n,imageSegmenter:r}=await(async()=>(nc||(nc=(async()=>{console.log("\u30e2\u30c7\u30eb\u521d\u671f\u5316");const e=await Gs.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm"),t="https://storage.googleapis.com/mediapipe-models/image_segmenter/selfie_multiclass_256x256/float32/latest/selfie_multiclass_256x256.tflite";return{videoSegmenter:await Ul.createFromOptions(e,{baseOptions:{modelAssetPath:t,delegate:"GPU"},outputCategoryMask:!1,outputConfidenceMasks:!0,runningMode:"VIDEO"}),imageSegmenter:await Ul.createFromOptions(e,{baseOptions:{modelAssetPath:t},outputCategoryMask:!1,outputConfidenceMasks:!0,runningMode:"IMAGE"})}})()),await nc))();p.current=n,m.current=r;try{g.current=await navigator.mediaDevices.getUserMedia({video:!0}),e&&t.current&&(t.current.srcObject=g.current,await t.current.play())}catch(d){console.error("Failed to get user media",d)}})(),()=>{e=!1,g.current&&g.current.getTracks().forEach(e=>e.stop())}},[t]),(0,r.useEffect)(()=>{let e,r=0,o=!0;const l=async c=>{if(f||!o||!t.current||!n.current||!p.current)return void(o&&(e=requestAnimationFrame(l)));const u=t.current;if(u.paused||u.ended)e=requestAnimationFrame(l);else{if(a<=0||c-r>=a){r=c;try{const e=p.current.segmentForVideo(u,c),t=n.current,r=t.getContext("2d"),a=4,o=e.confidenceMasks&&e.confidenceMasks[a];if(90===h||270===h?(t.width=u.videoHeight,t.height=u.videoWidth):(t.width=u.videoWidth,t.height=u.videoHeight),r.clearRect(0,0,t.width,t.height),r.save(),90===h?(r.translate(t.width,0),r.rotate(90*Math.PI/180)):180===h?(r.translate(t.width,t.height),r.rotate(180*Math.PI/180)):270===h&&(r.translate(0,t.height),r.rotate(270*Math.PI/180)),o){const e=o.width||u.videoWidth,t=o.height||u.videoHeight,n=tc(o);if(n){const a=document.createElement("canvas");a.width=u.videoWidth,a.height=u.videoHeight;const o=a.getContext("2d");o.drawImage(u,0,0,u.videoWidth,u.videoHeight);const l=o.getImageData(0,0,u.videoWidth,u.videoHeight).data,c=new Uint8ClampedArray(e*t*4);for(let e=0,t=0;e<n.length;e++,t+=4){if(n[e]>s)c[t]=l[t],c[t+1]=l[t+1],c[t+2]=l[t+2],c[t+3]=255;else{const e=.3;c[t]=l[t]*e,c[t+1]=l[t+1]*e,c[t+2]=l[t+2]*e,c[t+3]=Math.floor(255*i)}}const h=new ImageData(c,e,t);r.drawImage(await createImageBitmap(h),0,0,u.videoWidth,u.videoHeight)}else r.drawImage(u,0,0,u.videoWidth,u.videoHeight)}else r.drawImage(u,0,0,u.videoWidth,u.videoHeight);r.restore()}catch(d){console.error("segmentForVideo error:",d)}}e=requestAnimationFrame(l)}},c=t.current,u=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(l)};return c&&c.addEventListener("playing",u),e=requestAnimationFrame(l),()=>{o=!1,c&&c.removeEventListener("playing",u),cancelAnimationFrame(e)}},[t,n,i,a,s,h,f]),(0,r.useEffect)(()=>{(async()=>{if(o&&g.current&&t.current&&n.current&&p.current&&m.current){v.current=!0;const e=t.current;e.pause();const r=n.current,a=r.getContext("2d"),o=document.createElement("canvas");o.width=e.videoWidth,o.height=e.videoHeight;const u=o.getContext("2d");u.drawImage(e,0,0,e.videoWidth,e.videoHeight);const d=u.getImageData(0,0,e.videoWidth,e.videoHeight),f=m.current.segment(d),p=4,g=f.confidenceMasks&&f.confidenceMasks[p];if(g){const t=g.width||e.videoWidth,n=g.height||e.videoHeight,o=tc(g);let u=[];if(o){const f=new Uint8ClampedArray(t*n*4);for(let e=0,t=0;e<o.length;e++,t+=4){if(o[e]>s)f[t]=d.data[t],f[t+1]=d.data[t+1],f[t+2]=d.data[t+2],f[t+3]=255;else{const e=.3;f[t]=d.data[t]*e,f[t+1]=d.data[t+1]*e,f[t+2]=d.data[t+2]*e,f[t+3]=Math.floor(255*i)}}const p=new ImageData(f,t,n);90===h||270===h?(r.width=e.videoHeight,r.height=e.videoWidth):(r.width=e.videoWidth,r.height=e.videoHeight),a.clearRect(0,0,r.width,r.height),a.save(),90===h?(a.translate(r.width,0),a.rotate(90*Math.PI/180)):180===h?(a.translate(r.width,r.height),a.rotate(180*Math.PI/180)):270===h&&(a.translate(0,r.height),a.rotate(270*Math.PI/180)),a.drawImage(await createImageBitmap(p),0,0,e.videoWidth,e.videoHeight),a.restore();const m=()=>new Promise(e=>{const t=o.length,n=2e4;let r=0;const i=new Uint32Array(n);for(let a=0;a<n;a++)i[a]=Math.floor(Math.random()*t);for(let a=0;a<n;a++){const e=i[a],t=4*e;if(o[e]>s){const e=d.data[t],n=d.data[t+1],r=d.data[t+2];u.push([e,n,r])}r++,r%100===0&&l([...u])}e()});await m(),console.log("\u62bd\u51fa\u7d42\u4e86 \u8272\u6570: ".concat(u.length)),c()}else c()}else c()}})()},[o,u,l,c,h,s,i]),null};function ic(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ac=n(205);const sc="180",oc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},lc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},cc=0,uc=1,hc=2,dc=3,fc=0,pc=1,mc=2,gc=3,vc=0,yc=1,_c=2,bc=0,xc=1,Sc=2,wc=3,Mc=4,Ec=5,Tc=100,Ac=101,Cc=102,Rc=103,Pc=104,Lc=200,Ic=201,kc=202,Nc=203,Dc=204,Uc=205,Oc=206,Fc=207,zc=208,Bc=209,Hc=210,Vc=211,Gc=212,jc=213,Wc=214,Xc=0,qc=1,Yc=2,Zc=3,Kc=4,Jc=5,Qc=6,$c=7,eu=0,tu=1,nu=2,ru=0,iu=1,au=2,su=3,ou=4,lu=5,cu=6,uu=7,hu="attached",du="detached",fu=300,pu=301,mu=302,gu=303,vu=304,yu=306,_u=1e3,bu=1001,xu=1002,Su=1003,wu=1004,Mu=1004,Eu=1005,Tu=1005,Au=1006,Cu=1007,Ru=1007,Pu=1008,Lu=1008,Iu=1009,ku=1010,Nu=1011,Du=1012,Uu=1013,Ou=1014,Fu=1015,zu=1016,Bu=1017,Hu=1018,Vu=1020,Gu=35902,ju=35899,Wu=1021,Xu=1022,qu=1023,Yu=1026,Zu=1027,Ku=1028,Ju=1029,Qu=1030,$u=1031,eh=1032,th=1033,nh=33776,rh=33777,ih=33778,ah=33779,sh=35840,oh=35841,lh=35842,ch=35843,uh=36196,hh=37492,dh=37496,fh=37808,ph=37809,mh=37810,gh=37811,vh=37812,yh=37813,_h=37814,bh=37815,xh=37816,Sh=37817,wh=37818,Mh=37819,Eh=37820,Th=37821,Ah=36492,Ch=36494,Rh=36495,Ph=36283,Lh=36284,Ih=36285,kh=36286,Nh=2200,Dh=2201,Uh=2202,Oh=2300,Fh=2301,zh=2302,Bh=2400,Hh=2401,Vh=2402,Gh=2500,jh=2501,Wh=0,Xh=1,qh=2,Yh=3200,Zh=3201,Kh=3202,Jh=3203,Qh=0,$h=1,ed="",td="srgb",nd="srgb-linear",rd="linear",id="srgb",ad=0,sd=7680,od=7681,ld=7682,cd=7683,ud=34055,hd=34056,dd=5386,fd=512,pd=513,md=514,gd=515,vd=516,yd=517,_d=518,bd=519,xd=512,Sd=513,wd=514,Md=515,Ed=516,Td=517,Ad=518,Cd=519,Rd=35044,Pd=35048,Ld=35040,Id=35045,kd=35049,Nd=35041,Dd=35046,Ud=35050,Od=35042,Fd="100",zd="300 es",Bd=2e3,Hd=2001,Vd={COMPUTE:"compute",RENDER:"render"},Gd={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},jd={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class Wd{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&(void 0!==n[e]&&-1!==n[e].indexOf(t))}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const r=n[e];if(void 0!==r){const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}const Xd=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let qd=1234567;const Yd=Math.PI/180,Zd=180/Math.PI;function Kd(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Xd[255&e]+Xd[e>>8&255]+Xd[e>>16&255]+Xd[e>>24&255]+"-"+Xd[255&t]+Xd[t>>8&255]+"-"+Xd[t>>16&15|64]+Xd[t>>24&255]+"-"+Xd[63&n|128]+Xd[n>>8&255]+"-"+Xd[n>>16&255]+Xd[n>>24&255]+Xd[255&r]+Xd[r>>8&255]+Xd[r>>16&255]+Xd[r>>24&255]).toLowerCase()}function Jd(e,t,n){return Math.max(t,Math.min(n,e))}function Qd(e,t){return(e%t+t)%t}function $d(e,t,n){return(1-n)*e+n*t}function ef(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function tf(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const nf={DEG2RAD:Yd,RAD2DEG:Zd,generateUUID:Kd,clamp:Jd,euclideanModulo:Qd,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:$d,damp:function(e,t,n,r){return $d(e,t,1-Math.exp(-n*r))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Qd(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(qd=e);let t=qd+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Yd},radToDeg:function(e){return e*Zd},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((t+r)/2),u=s((t+r)/2),h=a((t-r)/2),d=s((t-r)/2),f=a((r-t)/2),p=s((r-t)/2);switch(i){case"XYX":e.set(o*u,l*h,l*d,o*c);break;case"YZY":e.set(l*d,o*u,l*h,o*c);break;case"ZXZ":e.set(l*h,l*d,o*u,o*c);break;case"XZX":e.set(o*u,l*p,l*f,o*c);break;case"YXY":e.set(l*f,o*u,l*p,o*c);break;case"ZYZ":e.set(l*p,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:tf,denormalize:ef};class rf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;rf.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Jd(this.x,e.x,t.x),this.y=Jd(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Jd(this.x,e,t),this.y=Jd(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Jd(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Jd(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class af{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,s){let o=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(u!==p||o!==h||l!==d||c!==f){let e=1-s;const t=o*h+l*d+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,s=Math.sin(s*a)/i}const i=s*n;if(o=o*e+h*i,l=l*e+d*i,c=c*e+f*i,u=u*e+p*i,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,a){const s=n[r],o=n[r+1],l=n[r+2],c=n[r+3],u=i[a],h=i[a+1],d=i[a+2],f=i[a+3];return e[t]=s*f+c*u+o*d-l*h,e[t+1]=o*f+c*h+l*u-s*d,e[t+2]=l*f+c*d+s*h-o*u,e[t+3]=c*f-s*u-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,r=e._y,i=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),h=o(n/2),d=o(r/2),f=o(i/2);switch(a){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],h=n+s+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-o)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Jd(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+r*l-i*o,this._y=r*c+a*o+i*s-n*l,this._z=i*c+a*l+n*o-r*s,this._w=a*c-n*s-r*o-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,a=this._w;let s=a*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=a*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class sf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;sf.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(lf.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(lf.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*r-s*n),c=2*(s*t-i*r),u=2*(i*n-a*t);return this.x=t+o*l+a*u-s*c,this.y=n+o*c+s*l-i*u,this.z=r+o*u+i*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Jd(this.x,e.x,t.x),this.y=Jd(this.y,e.y,t.y),this.z=Jd(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Jd(this.x,e,t),this.y=Jd(this.y,e,t),this.z=Jd(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Jd(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return of.copy(this).projectOnVector(e),this.sub(of)}reflect(e){return this.sub(of.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Jd(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const of=new sf,lf=new af;class cf{constructor(e,t,n,r,i,a,s,o,l){cf.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,o,l)}set(e,t,n,r,i,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=i,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],_=r[7],b=r[2],x=r[5],S=r[8];return i[0]=a*p+s*v+o*b,i[3]=a*m+s*y+o*x,i[6]=a*g+s*_+o*S,i[1]=l*p+c*v+u*b,i[4]=l*m+c*y+u*x,i[7]=l*g+c*_+u*S,i[2]=h*p+d*v+f*b,i[5]=h*m+d*y+f*x,i[8]=h*g+d*_+f*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*i*c+n*s*o+r*i*l-r*a*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,h=s*o-c*i,d=l*i-a*o,f=t*u+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(s*n-r*a)*p,e[3]=h*p,e[4]=(c*t-r*o)*p,e[5]=(r*i-s*t)*p,e[6]=d*p,e[7]=(n*o-l*t)*p,e[8]=(a*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,s){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-r*l,r*o,-r*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(uf.makeScale(e,t)),this}rotate(e){return this.premultiply(uf.makeRotation(-e)),this}translate(e,t){return this.premultiply(uf.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const uf=new cf;function hf(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const df={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ff(e,t){return new df[e](t)}function pf(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function mf(){const e=pf("canvas");return e.style.display="block",e}const gf={};function vf(e){e in gf||(gf[e]=!0,console.warn(e))}const yf=(new cf).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),_f=(new cf).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function bf(){const e={enabled:!0,workingColorSpace:nd,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===id&&(e.r=Sf(e.r),e.g=Sf(e.g),e.b=Sf(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===id&&(e.r=wf(e.r),e.g=wf(e.g),e.b=wf(e.b)),e):e},workingToColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},colorSpaceToWorking:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===ed?rd:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(t,n){return vf("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(t,n)},toWorkingColorSpace:function(t,n){return vf("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(t,n)}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[nd]:{primaries:t,whitePoint:r,transfer:rd,toXYZ:yf,fromXYZ:_f,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:td},outputColorSpaceConfig:{drawingBufferColorSpace:td}},[td]:{primaries:t,whitePoint:r,transfer:id,toXYZ:yf,fromXYZ:_f,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:td}}}),e}const xf=bf();function Sf(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function wf(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Mf;class Ef{static getDataURL(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Mf&&(Mf=pf("canvas")),Mf.width=e.width,Mf.height=e.height;const n=Mf.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Mf}return t.toDataURL(n)}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=pf("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*Sf(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Sf(t[e]/255)):t[e]=Sf(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Tf=0;class Af{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Tf++}),this.uuid=Kd(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):null!==t?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Cf(r[t].image)):e.push(Cf(r[t]))}else e=Cf(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Cf(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Ef.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Rf=0;const Pf=new sf;class Lf extends Wd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lf.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lf.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bu,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bu,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Au,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pu,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:qu,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Iu,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Lf.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:ed;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Rf++}),this.uuid=Kd(),this.name="",this.source=new Af(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new rf(0,0),this.repeat=new rf(1,1),this.center=new rf(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cf,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Pf).x}get height(){return this.source.getSize(Pf).y}get depth(){return this.source.getSize(Pf).z}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Texture.setValues(): parameter '".concat(t,"' has value of undefined."));continue}const r=this[t];void 0!==r?r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n:console.warn("THREE.Texture.setValues(): property '".concat(t,"' does not exist."))}}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==fu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case _u:e.x=e.x-Math.floor(e.x);break;case bu:e.x=e.x<0?0:1;break;case xu:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case _u:e.y=e.y-Math.floor(e.y);break;case bu:e.y=e.y<0?0:1;break;case xu:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}Lf.DEFAULT_IMAGE=null,Lf.DEFAULT_MAPPING=fu,Lf.DEFAULT_ANISOTROPY=1;class If{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;If.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],u=o[8],h=o[1],d=o[5],f=o[9],p=o[2],m=o[6],g=o[10];if(Math.abs(c-h)<a&&Math.abs(u-p)<a&&Math.abs(f-m)<a){if(Math.abs(c+h)<s&&Math.abs(u+p)<s&&Math.abs(f+m)<s&&Math.abs(l+d+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(d+1)/2,v=(g+1)/2,y=(c+h)/4,_=(u+p)/4,b=(f+m)/4;return e>o&&e>v?e<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=_/n):o>v?o<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=y/r,i=b/r):v<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=_/i,r=b/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Jd(this.x,e.x,t.x),this.y=Jd(this.y,e.y,t.y),this.z=Jd(this.z,e.z,t.z),this.w=Jd(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Jd(this.x,e,t),this.y=Jd(this.y,e,t),this.z=Jd(this.z,e,t),this.w=Jd(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Jd(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class kf extends Wd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Au,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new If(0,0,e,t),this.scissorTest=!1,this.viewport=new If(0,0,e,t);const r={width:e,height:t,depth:n.depth},i=new Lf(r);this.textures=[];const a=n.count;for(let s=0;s<a;s++)this.textures[s]=i.clone(),this.textures[s].isRenderTargetTexture=!0,this.textures[s].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={minFilter:Au,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(t.mapping=e.mapping),void 0!==e.wrapS&&(t.wrapS=e.wrapS),void 0!==e.wrapT&&(t.wrapT=e.wrapT),void 0!==e.wrapR&&(t.wrapR=e.wrapR),void 0!==e.magFilter&&(t.magFilter=e.magFilter),void 0!==e.minFilter&&(t.minFilter=e.minFilter),void 0!==e.format&&(t.format=e.format),void 0!==e.type&&(t.type=e.type),void 0!==e.anisotropy&&(t.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(t.colorSpace=e.colorSpace),void 0!==e.flipY&&(t.flipY=e.flipY),void 0!==e.generateMipmaps&&(t.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++){this.textures[n].setValues(t)}}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const n=Object.assign({},e.textures[t].image);this.textures[t].source=new Af(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Nf extends kf{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class Df extends Lf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Su,this.minFilter=Su,this.wrapR=bu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Uf extends Nf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Df(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Of extends Lf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Su,this.minFilter=Su,this.wrapR=bu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ff extends Nf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Of(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class zf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sf(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Hf.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Hf.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Hf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,Hf):Hf.fromBufferAttribute(r,t),Hf.applyMatrix4(e.matrixWorld),this.expandByPoint(Hf);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Vf.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Vf.copy(n.boundingBox)),Vf.applyMatrix4(e.matrixWorld),this.union(Vf)}const r=e.children;for(let i=0,a=r.length;i<a;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Hf),Hf.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Zf),Kf.subVectors(this.max,Zf),Gf.subVectors(e.a,Zf),jf.subVectors(e.b,Zf),Wf.subVectors(e.c,Zf),Xf.subVectors(jf,Gf),qf.subVectors(Wf,jf),Yf.subVectors(Gf,Wf);let t=[0,-Xf.z,Xf.y,0,-qf.z,qf.y,0,-Yf.z,Yf.y,Xf.z,0,-Xf.x,qf.z,0,-qf.x,Yf.z,0,-Yf.x,-Xf.y,Xf.x,0,-qf.y,qf.x,0,-Yf.y,Yf.x,0];return!!$f(t,Gf,jf,Wf,Kf)&&(t=[1,0,0,0,1,0,0,0,1],!!$f(t,Gf,jf,Wf,Kf)&&(Jf.crossVectors(Xf,qf),t=[Jf.x,Jf.y,Jf.z],$f(t,Gf,jf,Wf,Kf)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hf).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Hf).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Bf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bf)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Bf=[new sf,new sf,new sf,new sf,new sf,new sf,new sf,new sf],Hf=new sf,Vf=new zf,Gf=new sf,jf=new sf,Wf=new sf,Xf=new sf,qf=new sf,Yf=new sf,Zf=new sf,Kf=new sf,Jf=new sf,Qf=new sf;function $f(e,t,n,r,i){for(let a=0,s=e.length-3;a<=s;a+=3){Qf.fromArray(e,a);const s=i.x*Math.abs(Qf.x)+i.y*Math.abs(Qf.y)+i.z*Math.abs(Qf.z),o=t.dot(Qf),l=n.dot(Qf),c=r.dot(Qf);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const ep=new zf,tp=new sf,np=new sf;class rp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):ep.setFromPoints(e).getCenter(n);let r=0;for(let i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;tp.subVectors(e,this.center);const t=tp.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(tp,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(np.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(tp.copy(e.center).add(np)),this.expandByPoint(tp.copy(e.center).sub(np))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const ip=new sf,ap=new sf,sp=new sf,op=new sf,lp=new sf,cp=new sf,up=new sf;class hp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ip)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ip.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ip.copy(this.origin).addScaledVector(this.direction,t),ip.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){ap.copy(e).add(t).multiplyScalar(.5),sp.copy(t).sub(e).normalize(),op.copy(this.origin).sub(ap);const i=.5*e.distanceTo(t),a=-this.direction.dot(sp),s=op.dot(this.direction),o=-op.dot(sp),l=op.lengthSq(),c=Math.abs(1-a*a);let u,h,d,f;if(c>0)if(u=a*o-s,h=a*s-o,f=i*c,u>=0)if(h>=-f)if(h<=f){const e=1/c;u*=e,h*=e,d=u*(u+a*h+2*s)+h*(a*u+h+2*o)+l}else h=i,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;else h=-i,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;else h<=-f?(u=Math.max(0,-(-a*i+s)),h=u>0?-i:Math.min(Math.max(-i,-o),i),d=-u*u+h*(h+2*o)+l):h<=f?(u=0,h=Math.min(Math.max(-i,-o),i),d=h*(h+2*o)+l):(u=Math.max(0,-(a*i+s)),h=u>0?i:Math.min(Math.max(-i,-o),i),d=-u*u+h*(h+2*o)+l);else h=a>0?-i:i,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(ap).addScaledVector(sp,h),d}intersectSphere(e,t){ip.subVectors(e.center,this.origin);const n=ip.dot(this.direction),r=ip.dot(ip)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),u>=0?(s=(e.min.z-h.z)*u,o=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,o=(e.min.z-h.z)*u),n>o||s>r?null:((s>n||n!==n)&&(n=s),(o<r||r!==r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,ip)}intersectTriangle(e,t,n,r,i){lp.subVectors(t,e),cp.subVectors(n,e),up.crossVectors(lp,cp);let a,s=this.direction.dot(up);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}op.subVectors(this.origin,e);const o=a*this.direction.dot(cp.crossVectors(op,cp));if(o<0)return null;const l=a*this.direction.dot(lp.cross(op));if(l<0)return null;if(o+l>s)return null;const c=-a*op.dot(up);return c<0?null:this.at(c/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class dp{constructor(e,t,n,r,i,a,s,o,l,c,u,h,d,f,p,m){dp.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,o,l,c,u,h,d,f,p,m)}set(e,t,n,r,i,a,s,o,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new dp).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/fp.setFromMatrixColumn(e,0).length(),i=1/fp.setFromMatrixColumn(e,1).length(),a=1/fp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=a*c,n=a*u,r=s*c,i=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*o,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,n=o*u,r=l*c,i=l*u;t[0]=e+i*s,t[4]=r*s-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,n=o*u,r=l*c,i=l*u;t[0]=e-i*s,t[4]=-a*u,t[8]=r+n*s,t[1]=n+r*s,t[5]=a*c,t[9]=i-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,n=a*u,r=s*c,i=s*u;t[0]=o*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=o*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=a*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=s*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mp,e,gp)}lookAt(e,t,n){const r=this.elements;return _p.subVectors(e,t),0===_p.lengthSq()&&(_p.z=1),_p.normalize(),vp.crossVectors(n,_p),0===vp.lengthSq()&&(1===Math.abs(n.z)?_p.x+=1e-4:_p.z+=1e-4,_p.normalize(),vp.crossVectors(n,_p)),vp.normalize(),yp.crossVectors(_p,vp),r[0]=vp.x,r[4]=yp.x,r[8]=_p.x,r[1]=vp.y,r[5]=yp.y,r[9]=_p.y,r[2]=vp.z,r[6]=yp.z,r[10]=_p.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],b=n[15],x=r[0],S=r[4],w=r[8],M=r[12],E=r[1],T=r[5],A=r[9],C=r[13],R=r[2],P=r[6],L=r[10],I=r[14],k=r[3],N=r[7],D=r[11],U=r[15];return i[0]=a*x+s*E+o*R+l*k,i[4]=a*S+s*T+o*P+l*N,i[8]=a*w+s*A+o*L+l*D,i[12]=a*M+s*C+o*I+l*U,i[1]=c*x+u*E+h*R+d*k,i[5]=c*S+u*T+h*P+d*N,i[9]=c*w+u*A+h*L+d*D,i[13]=c*M+u*C+h*I+d*U,i[2]=f*x+p*E+m*R+g*k,i[6]=f*S+p*T+m*P+g*N,i[10]=f*w+p*A+m*L+g*D,i[14]=f*M+p*C+m*I+g*U,i[3]=v*x+y*E+_*R+b*k,i[7]=v*S+y*T+_*P+b*N,i[11]=v*w+y*A+_*L+b*D,i[15]=v*M+y*C+_*I+b*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*o*u-r*l*u-i*s*h+n*l*h+r*s*d-n*o*d)+e[7]*(+t*o*d-t*l*h+i*a*h-r*a*d+r*l*c-i*o*c)+e[11]*(+t*l*u-t*s*d-i*a*u+n*a*d+i*s*c-n*l*c)+e[15]*(-r*s*c-t*o*u+t*s*h+r*a*u-n*a*h+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*h*l+p*o*d-s*m*d-u*o*g+s*h*g,y=f*h*l-c*m*l-f*o*d+a*m*d+c*o*g-a*h*g,_=c*p*l-f*u*l+f*s*d-a*p*d-c*s*g+a*u*g,b=f*u*o-c*p*o-f*s*h+a*p*h+c*s*m-a*u*m,x=t*v+n*y+r*_+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return e[0]=v*S,e[1]=(p*h*i-u*m*i-p*r*d+n*m*d+u*r*g-n*h*g)*S,e[2]=(s*m*i-p*o*i+p*r*l-n*m*l-s*r*g+n*o*g)*S,e[3]=(u*o*i-s*h*i-u*r*l+n*h*l+s*r*d-n*o*d)*S,e[4]=y*S,e[5]=(c*m*i-f*h*i+f*r*d-t*m*d-c*r*g+t*h*g)*S,e[6]=(f*o*i-a*m*i-f*r*l+t*m*l+a*r*g-t*o*g)*S,e[7]=(a*h*i-c*o*i+c*r*l-t*h*l-a*r*d+t*o*d)*S,e[8]=_*S,e[9]=(f*u*i-c*p*i-f*n*d+t*p*d+c*n*g-t*u*g)*S,e[10]=(a*p*i-f*s*i+f*n*l-t*p*l-a*n*g+t*s*g)*S,e[11]=(c*s*i-a*u*i-c*n*l+t*u*l+a*n*d-t*s*d)*S,e[12]=b*S,e[13]=(c*p*r-f*u*r+f*n*h-t*p*h-c*n*m+t*u*m)*S,e[14]=(f*s*r-a*p*r-f*n*o+t*p*o+a*n*m-t*s*m)*S,e[15]=(a*u*r-c*s*r+c*n*o-t*u*o-a*n*h+t*s*h)*S,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,s=e.y,o=e.z,l=i*a,c=i*s;return this.set(l*a+n,l*s-r*o,l*o+r*s,0,l*s+r*o,c*s+n,c*o-r*a,0,l*o-r*s,c*o+r*a,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,a=t._y,s=t._z,o=t._w,l=i+i,c=a+a,u=s+s,h=i*l,d=i*c,f=i*u,p=a*c,m=a*u,g=s*u,v=o*l,y=o*c,_=o*u,b=n.x,x=n.y,S=n.z;return r[0]=(1-(p+g))*b,r[1]=(d+_)*b,r[2]=(f-y)*b,r[3]=0,r[4]=(d-_)*x,r[5]=(1-(h+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(f+y)*S,r[9]=(m-v)*S,r[10]=(1-(h+p))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=fp.set(r[0],r[1],r[2]).length();const a=fp.set(r[4],r[5],r[6]).length(),s=fp.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],pp.copy(this);const o=1/i,l=1/a,c=1/s;return pp.elements[0]*=o,pp.elements[1]*=o,pp.elements[2]*=o,pp.elements[4]*=l,pp.elements[5]*=l,pp.elements[6]*=l,pp.elements[8]*=c,pp.elements[9]*=c,pp.elements[10]*=c,t.setFromRotationMatrix(pp),n.x=i,n.y=a,n.z=s,this}makePerspective(e,t,n,r,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bd,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=this.elements,c=2*i/(t-e),u=2*i/(n-r),h=(t+e)/(t-e),d=(n+r)/(n-r);let f,p;if(o)f=i/(a-i),p=a*i/(a-i);else if(s===Bd)f=-(a+i)/(a-i),p=-2*a*i/(a-i);else{if(s!==Hd)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);f=-a/(a-i),p=-a*i/(a-i)}return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bd,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=this.elements,c=2/(t-e),u=2/(n-r),h=-(t+e)/(t-e),d=-(n+r)/(n-r);let f,p;if(o)f=1/(a-i),p=a/(a-i);else if(s===Bd)f=-2/(a-i),p=-(a+i)/(a-i);else{if(s!==Hd)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);f=-1/(a-i),p=-i/(a-i)}return l[0]=c,l[4]=0,l[8]=0,l[12]=h,l[1]=0,l[5]=u,l[9]=0,l[13]=d,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const fp=new sf,pp=new dp,mp=new sf(0,0,0),gp=new sf(1,1,1),vp=new sf,yp=new sf,_p=new sf,bp=new dp,xp=new af;class Sp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sp.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.elements,i=r[0],a=r[4],s=r[8],o=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Jd(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Jd(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Jd(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-Jd(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Jd(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Jd(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return bp.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bp,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return xp.setFromEuler(this),this.setFromQuaternion(xp,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Sp.DEFAULT_ORDER="XYZ";class wp{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let Mp=0;const Ep=new sf,Tp=new af,Ap=new dp,Cp=new sf,Rp=new sf,Pp=new sf,Lp=new af,Ip=new sf(1,0,0),kp=new sf(0,1,0),Np=new sf(0,0,1),Dp={type:"added"},Up={type:"removed"},Op={type:"childadded",child:null},Fp={type:"childremoved",child:null};class zp extends Wd{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Mp++}),this.uuid=Kd(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zp.DEFAULT_UP.clone();const e=new sf,t=new Sp,n=new af,r=new sf(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new dp},normalMatrix:{value:new cf}}),this.matrix=new dp,this.matrixWorld=new dp,this.matrixAutoUpdate=zp.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=zp.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new wp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Tp.setFromAxisAngle(e,t),this.quaternion.multiply(Tp),this}rotateOnWorldAxis(e,t){return Tp.setFromAxisAngle(e,t),this.quaternion.premultiply(Tp),this}rotateX(e){return this.rotateOnAxis(Ip,e)}rotateY(e){return this.rotateOnAxis(kp,e)}rotateZ(e){return this.rotateOnAxis(Np,e)}translateOnAxis(e,t){return Ep.copy(e).applyQuaternion(this.quaternion),this.position.add(Ep.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ip,e)}translateY(e){return this.translateOnAxis(kp,e)}translateZ(e){return this.translateOnAxis(Np,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ap.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Cp.copy(e):Cp.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Rp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ap.lookAt(Rp,Cp,this.up):Ap.lookAt(Cp,Rp,this.up),this.quaternion.setFromRotationMatrix(Ap),r&&(Ap.extractRotation(r.matrixWorld),Tp.setFromRotationMatrix(Ap),this.quaternion.premultiply(Tp.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Dp),Op.child=e,this.dispatchEvent(Op),Op.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Up),Fp.child=e,this.dispatchEvent(Fp),Fp.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ap.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ap.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ap),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Dp),Op.child=e,this.dispatchEvent(Op),Op.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rp,e,Pp),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rp,Lp,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(e=>u(u({},e),{},{boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(e=>u({},e)),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(r.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=a(e.geometries),r=a(e.materials),i=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function a(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}zp.DEFAULT_UP=new sf(0,1,0),zp.DEFAULT_MATRIX_AUTO_UPDATE=!0,zp.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Bp=new sf,Hp=new sf,Vp=new sf,Gp=new sf,jp=new sf,Wp=new sf,Xp=new sf,qp=new sf,Yp=new sf,Zp=new sf,Kp=new If,Jp=new If,Qp=new If;class $p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sf;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Bp.subVectors(e,t),r.cross(Bp);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Bp.subVectors(r,t),Hp.subVectors(n,t),Vp.subVectors(e,t);const a=Bp.dot(Bp),s=Bp.dot(Hp),o=Bp.dot(Vp),l=Hp.dot(Hp),c=Hp.dot(Vp),u=a*l-s*s;if(0===u)return i.set(0,0,0),null;const h=1/u,d=(l*o-s*c)*h,f=(a*c-s*o)*h;return i.set(1-d-f,f,d)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,Gp)&&(Gp.x>=0&&Gp.y>=0&&Gp.x+Gp.y<=1)}static getInterpolation(e,t,n,r,i,a,s,o){return null===this.getBarycoord(e,t,n,r,Gp)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(i,Gp.x),o.addScaledVector(a,Gp.y),o.addScaledVector(s,Gp.z),o)}static getInterpolatedAttribute(e,t,n,r,i,a){return Kp.setScalar(0),Jp.setScalar(0),Qp.setScalar(0),Kp.fromBufferAttribute(e,t),Jp.fromBufferAttribute(e,n),Qp.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(Kp,i.x),a.addScaledVector(Jp,i.y),a.addScaledVector(Qp,i.z),a}static isFrontFacing(e,t,n,r){return Bp.subVectors(n,t),Hp.subVectors(e,t),Bp.cross(Hp).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Bp.subVectors(this.c,this.b),Hp.subVectors(this.a,this.b),.5*Bp.cross(Hp).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return $p.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return $p.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return $p.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return $p.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return $p.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let a,s;jp.subVectors(r,n),Wp.subVectors(i,n),qp.subVectors(e,n);const o=jp.dot(qp),l=Wp.dot(qp);if(o<=0&&l<=0)return t.copy(n);Yp.subVectors(e,r);const c=jp.dot(Yp),u=Wp.dot(Yp);if(c>=0&&u<=c)return t.copy(r);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(jp,a);Zp.subVectors(e,i);const d=jp.dot(Zp),f=Wp.dot(Zp);if(f>=0&&d<=f)return t.copy(i);const p=d*l-o*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(n).addScaledVector(Wp,s);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return Xp.subVectors(i,r),s=(u-c)/(u-c+(d-f)),t.copy(r).addScaledVector(Xp,s);const g=1/(m+p+h);return a=p*g,s=h*g,t.copy(n).addScaledVector(jp,a).addScaledVector(Wp,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const em={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tm={h:0,s:0,l:0},nm={h:0,s:0,l:0};function rm(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class im{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:td;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,xf.colorSpaceToWorking(this,t),this}setRGB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xf.workingColorSpace;return this.r=e,this.g=t,this.b=n,xf.colorSpaceToWorking(this,r),this}setHSL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xf.workingColorSpace;if(e=Qd(e,1),t=Jd(t,0,1),n=Jd(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=rm(i,r,e+1/3),this.g=rm(i,r,e),this.b=rm(i,r,e-1/3)}return xf.colorSpaceToWorking(this,r),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:td;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const a=t[1],s=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=t[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(6===i)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:td;const n=em[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Sf(e.r),this.g=Sf(e.g),this.b=Sf(e.b),this}copyLinearToSRGB(e){return this.r=wf(e.r),this.g=wf(e.g),this.b=wf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:td;return xf.workingToColorSpace(am.copy(this),e),65536*Math.round(Jd(255*am.r,0,255))+256*Math.round(Jd(255*am.g,0,255))+Math.round(Jd(255*am.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:td;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xf.workingColorSpace;xf.workingToColorSpace(am.copy(this),t);const n=am.r,r=am.g,i=am.b,a=Math.max(n,r,i),s=Math.min(n,r,i);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const e=a-s;switch(l=c<=.5?e/(a+s):e/(2-a-s),a){case n:o=(r-i)/e+(r<i?6:0);break;case r:o=(i-n)/e+2;break;case i:o=(n-r)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xf.workingColorSpace;return xf.workingToColorSpace(am.copy(this),t),e.r=am.r,e.g=am.g,e.b=am.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:td;xf.workingToColorSpace(am.copy(this),e);const t=am.r,n=am.g,r=am.b;return e!==td?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}offsetHSL(e,t,n){return this.getHSL(tm),this.setHSL(tm.h+e,tm.s+t,tm.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(tm),e.getHSL(nm);const n=$d(tm.h,nm.h,t),r=$d(tm.s,nm.s,t),i=$d(tm.l,nm.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const am=new im;im.NAMES=em;let sm=0;class om extends Wd{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:sm++}),this.uuid=Kd(),this.name="",this.type="Material",this.blending=xc,this.side=vc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Dc,this.blendDst=Uc,this.blendEquation=Tc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new im(0,0,0),this.blendAlpha=0,this.depthFunc=Zc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bd,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=sd,this.stencilZFail=sd,this.stencilZPass=sd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==xc&&(n.blending=this.blending),this.side!==vc&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==Dc&&(n.blendSrc=this.blendSrc),this.blendDst!==Uc&&(n.blendDst=this.blendDst),this.blendEquation!==Tc&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Zc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bd&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==sd&&(n.stencilFail=this.stencilFail),this.stencilZFail!==sd&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==sd&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class lm extends om{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new im(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sp,this.combine=eu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const cm=um();function um(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(r[l]=0,r[256|l]=32768,i[l]=24,i[256|l]=24):e<-14?(r[l]=1024>>-e-14,r[256|l]=1024>>-e-14|32768,i[l]=-e-1,i[256|l]=-e-1):e<=15?(r[l]=e+15<<10,r[256|l]=e+15<<10|32768,i[l]=13,i[256|l]=13):e<128?(r[l]=31744,r[256|l]=64512,i[l]=24,i[256|l]=24):(r[l]=31744,r[256|l]=64512,i[l]=13,i[256|l]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,a[l]=e|t}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function hm(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Jd(e,-65504,65504),cm.floatView[0]=e;const t=cm.uint32View[0],n=t>>23&511;return cm.baseTable[n]+((8388607&t)>>cm.shiftTable[n])}function dm(e){const t=e>>10;return cm.uint32View[0]=cm.mantissaTable[cm.offsetTable[t]+(1023&e)]+cm.exponentTable[t],cm.floatView[0]}class fm{static toHalfFloat(e){return hm(e)}static fromHalfFloat(e){return dm(e)}}const pm=new sf,mm=new rf;let gm=0;class vm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:gm++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Rd,this.updateRanges=[],this.gpuType=Fu,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)mm.fromBufferAttribute(this,t),mm.applyMatrix3(e),this.setXY(t,mm.x,mm.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)pm.fromBufferAttribute(this,t),pm.applyMatrix3(e),this.setXYZ(t,pm.x,pm.y,pm.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)pm.fromBufferAttribute(this,t),pm.applyMatrix4(e),this.setXYZ(t,pm.x,pm.y,pm.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)pm.fromBufferAttribute(this,t),pm.applyNormalMatrix(e),this.setXYZ(t,pm.x,pm.y,pm.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)pm.fromBufferAttribute(this,t),pm.transformDirection(e),this.setXYZ(t,pm.x,pm.y,pm.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ef(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=tf(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ef(t,this.array)),t}setX(e,t){return this.normalized&&(t=tf(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ef(t,this.array)),t}setY(e,t){return this.normalized&&(t=tf(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ef(t,this.array)),t}setZ(e,t){return this.normalized&&(t=tf(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ef(t,this.array)),t}setW(e,t){return this.normalized&&(t=tf(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=tf(t,this.array),n=tf(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=tf(t,this.array),n=tf(n,this.array),r=tf(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=tf(t,this.array),n=tf(n,this.array),r=tf(r,this.array),i=tf(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Rd&&(e.usage=this.usage),e}}class ym extends vm{constructor(e,t,n){super(new Int8Array(e),t,n)}}class _m extends vm{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class bm extends vm{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class xm extends vm{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Sm extends vm{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class wm extends vm{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Mm extends vm{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Em extends vm{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=dm(this.array[e*this.itemSize]);return this.normalized&&(t=ef(t,this.array)),t}setX(e,t){return this.normalized&&(t=tf(t,this.array)),this.array[e*this.itemSize]=hm(t),this}getY(e){let t=dm(this.array[e*this.itemSize+1]);return this.normalized&&(t=ef(t,this.array)),t}setY(e,t){return this.normalized&&(t=tf(t,this.array)),this.array[e*this.itemSize+1]=hm(t),this}getZ(e){let t=dm(this.array[e*this.itemSize+2]);return this.normalized&&(t=ef(t,this.array)),t}setZ(e,t){return this.normalized&&(t=tf(t,this.array)),this.array[e*this.itemSize+2]=hm(t),this}getW(e){let t=dm(this.array[e*this.itemSize+3]);return this.normalized&&(t=ef(t,this.array)),t}setW(e,t){return this.normalized&&(t=tf(t,this.array)),this.array[e*this.itemSize+3]=hm(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=tf(t,this.array),n=tf(n,this.array)),this.array[e+0]=hm(t),this.array[e+1]=hm(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=tf(t,this.array),n=tf(n,this.array),r=tf(r,this.array)),this.array[e+0]=hm(t),this.array[e+1]=hm(n),this.array[e+2]=hm(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=tf(t,this.array),n=tf(n,this.array),r=tf(r,this.array),i=tf(i,this.array)),this.array[e+0]=hm(t),this.array[e+1]=hm(n),this.array[e+2]=hm(r),this.array[e+3]=hm(i),this}}class Tm extends vm{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Am=0;const Cm=new dp,Rm=new zp,Pm=new sf,Lm=new zf,Im=new zf,km=new sf;class Nm extends Wd{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Am++}),this.uuid=Kd(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(hf(e)?Mm:Sm)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new cf).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Cm.makeRotationFromQuaternion(e),this.applyMatrix4(Cm),this}rotateX(e){return Cm.makeRotationX(e),this.applyMatrix4(Cm),this}rotateY(e){return Cm.makeRotationY(e),this.applyMatrix4(Cm),this}rotateZ(e){return Cm.makeRotationZ(e),this.applyMatrix4(Cm),this}translate(e,t,n){return Cm.makeTranslation(e,t,n),this.applyMatrix4(Cm),this}scale(e,t,n){return Cm.makeScale(e,t,n),this.applyMatrix4(Cm),this}lookAt(e){return Rm.lookAt(e),Rm.updateMatrix(),this.applyMatrix4(Rm.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pm).negate(),this.translate(Pm.x,Pm.y,Pm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new Tm(t,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new zf);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new sf(-1/0,-1/0,-1/0),new sf(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];Lm.setFromBufferAttribute(e),this.morphTargetsRelative?(km.addVectors(this.boundingBox.min,Lm.min),this.boundingBox.expandByPoint(km),km.addVectors(this.boundingBox.max,Lm.max),this.boundingBox.expandByPoint(km)):(this.boundingBox.expandByPoint(Lm.min),this.boundingBox.expandByPoint(Lm.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new sf,1/0);if(e){const n=this.boundingSphere.center;if(Lm.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];Im.setFromBufferAttribute(n),this.morphTargetsRelative?(km.addVectors(Lm.min,Im.min),Lm.expandByPoint(km),km.addVectors(Lm.max,Im.max),Lm.expandByPoint(km)):(Lm.expandByPoint(Im.min),Lm.expandByPoint(Im.max))}Lm.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)km.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(km));if(t)for(let i=0,a=t.length;i<a;i++){const a=t[i],s=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)km.fromBufferAttribute(a,t),s&&(Pm.fromBufferAttribute(e,t),km.add(Pm)),r=Math.max(r,n.distanceToSquared(km))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new vm(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),s=[],o=[];for(let w=0;w<n.count;w++)s[w]=new sf,o[w]=new sf;const l=new sf,c=new sf,u=new sf,h=new rf,d=new rf,f=new rf,p=new sf,m=new sf;function g(e,t,r){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,r),h.fromBufferAttribute(i,e),d.fromBufferAttribute(i,t),f.fromBufferAttribute(i,r),c.sub(l),u.sub(l),d.sub(h),f.sub(h);const a=1/(d.x*f.y-f.x*d.y);isFinite(a)&&(p.copy(c).multiplyScalar(f.y).addScaledVector(u,-d.y).multiplyScalar(a),m.copy(u).multiplyScalar(d.x).addScaledVector(c,-f.x).multiplyScalar(a),s[e].add(p),s[t].add(p),s[r].add(p),o[e].add(m),o[t].add(m),o[r].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let w=0,M=v.length;w<M;++w){const t=v[w],n=t.start;for(let r=n,i=n+t.count;r<i;r+=3)g(e.getX(r+0),e.getX(r+1),e.getX(r+2))}const y=new sf,_=new sf,b=new sf,x=new sf;function S(e){b.fromBufferAttribute(r,e),x.copy(b);const t=s[e];y.copy(t),y.sub(b.multiplyScalar(b.dot(t))).normalize(),_.crossVectors(x,t);const n=_.dot(o[e])<0?-1:1;a.setXYZW(e,y.x,y.y,y.z,n)}for(let w=0,M=v.length;w<M;++w){const t=v[w],n=t.start;for(let r=n,i=n+t.count;r<i;r+=3)S(e.getX(r+0)),S(e.getX(r+1)),S(e.getX(r+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new vm(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new sf,i=new sf,a=new sf,s=new sf,o=new sf,l=new sf,c=new sf,u=new sf;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,d),o.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),s.add(c),o.add(c),l.add(c),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)km.fromBufferAttribute(e,t),km.normalize(),e.setXYZ(t,km.x,km.y,km.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r);let s=0,o=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)a[o++]=n[s++]}return new vm(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Nm,n=this.index.array,r=this.attributes;for(const s in r){const i=e(r[s],n);t.setAttribute(s,i)}const i=this.morphAttributes;for(const s in i){const r=[],a=i[s];for(let t=0,i=a.length;t<i;t++){const i=e(a[t],n);r.push(i)}t.morphAttributes[s]=r}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,o=a.length;s<o;s++){const e=a[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const r={};let i=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[o]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere=s.toJSON()),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,c=a.length;l<c;l++){const e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Dm=new dp,Um=new hp,Om=new rp,Fm=new sf,zm=new sf,Bm=new sf,Hm=new sf,Vm=new sf,Gm=new sf,jm=new sf,Wm=new sf;class Xm extends zp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lm;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const s=this.morphTargetInfluences;if(i&&s){Gm.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],o=i[n];0!==r&&(Vm.fromBufferAttribute(o,e),a?Gm.addScaledVector(Vm,r):Gm.addScaledVector(Vm.sub(t),r))}t.add(Gm)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Om.copy(n.boundingSphere),Om.applyMatrix4(i),Um.copy(e.ray).recast(e.near),!1===Om.containsPoint(Um.origin)){if(null===Um.intersectSphere(Om,Fm))return;if(Um.origin.distanceToSquared(Fm)>(e.far-e.near)**2)return}Dm.copy(i).invert(),Um.copy(e.ray).applyMatrix4(Dm),null!==n.boundingBox&&!1===Um.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Um)}}_computeIntersections(e,t,n){let r;const i=this.geometry,a=this.material,s=i.index,o=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==s)if(Array.isArray(a))for(let f=0,p=h.length;f<p;f++){const i=h[f],o=a[i.materialIndex];for(let a=Math.max(i.start,d.start),h=Math.min(s.count,Math.min(i.start+i.count,d.start+d.count));a<h;a+=3){r=qm(this,o,e,n,l,c,u,s.getX(a),s.getX(a+1),s.getX(a+2)),r&&(r.faceIndex=Math.floor(a/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,d.start),o=Math.min(s.count,d.start+d.count);i<o;i+=3){r=qm(this,a,e,n,l,c,u,s.getX(i),s.getX(i+1),s.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}else if(void 0!==o)if(Array.isArray(a))for(let f=0,p=h.length;f<p;f++){const i=h[f],s=a[i.materialIndex];for(let a=Math.max(i.start,d.start),h=Math.min(o.count,Math.min(i.start+i.count,d.start+d.count));a<h;a+=3){r=qm(this,s,e,n,l,c,u,a,a+1,a+2),r&&(r.faceIndex=Math.floor(a/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,d.start),s=Math.min(o.count,d.start+d.count);i<s;i+=3){r=qm(this,a,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}}}function qm(e,t,n,r,i,a,s,o,l,c){e.getVertexPosition(o,zm),e.getVertexPosition(l,Bm),e.getVertexPosition(c,Hm);const u=function(e,t,n,r,i,a,s,o){let l;if(l=t.side===yc?r.intersectTriangle(s,a,i,!0,o):r.intersectTriangle(i,a,s,t.side===vc,o),null===l)return null;Wm.copy(o),Wm.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Wm);return c<n.near||c>n.far?null:{distance:c,point:Wm.clone(),object:e}}(e,t,n,r,zm,Bm,Hm,jm);if(u){const e=new sf;$p.getBarycoord(jm,zm,Bm,Hm,e),i&&(u.uv=$p.getInterpolatedAttribute(i,o,l,c,e,new rf)),a&&(u.uv1=$p.getInterpolatedAttribute(a,o,l,c,e,new rf)),s&&(u.normal=$p.getInterpolatedAttribute(s,o,l,c,e,new sf),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const t={a:o,b:l,c:c,normal:new sf,materialIndex:0};$p.getNormal(zm,Bm,Hm,t.normal),u.face=t,u.barycoord=e}return u}class Ym extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const s=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const o=[],l=[],c=[],u=[];let h=0,d=0;function f(e,t,n,r,i,a,f,p,m,g,v){const y=a/m,_=f/g,b=a/2,x=f/2,S=p/2,w=m+1,M=g+1;let E=0,T=0;const A=new sf;for(let s=0;s<M;s++){const a=s*_-x;for(let o=0;o<w;o++){const h=o*y-b;A[e]=h*r,A[t]=a*i,A[n]=S,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=p>0?1:-1,c.push(A.x,A.y,A.z),u.push(o/m),u.push(1-s/g),E+=1}}for(let s=0;s<g;s++)for(let e=0;e<m;e++){const t=h+e+w*s,n=h+e+w*(s+1),r=h+(e+1)+w*(s+1),i=h+(e+1)+w*s;o.push(t,n,i),o.push(n,r,i),T+=6}s.addGroup(d,T,v),d+=T,h+=E}f("z","y","x",-1,-1,n,t,e,a,i,0),f("z","y","x",1,-1,n,t,-e,a,i,1),f("x","z","y",1,1,e,n,t,r,a,2),f("x","z","y",1,-1,e,n,-t,r,a,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new Tm(l,3)),this.setAttribute("normal",new Tm(c,3)),this.setAttribute("uv",new Tm(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ym(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Zm(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Km(e){const t={};for(let n=0;n<e.length;n++){const r=Zm(e[n]);for(const e in r)t[e]=r[e]}return t}function Jm(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:xf.workingColorSpace}const Qm={clone:Zm,merge:Km};class $m extends om{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zm(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class eg extends zp{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dp,this.projectionMatrix=new dp,this.projectionMatrixInverse=new dp,this.coordinateSystem=Bd,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const tg=new sf,ng=new rf,rg=new rf;class ig extends eg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Zd*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Yd*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Zd*Math.atan(Math.tan(.5*Yd*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){tg.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(tg.x,tg.y).multiplyScalar(-e/tg.z),tg.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(tg.x,tg.y).multiplyScalar(-e/tg.z)}getViewSize(e,t){return this.getViewBounds(e,ng,rg),t.subVectors(rg,ng)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Yd*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/s,r*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ag=-90;class sg extends zp{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ig(ag,1,e,t);r.layers=this.layers,this.add(r);const i=new ig(ag,1,e,t);i.layers=this.layers,this.add(i);const a=new ig(ag,1,e,t);a.layers=this.layers,this.add(a);const s=new ig(ag,1,e,t);s.layers=this.layers,this.add(s);const o=new ig(ag,1,e,t);o.layers=this.layers,this.add(o);const l=new ig(ag,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,s,o]=t;for(const l of t)this.remove(l);if(e===Bd)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==Hd)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,a,s,o,l,c]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,o),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=p,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(u,h,d),e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class og extends Lf{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:pu,arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0,arguments.length>9?arguments[9]:void 0),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lg extends Nf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new og(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Ym(5,5,5),s=new $m({name:"CubemapFromEquirect",uniforms:Zm(n),vertexShader:r,fragmentShader:i,side:yc,blending:bc});s.uniforms.tEquirect.value=t;const o=new Xm(a,s),l=t.minFilter;t.minFilter===Pu&&(t.minFilter=Au);return new sg(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}class cg extends zp{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ug={type:"move"};class hg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new cg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new cg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new sf,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new sf),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new cg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new sf,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new sf),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const a of e.hand.values()){const e=t.getJointPose(a,n),r=this._getHandJoint(l,a);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(ug)))}return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new cg;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class dg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new im(e),this.density=t}clone(){return new dg(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class fg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new im(e),this.near=t,this.far=n}clone(){return new fg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class pg extends zp{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Sp,this.environmentIntensity=1,this.environmentRotation=new Sp,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class mg{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Rd,this.updateRanges=[],this.version=0,this.uuid=Kd()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Kd()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Kd()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const gg=new sf;class vg{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)gg.fromBufferAttribute(this,t),gg.applyMatrix4(e),this.setXYZ(t,gg.x,gg.y,gg.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)gg.fromBufferAttribute(this,t),gg.applyNormalMatrix(e),this.setXYZ(t,gg.x,gg.y,gg.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)gg.fromBufferAttribute(this,t),gg.transformDirection(e),this.setXYZ(t,gg.x,gg.y,gg.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ef(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=tf(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=tf(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=tf(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=tf(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=tf(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ef(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ef(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ef(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ef(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=tf(t,this.array),n=tf(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=tf(t,this.array),n=tf(n,this.array),r=tf(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=tf(t,this.array),n=tf(n,this.array),r=tf(r,this.array),i=tf(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new vm(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class yg extends om{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new im(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _g;const bg=new sf,xg=new sf,Sg=new sf,wg=new rf,Mg=new rf,Eg=new dp,Tg=new sf,Ag=new sf,Cg=new sf,Rg=new rf,Pg=new rf,Lg=new rf;class Ig extends zp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yg;if(super(),this.isSprite=!0,this.type="Sprite",void 0===_g){_g=new Nm;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new mg(e,5);_g.setIndex([0,1,2,0,2,3]),_g.setAttribute("position",new vg(t,3,0,!1)),_g.setAttribute("uv",new vg(t,2,3,!1))}this.geometry=_g,this.material=e,this.center=new rf(.5,.5),this.count=1}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xg.setFromMatrixScale(this.matrixWorld),Eg.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Sg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&xg.multiplyScalar(-Sg.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const a=this.center;kg(Tg.set(-.5,-.5,0),Sg,a,xg,r,i),kg(Ag.set(.5,-.5,0),Sg,a,xg,r,i),kg(Cg.set(.5,.5,0),Sg,a,xg,r,i),Rg.set(0,0),Pg.set(1,0),Lg.set(1,1);let s=e.ray.intersectTriangle(Tg,Ag,Cg,!1,bg);if(null===s&&(kg(Ag.set(-.5,.5,0),Sg,a,xg,r,i),Pg.set(0,1),s=e.ray.intersectTriangle(Tg,Cg,Ag,!1,bg),null===s))return;const o=e.ray.origin.distanceTo(bg);o<e.near||o>e.far||t.push({distance:o,point:bg.clone(),uv:$p.getInterpolation(bg,Tg,Ag,Cg,Rg,Pg,Lg,new rf),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function kg(e,t,n,r,i,a){wg.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Mg.x=a*wg.x-i*wg.y,Mg.y=i*wg.x+a*wg.y):Mg.copy(wg),e.copy(t),e.x+=Mg.x,e.y+=Mg.y,e.applyMatrix4(Eg)}const Ng=new sf,Dg=new sf;class Ug extends zp{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Ng.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Ng);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Ng.setFromMatrixPosition(e.matrixWorld),Dg.setFromMatrixPosition(this.matrixWorld);const n=Ng.distanceTo(Dg)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const Og=new sf,Fg=new If,zg=new If,Bg=new sf,Hg=new dp,Vg=new sf,Gg=new rp,jg=new dp,Wg=new hp;class Xg extends Xm{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=hu,this.bindMatrix=new dp,this.bindMatrixInverse=new dp,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new zf),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Vg),this.boundingBox.expandByPoint(Vg)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new rp),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Vg),this.boundingSphere.expandByPoint(Vg)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Gg.copy(this.boundingSphere),Gg.applyMatrix4(r),!1!==e.ray.intersectsSphere(Gg)&&(jg.copy(r).invert(),Wg.copy(e.ray).applyMatrix4(jg),null!==this.boundingBox&&!1===Wg.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Wg)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new If,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===hu?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===du?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;Fg.fromBufferAttribute(r.attributes.skinIndex,e),zg.fromBufferAttribute(r.attributes.skinWeight,e),Og.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=zg.getComponent(i);if(0!==e){const r=Fg.getComponent(i);Hg.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(Bg.copy(Og).applyMatrix4(Hg),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class qg extends zp{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yg extends Lf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:Su,arguments.length>9&&void 0!==arguments[9]?arguments[9]:Su,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Zg=new dp,Kg=new dp;class Jg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Kd(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new dp)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new dp;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,a=e.length;i<a;i++){const r=e[i]?e[i].matrixWorld:Kg;Zg.multiplyMatrices(r,t[i]),Zg.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new Jg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Yg(t,e,e,qu,Fu);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new qg),this.bones.push(i),this.boneInverses.push((new dp).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class Qg extends vm{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const $g=new dp,ev=new dp,tv=[],nv=new zf,rv=new dp,iv=new Xm,av=new rp;class sv extends Xm{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Qg(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,rv)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new zf),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,$g),nv.copy(e.boundingBox).applyMatrix4($g),this.boundingBox.union(nv)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new rp),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,$g),av.copy(e.boundingSphere).applyMatrix4($g),this.boundingSphere.union(av)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,i=e*(n.length+1)+1;for(let a=0;a<n.length;a++)n[a]=r[i+a]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(iv.geometry=this.geometry,iv.material=this.material,void 0!==iv.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),av.copy(this.boundingSphere),av.applyMatrix4(n),!1!==e.ray.intersectsSphere(av)))for(let i=0;i<r;i++){this.getMatrixAt(i,$g),ev.multiplyMatrices(n,$g),iv.matrixWorld=ev,iv.raycast(e,tv);for(let e=0,n=tv.length;e<n;e++){const n=tv[e];n.instanceId=i,n.object=this,t.push(n)}tv.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Qg(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new Yg(new Float32Array(r*this.count),r,this.count,Ku,Fu));const i=this.morphTexture.source.data.data;let a=0;for(let l=0;l<n.length;l++)a+=n[l];const s=this.geometry.morphTargetsRelative?1:1-a,o=r*e;i[o]=s,i.set(n,o+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const ov=new sf,lv=new sf,cv=new cf;class uv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sf(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=ov.subVectors(n,t).cross(lv.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(ov),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||cv.getNormalMatrix(e),r=this.coplanarPoint(ov).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const hv=new rp,dv=new rf(.5,.5),fv=new sf;class pv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uv,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new uv,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new uv,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new uv,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new uv;this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bd,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.planes,i=e.elements,a=i[0],s=i[1],o=i[2],l=i[3],c=i[4],u=i[5],h=i[6],d=i[7],f=i[8],p=i[9],m=i[10],g=i[11],v=i[12],y=i[13],_=i[14],b=i[15];if(r[0].setComponents(l-a,d-c,g-f,b-v).normalize(),r[1].setComponents(l+a,d+c,g+f,b+v).normalize(),r[2].setComponents(l+s,d+u,g+p,b+y).normalize(),r[3].setComponents(l-s,d-u,g-p,b-y).normalize(),n)r[4].setComponents(o,h,m,_).normalize(),r[5].setComponents(l-o,d-h,g-m,b-_).normalize();else if(r[4].setComponents(l-o,d-h,g-m,b-_).normalize(),t===Bd)r[5].setComponents(l+o,d+h,g+m,b+_).normalize();else{if(t!==Hd)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);r[5].setComponents(o,h,m,_).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),hv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),hv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(hv)}intersectsSprite(e){hv.center.set(0,0,0);const t=dv.distanceTo(e.center);return hv.radius=.7071067811865476+t,hv.applyMatrix4(e.matrixWorld),this.intersectsSphere(hv)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(fv.x=r.normal.x>0?e.max.x:e.min.x,fv.y=r.normal.y>0?e.max.y:e.min.y,fv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(fv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}const mv=new dp,gv=new pv;class vv{constructor(){this.coordinateSystem=Bd}intersectsObject(e,t){if(!t.isArrayCamera||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(mv.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),gv.setFromProjectionMatrix(mv,r.coordinateSystem,r.reversedDepth),gv.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(mv.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),gv.setFromProjectionMatrix(mv,r.coordinateSystem,r.reversedDepth),gv.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(mv.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),gv.setFromProjectionMatrix(mv,r.coordinateSystem,r.reversedDepth),gv.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(mv.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),gv.setFromProjectionMatrix(mv,r.coordinateSystem,r.reversedDepth),gv.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(mv.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),gv.setFromProjectionMatrix(mv,r.coordinateSystem,r.reversedDepth),gv.containsPoint(e))return!0}return!1}clone(){return new vv}}function yv(e,t){return e-t}function _v(e,t){return e.z-t.z}function bv(e,t){return t.z-e.z}class xv{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const i=this.pool,a=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const s=i[this.index];a.push(s),this.index++,s.start=e,s.count=t,s.z=n,s.index=r}reset(){this.list.length=0,this.index=0}}const Sv=new dp,wv=new im(1,1,1),Mv=new pv,Ev=new vv,Tv=new zf,Av=new rp,Cv=new sf,Rv=new sf,Pv=new sf,Lv=new xv,Iv=new Xm,kv=[];function Nv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const i=e.count;for(let a=0;a<i;a++)for(let i=0;i<r;i++)t.setComponent(a+n,i,e.getComponent(a,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}function Dv(e,t){if(e.constructor!==t.constructor){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++)t[r]=e[r]}else{const n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class Uv extends Xm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,r=arguments.length>3?arguments[3]:void 0;super(new Nm,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Yg(t,e,e,qu,Fu);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Yg(t,e,e,Ju,Ou);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Yg(t,e,e,qu,Fu);n.colorSpace=xf.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in e.attributes){const i=e.getAttribute(r),{array:a,itemSize:s,normalized:o}=i,l=new a.constructor(n*s),c=new vm(l,s,o);t.setAttribute(r,c)}if(null!==e.getIndex()){const e=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new vm(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error('THREE.BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));const r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error("THREE.BatchedMesh: Invalid instanceId ".concat(e,". Instance is either out of range or has been deleted."))}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error("THREE.BatchedMesh: Invalid geometryId ".concat(e,". Geometry is either out of range or has been deleted."))}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new zf);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Sv),this.getBoundingBoxAt(r,Tv).applyMatrix4(Sv),e.union(Tv)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rp);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Sv),this.getBoundingSphereAt(r,Av).applyMatrix4(Sv),e.union(Av)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(yv),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));const r=this._matricesTexture;Sv.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;const i=this._colorsTexture;return i&&(wv.toArray(i.image.data,4*n),i.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},i=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=-1===t?e.getAttribute("position").count:t;const a=e.getIndex();if(null!==a&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=-1===n?a.count:n),-1!==r.indexStart&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let s;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(yv),s=this._availableGeometryIds.shift(),i[s]=r):(s=this._geometryCount,this._geometryCount++,i.push(r)),this.setGeometryAt(s,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,s}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),a=t.getIndex(),s=this._geometryInfo[e];if(r&&a.count>s.reservedIndexCount||t.attributes.position.count>s.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const o=s.vertexStart,l=s.reservedVertexCount;s.vertexCount=t.getAttribute("position").count;for(const c in n.attributes){const e=t.getAttribute(c),r=n.getAttribute(c);Nv(e,r,o);const i=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=o+t;for(let t=0;t<i;t++)r.setComponent(e,t,0)}r.needsUpdate=!0,r.addUpdateRange(o*i,l*i)}if(r){const e=s.indexStart,n=s.reservedIndexCount;s.indexCount=t.getIndex().count;for(let t=0;t<a.count;t++)i.setX(e+t,o+a.getX(t));for(let t=a.count,r=n;t<r;t++)i.setX(e+t,o);i.needsUpdate=!0,i.addUpdateRange(e,s.reservedIndexCount)}return s.start=r?s.indexStart:s.vertexStart,s.count=r?s.indexCount:s.vertexCount,s.boundingBox=null,null!==t.boundingBox&&(s.boundingBox=t.boundingBox.clone()),s.boundingSphere=null,null!==t.boundingSphere&&(s.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;const n=this._instanceInfo;for(let r=0,i=n.length;r<i;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((e,t)=>t).sort((e,t)=>n[e].vertexStart-n[t].vertexStart),i=this.geometry;for(let a=0,s=n.length;a<s;a++){const s=r[a],o=n[s];if(!1!==o.active){if(null!==i.index){if(o.indexStart!==t){const{indexStart:n,vertexStart:r,reservedIndexCount:a}=o,s=i.index,l=s.array,c=e-r;for(let e=n;e<n+a;e++)l[e]=l[e]+c;s.array.copyWithin(t,n,n+a),s.addUpdateRange(t,a),o.indexStart=t}t+=o.reservedIndexCount}if(o.vertexStart!==e){const{vertexStart:t,reservedVertexCount:n}=o,r=i.attributes;for(const i in r){const a=r[i],{array:s,itemSize:o}=a;s.copyWithin(e*o,t*o,(t+n)*o),a.addUpdateRange(e*o,n*o)}o.vertexStart=e}e+=o.reservedVertexCount,o.start=i.index?o.indexStart:o.vertexStart,this._nextIndexStart=i.index?o.indexStart+o.reservedIndexCount:0,this._nextVertexStart=o.vertexStart+o.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingBox){const e=new zf,t=n.index,i=n.attributes.position;for(let n=r.start,a=r.start+r.count;n<a;n++){let r=n;t&&(r=t.getX(r)),e.expandByPoint(Cv.fromBufferAttribute(i,r))}r.boundingBox=e}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingSphere){const t=new rp;this.getBoundingBoxAt(e,Tv),Tv.getCenter(t.center);const i=n.index,a=n.attributes.position;let s=0;for(let e=r.start,n=r.start+r.count;e<n;e++){let n=e;i&&(n=i.getX(n)),Cv.fromBufferAttribute(a,n),s=Math.max(s,t.center.distanceToSquared(Cv))}t.radius=Math.sqrt(s),r.boundingSphere=t}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(yv);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error("BatchedMesh: Instance ids outside the range ".concat(e," are being used. Cannot shrink instance count."));const r=new Int32Array(e),i=new Int32Array(e);Dv(this._multiDrawCounts,r),Dv(this._multiDrawStarts,i),this._multiDrawCounts=r,this._multiDrawStarts=i,this._maxInstanceCount=e;const a=this._indirectTexture,s=this._matricesTexture,o=this._colorsTexture;a.dispose(),this._initIndirectTexture(),Dv(a.image.data,this._indirectTexture.image.data),s.dispose(),this._initMatricesTexture(),Dv(s.image.data,this._matricesTexture.image.data),o&&(o.dispose(),this._initColorsTexture(),Dv(o.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...n.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw new Error("BatchedMesh: Geometry vertex values are being used outside the range ".concat(t,". Cannot shrink further."));if(this.geometry.index){if(Math.max(...n.map(e=>e.indexStart+e.reservedIndexCount))>t)throw new Error("BatchedMesh: Geometry index values are being used outside the range ".concat(t,". Cannot shrink further."))}const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Nm,this._initializeGeometry(r));const i=this.geometry;r.index&&Dv(r.index.array,i.index.array);for(const a in r.attributes)Dv(r.attributes[a].array,i.attributes[a].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,i=this.matrixWorld,a=this.geometry;Iv.material=this.material,Iv.geometry.index=a.index,Iv.geometry.attributes=a.attributes,null===Iv.geometry.boundingBox&&(Iv.geometry.boundingBox=new zf),null===Iv.geometry.boundingSphere&&(Iv.geometry.boundingSphere=new rp);for(let s=0,o=n.length;s<o;s++){if(!n[s].visible||!n[s].active)continue;const a=n[s].geometryIndex,o=r[a];Iv.geometry.setDrawRange(o.start,o.count),this.getMatrixAt(s,Iv.matrixWorld).premultiply(i),this.getBoundingBoxAt(a,Iv.geometry.boundingBox),this.getBoundingSphereAt(a,Iv.geometry.boundingSphere),Iv.raycast(e,kv);for(let e=0,n=kv.length;e<n;e++){const n=kv[e];n.object=this,n.batchId=s,t.push(n)}kv.length=0}Iv.material=null,Iv.geometry.index=null,Iv.geometry.attributes={},Iv.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>u(u({},e),{},{boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>u({},e)),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),s=null===a?1:a.array.BYTES_PER_ELEMENT,o=this._instanceInfo,l=this._multiDrawStarts,c=this._multiDrawCounts,u=this._geometryInfo,h=this.perObjectFrustumCulled,d=this._indirectTexture,f=d.image.data,p=n.isArrayCamera?Ev:Mv;h&&!n.isArrayCamera&&(Sv.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Mv.setFromProjectionMatrix(Sv,n.coordinateSystem,n.reversedDepth));let m=0;if(this.sortObjects){Sv.copy(this.matrixWorld).invert(),Cv.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Sv),Rv.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Sv);for(let r=0,i=o.length;r<i;r++)if(o[r].visible&&o[r].active){const e=o[r].geometryIndex;this.getMatrixAt(r,Sv),this.getBoundingSphereAt(e,Av).applyMatrix4(Sv);let t=!1;if(h&&(t=!p.intersectsSphere(Av,n)),!t){const t=u[e],n=Pv.subVectors(Av.center,Cv).dot(Rv);Lv.push(t.start,t.count,n,r)}}const e=Lv.list,t=this.customSort;null===t?e.sort(i.transparent?bv:_v):t.call(this,e,n);for(let n=0,r=e.length;n<r;n++){const t=e[n];l[m]=t.start*s,c[m]=t.count,f[m]=t.index,m++}Lv.reset()}else for(let g=0,v=o.length;g<v;g++)if(o[g].visible&&o[g].active){const e=o[g].geometryIndex;let t=!1;if(h&&(this.getMatrixAt(g,Sv),this.getBoundingSphereAt(e,Av).applyMatrix4(Sv),t=!p.intersectsSphere(Av,n)),!t){const t=u[e];l[m]=t.start*s,c[m]=t.count,f[m]=g,m++}}d.needsUpdate=!0,this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,a){this.onBeforeRender(e,null,r,i,a)}}class Ov extends om{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new im(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Fv=new sf,zv=new sf,Bv=new dp,Hv=new hp,Vv=new rp,Gv=new sf,jv=new sf;class Wv extends zp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ov;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Fv.fromBufferAttribute(t,e-1),zv.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Fv.distanceTo(zv);e.setAttribute("lineDistance",new Tm(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Vv.copy(n.boundingSphere),Vv.applyMatrix4(r),Vv.radius+=i,!1===e.ray.intersectsSphere(Vv))return;Bv.copy(r).invert(),Hv.copy(e.ray).applyMatrix4(Bv);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(null!==c){const n=Math.max(0,a.start),r=Math.min(c.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){const n=c.getX(i),r=c.getX(i+1),a=Xv(this,e,Hv,o,n,r,i);a&&t.push(a)}if(this.isLineLoop){const i=c.getX(r-1),a=c.getX(n),s=Xv(this,e,Hv,o,i,a,r-1);s&&t.push(s)}}else{const n=Math.max(0,a.start),r=Math.min(u.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){const n=Xv(this,e,Hv,o,i,i+1,i);n&&t.push(n)}if(this.isLineLoop){const i=Xv(this,e,Hv,o,r-1,n,r-1);i&&t.push(i)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Xv(e,t,n,r,i,a,s){const o=e.geometry.attributes.position;Fv.fromBufferAttribute(o,i),zv.fromBufferAttribute(o,a);if(n.distanceSqToSegment(Fv,zv,Gv,jv)>r)return;Gv.applyMatrix4(e.matrixWorld);const l=t.ray.origin.distanceTo(Gv);return l<t.near||l>t.far?void 0:{distance:l,point:jv.clone().applyMatrix4(e.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:e}}const qv=new sf,Yv=new sf;class Zv extends Wv{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)qv.fromBufferAttribute(t,e),Yv.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+qv.distanceTo(Yv);e.setAttribute("lineDistance",new Tm(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Kv extends Wv{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Jv extends om{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new im(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Qv=new dp,$v=new hp,ey=new rp,ty=new sf;class ny extends zp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Jv;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ey.copy(n.boundingSphere),ey.applyMatrix4(r),ey.radius+=i,!1===e.ray.intersectsSphere(ey))return;Qv.copy(r).invert(),$v.copy(e.ray).applyMatrix4(Qv);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);n<i;n++){const i=l.getX(n);ty.fromBufferAttribute(c,i),ry(ty,i,o,r,e,t,this)}}else{for(let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);n<i;n++)ty.fromBufferAttribute(c,n),ry(ty,n,o,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function ry(e,t,n,r,i,a,s){const o=$v.distanceSqToPoint(e);if(o<n){const n=new sf;$v.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}class iy extends Lf{constructor(e,t,n,r){super(e,t,n,r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:Au,arguments.length>5&&void 0!==arguments[5]?arguments[5]:Au,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const i=this;"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(function t(){i.needsUpdate=!0,i._requestVideoFrameCallbackId=e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){0!==this._requestVideoFrameCallbackId&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class ay extends iy{constructor(e,t,n,r,i,a,s,o){super({},e,t,n,r,i,a,s,o),this.isVideoFrameTexture=!0}update(){}clone(){return(new this.constructor).copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class sy extends Lf{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Su,this.minFilter=Su,this.generateMipmaps=!1,this.needsUpdate=!0}}class oy extends Lf{constructor(e,t,n,r,i,a,s,o,l,c,u,h){super(null,a,s,o,l,c,r,i,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ly extends oy{constructor(e,t,n,r,i,a){super(e,t,n,i,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=bu,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class cy extends oy{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,pu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class uy extends Lf{constructor(e,t,n,r,i,a,s,o,l){super(e,t,n,r,i,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class hy extends Lf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ou,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Su,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Su,l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Yu,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;if(c!==Yu&&c!==Zu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:e,height:t,depth:u},r,i,a,s,o,c,n,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Af(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class dy extends Lf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class fy extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r,heightSegments:i},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),r=Math.max(3,Math.floor(r)),i=Math.max(1,Math.floor(i));const a=[],s=[],o=[],l=[],c=t/2,u=Math.PI/2*e,h=t,d=2*u+h,f=2*n+i,p=r+1,m=new sf,g=new sf;for(let v=0;v<=f;v++){let y=0,_=0,b=0,x=0;if(v<=n){const t=v/n,r=t*Math.PI/2;_=-c-e*Math.cos(r),b=e*Math.sin(r),x=-e*Math.cos(r),y=t*u}else if(v<=n+i){const r=(v-n)/i;_=r*t-c,b=e,x=0,y=u+r*h}else{const t=(v-n-i)/n,r=t*Math.PI/2;_=c+e*Math.sin(r),b=e*Math.cos(r),x=e*Math.sin(r),y=u+h+t*u}const S=Math.max(0,Math.min(1,y/d));let w=0;0===v?w=.5/r:v===f&&(w=-.5/r);for(let e=0;e<=r;e++){const t=e/r,n=t*Math.PI*2,i=Math.sin(n),a=Math.cos(n);g.x=-b*a,g.y=_,g.z=b*i,s.push(g.x,g.y,g.z),m.set(-b*a,x,b*i),m.normalize(),o.push(m.x,m.y,m.z),l.push(t+w,S)}if(v>0){const e=(v-1)*p;for(let t=0;t<r;t++){const n=e+t,r=e+t+1,i=v*p+t,s=v*p+t+1;a.push(n,r,i),a.push(r,s,i)}}}this.setIndex(a),this.setAttribute("position",new Tm(s,3)),this.setAttribute("normal",new Tm(o,3)),this.setAttribute("uv",new Tm(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fy(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class py extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],a=[],s=[],o=[],l=new sf,c=new rf;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){const i=n+u/t*r;l.x=e*Math.cos(i),l.y=e*Math.sin(i),a.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(a[h]/e+1)/2,c.y=(a[h+1]/e+1)/2,o.push(c.x,c.y)}for(let u=1;u<=t;u++)i.push(u,u+1,0);this.setIndex(i),this.setAttribute("position",new Tm(a,3)),this.setAttribute("normal",new Tm(s,3)),this.setAttribute("uv",new Tm(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new py(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class my extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let f=0;const p=[],m=n/2;let g=0;function v(n){const i=f,a=new rf,p=new sf;let v=0;const y=!0===n?e:t,_=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*_,0),h.push(0,_,0),d.push(.5,.5),f++;const b=f;for(let e=0;e<=r;e++){const t=e/r*o+s,n=Math.cos(t),i=Math.sin(t);p.x=y*i,p.y=m*_,p.z=y*n,u.push(p.x,p.y,p.z),h.push(0,_,0),a.x=.5*n+.5,a.y=.5*i*_+.5,d.push(a.x,a.y),f++}for(let e=0;e<r;e++){const t=i+e,r=b+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const a=new sf,v=new sf;let y=0;const _=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*o+s,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,u.push(v.x,v.y,v.z),a.set(l,_,p).normalize(),h.push(a.x,a.y,a.z),d.push(t,1-g),c.push(f++)}p.push(c)}for(let n=0;n<r;n++)for(let r=0;r<i;r++){const a=p[r][n],s=p[r+1][n],o=p[r+1][n+1],l=p[r][n+1];(e>0||0!==r)&&(c.push(a,s,l),y+=3),(t>0||r!==i-1)&&(c.push(s,o,l),y+=3)}l.addGroup(g,y,0),g+=y}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Tm(u,3)),this.setAttribute("normal",new Tm(h,3)),this.setAttribute("uv",new Tm(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new my(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gy extends my{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,r,i,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}}static fromJSON(e){return new gy(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class vy extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],a=[];function s(e,t,n,r){const i=r+1,a=[];for(let s=0;s<=i;s++){a[s]=[];const r=e.clone().lerp(n,s/i),o=t.clone().lerp(n,s/i),l=i-s;for(let e=0;e<=l;e++)a[s][e]=0===e&&s===i?r:r.clone().lerp(o,e/l)}for(let s=0;s<i;s++)for(let e=0;e<2*(i-s)-1;e++){const t=Math.floor(e/2);e%2===0?(o(a[s][t+1]),o(a[s+1][t]),o(a[s][t])):(o(a[s][t+1]),o(a[s+1][t+1]),o(a[s+1][t]))}}function o(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){const n=new sf,r=new sf,i=new sf;for(let a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],r),l(t[a+2],i),s(n,r,i,e)}(r),function(e){const t=new sf;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new sf;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];const n=u(e)/2/Math.PI+.5,r=h(e)/Math.PI+.5;a.push(n,1-r)}(function(){const e=new sf,t=new sf,n=new sf,r=new sf,s=new rf,o=new rf,l=new rf;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),s.set(a[d+0],a[d+1]),o.set(a[d+2],a[d+3]),l.set(a[d+4],a[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const f=u(r);c(s,d+0,e,f),c(o,d+2,t,f),c(l,d+4,n,f)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),s=Math.min(t,n,r);i>.9&&s<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new Tm(i,3)),this.setAttribute("normal",new Tm(i.slice(),3)),this.setAttribute("uv",new Tm(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vy(e.vertices,e.indices,e.radius,e.details)}}class yy extends vy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yy(e.radius,e.detail)}}const _y=new sf,by=new sf,xy=new sf,Sy=new $p;class wy extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(Yd*t),a=e.getIndex(),s=e.getAttribute("position"),o=a?a.count:s.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<o;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=Sy;if(t.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),o.fromBufferAttribute(s,l[2]),Sy.getNormal(xy),u[0]="".concat(Math.round(t.x*r),",").concat(Math.round(t.y*r),",").concat(Math.round(t.z*r)),u[1]="".concat(Math.round(n.x*r),",").concat(Math.round(n.y*r),",").concat(Math.round(n.z*r)),u[2]="".concat(Math.round(o.x*r),",").concat(Math.round(o.y*r),",").concat(Math.round(o.z*r)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],a=Sy[c[e]],s=Sy[c[t]],o="".concat(n,"_").concat(r),f="".concat(r,"_").concat(n);f in h&&h[f]?(xy.dot(h[f].normal)<=i&&(d.push(a.x,a.y,a.z),d.push(s.x,s.y,s.z)),h[f]=null):o in h||(h[o]={index0:l[e],index1:l[t],normal:xy.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];_y.fromBufferAttribute(s,t),by.fromBufferAttribute(s,n),d.push(_y.x,_y.y,_y.z),d.push(by.x,by.y,by.z)}this.setAttribute("position",new Tm(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class My{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getLengths();let r=0;const i=n.length;let a;a=t||e*n[i-1];let s,o=0,l=i-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),s=n[r]-a,s<0)o=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===a)return r/(i-1);const c=n[r];return(r+(a-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),s=this.getPoint(i),o=t||(a.isVector2?new rf:new sf);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new sf,r=[],i=[],a=[],s=new sf,o=new dp;for(let d=0;d<=e;d++){const t=d/e;r[d]=this.getTangentAt(t,new sf)}i[0]=new sf,a[0]=new sf;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),a[0].crossVectors(r[0],i[0]);for(let d=1;d<=e;d++){if(i[d]=i[d-1].clone(),a[d]=a[d-1].clone(),s.crossVectors(r[d-1],r[d]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(Jd(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(o.makeRotationAxis(s,e))}a[d].crossVectors(r[d],i[d])}if(!0===t){let t=Math.acos(Jd(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ey extends My{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rf,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const i=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);const a=this.aStartAngle+e*r;let s=this.aX+this.xRadius*Math.cos(a),o=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=o-this.aY;s=n*e-r*t+this.aX,o=n*t+r*e+this.aY}return t.set(s,o)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Ty extends Ey{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Ay(){let e=0,t=0,n=0,r=0;function i(i,a,s,o){e=i,t=s,n=-3*i+3*a-2*s-o,r=2*i-2*a+s+o}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,s,o){let l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,c=(n-t)/s-(r-t)/(s+o)+(r-n)/o;l*=s,c*=s,i(t,n,l,c)},calc:function(i){const a=i*i;return e+t*i+n*a+r*(a*i)}}}const Cy=new sf,Ry=new Ay,Py=new Ay,Ly=new Ay;class Iy extends My{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf,n=this.points,r=n.length,i=(r-(this.closed?0:1))*e;let a,s,o=Math.floor(i),l=i-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:0===l&&o===r-1&&(o=r-2,l=1),this.closed||o>0?a=n[(o-1)%r]:(Cy.subVectors(n[0],n[1]).add(n[0]),a=Cy);const c=n[o%r],u=n[(o+1)%r];if(this.closed||o+2<r?s=n[(o+2)%r]:(Cy.subVectors(n[r-1],n[r-2]).add(n[r-1]),s=Cy),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Ry.initNonuniformCatmullRom(a.x,c.x,u.x,s.x,t,n,r),Py.initNonuniformCatmullRom(a.y,c.y,u.y,s.y,t,n,r),Ly.initNonuniformCatmullRom(a.z,c.z,u.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(Ry.initCatmullRom(a.x,c.x,u.x,s.x,this.tension),Py.initCatmullRom(a.y,c.y,u.y,s.y,this.tension),Ly.initCatmullRom(a.z,c.z,u.z,s.z,this.tension));return t.set(Ry.calc(l),Py.calc(l),Ly.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new sf).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ky(e,t,n,r,i){const a=.5*(r-t),s=.5*(i-n),o=e*e;return(2*n-2*r+a+s)*(e*o)+(-3*n+3*r-2*a-s)*o+a*e+n}function Ny(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Dy(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class Uy extends My{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new rf,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new rf;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rf,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(Dy(e,n.x,r.x,i.x,a.x),Dy(e,n.y,r.y,i.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Oy extends My{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sf,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new sf;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(Dy(e,n.x,r.x,i.x,a.x),Dy(e,n.y,r.y,i.y,a.y),Dy(e,n.z,r.z,i.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Fy extends My{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rf;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rf;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rf).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zy extends My{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class By extends My{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new rf;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rf,n=this.v0,r=this.v1,i=this.v2;return t.set(Ny(e,n.x,r.x,i.x),Ny(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hy extends My{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new sf;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf,n=this.v0,r=this.v1,i=this.v2;return t.set(Ny(e,n.x,r.x,i.x),Ny(e,n.y,r.y,i.y),Ny(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Vy extends My{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rf,n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,s=n[0===i?i:i-1],o=n[i],l=n[i>n.length-2?n.length-1:i+1],c=n[i>n.length-3?n.length-1:i+2];return t.set(ky(a,s.x,o.x,l.x,c.x),ky(a,s.y,o.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new rf).fromArray(n))}return this}}var Gy=Object.freeze({__proto__:null,ArcCurve:Ty,CatmullRomCurve3:Iy,CubicBezierCurve:Uy,CubicBezierCurve3:Oy,EllipseCurve:Ey,LineCurve:Fy,LineCurve3:zy,QuadraticBezierCurve:By,QuadraticBezierCurve3:Hy,SplineCurve:Vy});class jy extends My{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Gy[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,a=this.curves[i],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const a=i[r],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const r=o[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Gy[n.type]).fromJSON(n))}return this}}class Wy extends jy{constructor(e){super(),this.type="Path",this.currentPoint=new rf,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Fy(this.currentPoint.clone(),new rf(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new By(this.currentPoint.clone(),new rf(e,t),new rf(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){const s=new Uy(this.currentPoint.clone(),new rf(e,t),new rf(n,r),new rf(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Vy(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,a,s,o),this}absellipse(e,t,n,r,i,a,s,o){const l=new Ey(e,t,n,r,i,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Xy extends Wy{constructor(e){super(e),this.uuid=Kd(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Wy).fromJSON(n))}return this}}function qy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=t&&t.length,i=r?t[0]*n:e.length;let a=Yy(e,0,i,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c;if(r&&(a=function(e,t,n,r){const i=[];for(let a=0,s=t.length;a<s;a++){const n=Yy(e,t[a]*r,a<s-1?t[a+1]*r:e.length,r,!1);n===n.next&&(n.steiner=!0),i.push(a_(n))}i.sort(t_);for(let a=0;a<i.length;a++)n=n_(i[a],n);return n}(e,t,a,n)),e.length>80*n){o=1/0,l=1/0;let t=-1/0,r=-1/0;for(let a=n;a<i;a+=n){const n=e[a],i=e[a+1];n<o&&(o=n),i<l&&(l=i),n>t&&(t=n),i>r&&(r=i)}c=Math.max(t-o,r-l),c=0!==c?32767/c:0}return Ky(a,s,n,o,l,c,0),s}function Yy(e,t,n,r,i){let a;if(i===function(e,t,n,r){let i=0;for(let a=t,s=n-r;a<n;a+=r)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}(e,t,n,r)>0)for(let s=t;s<n;s+=r)a=g_(s/r|0,e[s],e[s+1],a);else for(let s=n-r;s>=t;s-=r)a=g_(s/r|0,e[s],e[s+1],a);return a&&u_(a,a.next)&&(v_(a),a=a.next),a}function Zy(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!u_(r,r.next)&&0!==c_(r.prev,r,r.next))r=r.next;else{if(v_(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Ky(e,t,n,r,i,a,s){if(!e)return;!s&&a&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=i_(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n=1;do{let r,i=e;e=null;let a=null;for(t=0;i;){t++;let s=i,o=0;for(let e=0;e<n&&(o++,s=s.nextZ,s);e++);let l=n;for(;o>0||l>0&&s;)0!==o&&(0===l||!s||i.z<=s.z)?(r=i,i=i.nextZ,o--):(r=s,s=s.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;i=s}a.nextZ=null,n*=2}while(t>1)}(i)}(e,r,i,a);let o=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(a?Qy(e,r,i,a):Jy(e))t.push(l.i,e.i,c.i),v_(e),e=c.next,o=c.next;else if((e=c)===o){s?1===s?Ky(e=$y(Zy(e),t),t,n,r,i,a,2):2===s&&e_(e,t,n,r,i,a):Ky(Zy(e),t,n,r,i,a,1);break}}}function Jy(e){const t=e.prev,n=e,r=e.next;if(c_(t,n,r)>=0)return!1;const i=t.x,a=n.x,s=r.x,o=t.y,l=n.y,c=r.y,u=Math.min(i,a,s),h=Math.min(o,l,c),d=Math.max(i,a,s),f=Math.max(o,l,c);let p=r.next;for(;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&o_(i,o,a,l,s,c,p.x,p.y)&&c_(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Qy(e,t,n,r){const i=e.prev,a=e,s=e.next;if(c_(i,a,s)>=0)return!1;const o=i.x,l=a.x,c=s.x,u=i.y,h=a.y,d=s.y,f=Math.min(o,l,c),p=Math.min(u,h,d),m=Math.max(o,l,c),g=Math.max(u,h,d),v=i_(f,p,t,n,r),y=i_(m,g,t,n,r);let _=e.prevZ,b=e.nextZ;for(;_&&_.z>=v&&b&&b.z<=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==s&&o_(o,u,l,h,c,d,_.x,_.y)&&c_(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==s&&o_(o,u,l,h,c,d,b.x,b.y)&&c_(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==s&&o_(o,u,l,h,c,d,_.x,_.y)&&c_(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==s&&o_(o,u,l,h,c,d,b.x,b.y)&&c_(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function $y(e,t){let n=e;do{const r=n.prev,i=n.next.next;!u_(r,i)&&h_(r,n,n.next,i)&&p_(r,i)&&p_(i,r)&&(t.push(r.i,n.i,i.i),v_(n),v_(n.next),n=e=i),n=n.next}while(n!==e);return Zy(n)}function e_(e,t,n,r,i,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&l_(s,e)){let o=m_(s,e);return s=Zy(s,s.next),o=Zy(o,o.next),Ky(s,t,n,r,i,a,0),void Ky(o,t,n,r,i,a,0)}e=e.next}s=s.next}while(s!==e)}function t_(e,t){let n=e.x-t.x;if(0===n&&(n=e.y-t.y,0===n)){n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)}return n}function n_(e,t){const n=function(e,t){let n=t;const r=e.x,i=e.y;let a,s=-1/0;if(u_(e,n))return n;do{if(u_(e,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>s&&(s=e,a=n.x<n.next.x?n:n.next,e===r))return a}n=n.next}while(n!==t);if(!a)return null;const o=a,l=a.x,c=a.y;let u=1/0;n=a;do{if(r>=n.x&&n.x>=l&&r!==n.x&&s_(i<c?r:s,i,l,c,i<c?s:r,i,n.x,n.y)){const t=Math.abs(i-n.y)/(r-n.x);p_(n,e)&&(t<u||t===u&&(n.x>a.x||n.x===a.x&&r_(a,n)))&&(a=n,u=t)}n=n.next}while(n!==o);return a}(e,t);if(!n)return t;const r=m_(n,e);return Zy(r,r.next),Zy(n,n.next)}function r_(e,t){return c_(e.prev,e,t.prev)<0&&c_(t.next,e,e.next)<0}function i_(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function a_(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function s_(e,t,n,r,i,a,s,o){return(i-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(r-o)>=(n-s)*(t-o)&&(n-s)*(a-o)>=(i-s)*(r-o)}function o_(e,t,n,r,i,a,s,o){return!(e===s&&t===o)&&s_(e,t,n,r,i,a,s,o)}function l_(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&h_(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(p_(e,t)&&p_(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(c_(e.prev,e,t.prev)||c_(e,t.prev,t))||u_(e,t)&&c_(e.prev,e,e.next)>0&&c_(t.prev,t,t.next)>0)}function c_(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function u_(e,t){return e.x===t.x&&e.y===t.y}function h_(e,t,n,r){const i=f_(c_(e,t,n)),a=f_(c_(e,t,r)),s=f_(c_(n,r,e)),o=f_(c_(n,r,t));return i!==a&&s!==o||(!(0!==i||!d_(e,n,t))||(!(0!==a||!d_(e,r,t))||(!(0!==s||!d_(n,e,r))||!(0!==o||!d_(n,t,r)))))}function d_(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function f_(e){return e>0?1:e<0?-1:0}function p_(e,t){return c_(e.prev,e,e.next)<0?c_(e,t,e.next)>=0&&c_(e,e.prev,t)>=0:c_(e,t,e.prev)<0||c_(e,e.next,t)<0}function m_(e,t){const n=y_(e.i,e.x,e.y),r=y_(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function g_(e,t,n,r){const i=y_(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function v_(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function y_(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class __{static triangulate(e,t){return qy(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:2)}}class b_{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return b_.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];x_(e),S_(n,e);let a=e.length;t.forEach(x_);for(let o=0;o<t.length;o++)r.push(a),a+=t[o].length,S_(n,t[o]);const s=__.triangulate(n,r);for(let o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}}function x_(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function S_(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class w_ extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Xy([new rf(.5,.5),new rf(-.5,.5),new rf(-.5,-.5),new rf(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let s=0,o=e.length;s<o;s++){a(e[s])}function a(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:M_;let g,v,y,_,b,x=!1;p&&(g=p.getSpacedPoints(o),x=!0,c=!1,v=p.computeFrenetFrames(o,!1),y=new sf,_=new sf,b=new sf),c||(f=0,u=0,h=0,d=0);const S=e.extractPoints(s);let w=S.shape;const M=S.holes;if(!b_.isClockWise(w)){w=w.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];b_.isClockWise(t)&&(M[e]=t.reverse())}}function E(e){const t=1e-10*1e-10;let n=e[0];for(let r=1;r<=e.length;r++){const i=r%e.length,a=e[i],s=a.x-n.x,o=a.y-n.y,l=s*s+o*o,c=Math.max(Math.abs(a.x),Math.abs(a.y),Math.abs(n.x),Math.abs(n.y));l<=t*c*c?(e.splice(i,1),r--):n=a}}E(w),M.forEach(E);const T=M.length,A=w;for(let t=0;t<T;t++){const e=M[t];w=w.concat(e)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const R=w.length;function P(e,t,n){let r,i,a;const s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=s*s+o*o,h=s*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=t.x-o/h,p=t.y+s/h,m=((n.x-c/d-f)*c-(n.y+l/d-p)*l)/(s*c-o*l);r=f+s*m-e.x,i=p+o*m-e.y;const g=r*r+i*i;if(g<=2)return new rf(r,i);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(r=-o,i=s,a=Math.sqrt(u)):(r=s,i=o,a=Math.sqrt(u/2))}return new rf(r/a,i/a)}const L=[];for(let t=0,n=A.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),L[t]=P(A[t],A[r],A[i]);const I=[];let k,N,D=L.concat();for(let t=0,n=T;t<n;t++){const e=M[t];k=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),k[t]=P(e[t],e[r],e[i]);I.push(k),D=D.concat(k)}if(0===f)N=b_.triangulateShape(A,M);else{const e=[],t=[];for(let n=0;n<f;n++){const r=n/f,i=u*Math.cos(r*Math.PI/2),a=h*Math.sin(r*Math.PI/2)+d;for(let t=0,n=A.length;t<n;t++){const n=C(A[t],L[t],a);z(n.x,n.y,-i),0===r&&e.push(n)}for(let e=0,n=T;e<n;e++){const n=M[e];k=I[e];const s=[];for(let e=0,t=n.length;e<t;e++){const t=C(n[e],k[e],a);z(t.x,t.y,-i),0===r&&s.push(t)}0===r&&t.push(s)}}N=b_.triangulateShape(e,t)}const U=N.length,O=h+d;for(let t=0;t<R;t++){const e=c?C(w[t],D[t],O):w[t];x?(_.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(_).add(y),z(b.x,b.y,b.z)):z(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<R;e++){const n=c?C(w[e],D[e],O):w[e];x?(_.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(_).add(y),z(b.x,b.y,b.z)):z(n.x,n.y,l/o*t)}for(let t=f-1;t>=0;t--){const e=t/f,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=A.length;t<i;t++){const e=C(A[t],L[t],r);z(e.x,e.y,l+n)}for(let t=0,i=M.length;t<i;t++){const e=M[t];k=I[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],k[t],r);x?z(i.x,i.y+g[o-1].y,g[o-1].x+n):z(i.x,i.y,l+n)}}}function F(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=o+2*f;e<n;e++){const n=R*e,a=R*(e+1);H(t+r+n,t+i+n,t+i+a,t+r+a)}}}function z(e,t,n){a.push(e),a.push(t),a.push(n)}function B(e,t,i){V(e),V(t),V(i);const a=r.length/3,s=m.generateTopUV(n,r,a-3,a-2,a-1);G(s[0]),G(s[1]),G(s[2])}function H(e,t,i,a){V(e),V(t),V(a),V(t),V(i),V(a);const s=r.length/3,o=m.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);G(o[0]),G(o[1]),G(o[3]),G(o[1]),G(o[2]),G(o[3])}function V(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function G(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=R*e;for(let n=0;n<U;n++){const e=N[n];B(e[2]+t,e[1]+t,e[0]+t)}e=o+2*f,t=R*e;for(let n=0;n<U;n++){const e=N[n];B(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<U;e++){const t=N[e];B(t[2],t[1],t[0])}for(let e=0;e<U;e++){const t=N[e];B(t[0]+R*o,t[1]+R*o,t[2]+R*o)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;F(A,t),t+=A.length;for(let n=0,r=M.length;n<r;n++){const e=M[n];F(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Tm(r,3)),this.setAttribute("uv",new Tm(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,a=e.shapes.length;i<a;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Gy[r.type]).fromJSON(r)),new w_(n,e.options)}}const M_={generateTopUV:function(e,t,n,r,i){const a=t[3*n],s=t[3*n+1],o=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new rf(a,s),new rf(o,l),new rf(c,u)]},generateSideWallUV:function(e,t,n,r,i,a){const s=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(o-u)<Math.abs(s-c)?[new rf(s,1-l),new rf(c,1-h),new rf(d,1-p),new rf(m,1-v)]:[new rf(o,1-l),new rf(u,1-h),new rf(f,1-p),new rf(g,1-v)]}};class E_ extends vy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new E_(e.radius,e.detail)}}class T_ extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new rf(0,-.5),new rf(.5,0),new rf(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Jd(r,0,2*Math.PI);const i=[],a=[],s=[],o=[],l=[],c=1/t,u=new sf,h=new rf,d=new sf,f=new sf,p=new sf;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(p.x,p.y,p.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),o.push(d.x,d.y,d.z),p.copy(f)}for(let v=0;v<=t;v++){const i=n+v*c*r,d=Math.sin(i),f=Math.cos(i);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*d,u.y=e[n].y,u.z=e[n].x*f,a.push(u.x,u.y,u.z),h.x=v/t,h.y=n/(e.length-1),s.push(h.x,h.y);const r=o[3*n+0]*d,i=o[3*n+1],c=o[3*n+0]*f;l.push(r,i,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,r=n,a=n+e.length,s=n+e.length+1,o=n+1;i.push(r,a,o),i.push(s,o,a)}this.setIndex(i),this.setAttribute("position",new Tm(a,3)),this.setAttribute("uv",new Tm(s,2)),this.setAttribute("normal",new Tm(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new T_(e.points,e.segments,e.phiStart,e.phiLength)}}class A_ extends vy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new A_(e.radius,e.detail)}}class C_ extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,a=t/2,s=Math.floor(n),o=Math.floor(r),l=s+1,c=o+1,u=e/s,h=t/o,d=[],f=[],p=[],m=[];for(let g=0;g<c;g++){const e=g*h-a;for(let t=0;t<l;t++){const n=t*u-i;f.push(n,-e,0),p.push(0,0,1),m.push(t/s),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;d.push(t,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new Tm(f,3)),this.setAttribute("normal",new Tm(p,3)),this.setAttribute("uv",new Tm(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C_(e.width,e.height,e.widthSegments,e.heightSegments)}}class R_ extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n),r=Math.max(1,r);const s=[],o=[],l=[],c=[];let u=e;const h=(t-e)/r,d=new sf,f=new rf;for(let p=0;p<=r;p++){for(let e=0;e<=n;e++){const r=i+e/n*a;d.x=u*Math.cos(r),d.y=u*Math.sin(r),o.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,c.push(f.x,f.y)}u+=h}for(let p=0;p<r;p++){const e=p*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,a=r+n+1,o=r+n+2,l=r+1;s.push(i,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new Tm(o,3)),this.setAttribute("normal",new Tm(l,3)),this.setAttribute("uv",new Tm(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class P_ extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Xy([new rf(0,.5),new rf(-.5,-.5),new rf(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(s,o,c),s+=o,o=0;function l(e){const s=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===b_.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===b_.isClockWise(e)&&(u[t]=e.reverse())}const h=b_.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];r.push(e.x,e.y,0),i.push(0,0,1),a.push(e.x,e.y)}for(let t=0,r=h.length;t<r;t++){const e=h[t],r=e[0]+s,i=e[1]+s,a=e[2]+s;n.push(r,i,a),o+=3}}this.setIndex(n),this.setAttribute("position",new Tm(r,3)),this.setAttribute("normal",new Tm(i,3)),this.setAttribute("uv",new Tm(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new P_(n,e.curveSegments)}}class L_ extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const c=[],u=new sf,h=new sf,d=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0===g&&0===a?y=.5/t:g===n&&o===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(r+o*i)*Math.sin(a+v*s),u.y=e*Math.cos(a+v*s),u.z=e*Math.sin(r+o*i)*Math.sin(a+v*s),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(o+y,1-v),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],i=c[g+1][e],s=c[g+1][e+1];(0!==g||a>0)&&d.push(t,r,s),(g!==n-1||o<Math.PI)&&d.push(r,i,s)}this.setIndex(d),this.setAttribute("position",new Tm(f,3)),this.setAttribute("normal",new Tm(p,3)),this.setAttribute("uv",new Tm(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new L_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class I_ extends vy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new I_(e.radius,e.detail)}}class k_ extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],o=[],l=[],c=new sf,u=new sf,h=new sf;for(let d=0;d<=n;d++)for(let a=0;a<=r;a++){const f=a/r*i,p=d/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),s.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),h.subVectors(u,c).normalize(),o.push(h.x,h.y,h.z),l.push(a/r),l.push(d/n)}for(let d=1;d<=n;d++)for(let e=1;e<=r;e++){const t=(r+1)*d+e-1,n=(r+1)*(d-1)+e-1,i=(r+1)*(d-1)+e,s=(r+1)*d+e;a.push(t,n,s),a.push(n,i,s)}this.setIndex(a),this.setAttribute("position",new Tm(s,3)),this.setAttribute("normal",new Tm(o,3)),this.setAttribute("uv",new Tm(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class N_ extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],l=[],c=[],u=new sf,h=new sf,d=new sf,f=new sf,p=new sf,m=new sf,g=new sf;for(let y=0;y<=n;++y){const s=y/n*i*Math.PI*2;v(s,i,a,e,d),v(s+.01,i,a,e,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,a=-t*Math.cos(i),s=t*Math.sin(i);u.x=d.x+(a*g.x+s*p.x),u.y=d.y+(a*g.y+s*p.y),u.z=d.z+(a*g.z+s*p.z),o.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(y/n),c.push(e/r)}}for(let y=1;y<=n;y++)for(let e=1;e<=r;e++){const t=(r+1)*(y-1)+(e-1),n=(r+1)*y+(e-1),i=(r+1)*y+e,a=(r+1)*(y-1)+e;s.push(t,n,a),s.push(n,i,a)}function v(e,t,n,r,i){const a=Math.cos(e),s=Math.sin(e),o=n/t*e,l=Math.cos(o);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*s*.5,i.z=r*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new Tm(o,3)),this.setAttribute("normal",new Tm(l,3)),this.setAttribute("uv",new Tm(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class D_ extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hy(new sf(-1,-1,0),new sf(-1,1,0),new sf(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new sf,o=new sf,l=new rf;let c=new sf;const u=[],h=[],d=[],f=[];function p(i){c=e.getPointAt(i/t,c);const l=a.normals[i],d=a.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+i*d.x,o.y=a*l.y+i*d.y,o.z=a*l.z+i*d.z,o.normalize(),h.push(o.x,o.y,o.z),s.x=c.x+n*o.x,s.y=c.y+n*o.y,s.z=c.z+n*o.z,u.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;f.push(n,i,s),f.push(i,a,s)}}()}(),this.setIndex(f),this.setAttribute("position",new Tm(u,3)),this.setAttribute("normal",new Tm(h,3)),this.setAttribute("uv",new Tm(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new D_((new Gy[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class U_ extends Nm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new sf,i=new sf;if(null!==e.index){const a=e.attributes.position,s=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let l=0;l<3;l++){const o=s.getX(e+l),c=s.getX(e+(l+1)%3);r.fromBufferAttribute(a,o),i.fromBufferAttribute(a,c),!0===O_(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const a=e.attributes.position;for(let e=0,s=a.count/3;e<s;e++)for(let o=0;o<3;o++){const s=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(a,s),i.fromBufferAttribute(a,l),!0===O_(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new Tm(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function O_(e,t,n){const r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var F_=Object.freeze({__proto__:null,BoxGeometry:Ym,CapsuleGeometry:fy,CircleGeometry:py,ConeGeometry:gy,CylinderGeometry:my,DodecahedronGeometry:yy,EdgesGeometry:wy,ExtrudeGeometry:w_,IcosahedronGeometry:E_,LatheGeometry:T_,OctahedronGeometry:A_,PlaneGeometry:C_,PolyhedronGeometry:vy,RingGeometry:R_,ShapeGeometry:P_,SphereGeometry:L_,TetrahedronGeometry:I_,TorusGeometry:k_,TorusKnotGeometry:N_,TubeGeometry:D_,WireframeGeometry:U_});class z_ extends om{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new im(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class B_ extends $m{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class H_ extends om{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new im(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new im(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qh,this.normalScale=new rf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sp,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class V_ extends H_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rf(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Jd(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new im(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new im(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new im(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class G_ extends om{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new im(16777215),this.specular=new im(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new im(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qh,this.normalScale=new rf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sp,this.combine=eu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class j_ extends om{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new im(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new im(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qh,this.normalScale=new rf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class W_ extends om{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qh,this.normalScale=new rf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class X_ extends om{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new im(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new im(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qh,this.normalScale=new rf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sp,this.combine=eu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class q_ extends om{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Yh,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Y_ extends om{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Z_ extends om{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new im(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qh,this.normalScale=new rf(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class K_ extends Ov{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function J_(e,t){return e&&e.constructor!==t?"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function Q_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $_(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n}function eb(e,t,n){const r=e.length,i=new e.constructor(r);for(let a=0,s=0;s!==r;++a){const r=n[a]*t;for(let n=0;n!==t;++n)i[s++]=e[r+n]}return i}function tb(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let s=a[r];if(void 0!==s)if(Array.isArray(s))do{s=a[r],void 0!==s&&(t.push(a.time),n.push(...s)),a=e[i++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[r],void 0!==s&&(t.push(a.time),s.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{s=a[r],void 0!==s&&(t.push(a.time),n.push(s)),a=e[i++]}while(void 0!==a)}class nb{static convertArray(e,t){return J_(e,t)}static isTypedArray(e){return Q_(e)}static getKeyframeOrder(e){return $_(e)}static sortedArray(e,t,n){return eb(e,t,n)}static flattenJSON(e,t,n,r){tb(e,t,n,r)}static subclip(e,t,n,r){return function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const a=e.clone();a.name=t;const s=[];for(let l=0;l<a.tracks.length;++l){const e=a.tracks[l],t=e.getValueSize(),o=[],c=[];for(let a=0;a<e.times.length;++a){const s=e.times[a]*i;if(!(s<n||s>=r)){o.push(e.times[a]);for(let n=0;n<t;++n)c.push(e.values[a*t+n])}}0!==o.length&&(e.times=J_(o,e.times.constructor),e.values=J_(c,e.values.constructor),s.push(e))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}(e,t,n,r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:30)}static makeClipAdditive(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);const i=n.tracks.length,a=t/r;for(let s=0;s<i;++s){const t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===r});if(void 0===i)continue;let o=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=t.times.length-1;let d;if(a<=t.times[0]){const e=o,n=l-o;d=t.values.slice(e,n)}else if(a>=t.times[h]){const e=h*l+o,n=e+l-o;d=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=o,r=l-o;e.evaluate(a),d=e.resultBuffer.slice(n,r)}"quaternion"===r&&(new af).fromArray(d).normalize().conjugate().toArray(d);const f=i.times.length;for(let e=0;e<f;++e){const t=e*u+c;if("quaternion"===r)af.multiplyQuaternionsFlat(i.values,t,d,0,i.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)i.values[t+n]-=d[n]}}}return e.blendMode=jh,e}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:30)}}class rb{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=i)){const s=t[1];e<s&&(n=2,i=s);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0;break n}break e}for(;n<a;){const r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let a=0;a!==r;++a)t[a]=n[i+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ib extends rb{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Bh,endingEnd:Bh}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,a=e+1,s=r[i],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case Hh:i=e,s=2*t-n;break;case Vh:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Hh:a=e,o=2*n-t;break;case Vh:a=1,o=n+r[1]-r[0];break;default:a=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,_=d*m-d*p;for(let b=0;b!==s;++b)i[b]=g*a[c+b]+v*a[l+b]+y*a[o+b]+_*a[u+b];return i}}class ab extends rb{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(r-t),u=1-c;for(let h=0;h!==s;++h)i[h]=a[l+h]*u+a[o+h]*c;return i}}class sb extends rb{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ob{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=J_(t,this.TimeBufferType),this.values=J_(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:J_(e.times,Array),values:J_(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new sb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ab(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ib(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Oh:t=this.InterpolantFactoryMethodDiscrete;break;case Fh:t=this.InterpolantFactoryMethodLinear;break;case zh:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Oh;case this.InterpolantFactoryMethodLinear:return Fh;case this.InterpolantFactoryMethodSmooth:return zh}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==i;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==a&&a>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,a),e=!1;break}a=t}if(void 0!==r&&Q_(r))for(let s=0,o=r.length;s!==o;++s){const t=r[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===zh,i=e.length-1;let a=1;for(let s=1;s<i;++s){let i=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(r)i=!0;else{const e=s*n,r=e-n,a=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[r+s]||n!==t[a+s]){i=!0;break}}}if(i){if(s!==a){e[a]=e[s];const r=s*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,s=0;s!==n;++s)t[r+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}ob.prototype.ValueTypeName="",ob.prototype.TimeBufferType=Float32Array,ob.prototype.ValueBufferType=Float32Array,ob.prototype.DefaultInterpolation=Fh;class lb extends ob{constructor(e,t,n){super(e,t,n)}}lb.prototype.ValueTypeName="bool",lb.prototype.ValueBufferType=Array,lb.prototype.DefaultInterpolation=Oh,lb.prototype.InterpolantFactoryMethodLinear=void 0,lb.prototype.InterpolantFactoryMethodSmooth=void 0;class cb extends ob{constructor(e,t,n,r){super(e,t,n,r)}}cb.prototype.ValueTypeName="color";class ub extends ob{constructor(e,t,n,r){super(e,t,n,r)}}ub.prototype.ValueTypeName="number";class hb extends rb{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(r-t);let l=e*s;for(let c=l+s;l!==c;l+=4)af.slerpFlat(i,0,a,l-s,a,l,o);return i}}class db extends ob{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new hb(this.times,this.values,this.getValueSize(),e)}}db.prototype.ValueTypeName="quaternion",db.prototype.InterpolantFactoryMethodSmooth=void 0;class fb extends ob{constructor(e,t,n){super(e,t,n)}}fb.prototype.ValueTypeName="string",fb.prototype.ValueBufferType=Array,fb.prototype.DefaultInterpolation=Oh,fb.prototype.InterpolantFactoryMethodLinear=void 0,fb.prototype.InterpolantFactoryMethodSmooth=void 0;class pb extends ob{constructor(e,t,n,r){super(e,t,n,r)}}pb.prototype.ValueTypeName="vector";class mb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gh;this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Kd(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let a=0,s=n.length;a!==s;++a)t.push(gb(n[a]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i.userData=JSON.parse(e.userData||"{}"),i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let i=0,a=n.length;i!==a;++i)t.push(ob.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,a=[];for(let s=0;s<i;s++){let e=[],o=[];e.push((s+i-1)%i,s,(s+1)%i),o.push(0,1,0);const l=$_(e);e=eb(e,1,l),o=eb(o,1,l),r||0!==e[0]||(e.push(i),o.push(o[0])),a.push(new ub(".morphTargetInfluences["+t[s].name+"]",e,o).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){const t=e[s],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const a=[];for(const s in r)a.push(this.CreateFromMorphTargetSequence(s,r[s],t,n));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const a=[],s=[];tb(n,a,s,r),0!==a.length&&i.push(new e(t,a,s))}},r=[],i=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],a=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),a.push(r.morphTarget===i?1:0)}r.push(new ub(".morphTargetInfluence["+i+"]",t,a))}o=t.length*a}else{const i=".bones["+t[c].name+"]";n(pb,i+".position",e,"pos",r),n(db,i+".quaternion",e,"rot",r),n(pb,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,o,r,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function gb(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ub;case"vector":case"vector2":case"vector3":case"vector4":return pb;case"color":return cb;case"quaternion":return db;case"bool":case"boolean":return lb;case"string":return fb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];tb(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const vb={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class yb{constructor(e,t,n){const r=this;let i,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(e){o++,!1===a&&void 0!==r.onStart&&r.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,o),s===o&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const _b=new yb;class bb{constructor(e){this.manager=void 0!==e?e:_b,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}bb.DEFAULT_MATERIAL_NAME="__DEFAULT";const xb={};class Sb extends Error{constructor(e,t){super(e),this.response=t}}class wb extends bb{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=vb.get("file:".concat(e));if(void 0!==i)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(void 0!==xb[e])return void xb[e].push({onLoad:t,onProgress:n,onError:r});xb[e]=[],xb[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:"function"===typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),s=this.mimeType,o=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=xb[e],r=t.body.getReader(),i=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),a=i?parseInt(i):0,s=0!==a;let o=0;const l=new ReadableStream({start(e){!function t(){r.read().then(r=>{let{done:i,value:l}=r;if(i)e.close();else{o+=l.byteLength;const r=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(l),t()}},t=>{e.error(t)})}()}});return new Response(l)}throw new Sb('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,s));case"json":return e.json();default:if(""===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then(e=>r.decode(e))}}}).then(t=>{vb.add("file:".concat(e),t);const n=xb[e];delete xb[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}}).catch(t=>{const n=xb[e];if(void 0===n)throw this.manager.itemError(e),t;delete xb[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class Mb extends bb{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new wb(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(d){r?r(d):console.error(d),i.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=mb.parse(e[n]);t.push(r)}return t}}class Eb extends bb{constructor(e){super(e)}load(e,t,n,r){const i=this,a=[],s=new oy,o=new wb(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials);let l=0;function c(c){o.load(e[c],function(e){const n=i.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=Au),s.image=a,s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)c(u);else o.load(e,function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Au),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,r);return s}}const Tb=new WeakMap;class Ab extends bb{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=vb.get("image:".concat(e));if(void 0!==a){if(!0===a.complete)i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0);else{let e=Tb.get(a);void 0===e&&(e=[],Tb.set(a,e)),e.push({onLoad:t,onError:r})}return a}const s=pf("img");function o(){c(),t&&t(this);const n=Tb.get(this)||[];for(let e=0;e<n.length;e++){const t=n[e];t.onLoad&&t.onLoad(this)}Tb.delete(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),vb.remove("image:".concat(e));const n=Tb.get(this)||[];for(let e=0;e<n.length;e++){const r=n[e];r.onError&&r.onError(t)}Tb.delete(this),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),vb.add("image:".concat(e),s),i.manager.itemStart(e),s.src=e,s}}class Cb extends bb{constructor(e){super(e)}load(e,t,n,r){const i=new og;i.colorSpace=td;const a=new Ab(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(n){a.load(e[n],function(e){i.images[n]=e,s++,6===s&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(let l=0;l<e.length;++l)o(l);return i}}class Rb extends bb{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new Yg,s=new wb(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(e,function(e){let n;try{n=i.parse(e)}catch(s){if(void 0===r)return void console.error(s);r(s)}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:bu,a.wrapT=void 0!==n.wrapT?n.wrapT:bu,a.magFilter=void 0!==n.magFilter?n.magFilter:Au,a.minFilter=void 0!==n.minFilter?n.minFilter:Au,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(a.colorSpace=n.colorSpace),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Pu),1===n.mipmapCount&&(a.minFilter=Au),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)},n,r),a}}class Pb extends bb{constructor(e){super(e)}load(e,t,n,r){const i=new Lf,a=new Ab(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i}}class Lb extends zp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new im(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class Ib extends Lb{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(zp.DEFAULT_UP),this.updateMatrix(),this.groundColor=new im(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const kb=new dp,Nb=new sf,Db=new sf;class Ub{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new rf(512,512),this.mapType=Iu,this.map=null,this.mapPass=null,this.matrix=new dp,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new pv,this._frameExtents=new rf(1,1),this._viewportCount=1,this._viewports=[new If(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Nb.setFromMatrixPosition(e.matrixWorld),t.position.copy(Nb),Db.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Db),t.updateMatrixWorld(),kb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kb,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(kb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Ob extends Ub{constructor(){super(new ig(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=2*Zd*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Fb extends Lb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(zp.DEFAULT_UP),this.updateMatrix(),this.target=new zp,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.map=null,this.shadow=new Ob}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const zb=new dp,Bb=new sf,Hb=new sf;class Vb extends Ub{constructor(){super(new ig(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new rf(4,2),this._viewportCount=6,this._viewports=[new If(2,1,1,1),new If(0,1,1,1),new If(3,1,1,1),new If(1,1,1,1),new If(3,0,1,1),new If(1,0,1,1)],this._cubeDirections=[new sf(1,0,0),new sf(-1,0,0),new sf(0,0,1),new sf(0,0,-1),new sf(0,1,0),new sf(0,-1,0)],this._cubeUps=[new sf(0,1,0),new sf(0,1,0),new sf(0,1,0),new sf(0,1,0),new sf(0,0,1),new sf(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Bb.setFromMatrixPosition(e.matrixWorld),n.position.copy(Bb),Hb.copy(n.position),Hb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Hb),n.updateMatrixWorld(),r.makeTranslation(-Bb.x,-Bb.y,-Bb.z),zb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zb,n.coordinateSystem,n.reversedDepth)}}class Gb extends Lb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Vb}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class jb extends eg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,a=n+e,s=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,s,o,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Wb extends Ub{constructor(){super(new jb(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Xb extends Lb{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(zp.DEFAULT_UP),this.updateMatrix(),this.target=new zp,this.shadow=new Wb}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qb extends Lb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Yb extends Lb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Zb{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new sf)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class Kb extends Lb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zb;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Jb extends bb{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,a=new wb(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(d){r?r(d):console.error(d),i.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new im).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const i in e.uniforms){const t=e.uniforms[i];switch(r.uniforms[i]={},t.type){case"t":r.uniforms[i].value=n(t.value);break;case"c":r.uniforms[i].value=(new im).setHex(t.value);break;case"v2":r.uniforms[i].value=(new rf).fromArray(t.value);break;case"v3":r.uniforms[i].value=(new sf).fromArray(t.value);break;case"v4":r.uniforms[i].value=(new If).fromArray(t.value);break;case"m3":r.uniforms[i].value=(new cf).fromArray(t.value);break;case"m4":r.uniforms[i].value=(new dp).fromArray(t.value);break;default:r.uniforms[i].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new rf).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new rf).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Jb.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:z_,SpriteMaterial:yg,RawShaderMaterial:B_,ShaderMaterial:$m,PointsMaterial:Jv,MeshPhysicalMaterial:V_,MeshStandardMaterial:H_,MeshPhongMaterial:G_,MeshToonMaterial:j_,MeshNormalMaterial:W_,MeshLambertMaterial:X_,MeshDepthMaterial:q_,MeshDistanceMaterial:Y_,MeshBasicMaterial:lm,MeshMatcapMaterial:Z_,LineDashedMaterial:K_,LineBasicMaterial:Ov,Material:om}[e]}}class Qb{static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $b extends Nm{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ex extends bb{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new wb(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(d){r?r(d):console.error(d),i.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,i=r[t],a=new Uint32Array(i).buffer;return n[t]=a,a}(e,i.buffer),s=ff(i.type,a),o=new mg(s,i.stride);return o.uuid=i.uuid,t[r]=o,o}const i=e.isInstancedBufferGeometry?new $b:new Nm,a=e.data.index;if(void 0!==a){const e=ff(a.type,a.array);i.setIndex(new vm(e,1))}const s=e.data.attributes;for(const u in s){const t=s[u];let n;if(t.isInterleavedBufferAttribute){const i=r(e.data,t.data);n=new vg(i,t.itemSize,t.offset,t.normalized)}else{const e=ff(t.type,t.array);n=new(t.isInstancedBufferAttribute?Qg:vm)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),i.setAttribute(u,n)}const o=e.data.morphAttributes;if(o)for(const u in o){const t=o[u],n=[];for(let i=0,a=t.length;i<a;i++){const a=t[i];let s;if(a.isInterleavedBufferAttribute){const t=r(e.data,a.data);s=new vg(t,a.itemSize,a.offset,a.normalized)}else{const e=ff(a.type,a.array);s=new vm(e,a.itemSize,a.normalized)}void 0!==a.name&&(s.name=a.name),n.push(s)}i.morphAttributes[u]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const e=l[u];i.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;return void 0!==c&&(i.boundingSphere=(new rp).fromJSON(c)),e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class tx extends bb{constructor(e){super(e)}load(e,t,n,r){const i=this,a=""===this.path?Qb.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new wb(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){let a=null;try{a=JSON.parse(n)}catch(o){return void 0!==r&&r(o),void console.error("THREE:ObjectLoader: Can't parse "+e+".",o.message)}const s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(a,t)},n,r)}async loadAsync(e,t){const n=""===this.path?Qb.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new wb(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),a=JSON.parse(i),s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){void 0!==t&&t(l)}),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,o,s,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,r,s,a,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),this.bindLightTargets(o),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Xy).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(e){e.isBone&&(r[e.uuid]=e)}),void 0!==e)for(let i=0,a=e.length;i<a;i++){const t=(new Jg).fromJSON(e[i],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new ex;for(let i=0,a=e.length;i<a;i++){let a;const s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;default:s.type in F_?a=F_[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new Jb;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=mb.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function a(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:ff(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new yb(t);i=new Ab(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=a(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Yg(n.data,n.width,n.height)))}r[n.uuid]=new Af(e)}else{const e=a(n.url);r[n.uuid]=new Af(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"===typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:ff(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new Ab(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.url;if(Array.isArray(a)){const e=[];for(let t=0,n=a.length;t<n;t++){const n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new Yg(r.data,r.width,r.height)))}n[r.uuid]=new Af(e)}else{const e=await i(r.url);n[r.uuid]=new Af(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){const a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const s=t[a.image],o=s.data;let l;Array.isArray(o)?(l=new og,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new Yg:new Lf,o&&(l.needsUpdate=!0)),l.source=s,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,nx)),void 0!==a.channel&&(l.channel=a.channel),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],rx),l.wrapT=n(a.wrap[1],rx)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.colorSpace&&(l.colorSpace=a.colorSpace),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,ix)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,ix)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(l.compareFunction=a.compareFunction),void 0!==a.userData&&(l.userData=a.userData),r[a.uuid]=l}return r}parseObject(e,t,n,r,i){let a,s,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function h(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new pg,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new im(e.background):a.background=h(e.background)),void 0!==e.environment&&(a.environment=h(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new fg(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new dg(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&a.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(a.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new ig(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new jb(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new qb(e.color,e.intensity);break;case"DirectionalLight":a=new Xb(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new Gb(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Yb(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Fb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new Ib(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new Kb).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),o=c(e.material),a=new Xg(s,o),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),o=c(e.material),a=new Xm(s,o);break;case"InstancedMesh":s=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;a=new sv(s,o,t),a.instanceMatrix=new Qg(new Float32Array(n.array),16),void 0!==r&&(a.instanceColor=new Qg(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":s=l(e.geometry),o=c(e.material),a=new Uv(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,o),a.geometry=s,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(e=>{let t=null,n=null;return void 0!==e.boundingBox&&(t=(new zf).fromJSON(e.boundingBox)),void 0!==e.boundingSphere&&(n=(new rp).fromJSON(e.boundingSphere)),u(u({},e),{},{boundingBox:t,boundingSphere:n})}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=h(e.matricesTexture.uuid),a._indirectTexture=h(e.indirectTexture.uuid),void 0!==e.colorsTexture&&(a._colorsTexture=h(e.colorsTexture.uuid)),void 0!==e.boundingSphere&&(a.boundingSphere=(new rp).fromJSON(e.boundingSphere)),void 0!==e.boundingBox&&(a.boundingBox=(new zf).fromJSON(e.boundingBox));break;case"LOD":a=new Ug;break;case"Line":a=new Wv(l(e.geometry),c(e.material));break;case"LineLoop":a=new Kv(l(e.geometry),c(e.material));break;case"LineSegments":a=new Zv(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new ny(l(e.geometry),c(e.material));break;case"Sprite":a=new Ig(c(e.material));break;case"Group":a=new cg;break;case"Bone":a=new qg;break;default:a=new zp}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(a.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)a.add(this.parseObject(s[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);t.target=void 0!==r?r:new zp}})}}const nx={UVMapping:fu,CubeReflectionMapping:pu,CubeRefractionMapping:mu,EquirectangularReflectionMapping:gu,EquirectangularRefractionMapping:vu,CubeUVReflectionMapping:yu},rx={RepeatWrapping:_u,ClampToEdgeWrapping:bu,MirroredRepeatWrapping:xu},ix={NearestFilter:Su,NearestMipmapNearestFilter:wu,NearestMipmapLinearFilter:Eu,LinearFilter:Au,LinearMipmapNearestFilter:Cu,LinearMipmapLinearFilter:Pu},ax=new WeakMap;class sx extends bb{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=vb.get("image-bitmap:".concat(e));if(void 0!==a)return i.manager.itemStart(e),a.then?void a.then(n=>{if(!0!==ax.has(a))return t&&t(n),i.manager.itemEnd(e),n;r&&r(ax.get(a)),i.manager.itemError(e),i.manager.itemEnd(e)}):(setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a);const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,s.signal="function"===typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const o=fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(n){return vb.add("image-bitmap:".concat(e),n),t&&t(n),i.manager.itemEnd(e),n}).catch(function(t){r&&r(t),ax.set(o,t),vb.remove("image-bitmap:".concat(e)),i.manager.itemError(e),i.manager.itemEnd(e)});vb.add("image-bitmap:".concat(e),o),i.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let ox;class lx{static getContext(){return void 0===ox&&(ox=new(window.AudioContext||window.webkitAudioContext)),ox}static setContext(e){ox=e}}class cx extends bb{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new wb(this.manager);function s(t){r?r(t):console.error(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{const n=e.slice(0);lx.getContext().decodeAudioData(n,function(e){t(e)}).catch(s)}catch(d){s(d)}},n,r)}}const ux=new dp,hx=new dp,dx=new dp;class fx{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ig,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ig,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,dx.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(Yd*t.fov*.5)/t.zoom;let a,s;hx.elements[12]=-n,ux.elements[12]=n,a=-i*t.aspect+r,s=i*t.aspect+r,dx.elements[0]=2*t.near/(s-a),dx.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(dx),a=-i*t.aspect-r,s=i*t.aspect-r,dx.elements[0]=2*t.near/(s-a),dx.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(dx)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(hx),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ux)}}class px extends ig{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class mx{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const gx=new sf,vx=new af,yx=new sf,_x=new sf,bx=new sf;class xx extends zp{constructor(){super(),this.type="AudioListener",this.context=lx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new mx}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(gx,vx,yx),_x.set(0,0,-1).applyQuaternion(vx),bx.set(0,1,0).applyQuaternion(vx),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(gx.x,e),t.positionY.linearRampToValueAtTime(gx.y,e),t.positionZ.linearRampToValueAtTime(gx.z,e),t.forwardX.linearRampToValueAtTime(_x.x,e),t.forwardY.linearRampToValueAtTime(_x.y,e),t.forwardZ.linearRampToValueAtTime(_x.z,e),t.upX.linearRampToValueAtTime(bx.x,e),t.upY.linearRampToValueAtTime(bx.y,e),t.upZ.linearRampToValueAtTime(bx.z,e)}else t.setPosition(gx.x,gx.y,gx.z),t.setOrientation(_x.x,_x.y,_x.z,bx.x,bx.y,bx.z)}}class Sx extends zp{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),"buffer"!==e.sourceType?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const wx=new sf,Mx=new af,Ex=new sf,Tx=new sf;class Ax extends Sx{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(wx,Mx,Ex),Tx.set(0,0,1).applyQuaternion(Mx);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(wx.x,e),t.positionY.linearRampToValueAtTime(wx.y,e),t.positionZ.linearRampToValueAtTime(wx.z,e),t.orientationX.linearRampToValueAtTime(Tx.x,e),t.orientationY.linearRampToValueAtTime(Tx.y,e),t.orientationZ.linearRampToValueAtTime(Tx.z,e)}else t.setPosition(wx.x,wx.y,wx.z),t.setOrientation(Tx.x,Tx.y,Tx.z)}}class Cx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Rx{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){s.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let a=0;a!==i;++a)e[t+a]=e[n+a]}_slerp(e,t,n,r){af.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const a=this._workIndex*i;af.multiplyQuaternionsFlat(e,a,e,t,e,n),af.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){const a=1-r;for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]*a+e[n+s]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]+e[n+a]*r}}}const Px="\\[\\]\\.:\\/",Lx=new RegExp("["+Px+"]","g"),Ix="[^"+Px+"]",kx="[^"+Px.replace("\\.","")+"]",Nx=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ix)+/(WCOD+)?/.source.replace("WCOD",kx)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ix)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ix)+"$"),Dx=["material","materials","bones","map"];class Ux{constructor(e,t,n){this.path=t,this.parsedPath=n||Ux.parseTrackName(t),this.node=Ux.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Ux.Composite(e,t,n):new Ux(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Lx,"")}static parseTrackName(e){const t=Nx.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Dx.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Ux.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const a=e[r];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?s=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ux.Composite=class{constructor(e,t,n){const r=n||Ux.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Ux.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ux.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ux.prototype.GetterByBindingType=[Ux.prototype._getValue_direct,Ux.prototype._getValue_array,Ux.prototype._getValue_arrayElement,Ux.prototype._getValue_toArray],Ux.prototype.SetterByBindingTypeAndVersioning=[[Ux.prototype._setValue_direct,Ux.prototype._setValue_direct_setNeedsUpdate,Ux.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ux.prototype._setValue_array,Ux.prototype._setValue_array_setNeedsUpdate,Ux.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ux.prototype._setValue_arrayElement,Ux.prototype._setValue_arrayElement_setNeedsUpdate,Ux.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ux.prototype._setValue_fromArray,Ux.prototype._setValue_fromArray_setNeedsUpdate,Ux.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Ox{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Kd(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length;let s,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=o++,t[h]=d,e.push(u);for(let e=0,t=a;e!==t;++e)i[e].push(new Ux(u,n[e],r[e]))}else if(d<l){s=e[d];const o=--l,c=e[o];t[c.uuid]=d,e[d]=c,t[h]=o,e[o]=u;for(let e=0,t=a;e!==t;++e){const t=i[e],a=t[o];let s=t[d];t[d]=a,void 0===s&&(s=new Ux(u,n[e],r[e])),t[o]=s}}else e[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=i){const a=i++,c=e[a];t[c.uuid]=l,e[l]=c,t[o]=a,e[a]=s;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[l];t[l]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<i){const s=--i,o=e[s],c=--a,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[s],i=t[c];t[l]=r,t[s]=i,t.pop()}}else{const i=--a,s=e[i];i>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,a.push(e),s.push(t),i.push(u);for(let h=c,d=o.length;h!==d;++h){const n=o[h];u[h]=new Ux(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=n,a[n]=o,a.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}}class Fx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,a=i.length,s=new Array(a),o={endingStart:Bh,endingEnd:Bh};for(let l=0;l!==a;++l){const e=i[l].createInterpolant(null);s[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Dh,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.fadeOut(t),this.fadeIn(t),!0===n){const n=this._clip.duration,r=e._clip.duration,i=r/n,a=n/r;e.warp(1,i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=i,o[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===jh)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(s);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const a=n===Uh;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(n===Nh){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&1===(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Hh,r.endingEnd=Hh):(r.endingStart=e?this.zeroSlopeAtStart?Hh:Bh:Vh,r.endingEnd=t?this.zeroSlopeAtEnd?Hh:Bh:Vh)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=i,o[0]=t,s[1]=i+e,o[1]=n,this}}const zx=new Float32Array(1);class Bx extends Wd{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let u=0;u!==i;++u){const e=r[u],i=e.name;let l=c[i];if(void 0!==l)++l.referenceCount,a[u]=l;else{if(l=a[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,i));continue}const r=t&&t._propertyBindings[u].binding.parsedPath;l=new Rx(Ux.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,i),a[u]=l}s[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,a=this._actionsByClip,s=a[i],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[i],0===Object.keys(s).length&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new ab(new Float32Array(2),new Float32Array(2),1,zx),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let a="string"===typeof e?mb.findByName(r,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:Gh),void 0!==o){const e=o.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new Fx(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"===typeof e?mb.findByName(n,e):e,a=i?i.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,i,a)}const s=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)s[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Hx extends kf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new Of(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Vx{constructor(e){this.value=e}clone(){return new Vx(void 0===this.value.clone?this.value:this.value.clone())}}let Gx=0;class jx extends Wd{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Gx++}),this.name="",this.usage=Rd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class Wx extends mg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Xx{constructor(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.normalized=a,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const qx=new dp;class Yx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new hp(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new wp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return qx.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(qx),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Kx(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(Zx),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,i=e.length;r<i;r++)Kx(e[r],this,n,t);return n.sort(Zx),n}}function Zx(e,t){return e.distance-t.distance}function Kx(e,t,n,r){let i=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(i=!1)}if(!0===i&&!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)Kx(r[e],t,n,!0)}}class Jx{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,void 0!==e.hidden&&(this._pageVisibilityHandler=Qx.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){null!==this._pageVisibilityHandler&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return null!==this._pageVisibilityHandler&&!0===this._document.hidden?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(void 0!==e?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Qx(){!1===this._document.hidden&&this.reset()}class $x{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Jd(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Jd(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class eS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class tS{constructor(e,t,n,r){tS.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const i=this.elements;return i[0]=e,i[2]=t,i[1]=n,i[3]=r,this}}const nS=new rf;class rS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rf(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rf(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=nS.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,nS).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const iS=new sf,aS=new sf,sS=new sf,oS=new sf,lS=new sf,cS=new sf,uS=new sf;class hS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){iS.subVectors(e,this.start),aS.subVectors(this.end,this.start);const n=aS.dot(aS);let r=aS.dot(iS)/n;return t&&(r=Jd(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}distanceSqToLine3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cS,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uS;const r=1e-8*1e-8;let i,a;const s=this.start,o=e.start,l=this.end,c=e.end;sS.subVectors(l,s),oS.subVectors(c,o),lS.subVectors(s,o);const u=sS.dot(sS),h=oS.dot(oS),d=oS.dot(lS);if(u<=r&&h<=r)return t.copy(s),n.copy(o),t.sub(n),t.dot(t);if(u<=r)i=0,a=d/h,a=Jd(a,0,1);else{const e=sS.dot(lS);if(h<=r)a=0,i=Jd(-e/u,0,1);else{const t=sS.dot(oS),n=u*h-t*t;i=0!==n?Jd((t*d-e*h)/n,0,1):0,a=(t*i+d)/h,a<0?(a=0,i=Jd(-e/u,0,1)):a>1&&(a=1,i=Jd((t-e)/u,0,1))}}return t.copy(s).add(sS.multiplyScalar(i)),n.copy(o).add(oS.multiplyScalar(a)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const dS=new sf;class fS extends zp{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Nm,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,o=32;a<o;a++,s++){const e=a/o*Math.PI*2,t=s/o*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Tm(r,3));const i=new Ov({fog:!1,toneMapped:!1});this.cone=new Zv(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),dS.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(dS),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const pS=new sf,mS=new dp,gS=new dp;class vS extends Zv{constructor(e){const t=yS(e),n=new Nm,r=[],i=[];for(let o=0;o<t.length;o++){const e=t[o];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(0,0,0),i.push(0,0,0))}n.setAttribute("position",new Tm(r,3)),n.setAttribute("color",new Tm(i,3));super(n,new Ov({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new im(255),s=new im(65280);this.setColors(a,s)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");gS.copy(this.root.matrixWorld).invert();for(let i=0,a=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(mS.multiplyMatrices(gS,e.matrixWorld),pS.setFromMatrixPosition(mS),r.setXYZ(a,pS.x,pS.y,pS.z),mS.multiplyMatrices(gS,e.parent.matrixWorld),pS.setFromMatrixPosition(mS),r.setXYZ(a+1,pS.x,pS.y,pS.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const n=this.geometry.getAttribute("color");for(let r=0;r<n.count;r+=2)n.setXYZ(r,e.r,e.g,e.b),n.setXYZ(r+1,t.r,t.g,t.b);return n.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function yS(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push(...yS(e.children[n]));return t}class _S extends Xm{constructor(e,t,n){super(new L_(t,4,2),new lm({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const bS=new sf,xS=new im,SS=new im;class wS extends zp{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new A_(t);r.rotateY(.5*Math.PI),this.material=new lm({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.setAttribute("color",new vm(a,3)),this.add(new Xm(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");xS.copy(this.light.color),SS.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?xS:SS;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(bS.setFromMatrixPosition(this.light.matrixWorld).negate())}}class MS extends Zv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new im(n),r=new im(r);const i=t/2,a=e/t,s=e/2,o=[],l=[];for(let u=0,h=0,d=-s;u<=t;u++,d+=a){o.push(-s,0,d,s,0,d),o.push(d,0,-s,d,0,s);const e=u===i?n:r;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new Nm;c.setAttribute("position",new Tm(o,3)),c.setAttribute("color",new Tm(l,3));super(c,new Ov({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class ES extends Zv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;i=new im(i),a=new im(a);const s=[],o=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;s.push(0,0,0),s.push(r,0,l);const u=1&c?i:a;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?i:a,l=e-e/n*c;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),i=Math.sin(n)*l,a=Math.cos(n)*l;s.push(i,0,a),o.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),i=Math.sin(n)*l,a=Math.cos(n)*l,s.push(i,0,a),o.push(t.r,t.g,t.b)}}const l=new Nm;l.setAttribute("position",new Tm(s,3)),l.setAttribute("color",new Tm(o,3));super(l,new Ov({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const TS=new sf,AS=new sf,CS=new sf;class RS extends zp{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new Nm;r.setAttribute("position",new Tm([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new Ov({fog:!1,toneMapped:!1});this.lightPlane=new Wv(r,i),this.add(this.lightPlane),r=new Nm,r.setAttribute("position",new Tm([0,0,0,0,0,1],3)),this.targetLine=new Wv(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),TS.setFromMatrixPosition(this.light.matrixWorld),AS.setFromMatrixPosition(this.light.target.matrixWorld),CS.subVectors(AS,TS),this.lightPlane.lookAt(AS),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(AS),this.targetLine.scale.z=CS.length()}}const PS=new sf,LS=new eg;class IS extends Zv{constructor(e){const t=new Nm,n=new Ov({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function s(e,t){o(e),o(t)}function o(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new Tm(r,3)),t.setAttribute("color",new Tm(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new im(16755200),c=new im(16711680),u=new im(43775),h=new im(16777215),d=new im(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,n,r,i){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap;let n,r;if(LS.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),!0===this.camera.reversedDepth)n=1,r=0;else if(this.camera.coordinateSystem===Bd)n=-1,r=1;else{if(this.camera.coordinateSystem!==Hd)throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);n=0,r=1}kS("c",t,e,LS,0,0,n),kS("t",t,e,LS,0,0,r),kS("n1",t,e,LS,-1,-1,n),kS("n2",t,e,LS,1,-1,n),kS("n3",t,e,LS,-1,1,n),kS("n4",t,e,LS,1,1,n),kS("f1",t,e,LS,-1,-1,r),kS("f2",t,e,LS,1,-1,r),kS("f3",t,e,LS,-1,1,r),kS("f4",t,e,LS,1,1,r),kS("u1",t,e,LS,.7,1.1,n),kS("u2",t,e,LS,-.7,1.1,n),kS("u3",t,e,LS,0,2,n),kS("cf1",t,e,LS,-1,0,r),kS("cf2",t,e,LS,1,0,r),kS("cf3",t,e,LS,0,-1,r),kS("cf4",t,e,LS,0,1,r),kS("cn1",t,e,LS,-1,0,n),kS("cn2",t,e,LS,1,0,n),kS("cn3",t,e,LS,0,-1,n),kS("cn4",t,e,LS,0,1,n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function kS(e,t,n,r,i,a,s){PS.set(i,a,s).unproject(r);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],PS.x,PS.y,PS.z)}}const NS=new zf;class DS extends Zv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Nm;i.setIndex(new vm(n,1)),i.setAttribute("position",new vm(r,3)),super(i,new Ov({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(void 0!==this.object&&NS.setFromObject(this.object),NS.isEmpty())return;const e=NS.min,t=NS.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class US extends Zv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Nm;r.setIndex(new vm(n,1)),r.setAttribute("position",new Tm([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Ov({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class OS extends Wv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,r=new Nm;r.setAttribute("position",new Tm([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new Ov({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const i=new Nm;i.setAttribute("position",new Tm([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new Xm(i,new lm({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const FS=new sf;let zS,BS;class HS extends zp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sf(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sf(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*i;super(),this.type="ArrowHelper",void 0===zS&&(zS=new Nm,zS.setAttribute("position",new Tm([0,0,0,0,1,0],3)),BS=new gy(.5,1,5,1),BS.translate(0,-.5,0)),this.position.copy(t),this.line=new Wv(zS,new Ov({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xm(BS,new lm({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{FS.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(FS,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class VS extends Zv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Nm;n.setAttribute("position",new Tm(t,3)),n.setAttribute("color",new Tm([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new Ov({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new im,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class GS{constructor(){this.type="ShapePath",this.color=new im,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Wy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],s=t[a],o=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],o=-o,s=t[i],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return r}const n=b_.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,a,s;const o=[];if(1===r.length)return a=r[0],s=new Xy,s.curves=a.curves,o.push(s),o;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,f=[],p=0;u[p]=void 0,f[p]=[];for(let m=0,g=r.length;m<g;m++)a=r[m],h=a.getPoints(),i=n(h),i=e?!i:i,i?(!l&&u[p]&&p++,u[p]={s:new Xy,p:h},u[p].s.curves=a.curves,l&&p++,f[p]=[]):f[p].push({h:a,p:h[0]});if(!u[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Xy;i.curves=r.curves,t.push(i)}return t}(r);if(u.length>1){let e=!1,n=0;for(let t=0,r=u.length;t<r;t++)c[t]=[];for(let r=0,i=u.length;r<i;r++){const i=f[r];for(let a=0;a<i.length;a++){const s=i[a];let o=!0;for(let i=0;i<u.length;i++)t(s.p,u[i].p)&&(r!==i&&n++,o?(o=!1,c[i].push(s)):e=!0);o&&c[r].push(s)}}n>0&&!1===e&&(f=c)}for(let m=0,g=u.length;m<g;m++){s=u[m].s,o.push(s),d=f[m];for(let e=0,t=d.length;e<t;e++)s.holes.push(d[e].h)}return o}}class jS extends Wd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){void 0!==e?(null!==this.domElement&&this.disconnect(),this.domElement=e):console.warn("THREE.Controls: connect() now requires an element.")}disconnect(){}dispose(){}update(){}}function WS(e,t,n,r){const i=function(e){switch(e){case Iu:case ku:return{byteLength:1,components:1};case Du:case Nu:case zu:return{byteLength:2,components:1};case Bu:case Hu:return{byteLength:2,components:4};case Ou:case Uu:case Fu:return{byteLength:4,components:1};case Gu:case ju:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(e,"."))}(r);switch(n){case Wu:return e*t;case Ku:case Ju:return e*t/i.components*i.byteLength;case Qu:case $u:return e*t*2/i.components*i.byteLength;case Xu:return e*t*3/i.components*i.byteLength;case qu:case th:return e*t*4/i.components*i.byteLength;case nh:case rh:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case ih:case ah:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case oh:case ch:return Math.max(e,16)*Math.max(t,8)/4;case sh:case lh:return Math.max(e,8)*Math.max(t,8)/2;case uh:case hh:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case dh:case fh:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case ph:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case mh:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case gh:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case vh:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case yh:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case _h:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case bh:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case xh:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case Sh:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case wh:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case Mh:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case Eh:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case Th:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case Ah:case Ch:case Rh:return Math.ceil(e/4)*Math.ceil(t/4)*16;case Ph:case Lh:return Math.ceil(e/4)*Math.ceil(t/4)*8;case Ih:case kh:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error("Unable to determine texture byte length for ".concat(n," format."))}class XS{static contain(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e}(e,t)}static cover(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e}(e,t)}static fill(e){return function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e}(e)}static getByteLength(e,t,n,r){return WS(e,t,n,r)}}function qS(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function YS(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const i=t.get(n);if(void 0===i)t.set(n,function(t,n){const r=t.array,i=t.usage,a=r.byteLength,s=e.createBuffer();let o;if(e.bindBuffer(n,s),e.bufferData(n,r,i),t.onUploadCallback(),r instanceof Float32Array)o=e.FLOAT;else if("undefined"!==typeof Float16Array&&r instanceof Float16Array)o=e.HALF_FLOAT;else if(r instanceof Uint16Array)o=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=e.SHORT;else if(r instanceof Uint32Array)o=e.UNSIGNED_INT;else if(r instanceof Int32Array)o=e.INT;else if(r instanceof Int8Array)o=e.BYTE;else if(r instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=e.UNSIGNED_BYTE}return{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:a}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){const i=n.array,a=n.updateRanges;if(e.bindBuffer(r,t),0===a.length)e.bufferSubData(r,0,i);else{a.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<a.length;e++){const n=a[t],r=a[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):(++t,a[t]=r)}a.length=t+1;for(let n=0,s=a.length;n<s;n++){const t=a[n];e.bufferSubData(r,t.start*i.BYTES_PER_ELEMENT,i,t.start,t.count)}n.clearUpdateRanges()}n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:sc}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=sc);const ZS={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},KS={common:{diffuse:{value:new im(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new cf},alphaMap:{value:null},alphaMapTransform:{value:new cf},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new cf}},envmap:{envMap:{value:null},envMapRotation:{value:new cf},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new cf}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new cf}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new cf},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new cf},normalScale:{value:new rf(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new cf},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new cf}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new cf}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new cf}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new im(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new im(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new cf},alphaTest:{value:0},uvTransform:{value:new cf}},sprite:{diffuse:{value:new im(16777215)},opacity:{value:1},center:{value:new rf(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new cf},alphaMap:{value:null},alphaMapTransform:{value:new cf},alphaTest:{value:0}}},JS={basic:{uniforms:Km([KS.common,KS.specularmap,KS.envmap,KS.aomap,KS.lightmap,KS.fog]),vertexShader:ZS.meshbasic_vert,fragmentShader:ZS.meshbasic_frag},lambert:{uniforms:Km([KS.common,KS.specularmap,KS.envmap,KS.aomap,KS.lightmap,KS.emissivemap,KS.bumpmap,KS.normalmap,KS.displacementmap,KS.fog,KS.lights,{emissive:{value:new im(0)}}]),vertexShader:ZS.meshlambert_vert,fragmentShader:ZS.meshlambert_frag},phong:{uniforms:Km([KS.common,KS.specularmap,KS.envmap,KS.aomap,KS.lightmap,KS.emissivemap,KS.bumpmap,KS.normalmap,KS.displacementmap,KS.fog,KS.lights,{emissive:{value:new im(0)},specular:{value:new im(1118481)},shininess:{value:30}}]),vertexShader:ZS.meshphong_vert,fragmentShader:ZS.meshphong_frag},standard:{uniforms:Km([KS.common,KS.envmap,KS.aomap,KS.lightmap,KS.emissivemap,KS.bumpmap,KS.normalmap,KS.displacementmap,KS.roughnessmap,KS.metalnessmap,KS.fog,KS.lights,{emissive:{value:new im(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ZS.meshphysical_vert,fragmentShader:ZS.meshphysical_frag},toon:{uniforms:Km([KS.common,KS.aomap,KS.lightmap,KS.emissivemap,KS.bumpmap,KS.normalmap,KS.displacementmap,KS.gradientmap,KS.fog,KS.lights,{emissive:{value:new im(0)}}]),vertexShader:ZS.meshtoon_vert,fragmentShader:ZS.meshtoon_frag},matcap:{uniforms:Km([KS.common,KS.bumpmap,KS.normalmap,KS.displacementmap,KS.fog,{matcap:{value:null}}]),vertexShader:ZS.meshmatcap_vert,fragmentShader:ZS.meshmatcap_frag},points:{uniforms:Km([KS.points,KS.fog]),vertexShader:ZS.points_vert,fragmentShader:ZS.points_frag},dashed:{uniforms:Km([KS.common,KS.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ZS.linedashed_vert,fragmentShader:ZS.linedashed_frag},depth:{uniforms:Km([KS.common,KS.displacementmap]),vertexShader:ZS.depth_vert,fragmentShader:ZS.depth_frag},normal:{uniforms:Km([KS.common,KS.bumpmap,KS.normalmap,KS.displacementmap,{opacity:{value:1}}]),vertexShader:ZS.meshnormal_vert,fragmentShader:ZS.meshnormal_frag},sprite:{uniforms:Km([KS.sprite,KS.fog]),vertexShader:ZS.sprite_vert,fragmentShader:ZS.sprite_frag},background:{uniforms:{uvTransform:{value:new cf},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ZS.background_vert,fragmentShader:ZS.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new cf}},vertexShader:ZS.backgroundCube_vert,fragmentShader:ZS.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ZS.cube_vert,fragmentShader:ZS.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ZS.equirect_vert,fragmentShader:ZS.equirect_frag},distanceRGBA:{uniforms:Km([KS.common,KS.displacementmap,{referencePosition:{value:new sf},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ZS.distanceRGBA_vert,fragmentShader:ZS.distanceRGBA_frag},shadow:{uniforms:Km([KS.lights,KS.fog,{color:{value:new im(0)},opacity:{value:1}}]),vertexShader:ZS.shadow_vert,fragmentShader:ZS.shadow_frag}};JS.physical={uniforms:Km([JS.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new cf},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new cf},clearcoatNormalScale:{value:new rf(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new cf},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new cf},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new cf},sheen:{value:0},sheenColor:{value:new im(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new cf},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new cf},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new cf},transmissionSamplerSize:{value:new rf},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new cf},attenuationDistance:{value:0},attenuationColor:{value:new im(0)},specularColor:{value:new im(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new cf},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new cf},anisotropyVector:{value:new rf},anisotropyMap:{value:null},anisotropyMapTransform:{value:new cf}}]),vertexShader:ZS.meshphysical_vert,fragmentShader:ZS.meshphysical_frag};const QS={r:0,b:0,g:0},$S=new Sp,ew=new dp;function tw(e,t,n,r,i,a,s){const o=new im(0);let l,c,u=!0===a?0:1,h=null,d=0,f=null;function p(e){let r=!0===e.isScene?e.background:null;if(r&&r.isTexture){r=(e.backgroundBlurriness>0?n:t).get(r)}return r}function m(t,n){t.getRGB(QS,Jm(e)),r.buffers.color.setClear(QS.r,QS.g,QS.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),u=t,m(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,m(o,u)},render:function(t){let n=!1;const i=p(t);null===i?m(o,u):i&&i.isColor&&(m(i,1),n=!0);const a=e.xr.getEnvironmentBlendMode();"additive"===a?r.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===a&&r.buffers.color.setClear(0,0,0,0,s),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=p(n);r&&(r.isCubeTexture||r.mapping===yu)?(void 0===c&&(c=new Xm(new Ym(1,1,1),new $m({name:"BackgroundCubeMaterial",uniforms:Zm(JS.backgroundCube.uniforms),vertexShader:JS.backgroundCube.vertexShader,fragmentShader:JS.backgroundCube.fragmentShader,side:yc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),$S.copy(n.backgroundRotation),$S.x*=-1,$S.y*=-1,$S.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&($S.y*=-1,$S.z*=-1),c.material.uniforms.envMap.value=r,c.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(ew.makeRotationFromEuler($S)),c.material.toneMapped=xf.getTransfer(r.colorSpace)!==id,h===r&&d===r.version&&f===e.toneMapping||(c.material.needsUpdate=!0,h=r,d=r.version,f=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):r&&r.isTexture&&(void 0===l&&(l=new Xm(new C_(2,2),new $m({name:"BackgroundMaterial",uniforms:Zm(JS.background.uniforms),vertexShader:JS.background.vertexShader,fragmentShader:JS.background.fragmentShader,side:vc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=r,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=xf.getTransfer(r.colorSpace)!==id,!0===r.matrixAutoUpdate&&r.updateMatrix(),l.material.uniforms.uvTransform.value.copy(r.matrix),h===r&&d===r.version&&f===e.toneMapping||(l.material.needsUpdate=!0,h=r,d=r.version,f=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function nw(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=c(null);let a=i,s=!1;function o(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],r=[],i=[];for(let a=0;a<n;a++)t[a]=0,r[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function u(){const e=a.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){d(e,0)}function d(t,n){const r=a.newAttributes,i=a.enabledAttributes,s=a.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),s[t]!==n&&(e.vertexAttribDivisor(t,n),s[t]=n)}function f(){const t=a.newAttributes,n=a.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function p(t,n,r,i,a,s,o){!0===o?e.vertexAttribIPointer(t,n,r,a,s):e.vertexAttribPointer(t,n,r,i,a,s)}function m(){g(),s=!0,a!==i&&(a=i,o(a.object))}function g(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,l,m,g){let v=!1;const y=function(t,n,i){const a=!0===i.wireframe;let s=r[t.id];void 0===s&&(s={},r[t.id]=s);let o=s[n.id];void 0===o&&(o={},s[n.id]=o);let l=o[a];void 0===l&&(l=c(e.createVertexArray()),o[a]=l);return l}(m,l,i);a!==y&&(a=y,o(a.object)),v=function(e,t,n,r){const i=a.attributes,s=t.attributes;let o=0;const l=n.getAttributes();for(const a in l){if(l[a].location>=0){const t=i[a];let n=s[a];if(void 0===n&&("instanceMatrix"===a&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===a&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;o++}}return a.attributesNum!==o||a.index!==r}(n,m,l,g),v&&function(e,t,n,r){const i={},s=t.attributes;let o=0;const l=n.getAttributes();for(const a in l){if(l[a].location>=0){let t=s[a];void 0===t&&("instanceMatrix"===a&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===a&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[a]=n,o++}}a.attributes=i,a.attributesNum=o,a.index=r}(n,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||s)&&(s=!1,function(n,r,i,a){u();const s=a.attributes,o=i.getAttributes(),l=r.defaultAttributeValues;for(const c in o){const r=o[c];if(r.location>=0){let i=s[c];if(void 0===i&&("instanceMatrix"===c&&n.instanceMatrix&&(i=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(i=n.instanceColor)),void 0!==i){const s=i.normalized,o=i.itemSize,l=t.get(i);if(void 0===l)continue;const c=l.buffer,u=l.type,f=l.bytesPerElement,m=u===e.INT||u===e.UNSIGNED_INT||i.gpuType===Uu;if(i.isInterleavedBufferAttribute){const t=i.data,l=t.stride,g=i.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)d(r.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<r.locationSize;e++)h(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)p(r.location+e,o/r.locationSize,u,s,l*f,(g+o/r.locationSize*e)*f,m)}else{if(i.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)d(r.location+e,i.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let e=0;e<r.locationSize;e++)h(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)p(r.location+e,o/r.locationSize,u,s,o*f,o/r.locationSize*e*f,m)}}else if(void 0!==l){const t=l[c];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(r.location,t);break;case 3:e.vertexAttrib3fv(r.location,t);break;case 4:e.vertexAttrib4fv(r.location,t);break;default:e.vertexAttrib1fv(r.location,t)}}}}f()}(n,i,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)l(i[e].object),delete i[e];delete n[e.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:f}}function rw(e,t,n){let r;function i(t,i,a){0!==a&&(e.drawArraysInstanced(r,t,i,a),n.update(i,r,a))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,a);let s=0;for(let t=0;t<a;t++)s+=i[t];n.update(s,r,1)},this.renderMultiDrawInstances=function(e,a,s,o){if(0===s)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)i(e[t],a[t],o[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,a,0,o,0,s);let t=0;for(let e=0;e<s;e++)t+=a[e]*o[e];n.update(t,r,1)}}}function iw(e,t,n,r){let i;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==n.precision?n.precision:"highp";const o=a(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reversedDepthBuffer&&t.has("EXT_clip_control"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:a,textureFormatReadable:function(t){return t===qu||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const i=n===zu&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==Iu&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==Fu&&!i)},precision:s,logarithmicDepthBuffer:l,reversedDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function aw(e){const t=this;let n=null,r=0,i=!1,a=!1;const s=new uv,o=new cf,l={value:null,needsUpdate:!1};function c(e,n,r,i){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const t=r+4*a,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==a;++n,l+=4)s.copy(e[n]).applyMatrix4(i,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(s,o,u){const h=s.clippingPlanes,d=s.clipIntersection,f=s.clipShadows,p=e.get(s);if(!i||null===h||0===h.length||a&&!f)a?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=a?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=c(h,o,t,u);for(let r=0;r!==t;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function sw(e){let t=new WeakMap;function n(e,t){return t===gu?e.mapping=pu:t===vu&&(e.mapping=mu),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping;if(a===gu||a===vu){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const a=i.image;if(a&&a.height>0){const s=new lg(a.height);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}const ow=[.125,.215,.35,.446,.526,.582],lw=20,cw=new jb,uw=new im;let hw=null,dw=0,fw=0,pw=!1;const mw=(1+Math.sqrt(5))/2,gw=1/mw,vw=[new sf(-mw,gw,0),new sf(mw,gw,0),new sf(-gw,0,mw),new sf(gw,0,mw),new sf(0,mw,-gw),new sf(0,mw,gw),new sf(-1,1,-1),new sf(1,1,-1),new sf(-1,1,1),new sf(1,1,1)],yw=new sf;class _w{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{size:a=256,position:s=yw}=i;hw=this._renderer.getRenderTarget(),dw=this._renderer.getActiveCubeFace(),fw=this._renderer.getActiveMipmapLevel(),pw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,r,o,s),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ww(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Sw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(hw,dw,fw),this._renderer.xr.enabled=pw,e.scissorTest=!1,xw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===pu||e.mapping===mu?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),hw=this._renderer.getRenderTarget(),dw=this._renderer.getActiveCubeFace(),fw=this._renderer.getActiveMipmapLevel(),pw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Au,minFilter:Au,generateMipmaps:!1,type:zu,format:qu,colorSpace:nd,depthBuffer:!1},r=bw(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=bw(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const a=e-4+1+ow.length;for(let s=0;s<a;s++){const a=Math.pow(2,i);n.push(a);let o=1/a;s>e-4?o=ow[s-e+4-1]:0===s&&(o=0),r.push(o);const l=1/(a-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*d),y=new Float32Array(m*f*d),_=new Float32Array(g*f*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*f*e),y.set(h,m*f*e);const i=[e,e,e,e,e,e];_.set(i,g*f*e)}const b=new Nm;b.setAttribute("position",new vm(v,p)),b.setAttribute("uv",new vm(y,m)),b.setAttribute("faceIndex",new vm(_,g)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(lw),i=new sf(0,1,0),a=new $m({name:"SphericalGaussianBlur",defines:{n:lw,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:bc,depthTest:!1,depthWrite:!1});return a}(r,e,t)}return r}_compileMaterial(e){const t=new Xm(this._lodPlanes[0],e);this._renderer.compile(t,cw)}_sceneToCubeUV(e,t,n,r,i){const a=new ig(90,1,t,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(uw),l.toneMapping=ru,l.autoClear=!1;l.state.buffers.depth.getReversed()&&(l.setRenderTarget(r),l.clearDepth(),l.setRenderTarget(null));const h=new lm({name:"PMREM.Background",side:yc,depthWrite:!1,depthTest:!1}),d=new Xm(new Ym,h);let f=!1;const p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,f=!0):(h.color.copy(uw),f=!0);for(let m=0;m<6;m++){const t=m%3;0===t?(a.up.set(0,s[m],0),a.position.set(i.x,i.y,i.z),a.lookAt(i.x+o[m],i.y,i.z)):1===t?(a.up.set(0,0,s[m]),a.position.set(i.x,i.y,i.z),a.lookAt(i.x,i.y+o[m],i.z)):(a.up.set(0,s[m],0),a.position.set(i.x,i.y,i.z),a.lookAt(i.x,i.y,i.z+o[m]));const n=this._cubeSize;xw(r,t*n,m>2?n:0,n,n),l.setRenderTarget(r),f&&l.render(d,a),l.render(e,a)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=u,l.autoClear=c,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===pu||e.mapping===mu;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ww()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Sw());const i=r?this._cubemapMaterial:this._equirectMaterial,a=new Xm(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const s=this._cubeSize;xw(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,cw)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let i=1;i<r;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=vw[(r-i-1)%vw.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Xm(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):lw;p>lw&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(lw));const m=[];let g=0;for(let _=0;_<lw;++_){const e=_/f,t=Math.exp(-e*e/2);m.push(t),0===_?g+=t:_<p&&(g+=2*t)}for(let _=0;_<m.length;_++)m[_]=m[_]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===a,s&&(u.poleAxis.value=s);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[r];xw(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(c,cw)}}function bw(e,t,n){const r=new Nf(e,t,n);return r.texture.mapping=yu,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function xw(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Sw(){return new $m({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:bc,depthTest:!1,depthWrite:!1})}function ww(){return new $m({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:bc,depthTest:!1,depthWrite:!1})}function Mw(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping,s=a===gu||a===vu,o=a===pu||a===mu;if(s||o){let a=t.get(i);const l=void 0!==a?a.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==l)return null===n&&(n=new _w(e)),a=s?n.fromEquirectangular(i,a):n.fromCubemap(i,a),a.texture.pmremVersion=i.pmremVersion,t.set(i,a),a.texture;if(void 0!==a)return a.texture;{const l=i.image;return s&&l&&l.height>0||o&&l&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)?(null===n&&(n=new _w(e)),a=s?n.fromEquirectangular(i):n.fromCubemap(i),a.texture.pmremVersion=i.pmremVersion,t.set(i,a),i.addEventListener("dispose",r),a.texture):null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Ew(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&vf("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Tw(e,t,n,r){const i={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);o.removeEventListener("dispose",s),delete i[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,i=e.attributes.position;let s=0;if(null!==r){const e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===i)return;{const e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const o=new(hf(n)?Mm:Sm)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const i in r)t.update(r[i],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function Aw(e,t,n){let r,i,a;function s(t,s,o){0!==o&&(e.drawElementsInstanced(r,s,i,t*a,o),n.update(s,r,o))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,a=e.bytesPerElement},this.render=function(t,s){e.drawElements(r,s,i,t*a),n.update(s,r,1)},this.renderInstances=s,this.renderMultiDraw=function(e,a,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,a,0,i,e,0,s);let o=0;for(let t=0;t<s;t++)o+=a[t];n.update(o,r,1)},this.renderMultiDrawInstances=function(e,o,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)s(e[t]/a,o[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(r,o,0,i,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=o[e]*c[e];n.update(t,r,1)}}}function Cw(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Rw(e,t,n){const r=new WeakMap,i=new If;return{update:function(a,s,o){const l=a.morphTargetInfluences,c=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,u=void 0!==c?c.length:0;let h=r.get(s);if(void 0===h||h.count!==u){void 0!==h&&h.texture.dispose();const d=void 0!==s.morphAttributes.position,f=void 0!==s.morphAttributes.normal,p=void 0!==s.morphAttributes.color,m=s.morphAttributes.position||[],g=s.morphAttributes.normal||[],v=s.morphAttributes.color||[];let y=0;!0===d&&(y=1),!0===f&&(y=2),!0===p&&(y=3);let _=s.attributes.position.count*y,b=1;_>t.maxTextureSize&&(b=Math.ceil(_/t.maxTextureSize),_=t.maxTextureSize);const x=new Float32Array(_*b*4*u),S=new Df(x,_,b,u);S.type=Fu,S.needsUpdate=!0;const w=4*y;for(let E=0;E<u;E++){const T=m[E],A=g[E],C=v[E],R=_*b*4*E;for(let P=0;P<T.count;P++){const L=P*w;!0===d&&(i.fromBufferAttribute(T,P),x[R+L+0]=i.x,x[R+L+1]=i.y,x[R+L+2]=i.z,x[R+L+3]=0),!0===f&&(i.fromBufferAttribute(A,P),x[R+L+4]=i.x,x[R+L+5]=i.y,x[R+L+6]=i.z,x[R+L+7]=0),!0===p&&(i.fromBufferAttribute(C,P),x[R+L+8]=i.x,x[R+L+9]=i.y,x[R+L+10]=i.z,x[R+L+11]=4===C.itemSize?i.w:1)}}function M(){S.dispose(),r.delete(s),s.removeEventListener("dispose",M)}h={count:u,texture:S,size:new rf(_,b)},r.set(s,h),s.addEventListener("dispose",M)}if(!0===a.isInstancedMesh&&null!==a.morphTexture)o.getUniforms().setValue(e,"morphTexture",a.morphTexture,n);else{let I=0;for(let N=0;N<l.length;N++)I+=l[N];const k=s.morphTargetsRelative?1:1-I;o.getUniforms().setValue(e,"morphTargetBaseInfluence",k),o.getUniforms().setValue(e,"morphTargetInfluences",l)}o.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),o.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function Pw(e,t,n,r){let i=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const o=r.render.frame,l=s.geometry,c=t.get(s,l);if(i.get(c)!==o&&(t.update(c),i.set(c,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),i.get(s)!==o&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),i.set(s,o))),s.isSkinnedMesh){const e=s.skeleton;i.get(e)!==o&&(e.update(),i.set(e,o))}return c},dispose:function(){i=new WeakMap}}}const Lw=new Lf,Iw=new hy(1,1),kw=new Df,Nw=new Of,Dw=new og,Uw=[],Ow=[],Fw=new Float32Array(16),zw=new Float32Array(9),Bw=new Float32Array(4);function Hw(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=Uw[i];if(void 0===a&&(a=new Float32Array(i),Uw[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function Vw(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Gw(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function jw(e,t){let n=Ow[t];void 0===n&&(n=new Int32Array(t),Ow[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ww(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Xw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Vw(n,t))return;e.uniform2fv(this.addr,t),Gw(n,t)}}function qw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Vw(n,t))return;e.uniform3fv(this.addr,t),Gw(n,t)}}function Yw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Vw(n,t))return;e.uniform4fv(this.addr,t),Gw(n,t)}}function Zw(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Vw(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Gw(n,t)}else{if(Vw(n,r))return;Bw.set(r),e.uniformMatrix2fv(this.addr,!1,Bw),Gw(n,r)}}function Kw(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Vw(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Gw(n,t)}else{if(Vw(n,r))return;zw.set(r),e.uniformMatrix3fv(this.addr,!1,zw),Gw(n,r)}}function Jw(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Vw(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Gw(n,t)}else{if(Vw(n,r))return;Fw.set(r),e.uniformMatrix4fv(this.addr,!1,Fw),Gw(n,r)}}function Qw(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function $w(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Vw(n,t))return;e.uniform2iv(this.addr,t),Gw(n,t)}}function eM(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Vw(n,t))return;e.uniform3iv(this.addr,t),Gw(n,t)}}function tM(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Vw(n,t))return;e.uniform4iv(this.addr,t),Gw(n,t)}}function nM(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function rM(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Vw(n,t))return;e.uniform2uiv(this.addr,t),Gw(n,t)}}function iM(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Vw(n,t))return;e.uniform3uiv(this.addr,t),Gw(n,t)}}function aM(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Vw(n,t))return;e.uniform4uiv(this.addr,t),Gw(n,t)}}function sM(e,t,n){const r=this.cache,i=n.allocateTextureUnit();let a;r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),this.type===e.SAMPLER_2D_SHADOW?(Iw.compareFunction=Md,a=Iw):a=Lw,n.setTexture2D(t||a,i)}function oM(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Nw,i)}function lM(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Dw,i)}function cM(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||kw,i)}function uM(e,t){e.uniform1fv(this.addr,t)}function hM(e,t){const n=Hw(t,this.size,2);e.uniform2fv(this.addr,n)}function dM(e,t){const n=Hw(t,this.size,3);e.uniform3fv(this.addr,n)}function fM(e,t){const n=Hw(t,this.size,4);e.uniform4fv(this.addr,n)}function pM(e,t){const n=Hw(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function mM(e,t){const n=Hw(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function gM(e,t){const n=Hw(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function vM(e,t){e.uniform1iv(this.addr,t)}function yM(e,t){e.uniform2iv(this.addr,t)}function _M(e,t){e.uniform3iv(this.addr,t)}function bM(e,t){e.uniform4iv(this.addr,t)}function xM(e,t){e.uniform1uiv(this.addr,t)}function SM(e,t){e.uniform2uiv(this.addr,t)}function wM(e,t){e.uniform3uiv(this.addr,t)}function MM(e,t){e.uniform4uiv(this.addr,t)}function EM(e,t,n){const r=this.cache,i=t.length,a=jw(n,i);Vw(r,a)||(e.uniform1iv(this.addr,a),Gw(r,a));for(let s=0;s!==i;++s)n.setTexture2D(t[s]||Lw,a[s])}function TM(e,t,n){const r=this.cache,i=t.length,a=jw(n,i);Vw(r,a)||(e.uniform1iv(this.addr,a),Gw(r,a));for(let s=0;s!==i;++s)n.setTexture3D(t[s]||Nw,a[s])}function AM(e,t,n){const r=this.cache,i=t.length,a=jw(n,i);Vw(r,a)||(e.uniform1iv(this.addr,a),Gw(r,a));for(let s=0;s!==i;++s)n.setTextureCube(t[s]||Dw,a[s])}function CM(e,t,n){const r=this.cache,i=t.length,a=jw(n,i);Vw(r,a)||(e.uniform1iv(this.addr,a),Gw(r,a));for(let s=0;s!==i;++s)n.setTexture2DArray(t[s]||kw,a[s])}class RM{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return Ww;case 35664:return Xw;case 35665:return qw;case 35666:return Yw;case 35674:return Zw;case 35675:return Kw;case 35676:return Jw;case 5124:case 35670:return Qw;case 35667:case 35671:return $w;case 35668:case 35672:return eM;case 35669:case 35673:return tM;case 5125:return nM;case 36294:return rM;case 36295:return iM;case 36296:return aM;case 35678:case 36198:case 36298:case 36306:case 35682:return sM;case 35679:case 36299:case 36307:return oM;case 35680:case 36300:case 36308:case 36293:return lM;case 36289:case 36303:case 36311:case 36292:return cM}}(t.type)}}class PM{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return uM;case 35664:return hM;case 35665:return dM;case 35666:return fM;case 35674:return pM;case 35675:return mM;case 35676:return gM;case 5124:case 35670:return vM;case 35667:case 35671:return yM;case 35668:case 35672:return _M;case 35669:case 35673:return bM;case 5125:return xM;case 36294:return SM;case 36295:return wM;case 36296:return MM;case 35678:case 36198:case 36298:case 36306:case 35682:return EM;case 35679:case 36299:case 36307:return TM;case 35680:case 36300:case 36308:case 36293:return AM;case 36289:case 36303:case 36311:case 36292:return CM}}(t.type)}}class LM{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(e,t[a.id],n)}}}const IM=/(\w+)(\])?(\[|\.)?/g;function kM(e,t){e.seq.push(t),e.map[t.id]=t}function NM(e,t,n){const r=e.name,i=r.length;for(IM.lastIndex=0;;){const a=IM.exec(r),s=IM.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===i){kM(n,void 0===c?new RM(o,e,t):new PM(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new LM(o),kM(n,e)),n=e}}}class DM{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);NM(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){const a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function UM(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let OM=0;const FM=new cf;function zM(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=(e.getShaderInfoLog(t)||"").trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let s=i;s<a;s++){const e=s+1;r.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[s]))}return r.join("\n")}(e.getShaderSource(t),r)}return i}function BM(e,t){const n=function(e){xf._getMatrix(FM,xf.workingColorSpace,e);const t="mat3( ".concat(FM.elements.map(e=>e.toFixed(4))," )");switch(xf.getTransfer(e)){case rd:return[t,"LinearTransferOETF"];case id:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return["vec4 ".concat(e,"( vec4 value ) {"),"\treturn ".concat(n[1],"( vec4( value.rgb * ").concat(n[0],", value.a ) );"),"}"].join("\n")}function HM(e,t){let n;switch(t){case iu:n="Linear";break;case au:n="Reinhard";break;case su:n="Cineon";break;case ou:n="ACESFilmic";break;case cu:n="AgX";break;case uu:n="Neutral";break;case lu:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const VM=new sf;function GM(){xf.getLuminanceCoefficients(VM);const e=VM.x.toFixed(4),t=VM.y.toFixed(4),n=VM.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","\tconst vec3 weights = vec3( ".concat(e,", ").concat(t,", ").concat(n," );"),"\treturn dot( weights, rgb );","}"].join("\n")}function jM(e){return""!==e}function WM(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function XM(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const qM=/^[ \t]*#include +<([\w\d./]+)>/gm;function YM(e){return e.replace(qM,KM)}const ZM=new Map;function KM(e,t){let n=ZS[t];if(void 0===n){const e=ZM.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=ZS[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return YM(n)}const JM=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function QM(e){return e.replace(JM,$M)}function $M(e,t,n,r){let i="";for(let a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function eE(e){let t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function tE(e,t,n,r){const i=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===pc?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===mc?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===gc&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case pu:case mu:t="ENVMAP_TYPE_CUBE";break;case yu:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===mu&&(t="ENVMAP_MODE_REFRACTION");return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case eu:t="ENVMAP_BLENDING_MULTIPLY";break;case tu:t="ENVMAP_BLENDING_MIX";break;case nu:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),f=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(jM).join("\n")}(n),p=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(jM).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(jM).join("\n"),v.length>0&&(v+="\n")):(g=[eE(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(jM).join("\n"),v=[eE(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ru?"#define TONE_MAPPING":"",n.toneMapping!==ru?ZS.tonemapping_pars_fragment:"",n.toneMapping!==ru?HM("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ZS.colorspace_pars_fragment,BM("linearToOutputTexel",n.outputColorSpace),GM(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(jM).join("\n")),s=YM(s),s=WM(s,n),s=XM(s,n),o=YM(o),o=WM(o,n),o=XM(o,n),s=QM(s),o=QM(o),!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===zd?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===zd?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const _=y+g+s,b=y+v+o,x=UM(i,i.VERTEX_SHADER,_),S=UM(i,i.FRAGMENT_SHADER,b);function w(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(m)||"",r=i.getShaderInfoLog(x)||"",a=i.getShaderInfoLog(S)||"",s=n.trim(),o=r.trim(),l=a.trim();let c=!0,u=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(c=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(i,m,x,S);else{const e=zM(i,x,"vertex"),n=zM(i,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+s+"\n"+e+"\n"+n)}else""!==s?console.warn("THREE.WebGLProgram: Program Info Log:",s):""!==o&&""!==l||(u=!1);u&&(t.diagnostics={runnable:c,programLog:s,vertexShader:{log:o,prefix:g},fragmentShader:{log:l,prefix:v}})}i.deleteShader(x),i.deleteShader(S),M=new DM(i,m),E=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),a=r.name;let s=1;r.type===e.FLOAT_MAT2&&(s=2),r.type===e.FLOAT_MAT3&&(s=3),r.type===e.FLOAT_MAT4&&(s=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(i,m)}let M,E;i.attachShader(m,x),i.attachShader(m,S),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),this.getUniforms=function(){return void 0===M&&w(this),M},this.getAttributes=function(){return void 0===E&&w(this),E};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=i.getProgramParameter(m,37297)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=OM++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=S,this}let nE=0;class rE{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new iE(e),t.set(e,n)),n}}class iE{constructor(e){this.id=nE++,this.code=e,this.usedTimes=0}}function aE(e,t,n,r,i,a,s){const o=new wp,l=new rE,c=new Set,u=[],h=i.logarithmicDepthBuffer,d=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return c.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(a,o,u,g,v){const y=g.fog,_=v.geometry,b=a.isMeshStandardMaterial?g.environment:null,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),S=x&&x.mapping===yu?x.image.height:null,w=p[a.type];null!==a.precision&&(f=i.getMaxPrecision(a.precision),f!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",f,"instead."));const M=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,E=void 0!==M?M.length:0;let T,A,C,R,P=0;if(void 0!==_.morphAttributes.position&&(P=1),void 0!==_.morphAttributes.normal&&(P=2),void 0!==_.morphAttributes.color&&(P=3),w){const e=JS[w];T=e.vertexShader,A=e.fragmentShader}else T=a.vertexShader,A=a.fragmentShader,l.update(a),C=l.getVertexShaderID(a),R=l.getFragmentShaderID(a);const L=e.getRenderTarget(),I=e.state.buffers.depth.getReversed(),k=!0===v.isInstancedMesh,N=!0===v.isBatchedMesh,D=!!a.map,U=!!a.matcap,O=!!x,F=!!a.aoMap,z=!!a.lightMap,B=!!a.bumpMap,H=!!a.normalMap,V=!!a.displacementMap,G=!!a.emissiveMap,j=!!a.metalnessMap,W=!!a.roughnessMap,X=a.anisotropy>0,q=a.clearcoat>0,Y=a.dispersion>0,Z=a.iridescence>0,K=a.sheen>0,J=a.transmission>0,Q=X&&!!a.anisotropyMap,$=q&&!!a.clearcoatMap,ee=q&&!!a.clearcoatNormalMap,te=q&&!!a.clearcoatRoughnessMap,ne=Z&&!!a.iridescenceMap,re=Z&&!!a.iridescenceThicknessMap,ie=K&&!!a.sheenColorMap,ae=K&&!!a.sheenRoughnessMap,se=!!a.specularMap,oe=!!a.specularColorMap,le=!!a.specularIntensityMap,ce=J&&!!a.transmissionMap,ue=J&&!!a.thicknessMap,he=!!a.gradientMap,de=!!a.alphaMap,fe=a.alphaTest>0,pe=!!a.alphaHash,me=!!a.extensions;let ge=ru;a.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(ge=e.toneMapping));const ve={shaderID:w,shaderType:a.type,shaderName:a.name,vertexShader:T,fragmentShader:A,defines:a.defines,customVertexShaderID:C,customFragmentShaderID:R,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,batching:N,batchingColor:N&&null!==v._colorsTexture,instancing:k,instancingColor:k&&null!==v.instanceColor,instancingMorph:k&&null!==v.morphTexture,supportsVertexTextures:d,outputColorSpace:null===L?e.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:nd,alphaToCoverage:!!a.alphaToCoverage,map:D,matcap:U,envMap:O,envMapMode:O&&x.mapping,envMapCubeUVHeight:S,aoMap:F,lightMap:z,bumpMap:B,normalMap:H,displacementMap:d&&V,emissiveMap:G,normalMapObjectSpace:H&&a.normalMapType===$h,normalMapTangentSpace:H&&a.normalMapType===Qh,metalnessMap:j,roughnessMap:W,anisotropy:X,anisotropyMap:Q,clearcoat:q,clearcoatMap:$,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:Y,iridescence:Z,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:K,sheenColorMap:ie,sheenRoughnessMap:ae,specularMap:se,specularColorMap:oe,specularIntensityMap:le,transmission:J,transmissionMap:ce,thicknessMap:ue,gradientMap:he,opaque:!1===a.transparent&&a.blending===xc&&!1===a.alphaToCoverage,alphaMap:de,alphaTest:fe,alphaHash:pe,combine:a.combine,mapUv:D&&m(a.map.channel),aoMapUv:F&&m(a.aoMap.channel),lightMapUv:z&&m(a.lightMap.channel),bumpMapUv:B&&m(a.bumpMap.channel),normalMapUv:H&&m(a.normalMap.channel),displacementMapUv:V&&m(a.displacementMap.channel),emissiveMapUv:G&&m(a.emissiveMap.channel),metalnessMapUv:j&&m(a.metalnessMap.channel),roughnessMapUv:W&&m(a.roughnessMap.channel),anisotropyMapUv:Q&&m(a.anisotropyMap.channel),clearcoatMapUv:$&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:ee&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:re&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:ie&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:ae&&m(a.sheenRoughnessMap.channel),specularMapUv:se&&m(a.specularMap.channel),specularColorMapUv:oe&&m(a.specularColorMap.channel),specularIntensityMapUv:le&&m(a.specularIntensityMap.channel),transmissionMapUv:ce&&m(a.transmissionMap.channel),thicknessMapUv:ue&&m(a.thicknessMap.channel),alphaMapUv:de&&m(a.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(H||X),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!_.attributes.uv&&(D||de),fog:!!y,useFog:!0===a.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===a.flatShading&&!1===a.wireframe,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:h,reversedDepthBuffer:I,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:E,morphTextureStride:P,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:D&&!0===a.map.isVideoTexture&&xf.getTransfer(a.map.colorSpace)===id,decodeVideoTextureEmissive:G&&!0===a.emissiveMap.isVideoTexture&&xf.getTransfer(a.emissiveMap.colorSpace)===id,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===_c,flipSided:a.side===yc,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:me&&!0===a.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(me&&!0===a.extensions.multiDraw||N)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return ve.vertexUv1s=c.has(1),ve.vertexUv2s=c.has(2),ve.vertexUv3s=c.has(3),c.clear(),ve},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.supportsVertexTextures&&o.enable(0);t.instancing&&o.enable(1);t.instancingColor&&o.enable(2);t.instancingMorph&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);t.batching&&o.enable(19);t.dispersion&&o.enable(20);t.batchingColor&&o.enable(21);t.gradientMap&&o.enable(22);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.reversedDepthBuffer&&o.enable(4);t.skinning&&o.enable(5);t.morphTargets&&o.enable(6);t.morphNormals&&o.enable(7);t.morphColors&&o.enable(8);t.premultipliedAlpha&&o.enable(9);t.shadowMapEnabled&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);t.decodeVideoTextureEmissive&&o.enable(20);t.alphaToCoverage&&o.enable(21);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=JS[t];n=Qm.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=u.length;e<i;e++){const t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new tE(e,n,t,a),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function sE(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function oE(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function lE(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function cE(){const e=[];let t=0;const n=[],r=[],i=[];function a(n,r,i,a,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?r.push(u):!0===s.transparent?i.push(u):n.push(u)},unshift:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?r.unshift(u):!0===s.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||oE),r.length>1&&r.sort(t||lE),i.length>1&&i.sort(t||lE)}}}function uE(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new cE,e.set(t,[i])):n>=r.length?(i=new cE,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function hE(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new sf,color:new im};break;case"SpotLight":n={position:new sf,direction:new sf,color:new im,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new sf,color:new im,distance:0,decay:0};break;case"HemisphereLight":n={direction:new sf,skyColor:new im,groundColor:new im};break;case"RectAreaLight":n={color:new im,position:new sf,halfWidth:new sf,halfHeight:new sf}}return e[t.id]=n,n}}}let dE=0;function fE(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function pE(e){const t=new hE,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rf};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rf,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let o=0;o<9;o++)r.probe.push(new sf);const i=new sf,a=new dp,s=new dp;return{setup:function(i){let a=0,s=0,o=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,c=0,u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,y=0;i.sort(fE);for(let e=0,b=i.length;e<b;e++){const _=i[e],b=_.color,x=_.intensity,S=_.distance,w=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)a+=b.r*x,s+=b.g*x,o+=b.b*x;else if(_.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(_.sh.coefficients[e],x);y++}else if(_.isDirectionalLight){const e=t.get(_);if(e.color.copy(_.color).multiplyScalar(_.intensity),_.castShadow){const e=_.shadow,t=n.get(_);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=w,r.directionalShadowMatrix[l]=_.shadow.matrix,f++}r.directional[l]=e,l++}else if(_.isSpotLight){const e=t.get(_);e.position.setFromMatrixPosition(_.matrixWorld),e.color.copy(b).multiplyScalar(x),e.distance=S,e.coneCos=Math.cos(_.angle),e.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),e.decay=_.decay,r.spot[u]=e;const i=_.shadow;if(_.map&&(r.spotLightMap[g]=_.map,g++,i.updateMatrices(_),_.castShadow&&v++),r.spotLightMatrix[u]=i.matrix,_.castShadow){const e=n.get(_);e.shadowIntensity=i.intensity,e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,r.spotShadow[u]=e,r.spotShadowMap[u]=w,m++}u++}else if(_.isRectAreaLight){const e=t.get(_);e.color.copy(b).multiplyScalar(x),e.halfWidth.set(.5*_.width,0,0),e.halfHeight.set(0,.5*_.height,0),r.rectArea[h]=e,h++}else if(_.isPointLight){const e=t.get(_);if(e.color.copy(_.color).multiplyScalar(_.intensity),e.distance=_.distance,e.decay=_.decay,_.castShadow){const e=_.shadow,t=n.get(_);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[c]=t,r.pointShadowMap[c]=w,r.pointShadowMatrix[c]=_.shadow.matrix,p++}r.point[c]=e,c++}else if(_.isHemisphereLight){const e=t.get(_);e.skyColor.copy(_.color).multiplyScalar(x),e.groundColor.copy(_.groundColor).multiplyScalar(x),r.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=KS.LTC_FLOAT_1,r.rectAreaLTC2=KS.LTC_FLOAT_2):(r.rectAreaLTC1=KS.LTC_HALF_1,r.rectAreaLTC2=KS.LTC_HALF_2)),r.ambient[0]=a,r.ambient[1]=s,r.ambient[2]=o;const _=r.hash;_.directionalLength===l&&_.pointLength===c&&_.spotLength===u&&_.rectAreaLength===h&&_.hemiLength===d&&_.numDirectionalShadows===f&&_.numPointShadows===p&&_.numSpotShadows===m&&_.numSpotMaps===g&&_.numLightProbes===y||(r.directional.length=l,r.spot.length=u,r.rectArea.length=h,r.point.length=c,r.hemi.length=d,r.directionalShadow.length=f,r.directionalShadowMap.length=f,r.pointShadow.length=p,r.pointShadowMap.length=p,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=f,r.pointShadowMatrix.length=p,r.spotLightMatrix.length=m+g-v,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=v,r.numLightProbes=y,_.directionalLength=l,_.pointLength=c,_.spotLength=u,_.rectAreaLength=h,_.hemiLength=d,_.numDirectionalShadows=f,_.numPointShadows=p,_.numSpotShadows=m,_.numSpotMaps=g,_.numLightProbes=y,r.version=dE++)},setupView:function(e,t){let n=0,o=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,f=e.length;d<f;d++){const t=e[d];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),i.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),i.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(t.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(t.isPointLight){const e=r.point[o];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),o++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),u++}}},state:r}}function mE(e){const t=new pE(e),n=[],r=[];const i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function gE(e){let t=new WeakMap;return{get:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=t.get(n);let a;return void 0===i?(a=new mE(e),t.set(n,[a])):r>=i.length?(a=new mE(e),i.push(a)):a=i[r],a},dispose:function(){t=new WeakMap}}}function vE(e,t,n){let r=new pv;const i=new rf,a=new rf,s=new If,o=new q_({depthPacking:Zh}),l=new Y_,c={},u=n.maxTextureSize,h={[vc]:yc,[yc]:vc,[_c]:_c},d=new $m({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new rf},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new Nm;p.setAttribute("position",new vm(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Xm(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pc;let v=this.type;function y(n,r){const a=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Nf(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,d,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,f,m,null)}function _(t,n,r,i){let a=null;const s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const e=a.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=a.clone(),r[t]=i,n.addEventListener("dispose",x)),a=i}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=i===gc?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],a.alphaMap=n.alphaMap,a.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial){e.properties.get(a).light=r}return a}function b(n,i,a,s,o){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===gc)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],h=l[u.materialIndex];if(h&&h.visible){const t=_(n,h,s,o);n.onBeforeShadow(e,n,i,a,r,t,u),e.renderBufferDirect(a,null,r,t,n,u),n.onAfterShadow(e,n,i,a,r,t,u)}}}else if(l.visible){const t=_(n,l,s,o);n.onBeforeShadow(e,n,i,a,r,t,null),e.renderBufferDirect(a,null,r,t,n,null),n.onAfterShadow(e,n,i,a,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],i,a,s,o)}function x(e){e.target.removeEventListener("dispose",x);for(const t in c){const n=c[t],r=e.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(bc),!0===d.buffers.depth.getReversed()?d.buffers.color.setClear(0,0,0,0):d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const f=v!==gc&&this.type===gc,p=v===gc&&this.type!==gc;for(let m=0,g=t.length;m<g;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const h=c.getFrameExtents();if(i.multiply(h),a.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(a.x=Math.floor(u/h.x),i.x=a.x*h.x,c.mapSize.x=a.x),i.y>u&&(a.y=Math.floor(u/h.y),i.y=a.y*h.y,c.mapSize.y=a.y)),null===c.map||!0===f||!0===p){const e=this.type!==gc?{minFilter:Su,magFilter:Su}:{};null!==c.map&&c.map.dispose(),c.map=new Nf(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),d.viewport(s),c.updateMatrices(l,e),r=c.getFrustum(),b(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===gc&&y(c,o),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}const yE={[Xc]:qc,[Yc]:Qc,[Kc]:$c,[Zc]:Jc,[qc]:Xc,[Qc]:Yc,[$c]:Kc,[Jc]:Zc};function _E(e,t){const n=new function(){let t=!1;const n=new If;let r=null;const i=new If(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){!0===o&&(t*=s,r*=s,a*=s),n.set(t,r,a,s),!1===i.equals(n)&&(e.clearColor(t,r,a,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,i=null,a=null,s=null;return{setReversed:function(e){if(r!==e){const n=t.get("EXT_clip_control");e?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),r=e;const i=s;s=null,this.setClear(i)}},getReversed:function(){return r},setTest:function(t){t?B(e.DEPTH_TEST):H(e.DEPTH_TEST)},setMask:function(t){i===t||n||(e.depthMask(t),i=t)},setFunc:function(t){if(r&&(t=yE[t]),a!==t){switch(t){case Xc:e.depthFunc(e.NEVER);break;case qc:e.depthFunc(e.ALWAYS);break;case Yc:e.depthFunc(e.LESS);break;case Zc:e.depthFunc(e.LEQUAL);break;case Kc:e.depthFunc(e.EQUAL);break;case Jc:e.depthFunc(e.GEQUAL);break;case Qc:e.depthFunc(e.GREATER);break;case $c:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}a=t}},setLocked:function(e){n=e},setClear:function(t){s!==t&&(r&&(t=1-t),e.clearDepth(t),s=t)},reset:function(){n=!1,i=null,a=null,s=null,r=!1}}},i=new function(){let t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?B(e.STENCIL_TEST):H(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){r===t&&i===n&&a===s||(e.stencilFunc(t,n,s),r=t,i=n,a=s)},setOp:function(t,n,r){s===t&&o===n&&l===r||(e.stencilOp(t,n,r),s=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null}}},a=new WeakMap,s=new WeakMap;let o={},l={},c=new WeakMap,u=[],h=null,d=!1,f=null,p=null,m=null,g=null,v=null,y=null,_=null,b=new im(0,0,0),x=0,S=!1,w=null,M=null,E=null,T=null,A=null;const C=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,P=0;const L=e.getParameter(e.VERSION);-1!==L.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(L)[1]),R=P>=1):-1!==L.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),R=P>=2);let I=null,k={};const N=e.getParameter(e.SCISSOR_BOX),D=e.getParameter(e.VIEWPORT),U=(new If).fromArray(N),O=(new If).fromArray(D);function F(t,n,r,i){const a=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return s}const z={};function B(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function H(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}z[e.TEXTURE_2D]=F(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=F(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[e.TEXTURE_2D_ARRAY]=F(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=F(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),i.setClear(0),B(e.DEPTH_TEST),r.setFunc(Zc),W(!1),X(uc),B(e.CULL_FACE),j(bc);const V={[Tc]:e.FUNC_ADD,[Ac]:e.FUNC_SUBTRACT,[Cc]:e.FUNC_REVERSE_SUBTRACT};V[Rc]=e.MIN,V[Pc]=e.MAX;const G={[Lc]:e.ZERO,[Ic]:e.ONE,[kc]:e.SRC_COLOR,[Dc]:e.SRC_ALPHA,[Hc]:e.SRC_ALPHA_SATURATE,[zc]:e.DST_COLOR,[Oc]:e.DST_ALPHA,[Nc]:e.ONE_MINUS_SRC_COLOR,[Uc]:e.ONE_MINUS_SRC_ALPHA,[Bc]:e.ONE_MINUS_DST_COLOR,[Fc]:e.ONE_MINUS_DST_ALPHA,[Vc]:e.CONSTANT_COLOR,[Gc]:e.ONE_MINUS_CONSTANT_COLOR,[jc]:e.CONSTANT_ALPHA,[Wc]:e.ONE_MINUS_CONSTANT_ALPHA};function j(t,n,r,i,a,s,o,l,c,u){if(t!==bc){if(!1===d&&(B(e.BLEND),d=!0),t===Ec)a=a||n,s=s||r,o=o||i,n===p&&a===v||(e.blendEquationSeparate(V[n],V[a]),p=n,v=a),r===m&&i===g&&s===y&&o===_||(e.blendFuncSeparate(G[r],G[i],G[s],G[o]),m=r,g=i,y=s,_=o),!1!==l.equals(b)&&c===x||(e.blendColor(l.r,l.g,l.b,c),b.copy(l),x=c),f=t,S=!1;else if(t!==f||u!==S){if(p===Tc&&v===Tc||(e.blendEquation(e.FUNC_ADD),p=Tc,v=Tc),u)switch(t){case xc:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Sc:e.blendFunc(e.ONE,e.ONE);break;case wc:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case Mc:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case xc:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Sc:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case wc:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Mc:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,y=null,_=null,b.set(0,0,0),x=0,f=t,S=u}}else!0===d&&(H(e.BLEND),d=!1)}function W(t){w!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),w=t)}function X(t){t!==cc?(B(e.CULL_FACE),t!==M&&(t===uc?e.cullFace(e.BACK):t===hc?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):H(e.CULL_FACE),M=t}function q(t,n,r){t?(B(e.POLYGON_OFFSET_FILL),T===n&&A===r||(e.polygonOffset(n,r),T=n,A=r)):H(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:i},enable:B,disable:H,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=u,i=!1;if(t){r=c.get(n),void 0===r&&(r=[],c.set(n,r));const a=t.textures;if(r.length!==a.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=a.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=a.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:j,setMaterial:function(t,a){t.side===_c?H(e.CULL_FACE):B(e.CULL_FACE);let s=t.side===yc;a&&(s=!s),W(s),t.blending===xc&&!1===t.transparent?j(bc):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);const o=t.stencilWrite;i.setTest(o),o&&(i.setMask(t.stencilWriteMask),i.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),i.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?B(e.SAMPLE_ALPHA_TO_COVERAGE):H(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:W,setCullFace:X,setLineWidth:function(t){t!==E&&(R&&e.lineWidth(t),E=t)},setPolygonOffset:q,setScissorTest:function(t){t?B(e.SCISSOR_TEST):H(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+C-1),I!==t&&(e.activeTexture(t),I=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===I?e.TEXTURE0+C-1:I);let i=k[r];void 0===i&&(i={type:void 0,texture:void 0},k[r]=i),i.type===t&&i.texture===n||(I!==r&&(e.activeTexture(r),I=r),e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=k[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let r=s.get(n);void 0===r&&(r=new WeakMap,s.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=s.get(n).get(t);a.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),a.set(n,r))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},I=null,k={},l={},c=new WeakMap,u=[],h=null,d=!1,f=null,p=null,m=null,g=null,v=null,y=null,_=null,b=new im(0,0,0),x=0,S=!1,w=null,M=null,E=null,T=null,A=null,U.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),i.reset()}}}function bE(e,t,n,r,i,a,s){const o=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new rf,u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(j){}function p(e,t){return f?new OffscreenCanvas(e,t):pf("canvas")}function m(e,t,n){let r=1;const i=G(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(r*i.width),a=Math.floor(r*i.height);void 0===h&&(h=p(n,a));const s=t?p(n,a):h;s.width=n,s.height=a;return s.getContext("2d").drawImage(e,0,0,n,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),e}return e}function g(e){return e.generateMipmaps}function v(t){e.generateMipmap(t)}function y(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function _(n,r,i,a){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;if(r===e.RED&&(i===e.FLOAT&&(o=e.R32F),i===e.HALF_FLOAT&&(o=e.R16F),i===e.UNSIGNED_BYTE&&(o=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.R8UI),i===e.UNSIGNED_SHORT&&(o=e.R16UI),i===e.UNSIGNED_INT&&(o=e.R32UI),i===e.BYTE&&(o=e.R8I),i===e.SHORT&&(o=e.R16I),i===e.INT&&(o=e.R32I)),r===e.RG&&(i===e.FLOAT&&(o=e.RG32F),i===e.HALF_FLOAT&&(o=e.RG16F),i===e.UNSIGNED_BYTE&&(o=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.RG8UI),i===e.UNSIGNED_SHORT&&(o=e.RG16UI),i===e.UNSIGNED_INT&&(o=e.RG32UI),i===e.BYTE&&(o=e.RG8I),i===e.SHORT&&(o=e.RG16I),i===e.INT&&(o=e.RG32I)),r===e.RGB_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.RGB8UI),i===e.UNSIGNED_SHORT&&(o=e.RGB16UI),i===e.UNSIGNED_INT&&(o=e.RGB32UI),i===e.BYTE&&(o=e.RGB8I),i===e.SHORT&&(o=e.RGB16I),i===e.INT&&(o=e.RGB32I)),r===e.RGBA_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.RGBA8UI),i===e.UNSIGNED_SHORT&&(o=e.RGBA16UI),i===e.UNSIGNED_INT&&(o=e.RGBA32UI),i===e.BYTE&&(o=e.RGBA8I),i===e.SHORT&&(o=e.RGBA16I),i===e.INT&&(o=e.RGBA32I)),r===e.RGB&&(i===e.UNSIGNED_INT_5_9_9_9_REV&&(o=e.RGB9_E5),i===e.UNSIGNED_INT_10F_11F_11F_REV&&(o=e.R11F_G11F_B10F)),r===e.RGBA){const t=s?rd:xf.getTransfer(a);i===e.FLOAT&&(o=e.RGBA32F),i===e.HALF_FLOAT&&(o=e.RGBA16F),i===e.UNSIGNED_BYTE&&(o=t===id?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return o!==e.R16F&&o!==e.R32F&&o!==e.RG16F&&o!==e.RG32F&&o!==e.RGBA16F&&o!==e.RGBA32F||t.get("EXT_color_buffer_float"),o}function b(t,n){let r;return t?null===n||n===Ou||n===Vu?r=e.DEPTH24_STENCIL8:n===Fu?r=e.DEPTH32F_STENCIL8:n===Du&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===Ou||n===Vu?r=e.DEPTH_COMPONENT24:n===Fu?r=e.DEPTH_COMPONENT32F:n===Du&&(r=e.DEPTH_COMPONENT16),r}function x(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==Su&&e.minFilter!==Au?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function S(e){const t=e.target;t.removeEventListener("dispose",S),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=d.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&M(e),0===Object.keys(i).length&&d.delete(n)}r.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function w(t){const n=t.target;n.removeEventListener("dispose",w),function(t){const n=r.get(t);t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(n.__webglFramebuffer[r]))for(let t=0;t<n.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[r][t]);else e.deleteFramebuffer(n.__webglFramebuffer[r]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[r])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=t.textures;for(let a=0,o=i.length;a<o;a++){const t=r.get(i[a]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),r.remove(i[a])}r.remove(t)}(n)}function M(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete d.get(i)[n.__cacheKey],s.memory.textures--}let E=0;function T(t,i){const a=r.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&!0!==t.isExternalTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void k(a,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}else t.isExternalTexture&&(a.__webglTexture=t.sourceTexture?t.sourceTexture:null);n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}const A={[_u]:e.REPEAT,[bu]:e.CLAMP_TO_EDGE,[xu]:e.MIRRORED_REPEAT},C={[Su]:e.NEAREST,[wu]:e.NEAREST_MIPMAP_NEAREST,[Eu]:e.NEAREST_MIPMAP_LINEAR,[Au]:e.LINEAR,[Cu]:e.LINEAR_MIPMAP_NEAREST,[Pu]:e.LINEAR_MIPMAP_LINEAR},R={[xd]:e.NEVER,[Cd]:e.ALWAYS,[Sd]:e.LESS,[Md]:e.LEQUAL,[wd]:e.EQUAL,[Ad]:e.GEQUAL,[Ed]:e.GREATER,[Td]:e.NOTEQUAL};function P(n,a){if(a.type!==Fu||!1!==t.has("OES_texture_float_linear")||a.magFilter!==Au&&a.magFilter!==Cu&&a.magFilter!==Eu&&a.magFilter!==Pu&&a.minFilter!==Au&&a.minFilter!==Cu&&a.minFilter!==Eu&&a.minFilter!==Pu||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,A[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,A[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,A[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,C[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,C[a.minFilter]),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,R[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(a.magFilter===Su)return;if(a.minFilter!==Eu&&a.minFilter!==Pu)return;if(a.type===Fu&&!1===t.has("OES_texture_float_linear"))return;if(a.anisotropy>1||r.get(a).__currentAnisotropy){const s=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy}}}function L(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S));const i=n.source;let a=d.get(i);void 0===a&&(a={},d.set(i,a));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;const i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&M(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return r}function I(e,t,n){return Math.floor(Math.floor(e/n)/t)}function k(t,s,o){let l=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=e.TEXTURE_3D);const c=L(t,s),u=s.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);const h=r.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+o);const t=xf.getPrimaries(xf.workingColorSpace),r=s.colorSpace===ed?null:xf.getPrimaries(s.colorSpace),d=s.colorSpace===ed||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let f=m(s.image,!1,i.maxTextureSize);f=V(s,f);const p=a.convert(s.format,s.colorSpace),y=a.convert(s.type);let S,w=_(s.internalFormat,p,y,s.colorSpace,s.isVideoTexture);P(l,s);const M=s.mipmaps,E=!0!==s.isVideoTexture,T=void 0===h.__version||!0===c,A=u.dataReady,C=x(s,f);if(s.isDepthTexture)w=b(s.format===Zu,s.type),T&&(E?n.texStorage2D(e.TEXTURE_2D,1,w,f.width,f.height):n.texImage2D(e.TEXTURE_2D,0,w,f.width,f.height,0,p,y,null));else if(s.isDataTexture)if(M.length>0){E&&T&&n.texStorage2D(e.TEXTURE_2D,C,w,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)S=M[t],E?A&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,p,y,S.data):n.texImage2D(e.TEXTURE_2D,t,w,S.width,S.height,0,p,y,S.data);s.generateMipmaps=!1}else E?(T&&n.texStorage2D(e.TEXTURE_2D,C,w,f.width,f.height),A&&function(t,r,i,a){const s=t.updateRanges;if(0===s.length)n.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,i,a,r.data);else{s.sort((e,t)=>e.start-t.start);let o=0;for(let e=1;e<s.length;e++){const t=s[o],n=s[e],i=t.start+t.count,a=I(n.start,r.width,4),l=I(t.start,r.width,4);n.start<=i+1&&a===l&&I(n.start+n.count-1,r.width,4)===a?t.count=Math.max(t.count,n.start+n.count-t.start):(++o,s[o]=n)}s.length=o+1;const l=e.getParameter(e.UNPACK_ROW_LENGTH),c=e.getParameter(e.UNPACK_SKIP_PIXELS),u=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,r.width);for(let t=0,h=s.length;t<h;t++){const o=s[t],l=Math.floor(o.start/4),c=Math.ceil(o.count/4),u=l%r.width,h=Math.floor(l/r.width),d=c,f=1;e.pixelStorei(e.UNPACK_SKIP_PIXELS,u),e.pixelStorei(e.UNPACK_SKIP_ROWS,h),n.texSubImage2D(e.TEXTURE_2D,0,u,h,d,f,i,a,r.data)}t.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,l),e.pixelStorei(e.UNPACK_SKIP_PIXELS,c),e.pixelStorei(e.UNPACK_SKIP_ROWS,u)}}(s,f,p,y)):n.texImage2D(e.TEXTURE_2D,0,w,f.width,f.height,0,p,y,f.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){E&&T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,w,M[0].width,M[0].height,f.depth);for(let t=0,r=M.length;t<r;t++)if(S=M[t],s.format!==qu)if(null!==p)if(E){if(A)if(s.layerUpdates.size>0){const r=WS(S.width,S.height,s.format,s.type);for(const i of s.layerUpdates){const a=S.data.subarray(i*r/S.data.BYTES_PER_ELEMENT,(i+1)*r/S.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,i,S.width,S.height,1,p,a)}s.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,f.depth,p,S.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,w,S.width,S.height,f.depth,0,S.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else E?A&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,f.depth,p,y,S.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,w,S.width,S.height,f.depth,0,p,y,S.data)}else{E&&T&&n.texStorage2D(e.TEXTURE_2D,C,w,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)S=M[t],s.format!==qu?null!==p?E?A&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,p,S.data):n.compressedTexImage2D(e.TEXTURE_2D,t,w,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?A&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,p,y,S.data):n.texImage2D(e.TEXTURE_2D,t,w,S.width,S.height,0,p,y,S.data)}else if(s.isDataArrayTexture)if(E){if(T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,w,f.width,f.height,f.depth),A)if(s.layerUpdates.size>0){const t=WS(f.width,f.height,s.format,s.type);for(const r of s.layerUpdates){const i=f.data.subarray(r*t/f.data.BYTES_PER_ELEMENT,(r+1)*t/f.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,f.width,f.height,1,p,y,i)}s.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,p,y,f.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,w,f.width,f.height,f.depth,0,p,y,f.data);else if(s.isData3DTexture)E?(T&&n.texStorage3D(e.TEXTURE_3D,C,w,f.width,f.height,f.depth),A&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,p,y,f.data)):n.texImage3D(e.TEXTURE_3D,0,w,f.width,f.height,f.depth,0,p,y,f.data);else if(s.isFramebufferTexture){if(T)if(E)n.texStorage2D(e.TEXTURE_2D,C,w,f.width,f.height);else{let t=f.width,r=f.height;for(let i=0;i<C;i++)n.texImage2D(e.TEXTURE_2D,i,w,t,r,0,p,y,null),t>>=1,r>>=1}}else if(M.length>0){if(E&&T){const t=G(M[0]);n.texStorage2D(e.TEXTURE_2D,C,w,t.width,t.height)}for(let t=0,r=M.length;t<r;t++)S=M[t],E?A&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,p,y,S):n.texImage2D(e.TEXTURE_2D,t,w,p,y,S);s.generateMipmaps=!1}else if(E){if(T){const t=G(f);n.texStorage2D(e.TEXTURE_2D,C,w,t.width,t.height)}A&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,p,y,f)}else n.texImage2D(e.TEXTURE_2D,0,w,p,y,f);g(s)&&v(l),h.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function N(t,i,s,l,c,u){const h=a.convert(s.format,s.colorSpace),d=a.convert(s.type),f=_(s.internalFormat,h,d,s.colorSpace),p=r.get(i),m=r.get(s);if(m.__renderTarget=i,!p.__hasExternalTextures){const t=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,f,t,r,i.depth,0,h,d,null):n.texImage2D(c,u,f,t,r,0,h,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),H(i)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,m.__webglTexture,0,B(i)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,m.__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const i=n.depthTexture,a=i&&i.isDepthTexture?i.type:null,s=b(n.stencilBuffer,a),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=B(n);H(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,s,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,s,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,s,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let i=0;i<t.length;i++){const s=t[i],l=a.convert(s.format,s.colorSpace),c=a.convert(s.type),u=_(s.internalFormat,l,c,s.colorSpace),h=B(n);r&&!1===H(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,u,n.width,n.height):H(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function U(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const a=r.get(i.depthTexture);a.__renderTarget=i,a.__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),T(i.depthTexture,0);const s=a.__webglTexture,l=B(i);if(i.depthTexture.format===Yu)H(i)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(i.depthTexture.format!==Zu)throw new Error("Unknown depthTexture format");H(i)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}function O(t){const i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(i.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(i.__depthDisposeCallback&&i.__depthDisposeCallback(),e){const t=()=>{delete i.__boundDepthTexture,delete i.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),i.__depthDisposeCallback=t}i.__boundDepthTexture=e}if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");const e=t.texture.mipmaps;e&&e.length>0?U(i.__webglFramebuffer[0],t):U(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),void 0===i.__webglDepthbuffer[r])i.__webglDepthbuffer[r]=e.createRenderbuffer(),D(i.__webglDepthbuffer[r],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,a=i.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,a),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,a)}}else{const r=t.texture.mipmaps;if(r&&r.length>0?n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[0]):n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),void 0===i.__webglDepthbuffer)i.__webglDepthbuffer=e.createRenderbuffer(),D(i.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=i.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}}n.bindFramebuffer(e.FRAMEBUFFER,null)}const F=[],z=[];function B(e){return Math.min(i.maxSamples,e.samples)}function H(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function V(e,t){const n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==nd&&n!==ed&&(xf.getTransfer(n)===id?r===qu&&i===Iu||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function G(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=E;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(t,i){const a=r.get(t);!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version?k(a,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const a=r.get(t);!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version?k(a,t,i):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,s){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,s,o){if(6!==s.image.length)return;const l=L(t,s),c=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);const u=r.get(c);if(c.version!==u.__version||!0===l){n.activeTexture(e.TEXTURE0+o);const t=xf.getPrimaries(xf.workingColorSpace),r=s.colorSpace===ed?null:xf.getPrimaries(s.colorSpace),h=s.colorSpace===ed||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=s.isCompressedTexture||s.image[0].isCompressedTexture,f=s.image[0]&&s.image[0].isDataTexture,p=[];for(let e=0;e<6;e++)p[e]=d||f?f?s.image[e].image:s.image[e]:m(s.image[e],!0,i.maxCubemapSize),p[e]=V(s,p[e]);const y=p[0],b=a.convert(s.format,s.colorSpace),S=a.convert(s.type),w=_(s.internalFormat,b,S,s.colorSpace),M=!0!==s.isVideoTexture,E=void 0===u.__version||!0===l,T=c.dataReady;let A,C=x(s,y);if(P(e.TEXTURE_CUBE_MAP,s),d){M&&E&&n.texStorage2D(e.TEXTURE_CUBE_MAP,C,w,y.width,y.height);for(let t=0;t<6;t++){A=p[t].mipmaps;for(let r=0;r<A.length;r++){const i=A[r];s.format!==qu?null!==b?M?T&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,b,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,w,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,b,S,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,w,i.width,i.height,0,b,S,i.data)}}}else{if(A=s.mipmaps,M&&E){A.length>0&&C++;const t=G(p[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,C,w,t.width,t.height)}for(let t=0;t<6;t++)if(f){M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,p[t].width,p[t].height,b,S,p[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,p[t].width,p[t].height,0,b,S,p[t].data);for(let r=0;r<A.length;r++){const i=A[r].image[t].image;M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,b,S,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,w,i.width,i.height,0,b,S,i.data)}}else{M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,b,S,p[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,b,S,p[t]);for(let r=0;r<A.length;r++){const i=A[r];M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,b,S,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,w,b,S,i.image[t])}}}g(s)&&v(e.TEXTURE_CUBE_MAP),u.__version=c.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(o,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,i){const a=r.get(t);void 0!==n&&N(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&O(t)},this.setupRenderTarget=function(t){const i=t.texture,o=r.get(t),l=r.get(i);t.addEventListener("dispose",w);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,h=c.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=i.version,s.memory.textures++),u){o.__webglFramebuffer=[];for(let t=0;t<6;t++)if(i.mipmaps&&i.mipmaps.length>0){o.__webglFramebuffer[t]=[];for(let n=0;n<i.mipmaps.length;n++)o.__webglFramebuffer[t][n]=e.createFramebuffer()}else o.__webglFramebuffer[t]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){o.__webglFramebuffer=[];for(let t=0;t<i.mipmaps.length;t++)o.__webglFramebuffer[t]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,n=c.length;t<n;t++){const n=r.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===H(t)){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const r=c[n];o.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,o.__webglColorRenderbuffer[n]);const i=a.convert(r.format,r.colorSpace),s=a.convert(r.type),l=_(r.internalFormat,i,s,r.colorSpace,!0===t.isXRRenderTarget),u=B(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,o.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),D(o.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),P(e.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)N(o.__webglFramebuffer[n][r],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else N(o.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(i)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let i=0,a=c.length;i<a;i++){const a=c[i],s=r.get(a);let l=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(l,s.__webglTexture),P(l,a),N(o.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+i,l,0),g(a)&&v(l)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),P(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)N(o.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,r,n);else N(o.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,r,0);g(i)&&v(r),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let i=0,a=t.length;i<a;i++){const a=t[i];if(g(a)){const t=y(e),i=r.get(a).__webglTexture;n.bindTexture(t,i),v(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===H(t)){const i=t.textures,a=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),h=i.length>1;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer);const d=t.texture.mipmaps;d&&d.length>0?n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer[0]):n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),!0===l&&(F.length=0,z.length=0,F.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(F.push(c),z.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,z)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,F))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=N,this.useMultisampledRTT=H}function xE(e,t){return{convert:function(n){let r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ed;const a=xf.getTransfer(i);if(n===Iu)return e.UNSIGNED_BYTE;if(n===Bu)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Hu)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Gu)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===ju)return e.UNSIGNED_INT_10F_11F_11F_REV;if(n===ku)return e.BYTE;if(n===Nu)return e.SHORT;if(n===Du)return e.UNSIGNED_SHORT;if(n===Uu)return e.INT;if(n===Ou)return e.UNSIGNED_INT;if(n===Fu)return e.FLOAT;if(n===zu)return e.HALF_FLOAT;if(n===Wu)return e.ALPHA;if(n===Xu)return e.RGB;if(n===qu)return e.RGBA;if(n===Yu)return e.DEPTH_COMPONENT;if(n===Zu)return e.DEPTH_STENCIL;if(n===Ku)return e.RED;if(n===Ju)return e.RED_INTEGER;if(n===Qu)return e.RG;if(n===$u)return e.RG_INTEGER;if(n===th)return e.RGBA_INTEGER;if(n===nh||n===rh||n===ih||n===ah)if(a===id){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===nh)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===rh)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===ih)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ah)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===nh)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===rh)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ih)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ah)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===sh||n===oh||n===lh||n===ch){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===sh)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===oh)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===lh)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ch)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===uh||n===hh||n===dh){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===uh||n===hh)return a===id?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===dh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===fh||n===ph||n===mh||n===gh||n===vh||n===yh||n===_h||n===bh||n===xh||n===Sh||n===wh||n===Mh||n===Eh||n===Th){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===fh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===ph)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===mh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===gh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===vh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===yh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===_h)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===bh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===xh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Sh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===wh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Mh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Eh)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Th)return a===id?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Ah||n===Ch||n===Rh){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===Ah)return a===id?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Ch)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Rh)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Ph||n===Lh||n===Ih||n===kh){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===Ph)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Lh)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Ih)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===kh)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Vu?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class SE{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(null===this.texture){const n=new dy(e.texture);e.depthNear===t.depthNear&&e.depthFar===t.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new $m({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Xm(new C_(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class wE extends Wd{constructor(e,t){super();const n=this;let r=null,i=1,a=null,s="local-floor",o=1,l=null,c=null,u=null,h=null,d=null,f=null;const p="undefined"!==typeof XRWebGLBinding,m=new SE,g={},v=t.getContextAttributes();let y=null,_=null;const b=[],x=[],S=new rf;let w=null;const M=new ig;M.viewport=new If;const E=new ig;E.viewport=new If;const T=[M,E],A=new px;let C=null,R=null;function P(e){const t=x.indexOf(e.inputSource);if(-1===t)return;const n=b[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function L(){r.removeEventListener("select",P),r.removeEventListener("selectstart",P),r.removeEventListener("selectend",P),r.removeEventListener("squeeze",P),r.removeEventListener("squeezestart",P),r.removeEventListener("squeezeend",P),r.removeEventListener("end",L),r.removeEventListener("inputsourceschange",I);for(let e=0;e<b.length;e++){const t=x[e];null!==t&&(x[e]=null,b[e].disconnect(t))}C=null,R=null,m.reset();for(const e in g)delete g[e];e.setRenderTarget(y),d=null,h=null,u=null,r=null,_=null,O.stop(),n.isPresenting=!1,e.setPixelRatio(w),e.setSize(S.width,S.height,!1),n.dispatchEvent({type:"sessionend"})}function I(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=x.indexOf(n);r>=0&&(x[r]=null,b[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=x.indexOf(n);if(-1===r){for(let e=0;e<b.length;e++){if(e>=x.length){x.push(n),r=e;break}if(null===x[e]){x[e]=n,r=e;break}}if(-1===r)break}const i=b[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=b[e];return void 0===t&&(t=new hg,b[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=b[e];return void 0===t&&(t=new hg,b[e]=t),t.getGripSpace()},this.getHand=function(e){let t=b[e];return void 0===t&&(t=new hg,b[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return null===u&&p&&(u=new XRWebGLBinding(r,t)),u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){y=e.getRenderTarget(),r.addEventListener("select",P),r.addEventListener("selectstart",P),r.addEventListener("selectend",P),r.addEventListener("squeeze",P),r.addEventListener("squeezestart",P),r.addEventListener("squeezeend",P),r.addEventListener("end",L),r.addEventListener("inputsourceschange",I),!0!==v.xrCompatible&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(S);if(p&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,a=null,s=null;v.depth&&(s=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=v.stencil?Zu:Yu,a=v.stencil?Vu:Ou);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:i};u=this.getBinding(),h=u.createProjectionLayer(o),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new Nf(h.textureWidth,h.textureHeight,{format:qu,type:Iu,depthTexture:new hy(h.textureWidth,h.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}else{const n={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),_=new Nf(d.framebufferWidth,d.framebufferHeight,{format:qu,type:Iu,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:!1===d.ignoreDepthValues,resolveStencilBuffer:!1===d.ignoreDepthValues})}_.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await r.requestReferenceSpace(s),O.setContext(r),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};const k=new sf,N=new sf;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==m.texture&&(m.depthNear>0&&(t=m.depthNear),m.depthFar>0&&(n=m.depthFar)),A.near=E.near=M.near=t,A.far=E.far=M.far=n,C===A.near&&R===A.far||(r.updateRenderState({depthNear:A.near,depthFar:A.far}),C=A.near,R=A.far),A.layers.mask=6|e.layers.mask,M.layers.mask=3&A.layers.mask,E.layers.mask=5&A.layers.mask;const i=e.parent,a=A.cameras;D(A,i);for(let r=0;r<a.length;r++)D(a[r],i);2===a.length?function(e,t,n){k.setFromMatrixPosition(t.matrixWorld),N.setFromMatrixPosition(n.matrixWorld);const r=k.distanceTo(N),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(a[8]+1)/a[0],d=s*u,f=s*h,p=r/(-u+h),m=p*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=s+p,n=o+p,i=d-m,a=f+(r-m),u=l*o/n*t,h=c*o/n*t;e.projectionMatrix.makePerspective(i,a,u,h,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(A,M,E):A.projectionMatrix.copy(M.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Zd*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,A,i)},this.getCamera=function(){return A},this.getFoveation=function(){if(null!==h||null!==d)return o},this.setFoveation=function(e){o=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==m.texture},this.getDepthSensingMesh=function(){return m.getMesh(A)},this.getCameraTexture=function(e){return g[e]};let U=null;const O=new qS;O.setAnimationLoop(function(t,i){if(c=i.getViewerPose(l||a),f=i,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(_,d.framebuffer),e.setRenderTarget(_));let i=!1;t.length!==A.cameras.length&&(A.cameras.length=0,i=!0);for(let n=0;n<t.length;n++){const r=t[n];let a=null;if(null!==d)a=d.getViewport(r);else{const t=u.getViewSubImage(h,r);a=t.viewport,0===n&&(e.setRenderTargetTextures(_,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(_))}let s=T[n];void 0===s&&(s=new ig,s.layers.enable(n),s.viewport=new If,T[n]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===n&&(A.matrix.copy(s.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===i&&A.cameras.push(s)}const a=r.enabledFeatures;if(a&&a.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&p){u=n.getBinding();const e=u.getDepthInformation(t[0]);e&&e.isValid&&e.texture&&m.init(e,r.renderState)}if(a&&a.includes("camera-access")&&p){e.state.unbindTexture(),u=n.getBinding();for(let e=0;e<t.length;e++){const n=t[e].camera;if(n){let e=g[n];e||(e=new dy,g[n]=e);const t=u.getCameraImage(n);e.sourceTexture=t}}}}for(let e=0;e<b.length;e++){const t=x[e],n=b[e];null!==t&&void 0!==n&&n.update(t,i,l||a)}U&&U(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),f=null}),this.setAnimationLoop=function(e){U=e},this.dispose=function(){}}}const ME=new Sp,EE=new dp;function TE(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,r.side===yc&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),r.side===yc&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const i=t.get(r),a=i.envMap,s=i.envMapRotation;a&&(e.envMap.value=a,ME.copy(s),ME.x*=-1,ME.y*=-1,ME.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(ME.y*=-1,ME.z*=-1),e.envMapRotation.value.setFromMatrix4(EE.makeRotationFromEuler(ME)),e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Jm(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,s,o){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===yc&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,o)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,s):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function AE(e,t,n,r){let i={},a={},s=[];const o=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,r){const i=e.value,a=t+"_"+n;if(void 0===r[a])return r[a]="number"===typeof i||"boolean"===typeof i?i:i.clone(),!0;{const e=r[a];if("number"===typeof i||"boolean"===typeof i){if(e!==i)return r[a]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let d=i[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const r=16;for(let a=0,s=t.length;a<s;a++){const e=Array.isArray(t[a])?t[a]:[t[a]];for(let t=0,i=e.length;t<i;t++){const i=e[t],a=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=a.length;e<t;e++){const t=c(a[e]),s=n%r,o=s%t.boundary,l=s+o;n+=o,0!==l&&r-l<t.storage&&(n+=r-l),i.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,n+=t.storage}}}const i=n%r;i>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const f=h.program;r.updateUBOMapping(n,f);const p=t.render.frame;a[n.id]!==p&&(!function(t){const n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let i=0,s=r.length;i<s;i++){const t=Array.isArray(r[i])?r[i]:[r[i]];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!0===l(r,i,n,a)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let a=0;a<n.length;a++){const s=n[a],o=c(s);"number"===typeof s||"boolean"===typeof s?(r.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):s.isMatrix3?(r.__data[0]=s.elements[0],r.__data[1]=s.elements[1],r.__data[2]=s.elements[2],r.__data[3]=0,r.__data[4]=s.elements[3],r.__data[5]=s.elements[4],r.__data[6]=s.elements[5],r.__data[7]=0,r.__data[8]=s.elements[6],r.__data[9]=s.elements[7],r.__data[10]=s.elements[8],r.__data[11]=0):(s.toArray(r.__data,i),i+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=p)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);s=[],i={},a={}}}}class CE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=mf(),context:n=null,depth:r=!0,stencil:i=!1,alpha:a=!1,antialias:s=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1,reversedDepthBuffer:h=!1}=e;let d;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=a;const f=new Uint32Array(4),p=new Int32Array(4);let m=null,g=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ru,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const _=this;let b=!1;this._outputColorSpace=td;let x=0,S=0,w=null,M=-1,E=null;const T=new If,A=new If;let C=null;const R=new im(0);let P=0,L=t.width,I=t.height,k=1,N=null,D=null;const U=new If(0,0,L,I),O=new If(0,0,L,I);let F=!1;const z=new pv;let B=!1,H=!1;const V=new dp,G=new sf,j=new If,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let X=!1;function q(){return null===w?k:1}let Y,Z,K,J,Q,$,ee,te,ne,re,ie,ae,se,oe,le,ce,ue,he,de,fe,pe,me,ge,ve,ye=n;function _e(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(sc)),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",we,!1),t.addEventListener("webglcontextcreationerror",Me,!1),null===ye){const t="webgl2";if(ye=_e(t,e),null===ye)throw _e(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ve){throw console.error("THREE.WebGLRenderer: "+Ve.message),Ve}function be(){Y=new Ew(ye),Y.init(),me=new xE(ye,Y),Z=new iw(ye,Y,e,me),K=new _E(ye,Y),Z.reversedDepthBuffer&&h&&K.buffers.depth.setReversed(!0),J=new Cw(ye),Q=new sE,$=new bE(ye,Y,K,Q,Z,me,J),ee=new sw(_),te=new Mw(_),ne=new YS(ye),ge=new nw(ye,ne),re=new Tw(ye,ne,J,ge),ie=new Pw(ye,re,ne,J),de=new Rw(ye,Z,$),ce=new aw(Q),ae=new aE(_,ee,te,Y,Z,ge,ce),se=new TE(_,Q),oe=new uE,le=new gE(Y),he=new tw(_,ee,te,K,ie,d,o),ue=new vE(_,ie,Z),ve=new AE(ye,J,Z,K),fe=new rw(ye,Y,J),pe=new Aw(ye,Y,J),J.programs=ae.programs,_.capabilities=Z,_.extensions=Y,_.properties=Q,_.renderLists=oe,_.shadowMap=ue,_.state=K,_.info=J}be();const xe=new wE(_,ye);function Se(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const e=J.autoReset,t=ue.enabled,n=ue.autoUpdate,r=ue.needsUpdate,i=ue.type;be(),J.autoReset=e,ue.enabled=t,ue.autoUpdate=n,ue.needsUpdate=r,ue.type=i}function Me(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ee(e){const t=e.target;t.removeEventListener("dispose",Ee),function(e){(function(e){const t=Q.get(e).programs;void 0!==t&&(t.forEach(function(e){ae.releaseProgram(e)}),e.isShaderMaterial&&ae.releaseShaderCache(e))})(e),Q.remove(e)}(t)}function Te(e,t,n){!0===e.transparent&&e.side===_c&&!1===e.forceSinglePass?(e.side=yc,e.needsUpdate=!0,Ue(e,t,n),e.side=vc,e.needsUpdate=!0,Ue(e,t,n),e.side=_c):Ue(e,t,n)}this.xr=xe,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const e=Y.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Y.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(e){void 0!==e&&(k=e,this.setSize(L,I,!1))},this.getSize=function(e){return e.set(L,I)},this.setSize=function(e,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];xe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=e,I=n,t.width=Math.floor(e*k),t.height=Math.floor(n*k),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(L*k,I*k).floor()},this.setDrawingBufferSize=function(e,n,r){L=e,I=n,k=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(T)},this.getViewport=function(e){return e.copy(U)},this.setViewport=function(e,t,n,r){e.isVector4?U.set(e.x,e.y,e.z,e.w):U.set(e,t,n,r),K.viewport(T.copy(U).multiplyScalar(k).round())},this.getScissor=function(e){return e.copy(O)},this.setScissor=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),K.scissor(A.copy(O).multiplyScalar(k).round())},this.getScissorTest=function(){return F},this.setScissorTest=function(e){K.setScissorTest(F=e)},this.setOpaqueSort=function(e){N=e},this.setTransparentSort=function(e){D=e},this.getClearColor=function(e){return e.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor(...arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha(...arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==w){const t=w.texture.format;e=t===th||t===$u||t===Ju}if(e){const e=w.texture.type,t=e===Iu||e===Ou||e===Du||e===Vu||e===Bu||e===Hu,n=he.getClearColor(),r=he.getClearAlpha(),i=n.r,a=n.g,s=n.b;t?(f[0]=i,f[1]=a,f[2]=s,f[3]=r,ye.clearBufferuiv(ye.COLOR,0,f)):(p[0]=i,p[1]=a,p[2]=s,p[3]=r,ye.clearBufferiv(ye.COLOR,0,p))}else n|=ye.COLOR_BUFFER_BIT}e&&(n|=ye.DEPTH_BUFFER_BIT),t&&(n|=ye.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ye.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",we,!1),t.removeEventListener("webglcontextcreationerror",Me,!1),he.dispose(),oe.dispose(),le.dispose(),Q.dispose(),ee.dispose(),te.dispose(),ie.dispose(),ge.dispose(),ve.dispose(),ae.dispose(),xe.dispose(),xe.removeEventListener("sessionstart",Ce),xe.removeEventListener("sessionend",Re),Pe.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=W);const s=i.isMesh&&i.matrixWorld.determinant()<0,o=function(e,t,n,r,i){!0!==t.isScene&&(t=W);$.resetTextureUnits();const a=t.fog,s=r.isMeshStandardMaterial?t.environment:null,o=null===w?_.outputColorSpace:!0===w.isXRRenderTarget?w.texture.colorSpace:nd,l=(r.isMeshStandardMaterial?te:ee).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color;let p=ru;r.toneMapped&&(null!==w&&!0!==w.isXRRenderTarget||(p=_.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,y=Q.get(r),b=g.state.lights;if(!0===B&&(!0===H||e!==E)){const t=e===E&&r.id===M;ce.setState(r,e,t)}let x=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputColorSpace!==o||i.isBatchedMesh&&!1===y.batching?x=!0:i.isBatchedMesh||!0!==y.batching?i.isBatchedMesh&&!0===y.batchingColor&&null===i.colorTexture||i.isBatchedMesh&&!1===y.batchingColor&&null!==i.colorTexture||i.isInstancedMesh&&!1===y.instancing?x=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?x=!0:i.isSkinnedMesh||!0!==y.skinning?i.isInstancedMesh&&!0===y.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===y.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===y.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===y.instancingMorph&&null!==i.morphTexture||y.envMap!==l||!0===r.fog&&y.fog!==a?x=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ce.numPlanes&&y.numIntersection===ce.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==f||y.toneMapping!==p||y.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:x=!0:(x=!0,y.__version=r.version);let S=y.currentProgram;!0===x&&(S=Ue(r,t,i));let T=!1,A=!1,C=!1;const R=S.getUniforms(),P=y.uniforms;K.useProgram(S.program)&&(T=!0,A=!0,C=!0);r.id!==M&&(M=r.id,A=!0);if(T||E!==e){K.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),R.setValue(ye,"projectionMatrix",e.projectionMatrix),R.setValue(ye,"viewMatrix",e.matrixWorldInverse);const t=R.map.cameraPosition;void 0!==t&&t.setValue(ye,G.setFromMatrixPosition(e.matrixWorld)),Z.logarithmicDepthBuffer&&R.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&R.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),E!==e&&(E=e,A=!0,C=!0)}if(i.isSkinnedMesh){R.setOptional(ye,i,"bindMatrix"),R.setOptional(ye,i,"bindMatrixInverse");const e=i.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),R.setValue(ye,"boneTexture",e.boneTexture,$))}i.isBatchedMesh&&(R.setOptional(ye,i,"batchingTexture"),R.setValue(ye,"batchingTexture",i._matricesTexture,$),R.setOptional(ye,i,"batchingIdTexture"),R.setValue(ye,"batchingIdTexture",i._indirectTexture,$),R.setOptional(ye,i,"batchingColorTexture"),null!==i._colorsTexture&&R.setValue(ye,"batchingColorTexture",i._colorsTexture,$));const L=n.morphAttributes;void 0===L.position&&void 0===L.normal&&void 0===L.color||de.update(i,n,S);(A||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,R.setValue(ye,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(P.envMapIntensity.value=t.environmentIntensity);A&&(R.setValue(ye,"toneMappingExposure",_.toneMappingExposure),y.needsLights&&(D=C,(N=P).ambientLightColor.needsUpdate=D,N.lightProbe.needsUpdate=D,N.directionalLights.needsUpdate=D,N.directionalLightShadows.needsUpdate=D,N.pointLights.needsUpdate=D,N.pointLightShadows.needsUpdate=D,N.spotLights.needsUpdate=D,N.spotLightShadows.needsUpdate=D,N.rectAreaLights.needsUpdate=D,N.hemisphereLights.needsUpdate=D),a&&!0===r.fog&&se.refreshFogUniforms(P,a),se.refreshMaterialUniforms(P,r,k,I,g.state.transmissionRenderTarget[e.id]),DM.upload(ye,Oe(y),P,$));var N,D;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(DM.upload(ye,Oe(y),P,$),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&R.setValue(ye,"center",i.center);if(R.setValue(ye,"modelViewMatrix",i.modelViewMatrix),R.setValue(ye,"normalMatrix",i.normalMatrix),R.setValue(ye,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];ve.update(n,S),ve.bind(n,S)}}return S}(e,t,n,r,i);K.setMaterial(r,s);let l=n.index,c=1;if(!0===r.wireframe){if(l=re.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,h=n.attributes.position;let d=u.start*c,f=(u.start+u.count)*c;null!==a&&(d=Math.max(d,a.start*c),f=Math.min(f,(a.start+a.count)*c)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),f=Math.min(f,h.count));const p=f-d;if(p<0||p===1/0)return;let m;ge.setup(i,r,o,n,l);let v=fe;if(null!==l&&(m=ne.get(l),v=pe,v.setIndex(m)),i.isMesh)!0===r.wireframe?(K.setLineWidth(r.wireframeLinewidth*q()),v.setMode(ye.LINES)):v.setMode(ye.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),K.setLineWidth(e*q()),i.isLineSegments?v.setMode(ye.LINES):i.isLineLoop?v.setMode(ye.LINE_LOOP):v.setMode(ye.LINE_STRIP)}else i.isPoints?v.setMode(ye.POINTS):i.isSprite&&v.setMode(ye.TRIANGLES);if(i.isBatchedMesh)if(null!==i._multiDrawInstances)vf("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),v.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances);else if(Y.get("WEBGL_multi_draw"))v.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else{const e=i._multiDrawStarts,t=i._multiDrawCounts,n=i._multiDrawCount,a=l?ne.get(l).bytesPerElement:1,s=Q.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)s.setValue(ye,"_gl_DrawID",r),v.render(e[r]/a,t[r])}else if(i.isInstancedMesh)v.renderInstances(d,p,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(d,p,t)}else v.render(d,p)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),g=le.get(n),g.init(t),y.push(g),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),g.setupLights();const r=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const a=t[i];Te(a,n,e),r.add(a)}else Te(t,n,e),r.add(t)}),g=y.pop(),r},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.compile(e,t,n);return new Promise(t=>{function n(){r.forEach(function(e){Q.get(e).currentProgram.isReady()&&r.delete(e)}),0!==r.size?setTimeout(n,10):t(e)}null!==Y.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Ae=null;function Ce(){Pe.stop()}function Re(){Pe.start()}const Pe=new qS;function Le(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){r&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V);const t=ie.update(e),i=e.material;i.visible&&m.push(e,t,i,n,j.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||z.intersectsObject(e))){const t=ie.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),j.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),j.copy(t.boundingSphere.center)),j.applyMatrix4(e.matrixWorld).applyMatrix4(V)),Array.isArray(i)){const r=t.groups;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i[s.materialIndex];o&&o.visible&&m.push(e,t,o,n,j.z,s)}}else i.visible&&m.push(e,t,i,n,j.z,null)}const i=e.children;for(let a=0,s=i.length;a<s;a++)Le(i[a],t,n,r)}function Ie(e,t,n,r){const i=e.opaque,a=e.transmissive,s=e.transparent;g.setupLightsView(n),!0===B&&ce.setGlobalState(_.clippingPlanes,n),r&&K.viewport(T.copy(r)),i.length>0&&Ne(i,t,n),a.length>0&&Ne(a,t,n),s.length>0&&Ne(s,t,n),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function ke(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[r.id]&&(g.state.transmissionRenderTarget[r.id]=new Nf(1,1,{generateMipmaps:!0,type:Y.has("EXT_color_buffer_half_float")||Y.has("EXT_color_buffer_float")?zu:Iu,minFilter:Pu,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:xf.workingColorSpace}));const a=g.state.transmissionRenderTarget[r.id],s=r.viewport||T;a.setSize(s.z*_.transmissionResolutionScale,s.w*_.transmissionResolutionScale);const o=_.getRenderTarget(),l=_.getActiveCubeFace(),c=_.getActiveMipmapLevel();_.setRenderTarget(a),_.getClearColor(R),P=_.getClearAlpha(),P<1&&_.setClearColor(16777215,.5),_.clear(),X&&he.render(n);const u=_.toneMapping;_.toneMapping=ru;const h=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),g.setupLightsView(r),!0===B&&ce.setGlobalState(_.clippingPlanes,r),Ne(e,n,r),$.updateMultisampleRenderTarget(a),$.updateRenderTargetMipmap(a),!1===Y.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let i=0,a=t.length;i<a;i++){const a=t[i],s=a.object,o=a.geometry,l=a.material,c=a.group;if(l.side===_c&&s.layers.test(r.layers)){const t=l.side;l.side=yc,l.needsUpdate=!0,De(s,n,r,o,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&($.updateMultisampleRenderTarget(a),$.updateRenderTargetMipmap(a))}_.setRenderTarget(o,l,c),_.setClearColor(R,P),void 0!==h&&(r.viewport=h),_.toneMapping=u}function Ne(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){const a=e[i],s=a.object,o=a.geometry,l=a.group;let c=a.material;!0===c.allowOverride&&null!==r&&(c=r),s.layers.test(n.layers)&&De(s,t,n,o,c,l)}}function De(e,t,n,r,i,a){e.onBeforeRender(_,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(_,t,n,r,e,a),!0===i.transparent&&i.side===_c&&!1===i.forceSinglePass?(i.side=yc,i.needsUpdate=!0,_.renderBufferDirect(n,t,r,i,e,a),i.side=vc,i.needsUpdate=!0,_.renderBufferDirect(n,t,r,i,e,a),i.side=_c):_.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(_,t,n,r,i,a)}function Ue(e,t,n){!0!==t.isScene&&(t=W);const r=Q.get(e),i=g.state.lights,a=g.state.shadowsArray,s=i.state.version,o=ae.getParameters(e,i.state,a,t,n),l=ae.getProgramCacheKey(o);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?te:ee).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Ee),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return Fe(e,o),u}else o.uniforms=ae.getUniforms(e),e.onBeforeCompile(o,_),u=ae.acquireProgram(o,l),c.set(l,u),r.uniforms=o.uniforms;const h=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ce.uniform),Fe(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function Oe(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=DM.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Fe(e,t){const n=Q.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Pe.setAnimationLoop(function(e){Ae&&Ae(e)}),"undefined"!==typeof self&&Pe.setContext(self),this.setAnimationLoop=function(e){Ae=e,xe.setAnimationLoop(e),null===e?Pe.stop():Pe.start()},xe.addEventListener("sessionstart",Ce),xe.addEventListener("sessionend",Re),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===xe.enabled&&!0===xe.isPresenting&&(!0===xe.cameraAutoUpdate&&xe.updateCamera(t),t=xe.getCamera()),!0===e.isScene&&e.onBeforeRender(_,e,t,w),g=le.get(e,y.length),g.init(t),y.push(g),V.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(V,Bd,t.reversedDepth),H=this.localClippingEnabled,B=ce.init(this.clippingPlanes,H),m=oe.get(e,v.length),m.init(),v.push(m),!0===xe.enabled&&!0===xe.isPresenting){const e=_.xr.getDepthSensingMesh();null!==e&&Le(e,t,-1/0,_.sortObjects)}Le(e,t,0,_.sortObjects),m.finish(),!0===_.sortObjects&&m.sort(N,D),X=!1===xe.enabled||!1===xe.isPresenting||!1===xe.hasDepthSensing(),X&&he.addToRenderList(m,e),this.info.render.frame++,!0===B&&ce.beginShadows();const n=g.state.shadowsArray;ue.render(n,e,t),!0===B&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=m.opaque,i=m.transmissive;if(g.setupLights(),t.isArrayCamera){const n=t.cameras;if(i.length>0)for(let t=0,a=n.length;t<a;t++){ke(r,i,e,n[t])}X&&he.render(e);for(let t=0,r=n.length;t<r;t++){const r=n[t];Ie(m,e,r,r.viewport)}}else i.length>0&&ke(r,i,e,t),X&&he.render(e),Ie(m,e,t);null!==w&&0===S&&($.updateMultisampleRenderTarget(w),$.updateRenderTargetMipmap(w)),!0===e.isScene&&e.onAfterRender(_,e,t),ge.resetDefaultState(),M=-1,E=null,y.pop(),y.length>0?(g=y[y.length-1],!0===B&&ce.setGlobalState(_.clippingPlanes,g.state.camera)):g=null,v.pop(),m=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(e,t,n){const r=Q.get(e);r.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===r.__autoAllocateDepthBuffer&&(r.__useRenderToTexture=!1),Q.get(e.texture).__webglTexture=t,Q.get(e.depthTexture).__webglTexture=r.__autoAllocateDepthBuffer?void 0:n,r.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){const n=Q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const ze=ye.createFramebuffer();this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;w=e,x=t,S=n;let r=!0,i=null,a=!1,s=!1;if(e){const o=Q.get(e);if(void 0!==o.__useDefaultFramebuffer)K.bindFramebuffer(ye.FRAMEBUFFER,null),r=!1;else if(void 0===o.__webglFramebuffer)$.setupRenderTarget(e);else if(o.__hasExternalTextures)$.rebindTextures(e,Q.get(e.texture).__webglTexture,Q.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(o.__boundDepthTexture!==t){if(null!==t&&Q.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=Q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],a=!0):i=e.samples>0&&!1===$.useMultisampledRTT(e)?Q.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,T.copy(e.viewport),A.copy(e.scissor),C=e.scissorTest}else T.copy(U).multiplyScalar(k).floor(),A.copy(O).multiplyScalar(k).floor(),C=F;0!==n&&(i=ze);if(K.bindFramebuffer(ye.FRAMEBUFFER,i)&&r&&K.drawBuffers(e,i),K.viewport(T),K.scissor(A),K.setScissorTest(C),a){const r=Q.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(s){const r=t;for(let t=0;t<e.textures.length;t++){const i=Q.get(e.textures[t]);ye.framebufferTextureLayer(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0+t,i.__webglTexture,n,r)}}else if(null!==e&&0!==n){const t=Q.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,t.__webglTexture,n)}M=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,s){let o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(l=l[s]),l){K.bindFramebuffer(ye.FRAMEBUFFER,l);try{const s=e.textures[o],l=s.format,c=s.type;if(!Z.textureFormatReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Z.textureTypeReadable(c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&(e.textures.length>1&&ye.readBuffer(ye.COLOR_ATTACHMENT0+o),ye.readPixels(t,n,r,i,me.convert(l),me.convert(c),a))}finally{const e=null!==w?Q.get(w).__webglFramebuffer:null;K.bindFramebuffer(ye.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,i,a,s){let o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(l=l[s]),l){if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i){K.bindFramebuffer(ye.FRAMEBUFFER,l);const s=e.textures[o],c=s.format,u=s.type;if(!Z.textureFormatReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Z.textureTypeReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const h=ye.createBuffer();ye.bindBuffer(ye.PIXEL_PACK_BUFFER,h),ye.bufferData(ye.PIXEL_PACK_BUFFER,a.byteLength,ye.STREAM_READ),e.textures.length>1&&ye.readBuffer(ye.COLOR_ATTACHMENT0+o),ye.readPixels(t,n,r,i,me.convert(c),me.convert(u),0);const d=null!==w?Q.get(w).__webglFramebuffer:null;K.bindFramebuffer(ye.FRAMEBUFFER,d);const f=ye.fenceSync(ye.SYNC_GPU_COMMANDS_COMPLETE,0);return ye.flush(),await function(e,t,n){return new Promise(function(r,i){setTimeout(function a(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:i();break;case e.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:r()}},n)})}(ye,f,4),ye.bindBuffer(ye.PIXEL_PACK_BUFFER,h),ye.getBufferSubData(ye.PIXEL_PACK_BUFFER,0,a),ye.deleteBuffer(h),ye.deleteSync(f),a}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),a=Math.floor(e.image.height*r),s=null!==t?t.x:0,o=null!==t?t.y:0;$.setTexture2D(e,0),ye.copyTexSubImage2D(ye.TEXTURE_2D,n,0,0,s,o,i,a),K.unbindTexture()};const Be=ye.createFramebuffer(),He=ye.createFramebuffer();this.copyTextureToTexture=function(e,t){let n,r,i,a,s,o,l,c,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null===p&&(0!==f?(vf("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),p=f,f=0):p=0);const m=e.isCompressedTexture?e.mipmaps[p]:e.image;if(null!==h)n=h.max.x-h.min.x,r=h.max.y-h.min.y,i=h.isBox3?h.max.z-h.min.z:1,a=h.min.x,s=h.min.y,o=h.isBox3?h.min.z:0;else{const t=Math.pow(2,-f);n=Math.floor(m.width*t),r=Math.floor(m.height*t),i=e.isDataArrayTexture?m.depth:e.isData3DTexture?Math.floor(m.depth*t):1,a=0,s=0,o=0}null!==d?(l=d.x,c=d.y,u=d.z):(l=0,c=0,u=0);const g=me.convert(t.format),v=me.convert(t.type);let y;t.isData3DTexture?($.setTexture3D(t,0),y=ye.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?($.setTexture2DArray(t,0),y=ye.TEXTURE_2D_ARRAY):($.setTexture2D(t,0),y=ye.TEXTURE_2D),ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,t.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,t.unpackAlignment);const _=ye.getParameter(ye.UNPACK_ROW_LENGTH),b=ye.getParameter(ye.UNPACK_IMAGE_HEIGHT),x=ye.getParameter(ye.UNPACK_SKIP_PIXELS),S=ye.getParameter(ye.UNPACK_SKIP_ROWS),w=ye.getParameter(ye.UNPACK_SKIP_IMAGES);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,m.width),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,m.height),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,a),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,s),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,o);const M=e.isDataArrayTexture||e.isData3DTexture,E=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const h=Q.get(e),d=Q.get(t),m=Q.get(h.__renderTarget),g=Q.get(d.__renderTarget);K.bindFramebuffer(ye.READ_FRAMEBUFFER,m.__webglFramebuffer),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let v=0;v<i;v++)M&&(ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Q.get(e).__webglTexture,f,o+v),ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,Q.get(t).__webglTexture,p,u+v)),ye.blitFramebuffer(a,s,n,r,l,c,n,r,ye.DEPTH_BUFFER_BIT,ye.NEAREST);K.bindFramebuffer(ye.READ_FRAMEBUFFER,null),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else if(0!==f||e.isRenderTargetTexture||Q.has(e)){const h=Q.get(e),d=Q.get(t);K.bindFramebuffer(ye.READ_FRAMEBUFFER,Be),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,He);for(let e=0;e<i;e++)M?ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,h.__webglTexture,f,o+e):ye.framebufferTexture2D(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,h.__webglTexture,f),E?ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,d.__webglTexture,p,u+e):ye.framebufferTexture2D(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,d.__webglTexture,p),0!==f?ye.blitFramebuffer(a,s,n,r,l,c,n,r,ye.COLOR_BUFFER_BIT,ye.NEAREST):E?ye.copyTexSubImage3D(y,p,l,c,u+e,a,s,n,r):ye.copyTexSubImage2D(y,p,l,c,a,s,n,r);K.bindFramebuffer(ye.READ_FRAMEBUFFER,null),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else E?e.isDataTexture||e.isData3DTexture?ye.texSubImage3D(y,p,l,c,u,n,r,i,g,v,m.data):t.isCompressedArrayTexture?ye.compressedTexSubImage3D(y,p,l,c,u,n,r,i,g,m.data):ye.texSubImage3D(y,p,l,c,u,n,r,i,g,v,m):e.isDataTexture?ye.texSubImage2D(ye.TEXTURE_2D,p,l,c,n,r,g,v,m.data):e.isCompressedTexture?ye.compressedTexSubImage2D(ye.TEXTURE_2D,p,l,c,m.width,m.height,g,m.data):ye.texSubImage2D(ye.TEXTURE_2D,p,l,c,n,r,g,v,m);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,_),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,b),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,x),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,S),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,w),0===p&&t.generateMipmaps&&ye.generateMipmap(y),K.unbindTexture()},this.initRenderTarget=function(e){void 0===Q.get(e).__webglFramebuffer&&$.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?$.setTextureCube(e,0):e.isData3DTexture?$.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?$.setTexture2DArray(e,0):$.setTexture2D(e,0),K.unbindTexture()},this.resetState=function(){x=0,S=0,w=null,K.reset(),ge.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Bd}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=xf._getDrawingBufferColorSpace(e),t.unpackColorSpace=xf._getUnpackColorSpace()}}var RE=n(443);const PE=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(r,i,a);return a},{useSyncExternalStoreWithSelector:LE}=RE,IE=e=>e;const kE=(e,t)=>{const n=(e=>e?PE(e):PE)(e),i=function(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:IE,n=arguments.length>2?arguments[2]:void 0;const i=LE(e.subscribe,e.getState,e.getInitialState,t,n);return r.useDebugValue(i),i}(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(i,n),i},NE=[];function DE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function UE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const s of NE)if(DE(t,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:t,equal:r.equal,remove:()=>{const e=NE.indexOf(i);-1!==e&&NE.splice(e,1)},promise:(a=e,"object"===typeof a&&"function"===typeof a.then?e:e(...t)).then(e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(e=>i.error=e)};var a;if(NE.push(i),!n)throw i.promise}var OE=n(16),FE=n.n(OE),zE=n(784),BE=n(579);(()=>{var e,t;return"undefined"!=typeof window&&((null==(e=window.document)?void 0:e.createElement)||"ReactNative"===(null==(t=window.navigator)?void 0:t.product))})()?r.useLayoutEffect:r.useEffect;function HE(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){const e=HE(r,t,n);if(e)return e;r=t?null:r.sibling}}function VE(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(h){return e}}const GE=VE(r.createContext(null));class jE extends r.Component{render(){return r.createElement(GE.Provider,{value:this._reactInternals},this.props.children)}}function WE(){const e=r.useContext(GE);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=r.useId();return r.useMemo(()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=HE(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}const XE=Symbol.for("react.context"),qE=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===XE;function YE(){const e=function(){const e=WE(),[t]=r.useState(()=>new Map);t.clear();let n=e;for(;n;){const e=n.type;qE(e)&&e!==GE&&!t.has(e)&&t.set(e,r.use(VE(e))),n=n.return}return t}();return r.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>i=>r.createElement(t,null,r.createElement(n.Provider,u(u({},i),{},{value:e.get(n)}))),e=>r.createElement(jE,u({},e))),[e])}const ZE=["params"];function KE(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}i.act;const JE=e=>e&&e.isOrthographicCamera,QE=e=>null!=e&&("string"===typeof e||"number"===typeof e||e.isColor),$E=((e,t)=>"undefined"!==typeof window&&((null==(e=window.document)?void 0:e.createElement)||"ReactNative"===(null==(t=window.navigator)?void 0:t.product)))()?r.useLayoutEffect:r.useEffect;function eT(e){const t=r.useRef(e);return $E(()=>{t.current=e},[e]),t}function tT(e){let{set:t}=e;return $E(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}const nT=(e=>((e=class extends r.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}).getDerivedStateFromError=()=>({error:!0}),e))();function rT(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}function iT(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()}const aT={obj:e=>e===Object(e)&&!aT.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,nul:e=>null===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:r="reference",strict:i=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(aT.str(e)||aT.num(e)||aT.boo(e))return e===t;const a=aT.obj(e);if(a&&"reference"===r)return e===t;const s=aT.arr(e);if(s&&"reference"===n)return e===t;if((s||a)&&e===t)return!0;let o;for(o in e)if(!(o in t))return!1;if(a&&"shallow"===n&&"shallow"===r){for(o in i?t:e)if(!aT.equ(e[o],t[o],{strict:i,objects:"reference"}))return!1}else for(o in i?t:e)if(e[o]!==t[o])return!1;if(aT.und(o)){if(s&&0===e.length&&0===t.length)return!0;if(a&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function sT(e){const t={nodes:{},materials:{},meshes:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}const oT=["children","key","ref"];function lT(e){const t={};for(const n in e)oT.includes(n)||(t[n]=e[n]);return t}function cT(e,t,n,r){const i=e;let a=null==i?void 0:i.__r3f;return a||(a={root:t,type:n,parent:null,children:[],props:lT(r),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=a)),a}function uT(e,t){if(!t.includes("-"))return{root:e,key:t,target:e[t]};if(t in e)return{root:e,key:t,target:e[t]};let n=e;const r=t.split("-");for(const i of r){if("object"!==typeof n||null===n){if(void 0!==n){return{root:n,key:r.slice(r.indexOf(i)).join("-"),target:void 0}}return{root:e,key:t,target:void 0}}e=n,n=n[t=i]}return{root:e,key:t,target:n}}const hT=/-\d+$/;function dT(e,t){if(aT.str(t.props.attach)){if(hT.test(t.props.attach)){const n=t.props.attach.replace(hT,""),{root:r,key:i}=uT(e.object,n);Array.isArray(r[i])||(r[i]=[])}const{root:n,key:r}=uT(e.object,t.props.attach);t.previousAttach=n[r],n[r]=t.object}else aT.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function fT(e,t){if(aT.str(t.props.attach)){const{root:n,key:r}=uT(e.object,t.props.attach),i=t.previousAttach;void 0===i?delete n[r]:n[r]=i}else null==t.previousAttach||t.previousAttach(e.object,t.object);delete t.previousAttach}const pT=[...oT,"args","dispose","attach","object","onUpdate","dispose"],mT=new Map;function gT(e){let t=mT.get(e.constructor);try{t||(t=new e.constructor,mT.set(e.constructor,t))}catch(d){}return t}const vT=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],yT=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function _T(e,t){var n;const r=e.__r3f,i=r&&KE(r).getState(),a=null==r?void 0:r.eventCount;for(const o in t){let n=t[o];if(pT.includes(o))continue;if(r&&yT.test(o)){"function"===typeof n?r.handlers[o]=n:delete r.handlers[o],r.eventCount=Object.keys(r.handlers).length;continue}if(void 0===n)continue;let{root:a,key:l,target:c}=uT(e,o);if(void 0===c&&("object"!==typeof a||null===a))throw Error('R3F: Cannot set "'.concat(o,'". Ensure it is an object before setting "').concat(l,'".'));if(c instanceof wp&&n instanceof wp)c.mask=n.mask;else if(c instanceof im&&QE(n))c.set(n);else if(null!==c&&"object"===typeof c&&"function"===typeof c.set&&"function"===typeof c.copy&&null!=n&&n.constructor&&c.constructor===n.constructor)c.copy(n);else if(null!==c&&"object"===typeof c&&"function"===typeof c.set&&Array.isArray(n))"function"===typeof c.fromArray?c.fromArray(n):c.set(...n);else if(null!==c&&"object"===typeof c&&"function"===typeof c.set&&"number"===typeof n)"function"===typeof c.setScalar?c.setScalar(n):c.set(n);else{var s;a[l]=n,i&&!i.linear&&vT.includes(l)&&null!=(s=a[l])&&s.isTexture&&a[l].format===qu&&a[l].type===Iu&&(a[l].colorSpace=td)}}if(null!=r&&r.parent&&null!=i&&i.internal&&null!=(n=r.object)&&n.isObject3D&&a!==r.eventCount){const e=r.object,t=i.internal.interaction.indexOf(e);t>-1&&i.internal.interaction.splice(t,1),r.eventCount&&null!==e.raycast&&i.internal.interaction.push(e)}return r&&void 0===r.props.attach&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&bT(r),e}function bT(e){var t;if(!e.parent)return;null==e.props.onUpdate||e.props.onUpdate(e.object);const n=null==(t=e.root)||null==t.getState?void 0:t.getState();n&&0===n.internal.frames&&n.invalidate()}function xT(e,t){e.manual||(JE(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix())}const ST=e=>null==e?void 0:e.isObject3D;function wT(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function MT(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function ET(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){const r=e.eventObject.__r3f;if(n.hovered.delete(wT(e)),null!=r&&r.eventCount){const n=r.handlers,i=u(u({},e),{},{intersections:t});null==n.onPointerOut||n.onPointerOut(i),null==n.onPointerLeave||n.onPointerLeave(i)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))})}}return function(a){const{onPointerMissed:s,internal:o}=e.getState();o.lastEvent.current=a;const l="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,h=function(t,n){const r=e.getState(),i=new Set,a=[],s=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<s.length;e++){const t=iT(s[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let o=s.flatMap(function(e){const n=iT(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r}).sort((e,t)=>{const n=iT(e.object),r=iT(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{const t=wT(e);return!i.has(t)&&(i.add(t),!0)});r.events.filter&&(o=r.events.filter(o,r));for(const e of o){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push(u(u({},e),{},{eventObject:t})),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(wT(e.intersection))||a.push(e.intersection);return a}(a,l?t:void 0),d=c?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(o.initialClick=[a.offsetX,a.offsetY],o.initialHits=h.map(e=>e.eventObject)),c&&!h.length&&d<=2&&(r(a,o.interaction),s&&s(a)),l&&n(h),function(e,t,r,i){if(e.length){const a={stopped:!1};for(const s of e){let o=iT(s.object);if(o||s.object.traverseAncestors(e=>{const t=iT(e);if(t)return o=t,!1}),o){const{raycaster:l,pointer:c,camera:h,internal:d}=o,f=new sf(c.x,c.y,0).unproject(h),p=e=>{var t,n;return null!=(t=null==(n=d.capturedMap.get(e))?void 0:n.has(s.eventObject))&&t},m=e=>{const n={intersection:s,target:t.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(s.eventObject,n):d.capturedMap.set(e,new Map([[s.eventObject,n]])),t.target.setPointerCapture(e)},g=e=>{const t=d.capturedMap.get(e);t&&MT(d.capturedMap,s.eventObject,t,e)};let v={};for(let e in t){let n=t[e];"function"!==typeof n&&(v[e]=n)}let y=u(u(u({},s),v),{},{pointer:c,intersections:e,stopped:a.stopped,delta:r,unprojectedPoint:f,ray:l.ray,camera:h,stopPropagation(){const r="pointerId"in t&&d.capturedMap.get(t.pointerId);(!r||r.has(s.eventObject))&&(y.stopped=a.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find(e=>e.eventObject===s.eventObject))&&n([...e.slice(0,e.indexOf(s)),s])},target:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:g},nativeEvent:t});if(i(y),!0===a.stopped)break}}}}(h,a,d,function(e){const t=e.eventObject,n=t.__r3f;if(null==n||!n.eventCount)return;const s=n.handlers;if(l){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){const t=wT(e),n=o.hovered.get(t);n?n.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==s.onPointerOver||s.onPointerOver(e),null==s.onPointerEnter||s.onPointerEnter(e))}null==s.onPointerMove||s.onPointerMove(e)}else{const n=s[i];n?c&&!o.initialHits.includes(t)||(r(a,o.interaction.filter(e=>!o.initialHits.includes(e))),n(e)):c&&o.initialHits.includes(t)&&r(a,o.interaction.filter(e=>!o.initialHits.includes(e)))}})}}}}const TT=e=>!(null==e||!e.render),AT=r.createContext(null),CT=(e,t)=>{const n=(i=(n,i)=>{const a=new sf,s=new sf,o=new sf;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i().size;const{width:r,height:l,top:c,left:u}=n,h=r/l;t.isVector3?o.copy(t):o.set(...t);const d=e.getWorldPosition(a).distanceTo(o);if(JE(e))return{width:r/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:d,aspect:h};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*d,i=n*(r/l);return{width:i,height:n,top:c,left:u,factor:r/i,distance:d,aspect:h}}}let c;const h=e=>n(t=>({performance:u(u({},t.performance),{},{current:e})})),d=new rf,f={set:n,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(i(),t)},advance:(e,n)=>t(e,n,i()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new mx,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=i();c&&clearTimeout(c),e.performance.current!==e.performance.min&&h(e.performance.min),c=setTimeout(()=>h(i().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>n(t=>u(u({},t),{},{events:u(u({},t.events),e)})),setSize:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=i().camera,c={width:e,height:t,top:r,left:a};n(e=>({size:c,viewport:u(u({},e.viewport),l(o,s,c))}))},setDpr:e=>n(t=>{const n=rT(e);return{viewport:u(u({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:r.createRef(),active:!1,frames:0,priority:0,subscribe:(e,t,n)=>{const r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort((e,t)=>e.priority-t.priority),()=>{const n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}};return f},i?kE(i,a):kE);var i,a;const s=n.getState();let o=s.size,l=s.viewport.dpr,c=s.camera;return n.subscribe(()=>{const{camera:e,size:t,viewport:r,gl:i,set:a}=n.getState();if(t.width!==o.width||t.height!==o.height||r.dpr!==l){o=t,l=r.dpr,xT(e,t),r.dpr>0&&i.setPixelRatio(r.dpr);const n="undefined"!==typeof HTMLCanvasElement&&i.domElement instanceof HTMLCanvasElement;i.setSize(t.width,t.height,n)}e!==c&&(c=e,a(t=>({viewport:u(u({},t.viewport),t.viewport.getCurrentViewport(e))})))}),n.subscribe(t=>e(t)),n};function RT(){const e=r.useContext(AT);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function PT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return RT()(e,t)}function LT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=RT(),r=n.getState().internal.subscribe,i=eT(e);return $E(()=>r(i,t,n),[t,r,n]),null}const IT=new WeakMap;function kT(e,t){return function(n){let r;(e=>{var t;return"function"===typeof e&&(null==e||null==(t=e.prototype)?void 0:t.constructor)===e})(n)?(r=IT.get(n),r||(r=new n,IT.set(n,r))):r=n,e&&e(r);for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return Promise.all(a.map(e=>new Promise((n,i)=>r.load(e,e=>{ST(null==e?void 0:e.scene)&&Object.assign(e,sT(e.scene)),n(e)},t,t=>i(new Error("Could not load ".concat(e,": ").concat(null==t?void 0:t.message)))))))}}function NT(e,t,n,r){const i=Array.isArray(t)?t:[t],a=((e,t,n)=>UE(e,t,!1,n))(kT(n,r),[e,...i],{equal:aT.equ});return Array.isArray(t)?a:a[0]}function DT(e){const t=FE()(e);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:r.version}),t}NT.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return((e,t,n)=>{UE(e,t,!0,n)})(kT(n),[e,...r])},NT.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)NE.splice(0,NE.length);else{const t=NE.find(t=>DE(e,t.keys,t.equal));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const UT={},OT=/^three(?=[A-Z])/,FT=e=>"".concat(e[0].toUpperCase()).concat(e.slice(1));let zT=0;function BT(e,t){const n=FT(e),r=UT[n];if("primitive"!==e&&!r)throw new Error("R3F: ".concat(n," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if("primitive"===e&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(void 0!==t.args&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function HT(e){var t;e.isHidden&&(e.props.attach&&null!=(t=e.parent)&&t.object?dT(e.parent,e):ST(e.object)&&!1!==e.props.visible&&(e.object.visible=!0),e.isHidden=!1,bT(e))}function VT(e,t,n){const r=t.root.getState();if(e.parent||e.object===r.scene){if(!t.object){var i,a;const e=UT[FT(t.type)];t.object=null!=(i=t.props.object)?i:new e(...null!=(a=t.props.args)?a:[]),t.object.__r3f=t}if(_T(t.object,t.props),t.props.attach)dT(e,t);else if(ST(t.object)&&ST(e.object)){const r=e.object.children.indexOf(null==n?void 0:n.object);if(n&&-1!==r){const n=e.object.children.indexOf(t.object);if(-1!==n){e.object.children.splice(n,1);const i=n<r?r-1:r;e.object.children.splice(i,0,t.object)}else t.object.parent=e.object,e.object.children.splice(r,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object})}else e.object.add(t.object)}for(const e of t.children)VT(t,e);bT(t)}}function GT(e,t){t&&(t.parent=e,e.children.push(t),VT(e,t))}function jT(e,t,n){if(!t||!n)return;t.parent=e;const r=e.children.indexOf(n);-1!==r?e.children.splice(r,0,t):e.children.push(t),VT(e,t,n)}function WT(e){if("function"===typeof e.dispose){const t=()=>{try{e.dispose()}catch(t){}};"undefined"!==typeof IS_REACT_ACT_ENVIRONMENT?t():(0,zE.unstable_scheduleCallback)(zE.unstable_IdlePriority,t)}}function XT(e,t,n){if(!t)return;t.parent=null;const r=e.children.indexOf(t);-1!==r&&e.children.splice(r,1),t.props.attach?fT(e,t):ST(t.object)&&ST(e.object)&&(e.object.remove(t.object),function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)}),n.capturedMap.forEach((e,r)=>{MT(n.capturedMap,t,e,r)})}(KE(t),t.object));const i=null!==t.props.dispose&&!1!==n;for(let a=t.children.length-1;a>=0;a--){XT(t,t.children[a],i)}t.children.length=0,delete t.object.__r3f,i&&"primitive"!==t.type&&"Scene"!==t.object.type&&WT(t.object),void 0===n&&bT(t)}function qT(e,t){for(const n of[e,e.alternate])if(null!==n)if("function"===typeof n.ref){null==n.refCleanup||n.refCleanup();const e=n.ref(t);"function"===typeof e&&(n.refCleanup=e)}else n.ref&&(n.ref.current=t)}const YT=[];const ZT=()=>{},KT={};let JT=0;const QT=DT({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(e,t,n){var r;return BT(e=FT(e)in UT?e:e.replace(OT,""),t),"primitive"===e&&null!=(r=t.object)&&r.__r3f&&delete t.object.__r3f,cT(t.object,n,e,t)},removeChild:XT,appendChild:GT,appendInitialChild:GT,insertBefore:jT,appendChildToContainer(e,t){const n=e.getState().scene.__r3f;t&&n&&GT(n,t)},removeChildFromContainer(e,t){const n=e.getState().scene.__r3f;t&&n&&XT(n,t)},insertInContainerBefore(e,t,n){const r=e.getState().scene.__r3f;t&&n&&r&&jT(r,t,n)},getRootHostContext:()=>KT,getChildHostContext:()=>KT,commitUpdate(e,t,n,r,i){var a,s,o;BT(t,r);let l=!1;if(("primitive"===e.type&&n.object!==r.object||(null==(a=r.args)?void 0:a.length)!==(null==(s=n.args)?void 0:s.length)||null!=(o=r.args)&&o.some((e,t)=>{var r;return e!==(null==(r=n.args)?void 0:r[t])}))&&(l=!0),l)YT.push([e,u({},r),i]);else{const t=function(e,t){const n={};for(const r in t)if(!pT.includes(r)&&!aT.equ(t[r],e.props[r])){n[r]=t[r];for(const e in t)e.startsWith("".concat(r,"-"))&&(n[e]=t[e])}for(const r in e.props){if(pT.includes(r)||t.hasOwnProperty(r))continue;const{root:i,key:a}=uT(e.object,r);if(i.constructor&&0===i.constructor.length){const e=gT(i);aT.und(e)||(n[a]=e[a])}else n[a]=0}return n}(e,r);Object.keys(t).length&&(Object.assign(e.props,t),_T(e.object,t))}(null===i.sibling||0===(4&i.flags))&&function(){for(const[n]of YT){const e=n.parent;if(e){n.props.attach?fT(e,n):ST(n.object)&&ST(e.object)&&e.object.remove(n.object);for(const e of n.children)e.props.attach?fT(n,e):ST(e.object)&&ST(n.object)&&n.object.remove(e.object)}n.isHidden&&HT(n),n.object.__r3f&&delete n.object.__r3f,"primitive"!==n.type&&WT(n.object)}for(const[n,r,i]of YT){n.props=r;const a=n.parent;if(a){var e,t;const r=UT[FT(n.type)];n.object=null!=(e=n.props.object)?e:new r(...null!=(t=n.props.args)?t:[]),n.object.__r3f=n,qT(i,n.object),_T(n.object,n.props),n.props.attach?dT(a,n):ST(n.object)&&ST(a.object)&&a.object.add(n.object);for(const e of n.children)e.props.attach?dT(n,e):ST(e.object)&&ST(n.object)&&n.object.add(e.object);bT(n)}}YT.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>null==e?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>cT(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(e){var t;e.isHidden||(e.props.attach&&null!=(t=e.parent)&&t.object?fT(e.parent,e):ST(e.object)&&(e.object.visible=!1),e.isHidden=!0,bT(e))},unhideInstance:HT,createTextInstance:ZT,hideTextInstance:ZT,unhideTextInstance:ZT,scheduleTimeout:"function"===typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"===typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:r.createContext(null),setCurrentUpdatePriority(e){JT=e},getCurrentUpdatePriority:()=>JT,resolveUpdatePriority(){var e;if(0!==JT)return JT;switch("undefined"!==typeof window&&(null==(e=window.event)?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ac.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ac.ContinuousEventPriority;default:return ac.DefaultEventPriority}},resetFormInstance(){}}),$T=new Map,eA={objects:"shallow",strict:!1};function tA(e){const t=$T.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i="function"===typeof reportError?reportError:console.error,a=r||CT(yA,_A),s=n||QT.createContainer(a,ac.ConcurrentRoot,null,!1,null,"",i,i,i,null);let o,l;t||$T.set(e,{fiber:s,store:a});let c=!1,h=null;return{async configure(){let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h=new Promise(e=>t=e);let{gl:r,size:i,scene:s,events:d,onCreated:f,shadows:p=!1,linear:m=!1,flat:g=!1,legacy:v=!1,orthographic:y=!1,frameloop:_="always",dpr:b=[1,2],performance:x,raycaster:S,camera:w,onPointerMissed:M}=n,E=a.getState(),T=E.gl;if(!E.gl){const t={canvas:e,powerPreference:"high-performance",antialias:!0,alpha:!0},n="function"===typeof r?await r(t):r;T=TT(n)?n:new CE(u(u({},t),r)),E.set({gl:T})}let A=E.raycaster;A||E.set({raycaster:A=new Yx});const C=S||{},{params:R}=C,P=ic(C,ZE);if(aT.equ(P,A,eA)||_T(A,u({},P)),aT.equ(R,A.params,eA)||_T(A,{params:u(u({},A.params),R)}),!E.camera||E.camera===l&&!aT.equ(l,w,eA)){l=w;const e=null==w?void 0:w.isCamera,t=e?w:y?new jb(0,0,0,0,.1,1e3):new ig(75,0,.1,1e3);e||(t.position.z=5,w&&(_T(t,w),t.manual||("aspect"in w||"left"in w||"right"in w||"bottom"in w||"top"in w)&&(t.manual=!0,t.updateProjectionMatrix())),E.camera||null!=w&&w.rotation||t.lookAt(0,0,0)),E.set({camera:t}),A.camera=t}if(!E.scene){let e;null!=s&&s.isScene?(e=s,cT(e,a,"",{})):(e=new pg,cT(e,a,"",{}),s&&_T(e,s)),E.set({scene:e})}d&&!E.events.handlers&&E.set({events:d(a)});const L=function(e,t){if(!t&&"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:r,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}return!t&&"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:u({width:0,height:0,top:0,left:0},t)}(e,i);if(aT.equ(L,E.size,eA)||E.setSize(L.width,L.height,L.top,L.left),b&&E.viewport.dpr!==rT(b)&&E.setDpr(b),E.frameloop!==_&&E.setFrameloop(_),E.onPointerMissed||E.set({onPointerMissed:M}),x&&!aT.equ(x,E.performance,eA)&&E.set(e=>({performance:u(u({},e.performance),x)})),!E.xr){var I;const e=(e,t)=>{const n=a.getState();"never"!==n.frameloop&&_A(e,!0,n,t)},t=()=>{const t=a.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||yA(t)},n={connect(){const e=a.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=a.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"===typeof(null==(I=T.xr)?void 0:I.addEventListener)&&n.connect(),E.set({xr:n})}if(T.shadowMap){const e=T.shadowMap.enabled,t=T.shadowMap.type;if(T.shadowMap.enabled=!!p,aT.boo(p))T.shadowMap.type=mc;else if(aT.str(p)){var k;const e={basic:fc,percentage:pc,soft:mc,variance:gc};T.shadowMap.type=null!=(k=e[p])?k:mc}else aT.obj(p)&&Object.assign(T.shadowMap,p);e===T.shadowMap.enabled&&t===T.shadowMap.type||(T.shadowMap.needsUpdate=!0)}return xf.enabled=!v,c||(T.outputColorSpace=m?nd:td,T.toneMapping=g?ru:ou),E.legacy!==v&&E.set(()=>({legacy:v})),E.linear!==m&&E.set(()=>({linear:m})),E.flat!==g&&E.set(()=>({flat:g})),!r||aT.fun(r)||TT(r)||aT.equ(r,T,eA)||_T(T,r),o=f,c=!0,t(),this},render(t){return c||h||this.configure(),h.then(()=>{QT.updateContainer((0,BE.jsx)(nA,{store:a,children:t,onCreated:o,rootElement:e}),s,null,()=>{})}),a},unmount(){rA(e)}}}function nA(e){let{store:t,children:n,onCreated:r,rootElement:i}=e;return $E(()=>{const e=t.getState();e.set(e=>({internal:u(u({},e.internal),{},{active:!0})})),r&&r(e),t.getState().events.connected||null==e.events.connect||e.events.connect(i)},[]),(0,BE.jsx)(AT.Provider,{value:t,children:n})}function rA(e,t){const n=$T.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),QT.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var n,r,a,s;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(s=i.gl)&&s.xr&&i.xr.disconnect(),function(e){"Scene"!==e.type&&(null==e.dispose||e.dispose());for(const t in e){const n=e[t];"Scene"!==(null==n?void 0:n.type)&&(null==n||null==n.dispose||n.dispose())}}(i.scene),$T.delete(e),t&&t(e)}catch(d){}},500)})}}const iA=new Set,aA=new Set,sA=new Set;function oA(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function lA(e,t){switch(e){case"before":return oA(iA,t);case"after":return oA(aA,t);case"tail":return oA(sA,t)}}let cA,uA;function hA(e,t,n){let r=t.clock.getDelta();"never"===t.frameloop&&"number"===typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),cA=t.internal.subscribers;for(let i=0;i<cA.length;i++)uA=cA[i],uA.ref.current(uA.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}let dA,fA,pA,mA=!1,gA=!1;function vA(e){fA=requestAnimationFrame(vA),mA=!0,dA=0,lA("before",e),gA=!0;for(const n of $T.values()){var t;pA=n.store.getState(),!pA.internal.active||!("always"===pA.frameloop||pA.internal.frames>0)||null!=(t=pA.gl.xr)&&t.isPresenting||(dA+=hA(e,pA))}if(gA=!1,lA("after",e),0===dA)return lA("tail",e),mA=!1,cancelAnimationFrame(fA)}function yA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var n;if(!e)return $T.forEach(e=>yA(e.store.getState(),t));null!=(n=e.gl.xr)&&n.isPresenting||!e.internal.active||"never"===e.frameloop||(e.internal.frames=t>1?Math.min(60,e.internal.frames+t):gA?2:1,mA||(mA=!0,requestAnimationFrame(vA)))}function _A(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(t&&lA("before",e),n)hA(e,n,r);else for(const i of $T.values())hA(e,i.store.getState());t&&lA("after",e)}const bA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function xA(e){const{handlePointer:t}=ET(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(bA).reduce((e,n)=>u(u({},e),{},{[n]:t(n)}),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:n,events:r}=e.getState();if(null==r.disconnect||r.disconnect(),n(e=>({events:u(u({},e.events),{},{connected:t})})),r.handlers)for(const e in r.handlers){const n=r.handlers[e],[i,a]=bA[e];t.addEventListener(i,n,{passive:a})}},disconnect:()=>{const{set:t,events:n}=e.getState();if(n.connected){if(n.handlers)for(const e in n.handlers){const t=n.handlers[e],[r]=bA[e];n.connected.removeEventListener(r,t)}t(e=>({events:u(u({},e.events),{},{connected:void 0})}))}}}}function SA(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];window.clearTimeout(n),n=window.setTimeout(()=>e(...i),t)}}function wA(){let{debounce:e,scroll:t,polyfill:n,offsetSize:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const a=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=(0,r.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,r.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,u=e?"number"==typeof e?e:e.resize:null,h=(0,r.useRef)(!1);(0,r.useEffect)(()=>(h.current=!0,()=>{h.current=!1}));const[d,f,p]=(0,r.useMemo)(()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:r,bottom:a,right:s,x:c,y:u}=l.current.element.getBoundingClientRect(),d={left:e,top:t,width:n,height:r,bottom:a,right:s,x:c,y:u};l.current.element instanceof HTMLElement&&i&&(d.height=l.current.element.offsetHeight,d.width=l.current.element.offsetWidth),Object.freeze(d),h.current&&!TA(l.current.lastBounds,d)&&o(l.current.lastBounds=d)};return[e,u?SA(e,u):e,c?SA(e,c):e]},[o,i,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){l.current.element&&(l.current.resizeObserver=new a(p),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(e=>e.addEventListener("scroll",p,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(e,t){(0,r.useEffect)(()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[e,t])}(p,!!t),function(e){(0,r.useEffect)(()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e])}(f),(0,r.useEffect)(()=>{m(),g()},[t,p,f]),(0,r.useEffect)(()=>m,[]),[e=>{!e||e===l.current.element||(m(),l.current.element=e,l.current.scrollContainers=MA(e),g())},s,d]}function MA(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some(e=>"auto"===e||"scroll"===e)&&t.push(e),[...t,...MA(e.parentElement)]}const EA=["x","y","top","bottom","left","right","width","height"],TA=(e,t)=>EA.every(n=>e[n]===t[n]),AA=["ref","children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"];function CA(t){let{ref:n,children:i,fallback:a,resize:s,style:o,gl:l,events:c=xA,eventSource:h,eventPrefix:d,shadows:f,linear:p,flat:m,legacy:g,orthographic:v,frameloop:y,dpr:_,performance:b,raycaster:x,camera:S,scene:w,onPointerMissed:M,onCreated:E}=t,T=ic(t,AA);r.useMemo(()=>function(e){if("function"===typeof e){const t="".concat(zT++);return UT[t]=e,t}Object.assign(UT,e)}(e),[]);const A=function(){const e=WE(),t=YE();return r.useMemo(()=>n=>{let{children:i}=n;const a=HE(e,!0,e=>e.type===r.StrictMode)?r.StrictMode:r.Fragment;return(0,BE.jsx)(a,{children:(0,BE.jsx)(t,{children:i})})},[e,t])}(),[C,R]=wA(u({scroll:!0,debounce:{scroll:50,resize:0}},s)),P=r.useRef(null),L=r.useRef(null);r.useImperativeHandle(n,()=>P.current);const I=eT(M),[k,N]=r.useState(!1),[D,U]=r.useState(!1);if(k)throw k;if(D)throw D;const O=r.useRef(null);$E(()=>{const e=P.current;if(R.width>0&&R.height>0&&e){async function t(){await O.current.configure({gl:l,scene:w,events:c,shadows:f,linear:p,flat:m,legacy:g,orthographic:v,frameloop:y,dpr:_,performance:b,raycaster:x,camera:S,size:R,onPointerMissed:function(){return null==I.current?void 0:I.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(h?(t=h)&&t.hasOwnProperty("current")?h.current:h:L.current),d&&e.setEvents({compute:(e,t)=>{const n=e[d+"X"],r=e[d+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==E||E(e)}}),O.current.render((0,BE.jsx)(A,{children:(0,BE.jsx)(nT,{set:U,children:(0,BE.jsx)(r.Suspense,{fallback:(0,BE.jsx)(tT,{set:N}),children:null!=i?i:null})})}))}O.current||(O.current=tA(e)),t()}}),r.useEffect(()=>{const e=P.current;if(e)return()=>rA(e)},[]);const F=h?"none":"auto";return(0,BE.jsx)("div",u(u({ref:L,style:u({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F},o)},T),{},{children:(0,BE.jsx)("div",{ref:C,style:{width:"100%",height:"100%"},children:(0,BE.jsx)("canvas",{ref:P,style:{display:"block"},children:a})})}))}function RA(e){return(0,BE.jsx)(jE,{children:(0,BE.jsx)(CA,u({},e))})}function PA(){return PA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PA.apply(null,arguments)}const LA=["samples","depth"];function IA(e,t,n){const i=PT(e=>e.size),a=PT(e=>e.viewport),s="number"===typeof e?e:i.width*a.dpr,o="number"===typeof t?t:i.height*a.dpr,l=("number"===typeof e?n:e)||{},{samples:c=0,depth:h}=l,d=ic(l,LA),f=null!==h&&void 0!==h?h:l.depthBuffer,p=r.useMemo(()=>{const e=new Nf(s,o,u({minFilter:Au,magFilter:Au,type:zu},d));return f&&(e.depthTexture=new hy(s,o,Fu)),e.samples=c,e},[]);return r.useLayoutEffect(()=>{p.setSize(s,o),c&&(p.samples=c)},[c,p,s,o]),r.useEffect(()=>()=>p.dispose(),[]),p}const kA=["envMap","resolution","frames","children","makeDefault"],NA=r.forwardRef((e,t)=>{let{envMap:n,resolution:i=256,frames:a=1/0,children:s,makeDefault:o}=e,l=ic(e,kA);const c=PT(e=>{let{set:t}=e;return t}),u=PT(e=>{let{camera:t}=e;return t}),h=PT(e=>{let{size:t}=e;return t}),d=r.useRef(null);r.useImperativeHandle(t,()=>d.current,[]);const f=r.useRef(null),p=IA(i);r.useLayoutEffect(()=>{l.manual||d.current.updateProjectionMatrix()},[h,l]),r.useLayoutEffect(()=>{d.current.updateProjectionMatrix()}),r.useLayoutEffect(()=>{if(o){const e=u;return c(()=>({camera:d.current})),()=>c(()=>({camera:e}))}},[d,o,c]);let m=0,g=null;const v="function"===typeof s;return LT(e=>{v&&(a===1/0||m<a)&&(f.current.visible=!1,e.gl.setRenderTarget(p),g=e.scene.background,n&&(e.scene.background=n),e.gl.render(e.scene,d.current),e.scene.background=g,e.gl.setRenderTarget(null),f.current.visible=!0,m++)}),r.createElement(r.Fragment,null,r.createElement("orthographicCamera",PA({left:h.width/-2,right:h.width/2,top:h.height/2,bottom:h.height/-2,ref:d},l),!v&&s),r.createElement("group",{ref:f},v&&s(p.texture)))});var DA=Object.defineProperty,UA=(e,t,n)=>(((e,t,n)=>{t in e?DA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class OA{constructor(){UA(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}var FA=Object.defineProperty,zA=(e,t,n)=>(((e,t,n)=>{t in e?FA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const BA=new hp,HA=new uv,VA=Math.cos(Math.PI/180*70),GA=(e,t)=>(e%t+t)%t;class jA extends OA{constructor(e,t){super(),zA(this,"object"),zA(this,"domElement"),zA(this,"enabled",!0),zA(this,"target",new sf),zA(this,"minDistance",0),zA(this,"maxDistance",1/0),zA(this,"minZoom",0),zA(this,"maxZoom",1/0),zA(this,"minPolarAngle",0),zA(this,"maxPolarAngle",Math.PI),zA(this,"minAzimuthAngle",-1/0),zA(this,"maxAzimuthAngle",1/0),zA(this,"enableDamping",!1),zA(this,"dampingFactor",.05),zA(this,"enableZoom",!0),zA(this,"zoomSpeed",1),zA(this,"enableRotate",!0),zA(this,"rotateSpeed",1),zA(this,"enablePan",!0),zA(this,"panSpeed",1),zA(this,"screenSpacePanning",!0),zA(this,"keyPanSpeed",7),zA(this,"zoomToCursor",!1),zA(this,"autoRotate",!1),zA(this,"autoRotateSpeed",2),zA(this,"reverseOrbit",!1),zA(this,"reverseHorizontalOrbit",!1),zA(this,"reverseVerticalOrbit",!1),zA(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),zA(this,"mouseButtons",{LEFT:oc.ROTATE,MIDDLE:oc.DOLLY,RIGHT:oc.PAN}),zA(this,"touches",{ONE:lc.ROTATE,TWO:lc.DOLLY_PAN}),zA(this,"target0"),zA(this,"position0"),zA(this,"zoom0"),zA(this,"_domElementKeyEvents",null),zA(this,"getPolarAngle"),zA(this,"getAzimuthalAngle"),zA(this,"setPolarAngle"),zA(this,"setAzimuthalAngle"),zA(this,"getDistance"),zA(this,"getZoomScale"),zA(this,"listenToKeyEvents"),zA(this,"stopListenToKeyEvents"),zA(this,"saveState"),zA(this,"reset"),zA(this,"update"),zA(this,"connect"),zA(this,"dispose"),zA(this,"dollyIn"),zA(this,"dollyOut"),zA(this,"getScale"),zA(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=GA(e,2*Math.PI),r=c.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=GA(e,2*Math.PI),r=c.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",K),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",K),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),o=s.NONE},this.update=(()=>{const t=new sf,i=new sf(0,1,0),a=(new af).setFromUnitVectors(e.up,i),f=a.clone().invert(),p=new sf,m=new af,g=2*Math.PI;return function(){const v=n.object.position;a.setFromUnitVectors(e.up,i),f.copy(a).invert(),t.copy(v).sub(n.target),t.applyQuaternion(a),c.setFromVector3(t),n.autoRotate&&o===s.NONE&&C(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let y=n.minAzimuthAngle,_=n.maxAzimuthAngle;isFinite(y)&&isFinite(_)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),_<-Math.PI?_+=g:_>Math.PI&&(_-=g),c.theta=y<=_?Math.max(y,Math.min(_,c.theta)):c.theta>(y+_)/2?Math.max(y,c.theta):Math.min(_,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),n.zoomToCursor&&M||n.object.isOrthographicCamera?c.radius=O(c.radius):c.radius=O(c.radius*h),t.setFromSpherical(c),t.applyQuaternion(f),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),d.set(0,0,0));let b=!1;if(n.zoomToCursor&&M){let r=null;if(n.object instanceof ig&&n.object.isPerspectiveCamera){const e=t.length();r=O(e*h);const i=e-r;n.object.position.addScaledVector(S,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new sf(w.x,w.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),b=!0;const i=new sf(w.x,w.y,0);i.unproject(n.object),n.object.position.sub(i).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(BA.origin.copy(n.object.position),BA.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(BA.direction))<VA?e.lookAt(n.target):(HA.setFromNormalAndCoplanarPoint(n.object.up,n.target),BA.intersectPlane(HA,n.target))))}else n.object instanceof jb&&n.object.isOrthographicCamera&&(b=1!==h,b&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix()));return h=1,M=!1,!!(b||p.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),p.copy(n.object.position),m.copy(n.object.quaternion),b=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",J),n.domElement.addEventListener("pointerdown",X),n.domElement.addEventListener("pointercancel",Y),n.domElement.addEventListener("wheel",Z)},this.dispose=()=>{var e,t,r,i,a,s;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",J),null==(t=n.domElement)||t.removeEventListener("pointerdown",X),null==(r=n.domElement)||r.removeEventListener("pointercancel",Y),null==(i=n.domElement)||i.removeEventListener("wheel",Z),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointermove",q),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointerup",Y),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",K)};const n=this,r={type:"change"},i={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=s.NONE;const l=1e-6,c=new $x,u=new $x;let h=1;const d=new sf,f=new rf,p=new rf,m=new rf,g=new rf,v=new rf,y=new rf,_=new rf,b=new rf,x=new rf,S=new sf,w=new rf;let M=!1;const E=[],T={};function A(){return Math.pow(.95,n.zoomSpeed)}function C(e){n.reverseOrbit||n.reverseHorizontalOrbit?u.theta+=e:u.theta-=e}function R(e){n.reverseOrbit||n.reverseVerticalOrbit?u.phi+=e:u.phi-=e}const P=(()=>{const e=new sf;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}})(),L=(()=>{const e=new sf;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}})(),I=(()=>{const e=new sf;return function(t,r){const i=n.domElement;if(i&&n.object instanceof ig&&n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),P(2*t*s/i.clientHeight,n.object.matrix),L(2*r*s/i.clientHeight,n.object.matrix)}else i&&n.object instanceof jb&&n.object.isOrthographicCamera?(P(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),L(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function k(e){n.object instanceof ig&&n.object.isPerspectiveCamera||n.object instanceof jb&&n.object.isOrthographicCamera?h=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function N(e){k(h/e)}function D(e){k(h*e)}function U(e){if(!n.zoomToCursor||!n.domElement)return;M=!0;const t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,a=t.width,s=t.height;w.x=r/a*2-1,w.y=-i/s*2+1,S.set(w.x,w.y,1).unproject(n.object).sub(n.object.position).normalize()}function O(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function F(e){f.set(e.clientX,e.clientY)}function z(e){g.set(e.clientX,e.clientY)}function B(){if(1==E.length)f.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);f.set(e,t)}}function H(){if(1==E.length)g.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);g.set(e,t)}}function V(){const e=E[0].pageX-E[1].pageX,t=E[0].pageY-E[1].pageY,n=Math.sqrt(e*e+t*t);_.set(0,n)}function G(e){if(1==E.length)p.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);p.set(n,r)}m.subVectors(p,f).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(C(2*Math.PI*m.x/t.clientHeight),R(2*Math.PI*m.y/t.clientHeight)),f.copy(p)}function j(e){if(1==E.length)v.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);v.set(n,r)}y.subVectors(v,g).multiplyScalar(n.panSpeed),I(y.x,y.y),g.copy(v)}function W(e){const t=$(e),r=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(r*r+i*i);b.set(0,a),x.set(0,Math.pow(b.y/_.y,n.zoomSpeed)),N(x.y),_.copy(b)}function X(e){var t,r;!1!==n.enabled&&(0===E.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",q),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",Y)),function(e){E.push(e)}(e),"touch"===e.pointerType?function(e){switch(Q(e),E.length){case 1:switch(n.touches.ONE){case lc.ROTATE:if(!1===n.enableRotate)return;B(),o=s.TOUCH_ROTATE;break;case lc.PAN:if(!1===n.enablePan)return;H(),o=s.TOUCH_PAN;break;default:o=s.NONE}break;case 2:switch(n.touches.TWO){case lc.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&V(),n.enablePan&&H(),o=s.TOUCH_DOLLY_PAN;break;case lc.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&V(),n.enableRotate&&B(),o=s.TOUCH_DOLLY_ROTATE;break;default:o=s.NONE}break;default:o=s.NONE}o!==s.NONE&&n.dispatchEvent(i)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case oc.DOLLY:if(!1===n.enableZoom)return;!function(e){U(e),_.set(e.clientX,e.clientY)}(e),o=s.DOLLY;break;case oc.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;z(e),o=s.PAN}else{if(!1===n.enableRotate)return;F(e),o=s.ROTATE}break;case oc.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;F(e),o=s.ROTATE}else{if(!1===n.enablePan)return;z(e),o=s.PAN}break;default:o=s.NONE}o!==s.NONE&&n.dispatchEvent(i)}(e))}function q(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Q(e),o){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;G(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;j(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&W(e),n.enablePan&&j(e)}(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&W(e),n.enableRotate&&G(e)}(e),n.update();break;default:o=s.NONE}}(e):function(e){if(!1===n.enabled)return;switch(o){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){p.set(e.clientX,e.clientY),m.subVectors(p,f).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(C(2*Math.PI*m.x/t.clientHeight),R(2*Math.PI*m.y/t.clientHeight)),f.copy(p),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){b.set(e.clientX,e.clientY),x.subVectors(b,_),x.y>0?N(A()):x.y<0&&D(A()),_.copy(b),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,g).multiplyScalar(n.panSpeed),I(y.x,y.y),g.copy(v),n.update()}(e)}}(e))}function Y(e){var t,r,i;!function(e){delete T[e.pointerId];for(let t=0;t<E.length;t++)if(E[t].pointerId==e.pointerId)return void E.splice(t,1)}(e),0===E.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",q),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",Y)),n.dispatchEvent(a),o=s.NONE}function Z(e){!1===n.enabled||!1===n.enableZoom||o!==s.NONE&&o!==s.ROTATE||(e.preventDefault(),n.dispatchEvent(i),function(e){U(e),e.deltaY<0?D(A()):e.deltaY>0&&N(A()),n.update()}(e),n.dispatchEvent(a))}function K(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:I(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:I(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:I(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:I(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function J(e){!1!==n.enabled&&e.preventDefault()}function Q(e){let t=T[e.pointerId];void 0===t&&(t=new rf,T[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){const t=e.pointerId===E[0].pointerId?E[1]:E[0];return T[t.pointerId]}this.dollyIn=function(){D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:A()),n.update()},this.dollyOut=function(){N(arguments.length>0&&void 0!==arguments[0]?arguments[0]:A()),n.update()},this.getScale=()=>h,this.setScale=e=>{k(e),n.update()},this.getZoomScale=()=>A(),void 0!==t&&this.connect(t),this.update()}}const WA=["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"],XA=r.forwardRef((e,t)=>{let{makeDefault:n,camera:i,regress:a,domElement:s,enableDamping:o=!0,keyEvents:l=!1,onChange:c,onStart:u,onEnd:h}=e,d=ic(e,WA);const f=PT(e=>e.invalidate),p=PT(e=>e.camera),m=PT(e=>e.gl),g=PT(e=>e.events),v=PT(e=>e.setEvents),y=PT(e=>e.set),_=PT(e=>e.get),b=PT(e=>e.performance),x=i||p,S=s||g.connected||m.domElement,w=r.useMemo(()=>new jA(x),[x]);return LT(()=>{w.enabled&&w.update()},-1),r.useEffect(()=>(l&&w.connect(!0===l?S:l),w.connect(S),()=>{w.dispose()}),[l,S,a,w,f]),r.useEffect(()=>{const e=e=>{f(),a&&b.regress(),c&&c(e)},t=e=>{u&&u(e)},n=e=>{h&&h(e)};return w.addEventListener("change",e),w.addEventListener("start",t),w.addEventListener("end",n),()=>{w.removeEventListener("start",t),w.removeEventListener("end",n),w.removeEventListener("change",e)}},[c,u,h,w,f,v]),r.useEffect(()=>{if(n){const e=_().controls;return y({controls:w}),()=>y({controls:e})}},[n,w]),r.createElement("primitive",PA({ref:t,object:w,enableDamping:o},d))}),qA=e=>{let{color:t,hvc:n}=e;const[i,a,s]=n,o=i/40*2*Math.PI,l=Math.sin(o)*s*1.5,c=Math.cos(o)*s*1.5,u=5*a-20,h=(0,r.useMemo)(()=>new im(t),[t]);return(0,BE.jsxs)("mesh",{position:[c,u,l],children:[(0,BE.jsx)("sphereGeometry",{args:[.5,4,4]}),(0,BE.jsx)("meshBasicMaterial",{color:h})]})},YA=e=>{let{color:t,hvc:n,size:i=1.5,emissive:a=!1}=e;const[s,o,l]=n,c=s/40*2*Math.PI,u=Math.sin(c)*l*1.5,h=Math.cos(c)*l*1.5,d=5*o-20,f=(0,r.useMemo)(()=>new im(t),[t]),p=(0,r.useMemo)(()=>a?f:new im("black"),[a,f]);return(0,BE.jsxs)("mesh",{position:[h,d,u],children:[(0,BE.jsx)("boxGeometry",{args:[i,i,i]}),(0,BE.jsx)("meshStandardMaterial",{color:f,emissive:p})]})},ZA=e=>{let{munsellColors:t=[]}=e;return(0,BE.jsx)(BE.Fragment,{children:t.map((e,t)=>(0,BE.jsx)(qA,{color:e.hex,hvc:e.hvc},t))})},KA=function(e){let t=null,n=1/0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach(r=>{if(!r||!r.rgb)return;const i=Math.sqrt(Math.pow(e[0]-r.rgb[0],2)+Math.pow(e[1]-r.rgb[1],2)+Math.pow(e[2]-r.rgb[2],2));i<n&&(n=i,t=r)}),t},JA=e=>{let{munsellData:t}=e;const n=["255,0,0","0,255,0","0,0,255","255,255,0","0,255,255","255,0,255"],i=(0,r.useMemo)(()=>t?n.map(e=>{const n=e.split(",").map(e=>parseInt(e,10)),r=KA(n,t);return{color:"rgb(".concat(e,")"),hvc:r?r.hvc:null}}).filter(e=>e.hvc):[],[t]);return(0,BE.jsx)(BE.Fragment,{children:i.map((e,t)=>(0,BE.jsx)(YA,{color:e.color,hvc:e.hvc},t))})},QA=e=>{let{extractedColors:t,munsellData:n}=e;const i=(0,r.useMemo)(()=>{if(console.log("ExtractedColors received:",t),!t||!n)return[];const e=t.map(e=>{const t=e,r=KA(t,n);return{color:"rgb(".concat(t.join(","),")"),hvc:r?r.hvc:null}});console.log("Mapped colors:",e);const r=e.filter(e=>e.hvc);return console.log("Filtered colors:",r),r},[t,n]);return(0,BE.jsx)(BE.Fragment,{children:i.map((e,t)=>(0,BE.jsx)(YA,{color:e.color,hvc:e.hvc,size:2.5,emissive:!0},t))})},$A=e=>{let{extractedColors:t,munsellColors:n,isPaused:r}=e;return(0,BE.jsxs)(RA,{style:{width:"100%",height:"100%"},children:[(0,BE.jsx)(NA,{makeDefault:!0,position:[0,50,150],zoom:10}),(0,BE.jsx)("ambientLight",{}),(0,BE.jsx)("pointLight",{position:[10,10,10]}),(0,BE.jsx)(ZA,{munsellColors:n||[]}),n&&n.length>0&&(0,BE.jsx)(JA,{munsellData:n}),n&&n.length>0&&(0,BE.jsx)(QA,{extractedColors:t,munsellData:n}),(0,BE.jsx)(XA,{autoRotate:!r,autoRotateSpeed:5,enableDamping:!0,dampingFactor:.2,enablePan:!1,minDistance:50,maxDistance:200})]})},eC=e=>{let{colors:t,colorSize:n=30}=e;return console.log("ExtractedColorsViewUpdate"),t&&0!==t.length?(0,BE.jsx)("div",{className:"h-100 position-relative",style:{overflow:"hidden",marginTop:"-20px",zIndex:10},children:(0,BE.jsx)("div",{className:"h-100 d-flex justify-content-center align-items-start",style:{overflowY:"auto"},children:(0,BE.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:t.map((e,t)=>(0,BE.jsx)("div",{className:"position-relative m-1",style:{width:"".concat(n,"px"),height:"".concat(n,"px")},children:(0,BE.jsx)("div",{className:"rounded-circle w-100 h-100",style:{backgroundColor:"rgb(".concat(e,")"),border:"2px solid #fff",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},title:"RGB(".concat(e.join(", "),")")})},t))})})}):null};var tC=n(139),nC=n.n(tC);const rC=["xxl","xl","lg","md","sm","xs"],iC="xs",aC=r.createContext({prefixes:{},breakpoints:rC,minBreakpoint:iC}),{Consumer:sC,Provider:oC}=aC;function lC(e,t){const{prefixes:n}=(0,r.useContext)(aC);return e||n[t]||t}function cC(e,t){let n=0;return r.Children.map(e,e=>r.isValidElement(e)?t(e,n++):e)}const uC=["min","now","max","label","visuallyHidden","striped","animated","className","style","variant","bsPrefix"],hC=["isChild"],dC=["min","now","max","label","visuallyHidden","striped","animated","bsPrefix","variant","className","children"];function fC(e,t,n){const r=(e-t)/(n-t)*100;return Math.round(1e3*r)/1e3}function pC(e,t){let{min:n,now:r,max:i,label:a,visuallyHidden:s,striped:o,animated:l,className:c,style:h,variant:d,bsPrefix:f}=e,p=ic(e,uC);return(0,BE.jsx)("div",u(u({ref:t},p),{},{role:"progressbar",className:nC()(c,"".concat(f,"-bar"),{["bg-".concat(d)]:d,["".concat(f,"-bar-animated")]:l,["".concat(f,"-bar-striped")]:l||o}),style:u({width:"".concat(fC(r,n,i),"%")},h),"aria-valuenow":r,"aria-valuemin":n,"aria-valuemax":i,children:s?(0,BE.jsx)("span",{className:"visually-hidden",children:a}):a}))}const mC=r.forwardRef((e,t)=>{let{isChild:n=!1}=e;const i=u({min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1},ic(e,hC));if(i.bsPrefix=lC(i.bsPrefix,"progress"),n)return pC(i,t);const{min:a,now:s,max:o,label:l,visuallyHidden:c,striped:h,animated:d,bsPrefix:f,variant:p,className:m,children:g}=i,v=ic(i,dC);return(0,BE.jsx)("div",u(u({ref:t},v),{},{className:nC()(m,f),children:g?cC(g,e=>(0,r.cloneElement)(e,{isChild:!0})):pC({min:a,now:s,max:o,label:l,visuallyHidden:c,striped:h,animated:d,bsPrefix:f,variant:p},t)}))});mC.displayName="ProgressBar";const gC=mC;function vC(e,t){return Math.sqrt((e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2)}const yC=e=>{let{beautyScore:t}=e;if(!t)return(0,BE.jsxs)("div",{className:"mt-4 p-4 bg-secondary rounded text-center",children:[(0,BE.jsx)("h2",{className:"h4",children:"\u7f8e\u5ea6"}),(0,BE.jsx)("p",{className:"display-4",children:"\u2015"}),(0,BE.jsx)("p",{className:"text-muted",children:"2\u8272\u4ee5\u4e0a\u5fc5\u8981\u3067\u3059"})]});const{beauty:n,complexity:r,pairDetails:i}=t;return(0,BE.jsxs)("div",{className:"mt-4 p-4 bg-secondary rounded",children:[(0,BE.jsx)("h2",{className:"h4 text-center mb-2",children:"\u7f8e\u5ea6"}),(0,BE.jsx)("p",{className:"display-4 text-center",children:n.toFixed(3)}),(0,BE.jsxs)("p",{className:"text-muted text-center mb-4",children:["\u8907\u96d1\u3055: ",r.toFixed(2),"\uff08\u8272\u6570\uff0b\u5dee\u5206\u30ab\u30a6\u30f3\u30c8\uff09"]}),(0,BE.jsxs)("table",{className:"table table-sm table-striped text-center align-middle",children:[(0,BE.jsx)("thead",{children:(0,BE.jsxs)("tr",{children:[(0,BE.jsx)("th",{children:"#"}),(0,BE.jsx)("th",{children:"\u82721"}),(0,BE.jsx)("th",{children:"\u82722"}),(0,BE.jsx)("th",{children:"\u8272\u76f8\u5dee"}),(0,BE.jsx)("th",{children:"\u8a55\u4fa1"}),(0,BE.jsx)("th",{children:"\u660e\u5ea6\u5dee"}),(0,BE.jsx)("th",{children:"\u8a55\u4fa1"}),(0,BE.jsx)("th",{children:"\u5f69\u5ea6\u5dee"}),(0,BE.jsx)("th",{children:"\u8a55\u4fa1"}),(0,BE.jsx)("th",{children:"\u79e9\u5e8f"})]})}),(0,BE.jsx)("tbody",{children:i.map((e,t)=>(0,BE.jsxs)("tr",{children:[(0,BE.jsx)("td",{children:t+1}),(0,BE.jsx)("td",{children:(0,BE.jsx)("div",{style:{width:20,height:20,background:"rgb(".concat(e.color1.join(","),")"),margin:"0 auto",border:"1px solid #ccc"}})}),(0,BE.jsx)("td",{children:(0,BE.jsx)("div",{style:{width:20,height:20,background:"rgb(".concat(e.color2.join(","),")"),margin:"0 auto",border:"1px solid #ccc"}})}),(0,BE.jsx)("td",{children:e.Hdifferent.toFixed(1)}),(0,BE.jsx)("td",{children:e.Heval}),(0,BE.jsx)("td",{children:e.Vdifferent.toFixed(1)}),(0,BE.jsx)("td",{children:e.Veval}),(0,BE.jsx)("td",{children:e.Cdifferent.toFixed(1)}),(0,BE.jsx)("td",{children:e.Ceval}),(0,BE.jsx)("td",{children:e.order.toFixed(2)})]},t))})]})]})};function _C(e){let[t,n,r]=e;t/=255,n/=255,r/=255;const i=Math.max(t,n,r),a=i-Math.min(t,n,r);let s=0;a>0&&(s=i===t?(n-r)/a%6:i===n?(r-t)/a+2:(t-n)/a+4,s*=60,s<0&&(s+=360));return{H:s,V:10*i,C:10*a}}function bC(e){if(!e||e.length<2)return null;const t=e.map(e=>({rgb:e,HVC:_C(e)}));let n=0,r=0,i=0,a=0;const s=[];for(let l=0;l<t.length;l++)for(let e=l+1;e<t.length;e++){const{HVC:o}=t[l],{HVC:c}=t[e];let u=Math.abs(o.H-c.H);u>180&&(u=360-u);let h=0,d="";u<1?(d="\u540c\u4e00\u8abf\u548c",h=1.5):u<7?(d="\u7b2c1\u306e\u66d6\u6627",h=0):u<12?(d="\u985e\u4f3c\u8abf\u548c",h=1.1):u<28?(d="\u7b2c2\u306e\u66d6\u6627",h=.65):(d="\u5bfe\u6bd4\u8abf\u548c",h=1.7),(o.C<1||c.C<1)&&(d="\u7070\u8272",h=1);const f=Math.abs(o.V-c.V),p=Math.abs(o.C-c.C);let m=0,g=0,v="",y="";const _=(e,t,n,r)=>Math.sqrt(Math.pow(e/n,2)+Math.pow(t/r,2));_(f,p,.25,.5)<1?(v="\u540c\u4e00\u8abf\u548c",y="\u540c\u4e00\u8abf\u548c",m=-1.3,g=.8):_(f,p,.5,3)<1?(v="\u7b2c1\u306e\u66d6\u6627",y="\u7b2c1\u306e\u66d6\u6627",m=-1,g=0):_(f,p,1.5,5)<1?(v="\u985e\u4f3c\u8abf\u548c",y="\u985e\u4f3c\u8abf\u548c",m=.7,g=.1):_(f,p,2.5,7.5)<1?(v="\u7b2c2\u306e\u66d6\u6627",y="\u7b2c2\u306e\u66d6\u6627",m=-.2,g=0):(v="\u5bfe\u6bd4\u8abf\u548c",y="\u5bfe\u6bd4\u8abf\u548c",m=3.7,g=.4),f>9&&(v="\u7729\u8f1d",m=-2);const b=h+m+g;a+=b,u>2&&n++,f>2&&r++,p>2&&i++,s.push({i:l,j:e,color1:t[l].rgb,color2:t[e].rgb,Hdifferent:u,Heval:d,Hpoint:h,Vdifferent:f,Veval:v,Vpoint:m,Cdifferent:p,Ceval:y,Cpoint:g,order:b})}const o=t.length+n+r+i;return{beauty:a/o,complexity:o,pairDetails:s}}const xC=[{name:"\u767d",rgb:[255,255,255]},{name:"\u9ed2",rgb:[0,0,0]},{name:"\u8d64",rgb:[255,0,0]},{name:"\u9752",rgb:[0,0,255]},{name:"\u7dd1",rgb:[0,128,0]}],SC=e=>{let{clusteredColors:t,munsellColors:n}=e;const i=(0,r.useMemo)(()=>{const e=bC(t);return e?e.beauty:null},[t]),a=(0,r.useMemo)(()=>{if(!t||!i)return[];let e=xC;return n&&n.length>0&&(e=n.map((e,t)=>({name:e.hex||"munsell-".concat(t),rgb:e.rgb}))),e.map(e=>{const n=bC([...t,e.rgb]),r=n?n.beauty:0,a=r-i;return u(u({},e),{},{newBeauty:r,difference:a})}).sort((e,t)=>t.difference-e.difference)},[t,i,n]);return i?(0,BE.jsxs)("div",{className:"mt-4 p-4 rounded",style:{background:"linear-gradient(135deg, #2c3e50, #3498db)"},children:[(0,BE.jsx)("h2",{className:"h4 text-center mb-3 text-white",style:{textShadow:"2px 2px 4px rgba(0,0,0,0.5)"},children:"\u8272\u306e\u63d0\u6848"}),(0,BE.jsx)("div",{className:"container",children:(0,BE.jsx)("div",{className:"row g-3",children:a.map(e=>(0,BE.jsx)("div",{className:"col-2",children:(0,BE.jsx)("div",{className:"position-relative",style:{width:"100%",paddingBottom:"100%",background:"rgb(".concat(e.rgb.join(","),")"),borderRadius:"50%",border:"2px solid rgba(255,255,255,0.8)",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},title:"\u65b0\u3057\u3044\u7f8e\u5ea6: ".concat(e.newBeauty.toFixed(3)),children:(0,BE.jsxs)("div",{className:"position-absolute top-50 start-50 translate-middle text-center p-1",style:{color:e.rgb.reduce((e,t)=>e+t)>382?"#000":"#fff",fontWeight:"bold",textShadow:e.rgb.reduce((e,t)=>e+t)>382?"0 0 4px rgba(255,255,255,0.5)":"0 0 4px rgba(0,0,0,0.5)",borderRadius:"4px",minWidth:"70%"},children:[e.difference>0?"+":"",e.difference.toFixed(3)]})})},e.name))})})]}):null};function wC(){const e=(0,r.useRef)(null),t=(0,r.useRef)(null),[n,i]=(0,r.useState)(.6),[a,s]=(0,r.useState)(.1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)([]),[h,d]=(0,r.useState)([]),[f,p]=(0,r.useState)(5),[m,g]=(0,r.useState)(0),[v,y]=(0,r.useState)(0),[_,b]=(0,r.useState)(null),[x,S]=(0,r.useState)(90),[w,M]=(0,r.useState)(!1),[E,T]=(0,r.useState)(null);(0,r.useEffect)(()=>{fetch("".concat("/color-suggester-remake","/munsell/colorcodeToHVC.txt")).then(e=>{if(!e.ok)throw new Error("Failed to load Munsell data: ".concat(e.status));return e.text()}).then(e=>{const t=e.split("\n").map(e=>{const t=e.split("\t");if(t.length<4)return null;const n=t[0].trim(),r=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];let i=n;i.startsWith("#")||(i="#"+i);let a=parseInt(i.slice(1),16);return{hex:i,hvc:r,rgb:[a>>16&255,a>>8&255,255&a]}}).filter(Boolean);b(t)}).catch(e=>console.error("Error loading munsell in App:",e))},[]);return(0,r.useEffect)(()=>{if(c.length>0){const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(0===e.length)return[];const r=[];for(let a=0;a<t;a++)r.push(e[Math.floor(Math.random()*e.length)].slice());let i=new Array(e.length).fill(0);for(let a=0;a<n;a++){for(let s=0;s<e.length;s++){let n=1/0,a=0;for(let i=0;i<t;i++){const t=vC(e[s],r[i]);t<n&&(n=t,a=i)}i[s]=a}const n=Array(t).fill(null).map(()=>[0,0,0]),a=Array(t).fill(0);for(let t=0;t<e.length;t++){const r=i[t];n[r][0]+=e[t][0],n[r][1]+=e[t][1],n[r][2]+=e[t][2],a[r]++}for(let e=0;e<t;e++)a[e]>0&&(r[e][0]=Math.round(n[e][0]/a[e]),r[e][1]=Math.round(n[e][1]/a[e]),r[e][2]=Math.round(n[e][2]/a[e]))}return r.map(e=>"".concat(e[0],",").concat(e[1],",").concat(e[2]))}(c,f);d(e.map(e=>e.split(",").map(Number)))}},[c,f]),(0,r.useEffect)(()=>{if(h.length>1){const e=bC(h);T(e)}else T(null)},[h]),(0,BE.jsxs)("div",{className:"container-fluid vh-100 d-flex flex-column bg-dark text-light p-2",children:[(0,BE.jsxs)("div",{className:"row flex-grow-1 g-2",style:{minHeight:"0"},children:[(0,BE.jsxs)("div",{className:"col-4 d-flex flex-column",style:{height:"100vh"},children:[(0,BE.jsx)("div",{className:"rounded mb-2",style:{flex:3,position:"relative",background:"linear-gradient(135deg, #1a1a2e, #16213e)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:(0,BE.jsx)("div",{style:{position:"absolute",inset:0},children:(0,BE.jsx)($A,{extractedColors:h,munsellColors:_,isPaused:w})})}),(0,BE.jsx)("div",{style:{flex:2},children:(0,BE.jsx)("div",{className:"rounded",style:{overflowY:"auto",maxHeight:"calc(100% - 80px)"},children:(0,BE.jsx)(yC,{beautyScore:E})})})]}),(0,BE.jsxs)("div",{className:"col-4 d-flex flex-column",style:{height:"100vh"},children:[(0,BE.jsxs)("div",{className:"flex-grow-1 rounded overflow-hidden position-relative",style:{background:"linear-gradient(135deg, #1a1a2e, #16213e)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[(0,BE.jsx)("video",{ref:e,width:640,height:480,style:{display:"none"}}),(0,BE.jsx)("canvas",{ref:t,className:"position-absolute top-50 start-50 translate-middle",style:{width:"100%",height:"auto",transform:"translate(-50%, -50%) rotate(90deg)",maxHeight:"133.33%"}}),h&&h.length>0&&(0,BE.jsx)("div",{className:"position-absolute bottom-0 start-50 translate-middle-x text-white p-2",style:{background:"rgba(0, 0, 0, 0.5)",borderRadius:"10px 10px 0 0",textShadow:"2px 2px 4px rgba(0,0,0,0.7)",paddingTop:"0.5rem",paddingBottom:"0.5rem",marginBottom:"5rem"},children:(0,BE.jsx)(eC,{colors:h,colorSize:30})}),E&&(0,BE.jsxs)("div",{className:"position-absolute bottom-0 start-50 translate-middle-x text-white p-2",style:{background:"rgba(0, 0, 0, 0.5)",borderRadius:"10px",textShadow:"2px 2px 4px rgba(0,0,0,0.7)",fontSize:"2.5rem",fontWeight:"bold",lineHeight:1,marginBottom:"1rem"},children:["\u7f8e\u5ea6: ",E.beauty.toFixed(3)]})]}),(0,BE.jsxs)("div",{className:"mt-2 p-3 rounded",style:{background:"linear-gradient(135deg, #2c3e50, #34495e)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[(0,BE.jsxs)("h2",{className:"h5 text-white mb-3",style:{textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:["\u8a2d\u5b9a ",o&&(0,BE.jsx)("span",{className:"badge bg-info",children:"\u62bd\u51fa\u4e2d"})]}),(0,BE.jsxs)("div",{className:"row g-2",children:[(0,BE.jsxs)("div",{className:"col-4",children:[(0,BE.jsxs)("label",{className:"d-block text-white small mb-1",children:["\u900f\u660e\u5ea6: ",n.toFixed(2)]}),(0,BE.jsx)("input",{type:"range",className:"form-range",min:"0",max:"1",step:"0.01",value:n,onChange:e=>{i(parseFloat(e.target.value))}})]}),(0,BE.jsxs)("div",{className:"col-4",children:[(0,BE.jsxs)("label",{className:"d-block text-white small mb-1",children:["\u4fe1\u983c\u5ea6: ",a.toFixed(2)]}),(0,BE.jsx)("input",{type:"range",className:"form-range",min:"0",max:"1",step:"0.01",value:a,onChange:e=>{s(parseFloat(e.target.value))}})]}),(0,BE.jsxs)("div",{className:"col-4",children:[(0,BE.jsx)("label",{className:"d-block text-white small mb-1",children:"\u30ab\u30e1\u30e9\u56de\u8ee2"}),(0,BE.jsxs)("select",{className:"form-select form-select-sm",value:x,onChange:e=>S(Number(e.target.value)),style:{background:"rgba(255,255,255,0.1)",color:"white",border:"1px solid rgba(255,255,255,0.2)"},children:[(0,BE.jsx)("option",{value:"0",children:"\u56de\u8ee2\u306a\u3057"}),(0,BE.jsx)("option",{value:"90",children:"90\u5ea6"}),(0,BE.jsx)("option",{value:"180",children:"180\u5ea6"}),(0,BE.jsx)("option",{value:"270",children:"270\u5ea6"})]})]})]}),(0,BE.jsxs)("div",{className:"mt-2 d-flex gap-2 align-items-center",children:[(0,BE.jsxs)("div",{style:{flex:1},children:[(0,BE.jsxs)("label",{className:"d-block text-white small mb-1",children:["\u8272\u306e\u6570: ",f]}),(0,BE.jsx)("input",{type:"range",className:"form-range",min:"1",max:"10",step:"1",value:f,onChange:e=>p(parseInt(e.target.value))})]}),(0,BE.jsx)("button",{onClick:w?()=>{u([]),d([]),g(e=>e+1),M(!1),T(null)}:()=>{l(!0),u([]),d([])},className:"btn ".concat(w?"btn-success":"btn-primary"),style:{background:w?"linear-gradient(135deg, #2ecc71, #27ae60)":"linear-gradient(135deg, #3498db, #2980b9)",border:"none",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:"100px"},disabled:o,children:o?"\u62bd\u51fa\u4e2d...":w?"\u518d\u958b":"\u62bd\u51fa"})]}),o&&(0,BE.jsx)("div",{className:"mt-2",children:(0,BE.jsx)(gC,{now:100*v,label:"".concat(Math.round(100*v),"%"),variant:"info",style:{height:"4px"}})})]})]}),(0,BE.jsx)("div",{className:"col-4",style:{height:"100vh",overflowY:"auto"},children:(0,BE.jsx)(SC,{clusteredColors:h,munsellColors:_})})]}),(0,BE.jsx)(rc,{videoRef:e,canvasRef:t,maskAlpha:n,confidenceThreshold:a,isCapturing:o,setAllExtractedColors:u,onCaptureFinished:()=>{l(!1),M(!0)},onProgress:y,rotation:x,isPaused:w},m)]})}const MC=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:s}=t;n(e),r(e),i(e),a(e),s(e)})};a.createRoot(document.getElementById("root")).render((0,BE.jsx)(BE.Fragment,{children:(0,BE.jsx)(wC,{})})),MC()})()})();
//# sourceMappingURL=main.f92c385f.js.map